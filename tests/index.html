<!DOCTYPE html><html class="no-js" lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="description" property="og:description" content="Pryv API reference and resources for developers"><meta name="author" content="Pryv SA"><meta property="og:type" content="website"><meta name="image" property="og:image" content="/assets/images/logo-256.png"><meta name="viewport" content="width=device-width, initial-scale=1"><title>Pryv.io Tests results | Pryv API</title><link rel="icon" href="/assets/images/favicon-black.ico" type="image/x-icon"><link rel="apple-touch-icon" sizes="120x120" href="/assets/images/apple-touch-icon-120x120-black.png"><link rel="apple-touch-icon" sizes="152x152" href="/assets/images/apple-touch-icon-152x152-black.png"><link rel="apple-touch-icon" sizes="180x180" href="/assets/images/apple-touch-icon-180x180-black.png"><!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
  <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]--><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:400,300,500,700,400italic|Roboto+Condensed:400,300,700"><link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/docco.min.css"><link rel="stylesheet" type="text/css" href="/assets/fonts/ss-gizmo.min.css"><link rel="stylesheet" type="text/css" href="/assets/style.css"></head><body class="tests with-toc"><header id="page-header"><nav class="navbar navbar-default navbar-fixed-top" role="navigation"><div class="container-fluid"><div class="navbar-header"><a class="navbar-brand logo pryv-home" href="https://pryv.com" title="Pryv home"><img src="/assets/images/icon-home.svg" alt="Pryv home" height="50"></a><a class="navbar-brand logo" href="/" title="Developers home"><img src="/assets/images/logo-256-black.png" alt="Developers home"></a><button class="navbar-toggle" type="button" data-toggle="collapse" data-target="#main-nav"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button></div><div class="collapse navbar-collapse" id="main-nav"><ul class="nav navbar-nav"><li class="dropdown"><a class="dropdown-toggle" href="#" data-toggle="dropdown">Guides <b class="caret"></b></a><ul class="dropdown-menu"><li><a href="/getting-started/">Getting started</a></li><li><a href="/external-resources/">Apps &amp; Libs</a></li><li><a href="/concepts/">API concepts</a></li><li><a href="/guides/data-modelling/">Data modelling</a></li><li><a href="/guides/webhooks/">Webhooks</a></li><li><a href="/guides/custom-auth/">Custom auth</a></li><li><a href="/guides/consent/">Consent request</a></li><li><a href="/guides/app-guidelines/">App guidelines</a></li><li><a href="/guides/audit-logs/">Audit logs</a></li></ul></li><li class="dropdown"><a class="dropdown-toggle" href="#" data-toggle="dropdown">Reference <b class="caret"></b></a><ul class="dropdown-menu"><li><a href="/reference/">API reference</a></li><li><a href="/reference-admin/">Admin API reference</a></li><li><a href="/reference-system/">System API reference</a></li><li><a href="/event-types/">Event types</a></li><li><a href="/open-api/">Open API (Postman)</a></li><li><a href="/change-log/">API change log</a></li></ul></li><li class="dropdown"><a class="dropdown-toggle" href="#" data-toggle="dropdown">FAQ <b class="caret"></b></a><ul class="dropdown-menu"><li><a href="/faq-api/">API</a></li><li><a href="/faq-infra/">Infrastructure</a></li></ul></li><li><a href="https://support.pryv.com/hc/en-us/community/topics">Community</a></li><li><a href="https://github.com/pryv/open-pryv.io">Open Pryv.io</a></li><li><a href="/customer-resources/">Entreprise</a></li><li><a href="/roadmap/">Roadmap</a></li></ul><div class="navbar-right"><p class="navbar-text version"><a href="/change-log/" title="View change log">API version: <strong>1.7.10</strong></a></p></div></div></div></nav></header><div class="container container-narrow" id="main-wrapper"><div id="main"><h1 class="page-title" id="pryvio-tests-results"><!--pryvio-tests-results-->Pryv.io Tests results</h1><section id="introduction-introduction"><h1 id="introduction"><!--introduction-->Introduction</h1>
<div class="content"><div class="meta"></div><div class="intro"><p>Results of Pryv.io test suites</p>
</div></div></section><section id="services-services"><h1 id="services"><!--services-->Services</h1>
<div class="content"><div class="meta"></div></div><section id="services-service-core 1-7.12"><h2 id="service-core-1712"><!--service-core-1712-->service-core 1.7.12</h2>
<div class="content"><div class="meta"></div></div><h4 id="summary"><!--summary-->Summary</h4>
<table class="definitions"><tr><th><code>Number of tests</code></th><td>120</td></tr><tr><th><code>Passes &#x2705;</code></th><td>111</td></tr><tr><th><code>Pending &#x2753;</code></th><td>0</td></tr><tr><th><code>Failures &#x274C;</code></th><td>96</td></tr></table><div class="intro"><p>Date: Tue May 03 2022 02:47:54 GMT+0200 (heure d&#x2019;&#xE9;t&#xE9; d&#x2019;Europe centrale)</p>
</div><section id="services-api-server">&#xA0;<h3 id="api-server"><!--api-server-->api-server</h3>
<div class="content"><div class="meta"></div><h4 id="summary-1"><!--summary-1-->Summary</h4>
<table class="definitions"><tr><th><code>Number of tests</code></th><td>1</td></tr><tr><th><code>Passes &#x2705;</code></th><td>1</td></tr><tr><th><code>Pending &#x2753;</code></th><td>0</td></tr><tr><th><code>Failures &#x274C;</code></th><td>34</td></tr></table><h4 id="tests"><!--tests-->Tests</h4>
<table> <thead><tr><th> Id</th><th> Status</th><th>Test</th></tr></thead><tbody><tr><td colspan="3"><b>Events.get streams query Internal query helpers when transforming streams parameters </b></td></tr><tr><td><test id="D2B5"><code>D2B5</code></test></td><td>&#x2705;</td><td><span class="type">must convert strings array to expanded array inside [{any: []}]</span></td></tr></tbody></table></div></section><section id="services-audit">&#xA0;<h3 id="audit"><!--audit-->audit</h3>
<div class="content"><div class="meta"></div><h4 id="summary-2"><!--summary-2-->Summary</h4>
<table class="definitions"><tr><th><code>Number of tests</code></th><td>24</td></tr><tr><th><code>Passes &#x2705;</code></th><td>20</td></tr><tr><th><code>Pending &#x2753;</code></th><td>0</td></tr><tr><th><code>Failures &#x274C;</code></th><td>13</td></tr></table><h4 id="tests-1"><!--tests-1-->Tests</h4>
<table> <thead><tr><th> Id</th><th> Status</th><th>Test</th></tr></thead><tbody><tr><td colspan="3"><b>AuditFilter validation </b></td></tr><tr><td><test id="3QJJ"><code>3QJJ</code></test></td><td>&#x2705;</td><td><span class="type">must accept an existing method</span></td></tr><tr><td><test id="YIDZ"><code>YIDZ</code></test></td><td>&#x2705;</td><td><span class="type">must accept a valid method aggregator</span></td></tr><tr><td><test id="74RS"><code>74RS</code></test></td><td>&#x2705;</td><td><span class="type">must accept &#x201C;all&#x201D;</span></td></tr><tr><td><test id="P6WW"><code>P6WW</code></test></td><td>&#x2705;</td><td><span class="type">must throw an error when providing a malformed filter</span></td></tr><tr><td><test id="GFCE"><code>GFCE</code></test></td><td>&#x2705;</td><td><span class="type">must throw an error when providing an unexisting method</span></td></tr><tr><td><test id="GY6E"><code>GY6E</code></test></td><td>&#x2705;</td><td><span class="type">must throw an error when providing an invalid aggregate method</span></td></tr><tr><td colspan="3"><b>AuditFilter initialization </b></td></tr><tr><td><test id="H8RB"><code>H8RB</code></test></td><td>&#x2705;</td><td><span class="type">must expand aggregate methods</span></td></tr><tr><td colspan="3"><b>Audit Storage concurent Writes </b></td></tr><tr><td><test id="69AH"><code>69AH</code></test></td><td>&#x2705;</td><td><span class="type">should retry when SQLITE_BUSY</span></td></tr><tr><td><test id="9H7P"><code>9H7P</code></test></td><td>&#x2705;</td><td><span class="type">should fail when max retries is reached when SQLITE_BUSY</span></td></tr><tr><td colspan="3"><b>ToSqliteQuery() </b></td></tr><tr><td><test id="YS6Y"><code>YS6Y</code></test></td><td>&#x2705;</td><td><span class="type">must convert to SQLite including expansion</span></td></tr><tr><td><test id="R8I5"><code>R8I5</code></test></td><td>&#x2705;</td><td><span class="type">must convert to SQLite including with &#x201C;ALL&#x201D;</span></td></tr><tr><td><test id="SGO5"><code>SGO5</code></test></td><td>&#x2705;</td><td><span class="type">must convert to SQLite  streams query property &#x201C;all&#x201D; to &quot;and: [{any&#x2026;}, {any&#x2026;}]) with each containing expanded streamIds</span></td></tr><tr><td><test id="RPGX"><code>RPGX</code></test></td><td>&#x2705;</td><td><span class="type">must convert to SQLite  streams query property &#x201C;all&#x201D; to &quot;and: [{any&#x2026;}, {any&#x2026;}]) with each containing expanded streamIds</span></td></tr><tr><td><test id="EWLK"><code>EWLK</code></test></td><td>&#x2705;</td><td><span class="type">must convert to SQLite  streams query property &#x201C;all&#x201D; to &quot;and: [{any&#x2026;}, {any&#x2026;}]) with each containing expanded streamIds</span></td></tr><tr><td><test id="1FYY"><code>1FYY</code></test></td><td>&#x2705;</td><td><span class="type">must convert to SQLite including expansion with &#x201C;NOT&#x201D;</span></td></tr><tr><td><test id="4QSG"><code>4QSG</code></test></td><td>&#x2705;</td><td><span class="type">must convert to SQLite including expansion with &#x201C;AND&#x201D; and &#x201C;NOT&#x201D;</span></td></tr><tr><td><test id="3TTK"><code>3TTK</code></test></td><td>&#x2705;</td><td><span class="type">must convert to SQLite including expansion with &#x201C;ALL&#x201D; and &#x201C;NOT&#x201D;</span></td></tr><tr><td><test id="1ZJU"><code>1ZJU</code></test></td><td>&#x2705;</td><td><span class="type">must handle array of queries</span></td></tr><tr><td colspan="3"><b>Audit Storage receive message and write it into its own database </b></td></tr><tr><td><test id="KA8B"><code>KA8B</code></test></td><td>&#x2705;</td><td><span class="type">should have written the action in the user&#x2019;s database</span></td></tr><tr><td><test id="9VM3"><code>9VM3</code></test></td><td>&#x2705;</td><td><span class="type">storage.getActions returns a list of available actions</span></td></tr><tr><td colspan="3"><b>Syslog receive message and write them to syslog </b></td></tr><tr><td><test id="F8SH"><code>F8SH</code></test></td><td>&#x200E;&#x274C;</td><td><span class="type">default message</span></td></tr><tr><td><test id="9S6A"><code>9S6A</code></test></td><td>&#x200E;&#x274C;</td><td><span class="type">templated message</span></td></tr><tr><td><test id="0PA7"><code>0PA7</code></test></td><td>&#x200E;&#x274C;</td><td><span class="type">plugin filtered message</span></td></tr><tr><td><test id="1D5S"><code>1D5S</code></test></td><td>&#x200E;&#x274C;</td><td><span class="type">plugin filtered message (SKIP)</span></td></tr></tbody></table></div></section><section id="services-business">&#xA0;<h3 id="business"><!--business-->business</h3>
<div class="content"><div class="meta"></div><h4 id="summary-3"><!--summary-3-->Summary</h4>
<table class="definitions"><tr><th><code>Number of tests</code></th><td>51</td></tr><tr><th><code>Passes &#x2705;</code></th><td>50</td></tr><tr><th><code>Pending &#x2753;</code></th><td>0</td></tr><tr><th><code>Failures &#x274C;</code></th><td>11</td></tr></table><h4 id="tests-2"><!--tests-2-->Tests</h4>
<table> <thead><tr><th> Id</th><th> Status</th><th>Test</th></tr></thead><tbody><tr><td colspan="3"><b>Manage InfluxDB data (business.series.*) </b></td></tr><tr><td><test id="8GFH"><code>8GFH</code></test></td><td>&#x200E;&#x274C;</td><td><span class="type">should allow writing to a series</span></td></tr><tr><td colspan="3"><b>Webhook send() when sending to an existing endpoint when the endpoint answers with a long delay </b></td></tr><tr><td><test id="SRDL"><code>SRDL</code></test></td><td>&#x2705;</td><td><span class="type">should send the second message after the first</span></td></tr><tr><td colspan="3"><b>MethodContext #parseAuth </b></td></tr><tr><td><test id="ZRW8"><code>ZRW8</code></test></td><td>&#x2705;</td><td><span class="type">should parse token out</span></td></tr><tr><td><test id="AUIY"><code>AUIY</code></test></td><td>&#x2705;</td><td><span class="type">should also parse the callerId when available</span></td></tr><tr><td colspan="3"><b>MethodContext #retrieveAccessFromId </b></td></tr><tr><td><test id="OJW2"><code>OJW2</code></test></td><td>&#x2705;</td><td><span class="type">checks expiry of the access</span></td></tr><tr><td colspan="3"><b>BatchRequest .parse </b></td></tr><tr><td><test id="QJ6L"><code>QJ6L</code></test></td><td>&#x2705;</td><td><span class="type">should parse the happy case</span></td></tr><tr><td><test id="VV2O"><code>VV2O</code></test></td><td>&#x2705;</td><td><span class="type">accepts an empty batch</span></td></tr><tr><td><test id="0NWO"><code>0NWO</code></test></td><td>&#x2705;</td><td><span class="type">throws if format is missing or wrong</span></td></tr><tr><td><test id="881Y"><code>881Y</code></test></td><td>&#x2705;</td><td><span class="type">throws if another type is passed in</span></td></tr><tr><td><test id="2PZ0"><code>2PZ0</code></test></td><td>&#x2705;</td><td><span class="type">throws if envelope doesn&#x2019;t have a data attribute</span></td></tr><tr><td colspan="3"><b>BatchRequestElement .parse(obj) </b></td></tr><tr><td><test id="AGQK"><code>AGQK</code></test></td><td>&#x2705;</td><td><span class="type">should parse a good looking object</span></td></tr><tr><td><test id="LWME"><code>LWME</code></test></td><td>&#x2705;</td><td><span class="type">fails if input is not an Object</span></td></tr><tr><td><test id="BU7Q"><code>BU7Q</code></test></td><td>&#x2705;</td><td><span class="type">fails if eventId is missing or the wrong type</span></td></tr><tr><td colspan="3"><b>DataMatrix .parse(obj) </b></td></tr><tr><td><test id="576J"><code>576J</code></test></td><td>&#x2705;</td><td><span class="type">should accept the happy path</span></td></tr><tr><td><test id="IQTE"><code>IQTE</code></test></td><td>&#x2705;</td><td><span class="type">refuses if not an object</span></td></tr><tr><td><test id="WQGB"><code>WQGB</code></test></td><td>&#x2705;</td><td><span class="type">refuses if format is not flatJSON</span></td></tr><tr><td><test id="34RS"><code>34RS</code></test></td><td>&#x2705;</td><td><span class="type">refuses if fields are not strings</span></td></tr><tr><td><test id="M5BI"><code>M5BI</code></test></td><td>&#x2705;</td><td><span class="type">refuses if points is not an array</span></td></tr><tr><td><test id="V0SH"><code>V0SH</code></test></td><td>&#x2705;</td><td><span class="type">refuses if field names are not correct</span></td></tr><tr><td><test id="SBU1"><code>SBU1</code></test></td><td>&#x2705;</td><td><span class="type">refuses if data cannot be coerced</span></td></tr><tr><td colspan="3"><b>DataMatrix #eachRow </b></td></tr><tr><td><test id="QUQ3"><code>QUQ3</code></test></td><td>&#x2705;</td><td><span class="type">should iterate over all matrix rows</span></td></tr><tr><td colspan="3"><b>DataMatrix #transform </b></td></tr><tr><td><test id="L03R"><code>L03R</code></test></td><td>&#x2705;</td><td><span class="type">should call fn for each cell</span></td></tr><tr><td><test id="7BRV"><code>7BRV</code></test></td><td>&#x2705;</td><td><span class="type">should store the return value in the matrix</span></td></tr><tr><td colspan="3"><b>DataMatrix #minmax() </b></td></tr><tr><td><test id="QGY6"><code>QGY6</code></test></td><td>&#x2705;</td><td><span class="type">returns the minimum and maximum deltaTime used</span></td></tr><tr><td><test id="ROK8"><code>ROK8</code></test></td><td>&#x2705;</td><td><span class="type">throws an error if the matrix is empty</span></td></tr><tr><td><test id="79DA"><code>79DA</code></test></td><td>&#x2705;</td><td><span class="type">throws an error if the deltaTime is missing</span></td></tr><tr><td colspan="3"><b>Business.series.Row toStruct </b></td></tr><tr><td><test id="NJ4G"><code>NJ4G</code></test></td><td>&#x2705;</td><td><span class="type">should return a js object for the row</span></td></tr><tr><td colspan="3"><b>Business.series.Repository with stubbed out connection </b></td></tr><tr><td><test id="0UEA"><code>0UEA</code></test></td><td>&#x2705;</td><td><span class="type">should produce series objects for events</span></td></tr><tr><td colspan="3"><b>Business.types.TypeRepository type list update </b></td></tr><tr><td><test id="WMDW"><code>WMDW</code></test></td><td>&#x2705;</td><td><span class="type">should work (must be called manually)</span></td></tr><tr><td><test id="6VL6"><code>6VL6</code></test></td><td>&#x2705;</td><td><span class="type">should fail gracefully</span></td></tr><tr><td colspan="3"><b>Business.types.TypeRepository basic types like mass/kg </b></td></tr><tr><td><test id="EEWV"><code>EEWV</code></test></td><td>&#x2705;</td><td><span class="type">should be known</span></td></tr><tr><td><test id="J0CJ"><code>J0CJ</code></test></td><td>&#x2705;</td><td><span class="type">should return a type instance allowing conversion</span></td></tr><tr><td><test id="8WI1"><code>8WI1</code></test></td><td>&#x2705;</td><td><span class="type">should throw when conversion fails</span></td></tr><tr><td><test id="WKCS"><code>WKCS</code></test></td><td>&#x2705;</td><td><span class="type">should coerce to number during validation</span></td></tr><tr><td colspan="3"><b>Business.types.TypeRepository boolean type boolean/bool </b></td></tr><tr><td><test id="E2Y1"><code>E2Y1</code></test></td><td>&#x2705;</td><td><span class="type">should be known</span></td></tr><tr><td><test id="8FHU"><code>8FHU</code></test></td><td>&#x2705;</td><td><span class="type">should return a type instance allowing conversion</span></td></tr><tr><td><test id="8U3U"><code>8U3U</code></test></td><td>&#x2705;</td><td><span class="type">should coerce to boolean during validation</span></td></tr><tr><td colspan="3"><b>Business.types.TypeRepository complex types like position/wgs84 </b></td></tr><tr><td><test id="05LA"><code>05LA</code></test></td><td>&#x2705;</td><td><span class="type">should be known</span></td></tr><tr><td><test id="0QZ3"><code>0QZ3</code></test></td><td>&#x2705;</td><td><span class="type">should return a complex type instance</span></td></tr><tr><td colspan="3"><b>Business.types.TypeRepository complex types on several levels like message/facebook </b></td></tr><tr><td><test id="D0GT"><code>D0GT</code></test></td><td>&#x2705;</td><td><span class="type">should return the correct value type for all fields</span></td></tr><tr><td><test id="3BC9"><code>3BC9</code></test></td><td>&#x2705;</td><td><span class="type">should return the correct value type for optional fields</span></td></tr><tr><td><test id="IVPF"><code>IVPF</code></test></td><td>&#x2705;</td><td><span class="type">should resolve nested fields</span></td></tr><tr><td><test id="5PMM"><code>5PMM</code></test></td><td>&#x2705;</td><td><span class="type">does NOT handle requiredFields fully yet: only surface requirements are returned</span></td></tr><tr><td colspan="3"><b>Business.types.TypeRepository placeholder types like picture/attached </b></td></tr><tr><td><test id="78HI"><code>78HI</code></test></td><td>&#x2705;</td><td><span class="type">should be known</span></td></tr><tr><td><test id="85BQ"><code>85BQ</code></test></td><td>&#x2705;</td><td><span class="type">should return a type instance allowing conversion</span></td></tr><tr><td colspan="3"><b>Business.types.TypeRepository series types like series:mass/kg </b></td></tr><tr><td><test id="SQNQ"><code>SQNQ</code></test></td><td>&#x2705;</td><td><span class="type">should be known</span></td></tr><tr><td><test id="IR3B"><code>IR3B</code></test></td><td>&#x2705;</td><td><span class="type">should inform about fields correctly</span></td></tr><tr><td colspan="3"><b>Business.types.TypeRepository validate() </b></td></tr><tr><td><test id="VK9J"><code>VK9J</code></test></td><td>&#x2705;</td><td><span class="type">should accept an array as a known type&#x2019;s event content</span></td></tr><tr><td colspan="3"><b>Business.types.TypeValidator </b></td></tr><tr><td><test id="AE3Q"><code>AE3Q</code></test></td><td>&#x2705;</td><td><span class="type">should be produced via a type repository</span></td></tr><tr><td><test id="JT1F"><code>JT1F</code></test></td><td>&#x2705;</td><td><span class="type">should validate simple types</span></td></tr><tr><td><test id="QIVH"><code>QIVH</code></test></td><td>&#x2705;</td><td><span class="type">should validate complex types</span></td></tr></tbody></table></div></section><section id="services-cache">&#xA0;<h3 id="cache"><!--cache-->cache</h3>
<div class="content"><div class="meta"></div><h4 id="summary-4"><!--summary-4-->Summary</h4>
<table class="definitions"><tr><th><code>Number of tests</code></th><td>0</td></tr><tr><th><code>Passes &#x2705;</code></th><td>0</td></tr><tr><th><code>Pending &#x2753;</code></th><td>0</td></tr><tr><th><code>Failures &#x274C;</code></th><td>4</td></tr></table><h4 id="tests-3"><!--tests-3-->Tests</h4>
<table> <thead><tr><th> Id</th><th> Status</th><th>Test</th></tr></thead><tbody></tbody></table></div></section><section id="services-hfs-server">&#xA0;<h3 id="hfs-server"><!--hfs-server-->hfs-server</h3>
<div class="content"><div class="meta"></div><h4 id="summary-5"><!--summary-5-->Summary</h4>
<table class="definitions"><tr><th><code>Number of tests</code></th><td>3</td></tr><tr><th><code>Passes &#x2705;</code></th><td>2</td></tr><tr><th><code>Pending &#x2753;</code></th><td>0</td></tr><tr><th><code>Failures &#x274C;</code></th><td>11</td></tr></table><h4 id="tests-4"><!--tests-4-->Tests</h4>
<table> <thead><tr><th> Id</th><th> Status</th><th>Test</th></tr></thead><tbody><tr><td colspan="3"><b>Metadata Cache </b></td></tr><tr><td><test id="O8AE"><code>O8AE</code></test></td><td>&#x200E;&#x274C;</td><td><span class="type">returns loaded metadata for N minutes</span></td></tr><tr><td colspan="3"><b>Controller storeSeriesData </b></td></tr><tr><td><test id="3BYC"><code>3BYC</code></test></td><td>&#x2705;</td><td><span class="type">should reject queries if the authorization header is missing</span></td></tr><tr><td><test id="U0WB"><code>U0WB</code></test></td><td>&#x2705;</td><td><span class="type">should reject queries if the eventId is missing</span></td></tr></tbody></table></div></section><section id="services-mall">&#xA0;<h3 id="mall"><!--mall-->mall</h3>
<div class="content"><div class="meta"></div><h4 id="summary-6"><!--summary-6-->Summary</h4>
<table class="definitions"><tr><th><code>Number of tests</code></th><td>0</td></tr><tr><th><code>Passes &#x2705;</code></th><td>0</td></tr><tr><th><code>Pending &#x2753;</code></th><td>0</td></tr><tr><th><code>Failures &#x274C;</code></th><td>3</td></tr></table><h4 id="tests-5"><!--tests-5-->Tests</h4>
<table> <thead><tr><th> Id</th><th> Status</th><th>Test</th></tr></thead><tbody></tbody></table></div></section><section id="services-messages">&#xA0;<h3 id="messages"><!--messages-->messages</h3>
<div class="content"><div class="meta"></div><h4 id="summary-7"><!--summary-7-->Summary</h4>
<table class="definitions"><tr><th><code>Number of tests</code></th><td>2</td></tr><tr><th><code>Passes &#x2705;</code></th><td>0</td></tr><tr><th><code>Pending &#x2753;</code></th><td>0</td></tr><tr><th><code>Failures &#x274C;</code></th><td>5</td></tr></table><h4 id="tests-6"><!--tests-6-->Tests</h4>
<table> <thead><tr><th> Id</th><th> Status</th><th>Test</th></tr></thead><tbody><tr><td colspan="3"><b>NatsSubscriber </b></td></tr><tr><td><test id="DMMP"><code>DMMP</code></test></td><td>&#x200E;&#x274C;</td><td><span class="type">should construct</span></td></tr><tr><td colspan="3"><b>Pubsub removers </b></td></tr><tr><td><test id="LVNK"><code>LVNK</code></test></td><td>&#x200E;&#x274C;</td><td><span class="type">remover works</span></td></tr></tbody></table></div></section><section id="services-metadata">&#xA0;<h3 id="metadata"><!--metadata-->metadata</h3>
<div class="content"><div class="meta"></div><h4 id="summary-8"><!--summary-8-->Summary</h4>
<table class="definitions"><tr><th><code>Number of tests</code></th><td>17</td></tr><tr><th><code>Passes &#x2705;</code></th><td>17</td></tr><tr><th><code>Pending &#x2753;</code></th><td>0</td></tr><tr><th><code>Failures &#x274C;</code></th><td>2</td></tr></table><h4 id="tests-7"><!--tests-7-->Tests</h4>
<table> <thead><tr><th> Id</th><th> Status</th><th>Test</th></tr></thead><tbody><tr><td colspan="3"><b>Metadata Updater </b></td></tr><tr><td><test id="POMC"><code>POMC</code></test></td><td>&#x2705;</td><td><span class="type">allows scheduling an update</span></td></tr><tr><td colspan="3"><b>Metadata Updater/Controller #runEach(ms) </b></td></tr><tr><td><test id="9TJ0"><code>9TJ0</code></test></td><td>&#x2705;</td><td><span class="type">starts a timer and runs #act every n ms</span></td></tr><tr><td colspan="3"><b>Metadata Updater/Controller #flushOp(update) </b></td></tr><tr><td><test id="2W9C"><code>2W9C</code></test></td><td>&#x2705;</td><td><span class="type">constructs an Flush operation for the update and returns it</span></td></tr><tr><td colspan="3"><b>Metadata Updater/Controller #act </b></td></tr><tr><td><test id="CIPH"><code>CIPH</code></test></td><td>&#x2705;</td><td><span class="type">pulls elapsed updates and flushes them to MongoDB</span></td></tr><tr><td colspan="3"><b>ErrorLogger </b></td></tr><tr><td><test id="9UOR"><code>9UOR</code></test></td><td>&#x2705;</td><td><span class="type">forwards calls</span></td></tr><tr><td><test id="5AVE"><code>5AVE</code></test></td><td>&#x2705;</td><td><span class="type">catches and logs all exceptions, rethrowing afterwards</span></td></tr><tr><td><test id="9J9U"><code>9J9U</code></test></td><td>&#x2705;</td><td><span class="type">also works for async methods, waiting for the eventual result</span></td></tr><tr><td colspan="3"><b>PendingUpdatesMap #merge and #get </b></td></tr><tr><td><test id="RE2D"><code>RE2D</code></test></td><td>&#x2705;</td><td><span class="type">stores updates</span></td></tr><tr><td><test id="JJ2Y"><code>JJ2Y</code></test></td><td>&#x2705;</td><td><span class="type">merges updates with preexisting updates via #merge</span></td></tr><tr><td colspan="3"><b>PendingUpdatesMap #elapsed </b></td></tr><tr><td><test id="O55W"><code>O55W</code></test></td><td>&#x2705;</td><td><span class="type">returns all updates that should be flushed</span></td></tr><tr><td><test id="HWPP"><code>HWPP</code></test></td><td>&#x2705;</td><td><span class="type">uses #flushAt to determine deadlines</span></td></tr><tr><td colspan="3"><b>PendingUpdate #merge </b></td></tr><tr><td><test id="412V"><code>412V</code></test></td><td>&#x2705;</td><td><span class="type">constructively merges two updates</span></td></tr><tr><td><test id="HS79"><code>HS79</code></test></td><td>&#x2705;</td><td><span class="type">fails when key is not equal</span></td></tr><tr><td colspan="3"><b>PendingUpdate #flushAt() </b></td></tr><tr><td><test id="79JJ"><code>79JJ</code></test></td><td>&#x2705;</td><td><span class="type">returns <code>cooldown</code> when deadline is far away</span></td></tr><tr><td><test id="OQLP"><code>OQLP</code></test></td><td>&#x2705;</td><td><span class="type">returns <code>deadline</code> when deadline is &lt; <code>cooldown</code></span></td></tr><tr><td colspan="3"><b>Heap #pop </b></td></tr><tr><td><test id="CW89"><code>CW89</code></test></td><td>&#x2705;</td><td><span class="type">pops an item</span></td></tr><tr><td><test id="S15J"><code>S15J</code></test></td><td>&#x2705;</td><td><span class="type">returns null if the heap is empty</span></td></tr></tbody></table></div></section><section id="services-middleware">&#xA0;<h3 id="middleware"><!--middleware-->middleware</h3>
<div class="content"><div class="meta"></div><h4 id="summary-9"><!--summary-9-->Summary</h4>
<table class="definitions"><tr><th><code>Number of tests</code></th><td>8</td></tr><tr><th><code>Passes &#x2705;</code></th><td>8</td></tr><tr><th><code>Pending &#x2753;</code></th><td>0</td></tr><tr><th><code>Failures &#x274C;</code></th><td>0</td></tr></table><h4 id="tests-8"><!--tests-8-->Tests</h4>
<table> <thead><tr><th> Id</th><th> Status</th><th>Test</th></tr></thead><tbody><tr><td colspan="3"><b>LoadAccess middleware when an access is actually loaded in request context </b></td></tr><tr><td><test id="OD3D"><code>OD3D</code></test></td><td>&#x2705;</td><td><span class="type">should add the access id as Pryv-access-id header if token is valid</span></td></tr><tr><td><test id="UDW7"><code>UDW7</code></test></td><td>&#x2705;</td><td><span class="type">should still set the Pryv-access-id header in case of error (e.g. expired token)</span></td></tr><tr><td colspan="3"><b>LoadAccess middleware when the access can not be loaded (e.g. invalid token) </b></td></tr><tr><td><test id="9E2D"><code>9E2D</code></test></td><td>&#x2705;</td><td><span class="type">should not set the Pryv-access-id header</span></td></tr><tr><td colspan="3"><b>APIVersion#version when a &quot;.api-version&quot; file exists in the project and is != that 1.2.3 </b></td></tr><tr><td><test id="5ICP"><code>5ICP</code></test></td><td>&#x2705;</td><td><span class="type">reads .api-version and returns that constant</span></td></tr><tr><td colspan="3"><b>APIVersion#version when a &quot;.api-version&quot; file exists in the project and is 1.2.3 </b></td></tr><tr><td><test id="HV40"><code>HV40</code></test></td><td>&#x2705;</td><td><span class="type">should return git tag version</span></td></tr><tr><td colspan="3"><b>SubdomainToPath middleware using a minimal application </b></td></tr><tr><td><test id="V0R9"><code>V0R9</code></test></td><td>&#x2705;</td><td><span class="type">should not transform illegal usernames</span></td></tr><tr><td><test id="Q5A5"><code>Q5A5</code></test></td><td>&#x2705;</td><td><span class="type">should transform username into a path segment</span></td></tr><tr><td><test id="IDDE"><code>IDDE</code></test></td><td>&#x2705;</td><td><span class="type">should accept dashes</span></td></tr></tbody></table></div></section><section id="services-platform">&#xA0;<h3 id="platform"><!--platform-->platform</h3>
<div class="content"><div class="meta"></div><h4 id="summary-10"><!--summary-10-->Summary</h4>
<table class="definitions"><tr><th><code>Number of tests</code></th><td>0</td></tr><tr><th><code>Passes &#x2705;</code></th><td>0</td></tr><tr><th><code>Pending &#x2753;</code></th><td>0</td></tr><tr><th><code>Failures &#x274C;</code></th><td>0</td></tr></table><h4 id="tests-9"><!--tests-9-->Tests</h4>
<table> <thead><tr><th> Id</th><th> Status</th><th>Test</th></tr></thead><tbody></tbody></table></div></section><section id="services-previews-server">&#xA0;<h3 id="previews-server"><!--previews-server-->previews-server</h3>
<div class="content"><div class="meta"></div><h4 id="summary-11"><!--summary-11-->Summary</h4>
<table class="definitions"><tr><th><code>Number of tests</code></th><td>0</td></tr><tr><th><code>Passes &#x2705;</code></th><td>0</td></tr><tr><th><code>Pending &#x2753;</code></th><td>0</td></tr><tr><th><code>Failures &#x274C;</code></th><td>3</td></tr></table><h4 id="tests-10"><!--tests-10-->Tests</h4>
<table> <thead><tr><th> Id</th><th> Status</th><th>Test</th></tr></thead><tbody></tbody></table></div></section><section id="services-pryv-datastore">&#xA0;<h3 id="pryv-datastore"><!--pryv-datastore-->pryv-datastore</h3>
<div class="content"><div class="meta"></div><h4 id="summary-12"><!--summary-12-->Summary</h4>
<table class="definitions"><tr><th><code>Number of tests</code></th><td>0</td></tr><tr><th><code>Passes &#x2705;</code></th><td>0</td></tr><tr><th><code>Pending &#x2753;</code></th><td>0</td></tr><tr><th><code>Failures &#x274C;</code></th><td>0</td></tr></table><h4 id="tests-11"><!--tests-11-->Tests</h4>
<table> <thead><tr><th> Id</th><th> Status</th><th>Test</th></tr></thead><tbody></tbody></table></div></section><section id="services-storage">&#xA0;<h3 id="storage"><!--storage-->storage</h3>
<div class="content"><div class="meta"></div><h4 id="summary-13"><!--summary-13-->Summary</h4>
<table class="definitions"><tr><th><code>Number of tests</code></th><td>1</td></tr><tr><th><code>Passes &#x2705;</code></th><td>0</td></tr><tr><th><code>Pending &#x2753;</code></th><td>0</td></tr><tr><th><code>Failures &#x274C;</code></th><td>7</td></tr></table><h4 id="tests-12"><!--tests-12-->Tests</h4>
<table> <thead><tr><th> Id</th><th> Status</th><th>Test</th></tr></thead><tbody><tr><td colspan="3"><b>Migration - 1.8.0 </b></td></tr><tr><td><test id="WBIK"><code>WBIK</code></test></td><td>&#x200E;&#x274C;</td><td><span class="type">must handle data migration from 1.7.5 to 1.8.0</span></td></tr></tbody></table></div></section><section id="services-tprpc">&#xA0;<h3 id="tprpc"><!--tprpc-->tprpc</h3>
<div class="content"><div class="meta"></div><h4 id="summary-14"><!--summary-14-->Summary</h4>
<table class="definitions"><tr><th><code>Number of tests</code></th><td>3</td></tr><tr><th><code>Passes &#x2705;</code></th><td>3</td></tr><tr><th><code>Pending &#x2753;</code></th><td>0</td></tr><tr><th><code>Failures &#x274C;</code></th><td>0</td></tr></table><h4 id="tests-13"><!--tests-13-->Tests</h4>
<table> <thead><tr><th> Id</th><th> Status</th><th>Test</th></tr></thead><tbody><tr><td colspan="3"><b>Base API </b></td></tr><tr><td><test id="GZFK"><code>GZFK</code></test></td><td>&#x2705;</td><td><span class="type">making a call</span></td></tr><tr><td><test id="V7MJ"><code>V7MJ</code></test></td><td>&#x2705;</td><td><span class="type">failing a call (server-side)</span></td></tr><tr><td colspan="3"><b>Type Compilation </b></td></tr><tr><td><test id="0YBR"><code>0YBR</code></test></td><td>&#x2705;</td><td><span class="type">compiles a .proto 3 syntax file into a set of flow-type interfaces</span></td></tr></tbody></table></div></section><section id="services-utils">&#xA0;<h3 id="utils"><!--utils-->utils</h3>
<div class="content"><div class="meta"></div><h4 id="summary-15"><!--summary-15-->Summary</h4>
<table class="definitions"><tr><th><code>Number of tests</code></th><td>10</td></tr><tr><th><code>Passes &#x2705;</code></th><td>10</td></tr><tr><th><code>Pending &#x2753;</code></th><td>0</td></tr><tr><th><code>Failures &#x274C;</code></th><td>0</td></tr></table><h4 id="tests-14"><!--tests-14-->Tests</h4>
<table> <thead><tr><th> Id</th><th> Status</th><th>Test</th></tr></thead><tbody><tr><td colspan="3"><b>Tree utils buildTree() </b></td></tr><tr><td><test id="32CB"><code>32CB</code></test></td><td>&#x2705;</td><td><span class="type">must build a correct tree for a given consistent array</span></td></tr><tr><td><test id="VVVS"><code>VVVS</code></test></td><td>&#x2705;</td><td><span class="type">must throw an error if objects do not contain the necessary properties</span></td></tr><tr><td><test id="CEUF"><code>CEUF</code></test></td><td>&#x2705;</td><td><span class="type">must throw an error if the object in argument is not an array</span></td></tr><tr><td colspan="3"><b>Tree utils flattenTree() </b></td></tr><tr><td><test id="11JJ"><code>11JJ</code></test></td><td>&#x2705;</td><td><span class="type">must build a correct array for a given tree</span></td></tr><tr><td><test id="OVJM"><code>OVJM</code></test></td><td>&#x2705;</td><td><span class="type">must throw an error if the object in argument is not an array</span></td></tr><tr><td colspan="3"><b>Tree utils findInTree() </b></td></tr><tr><td><test id="S1N0"><code>S1N0</code></test></td><td>&#x2705;</td><td><span class="type">must return the first item matching the given iterator function</span></td></tr><tr><td><test id="SI6L"><code>SI6L</code></test></td><td>&#x2705;</td><td><span class="type">must return null if no item matches the given iterator function</span></td></tr><tr><td colspan="3"><b>Tree utils filterTree() </b></td></tr><tr><td><test id="YIE6"><code>YIE6</code></test></td><td>&#x2705;</td><td><span class="type">must return only items matching the given iterator function</span></td></tr><tr><td colspan="3"><b>Tree utils collect() </b></td></tr><tr><td><test id="AU44"><code>AU44</code></test></td><td>&#x2705;</td><td><span class="type">must return an array with values matching the iterator function for each item in the tree</span></td></tr><tr><td colspan="3"><b>Tree utils expandIds() </b></td></tr><tr><td><test id="PFJP"><code>PFJP</code></test></td><td>&#x2705;</td><td><span class="type">must return an array with the ids passed in argument plus those of all their descendants</span></td></tr></tbody></table></div></section><section id="services-webhooks">&#xA0;<h3 id="webhooks"><!--webhooks-->webhooks</h3>
<div class="content"><div class="meta"></div><h4 id="summary-16"><!--summary-16-->Summary</h4>
<table class="definitions"><tr><th><code>Number of tests</code></th><td>0</td></tr><tr><th><code>Passes &#x2705;</code></th><td>0</td></tr><tr><th><code>Pending &#x2753;</code></th><td>0</td></tr><tr><th><code>Failures &#x274C;</code></th><td>3</td></tr></table><h4 id="tests-15"><!--tests-15-->Tests</h4>
<table> <thead><tr><th> Id</th><th> Status</th><th>Test</th></tr></thead><tbody></tbody></table></div></section></section></section></div><nav id="toc"></nav></div><footer id="page-footer"><nav class="navbar navbar-default"><div class="container-fluid"><div id="footer-nav"><ul class="nav navbar-nav"><li><a href="mailto:developers@pryv.com">Send a message</a></li><li><a href="https://github.com/pryv">GitHub</a></li><li><a href="https://pryv.com">pryv.com</a></li></ul></div></div></nav></footer><script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script><script src="/assets/bootstrap.min.js"></script><script src="/assets/js/toc.min.js"></script><!-- TOC generation--><script>jQuery(document).ready(function($) {
  // Header is about 51 pixels. This equals to 'header + fuzz', fuzz was
  // determined experimentally.
  var offset = 90;

  // Display TOC on the left side of the page.
  $('#toc').toc({
    selector: '#main h1:not(.page-title),#main h2,#main h3',
    ulClass: 'nav'
  });

  // Synchronise scroll/click motion with TOC display.
  $(document).ready(function() {
    // NOTE This is done at onLoad since we need to wait for all CSS
    // to appear.
    $('body').scrollspy({
      target: '#toc',
      offset: offset
    });
    scrollBy(0, 1); // make it scroll to be sure scrollspy gets it
    
    // fix offset when navigating
    $('#toc li a, a.toc-anchor').click(function (e) {
      e.preventDefault();
      var target = $(this).attr('href');
      window.location.hash = target;
      
      $(target)[0].scrollIntoView();
      if ($(window).scrollTop() + $(window).height() !== $(document).height()) {
        //only adjust when not at bottom
        scrollBy(0, -offset + 40);
      }
      return true;
    });
  
  });
});
</script><!-- Code blocks highlighting--><script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();
</script><!-- Google Analytics--><script>var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-36589447-2']);
_gaq.push(['_trackPageview']);
(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();</script></body></html>