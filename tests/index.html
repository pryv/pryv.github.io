<!DOCTYPE html><html class="no-js" lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="description" property="og:description" content="Pryv API reference and resources for developers"><meta name="author" content="Pryv SA"><meta property="og:type" content="website"><meta name="image" property="og:image" content="/assets/images/logo-256.png"><meta name="viewport" content="width=device-width, initial-scale=1"><title>Pryv.io test results | Pryv API</title><link rel="icon" href="/assets/images/favicon-black.ico" type="image/x-icon"><link rel="apple-touch-icon" sizes="120x120" href="/assets/images/apple-touch-icon-120x120-black.png"><link rel="apple-touch-icon" sizes="152x152" href="/assets/images/apple-touch-icon-152x152-black.png"><link rel="apple-touch-icon" sizes="180x180" href="/assets/images/apple-touch-icon-180x180-black.png"><!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
  <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]--><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:400,300,500,700,400italic|Roboto+Condensed:400,300,700"><link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/docco.min.css"><link rel="stylesheet" type="text/css" href="/assets/fonts/ss-gizmo.min.css"><link rel="stylesheet" type="text/css" href="/assets/style.css"></head><body class="tests with-toc"><header id="page-header"><nav class="navbar navbar-default navbar-fixed-top" role="navigation"><div class="container-fluid"><div class="navbar-header"><a class="navbar-brand logo pryv-home" href="https://pryv.com" title="Pryv home"><img src="/assets/images/icon-home.svg" alt="Pryv home" height="50"></a><a class="navbar-brand logo" href="/" title="Developers home"><img src="/assets/images/logo-256-black.png" alt="Developers home"></a><button class="navbar-toggle" type="button" data-toggle="collapse" data-target="#main-nav"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button></div><div class="collapse navbar-collapse" id="main-nav"><ul class="nav navbar-nav"><li class="dropdown"><a class="dropdown-toggle" href="#" data-toggle="dropdown">Guides <b class="caret"></b></a><ul class="dropdown-menu"><li><a href="/getting-started/">Getting started</a></li><li><a href="/external-resources/">Apps &amp; Libs</a></li><li><a href="/concepts/">API concepts</a></li><li><a href="/guides/data-modelling/">Data modelling</a></li><li><a href="/guides/webhooks/">Webhooks</a></li><li><a href="/guides/custom-auth/">Custom auth</a></li><li><a href="/guides/consent/">Consent request</a></li><li><a href="/guides/app-guidelines/">App guidelines</a></li><li><a href="/guides/audit-logs/">Audit logs</a></li></ul></li><li class="dropdown"><a class="dropdown-toggle" href="#" data-toggle="dropdown">Reference <b class="caret"></b></a><ul class="dropdown-menu"><li><a href="/reference/">API reference</a></li><li><a href="/reference-admin/">Admin API reference</a></li><li><a href="/reference-system/">System API reference</a></li><li><a href="/event-types/">Event types</a></li><li><a href="/open-api/">Open API (Postman)</a></li><li><a href="/change-log/">API change log</a></li></ul></li><li class="dropdown"><a class="dropdown-toggle" href="#" data-toggle="dropdown">FAQ <b class="caret"></b></a><ul class="dropdown-menu"><li><a href="/faq-api/">API</a></li><li><a href="/faq-infra/">Infrastructure</a></li></ul></li><li><a href="https://support.pryv.com/hc/en-us/community/topics">Community</a></li><li><a href="https://github.com/pryv/open-pryv.io">Open Pryv.io</a></li><li><a href="/customer-resources/">Entreprise</a></li><li><a href="/roadmap/">Roadmap</a></li></ul><div class="navbar-right"><p class="navbar-text version"><a href="/change-log/" title="View change log">API version: <strong>1.8.0</strong></a></p></div></div></div></nav></header><div class="container container-narrow" id="main-wrapper"><div id="main"><h1 class="page-title" id="pryvio-test-results"><!--pryvio-test-results-->Pryv.io test results</h1><section id="service-core 1-6.18-service-core 1.6.18"><h1 id="service-core-1618"><!--service-core-1618-->service-core 1.6.18</h1><div class="content"><div class="meta"></div></div><h3 id="summary"><!--summary-->Summary</h3><table class="definitions"><tr><th><strong>1006</strong></th><td><strong>tests total</strong></td></tr><tr><th>986</th><td>&#x2705; passing</td></tr><tr><th>20</th><td>&#x2753; pending</td></tr><tr><th>0</th><td>&#x274C; failing</td></tr></table><div class="intro"><p>Date: Tue Apr 13 2021 02:02:07 GMT+0200 (heure d&#x2019;&#xE9;t&#xE9; d&#x2019;Europe centrale)</p>
</div><section id="service-core 1-6.18-api-server"><h2 id="api-server-component"><!--api-server-component--><code>api-server</code> component</h2><div class="content"><div class="meta"></div><h3 id="summary-1"><!--summary-1-->Summary</h3><table class="definitions"><tr><th><strong>813</strong></th><td><strong>tests total</strong></td></tr><tr><th>803</th><td>&#x2705; passing</td></tr><tr><th>10</th><td>&#x2753; pending</td></tr><tr><th>0</th><td>&#x274C; failing</td></tr></table><h3 id="tests"><!--tests-->Tests</h3><table><thead><tr><th>Id</th><th style="text-align: center;">Status</th><th>Test</th></tr></thead><tbody><tr><td colspan="3"><b>Accesses with account streams POST /accesses When using a personal access to create an access for visible account streams with a read-level permission </b></td></tr><tr><td><test id="UE9G"><code>UE9G</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return 201</span></td></tr><tr><td><test id="BUYP"><code>BUYP</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should create access in the database</span></td></tr><tr><td><test id="S3IQ"><code>S3IQ</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should enable user to read visible stream event with this access</span></td></tr><tr><td colspan="3"><b>Accesses with account streams POST /accesses When using a personal access to create an access for visible account streams with a read-level permission for the &#x201C;account&#x201D; stream </b></td></tr><tr><td><test id="XEAK"><code>XEAK</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return 201</span></td></tr><tr><td><test id="65I4"><code>65I4</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should create access in the database</span></td></tr><tr><td><test id="L99L"><code>L99L</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should allow to access visible events in storageUsed</span></td></tr><tr><td colspan="3"><b>Accesses with account streams POST /accesses When using a personal access to create an access for visible account streams with a read-level permission for the &#x201C;storageUsed&#x201D; stream </b></td></tr><tr><td><test id="EPEP"><code>EPEP</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return 201</span></td></tr><tr><td><test id="U3UM"><code>U3UM</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should create access in the database</span></td></tr><tr><td><test id="A4UP"><code>A4UP</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should allow to access visible events in storageUsed</span></td></tr><tr><td colspan="3"><b>Accesses with account streams POST /accesses When using a personal access to create an access for visible account streams with a create-only-level permission </b></td></tr><tr><td><test id="IWMQ"><code>IWMQ</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return 201</span></td></tr><tr><td><test id="APYN"><code>APYN</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should create access in the database</span></td></tr><tr><td colspan="3"><b>Accesses with account streams POST /accesses When using a personal access to create an access for visible account streams with a contribute-level permission </b></td></tr><tr><td><test id="R0M1"><code>R0M1</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return 201</span></td></tr><tr><td><test id="Q8R8"><code>Q8R8</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should create access in the database</span></td></tr><tr><td><test id="TI1X"><code>TI1X</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should allow to create visible stream events</span></td></tr><tr><td colspan="3"><b>Accesses with account streams POST /accesses When using a personal access to create an access for visible account streams with a manage-level permission </b></td></tr><tr><td><test id="93HO"><code>93HO</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return 400</span></td></tr><tr><td><test id="YPHX"><code>YPHX</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return the correct error</span></td></tr><tr><td colspan="3"><b>Accesses with account streams POST /accesses When using a personal access to create an access for not visible account streams </b></td></tr><tr><td><test id="ATGU"><code>ATGU</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return 400</span></td></tr><tr><td><test id="Q2KZ"><code>Q2KZ</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return the correct error</span></td></tr><tr><td colspan="3"><b>Accesses with account streams DELETE /accesses When using a personal access to delete an account stream access </b></td></tr><tr><td><test id="Z40J"><code>Z40J</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return 200</span></td></tr><tr><td><test id="MP9T"><code>MP9T</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should delete the access in the database</span></td></tr><tr><td colspan="3"><b>Accesses access deletions when given a few existing accesses accesses.get </b></td></tr><tr><td><test id="H7ZS"><code>H7ZS</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">access should contain tokens and apiEndpoints</span></td></tr><tr><td><test id="P12L"><code>P12L</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should contain deletions</span></td></tr><tr><td><test id="BQ7M"><code>BQ7M</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">contains active accesses</span></td></tr><tr><td><test id="NVCQ"><code>NVCQ</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">contains deleted accesses as well</span></td></tr><tr><td><test id="6ZQL"><code>6ZQL</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">deleted access are in UTC (seconds) format</span></td></tr><tr><td colspan="3"><b>Accesses access deletions when given a few existing accesses accesses.create for a valid access </b></td></tr><tr><td><test id="N3Q1"><code>N3Q1</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should contain an access</span></td></tr><tr><td><test id="8UOW"><code>8UOW</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">access should contain token and apiEndpoint</span></td></tr><tr><td><test id="J77Z"><code>J77Z</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should contain the set values, but no &#x201C;deleted&#x201D; field in the API response</span></td></tr><tr><td><test id="A4JP"><code>A4JP</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should contain the field &#x201C;deleted:null&#x201D; in the database</span></td></tr><tr><td colspan="3"><b>Accesses access deletions when given a few existing accesses accesses.create for a deleted access </b></td></tr><tr><td><test id="1DJ6"><code>1DJ6</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return an error</span></td></tr><tr><td><test id="7ZPK"><code>7ZPK</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">error should say that the deleted field is forbidden upon creation</span></td></tr><tr><td colspan="3"><b>Accesses access deletions when given a few existing accesses accesses.update </b></td></tr><tr><td><test id="JNJK"><code>JNJK</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return an error</span></td></tr><tr><td><test id="OS36"><code>OS36</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">error should say that the deleted field is forbidden upon update</span></td></tr><tr><td colspan="3"><b>Accesses Delete app access when deleting an app access that created shared accesses </b></td></tr><tr><td><test id="WE2O"><code>WE2O</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return the accessDeletion and relatedDeletions</span></td></tr><tr><td><test id="IVWP"><code>IVWP</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should delete it and the accesses it created, not touching the expired ones</span></td></tr><tr><td colspan="3"><b>Accesses access expiry when given a few existing accesses accesses.get vanilla version </b></td></tr><tr><td><test id="489J"><code>489J</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">succeeds</span></td></tr><tr><td><test id="7NPE"><code>7NPE</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">contains only active accesses</span></td></tr><tr><td colspan="3"><b>Accesses access expiry when given a few existing accesses accesses.get when given the includeExpired=true parameter </b></td></tr><tr><td><test id="PIGE"><code>PIGE</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">succeeds</span></td></tr><tr><td><test id="DZHL"><code>DZHL</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">includes expired accesses</span></td></tr><tr><td colspan="3"><b>Accesses access expiry when given a few existing accesses accesses.create when called with expireAfter&gt;0 </b></td></tr><tr><td><test id="3ONA"><code>3ONA</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">creates an access with set expiry timestamp</span></td></tr><tr><td colspan="3"><b>Accesses access expiry when given a few existing accesses accesses.create when called with expireAfter=0 </b></td></tr><tr><td><test id="8B65"><code>8B65</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">creates an expired access</span></td></tr><tr><td colspan="3"><b>Accesses access expiry when given a few existing accesses accesses.create when called with expireAfter<0 < b></0></b></td></tr><tr><td><test id="JHWH"><code>JHWH</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">fails</span></td></tr><tr><td colspan="3"><b>Accesses access expiry when given a few existing accesses accesses.checkApp when the matching access is not expired </b></td></tr><tr><td><test id="B66B"><code>B66B</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">returns the matching access</span></td></tr><tr><td colspan="3"><b>Accesses access expiry when given a few existing accesses accesses.checkApp when the matching access is expired </b></td></tr><tr><td><test id="DLHJ"><code>DLHJ</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">returns no match</span></td></tr><tr><td colspan="3"><b>Accesses access expiry when given a few existing accesses other API accesses using an expired access </b></td></tr><tr><td><test id="AJG5"><code>AJG5</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">fails</span></td></tr><tr><td><test id="KGT4"><code>KGT4</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">returns a proper error message</span></td></tr><tr><td colspan="3"><b>Accesses access expiry when given a few existing accesses other API accesses using a valid access </b></td></tr><tr><td><test id="CBRF"><code>CBRF</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">succeeds</span></td></tr><tr><td colspan="3"><b>Accesses access client data when given a few existing accesses accesses.get </b></td></tr><tr><td><test id="KML2"><code>KML2</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">succeeds</span></td></tr><tr><td><test id="NY85"><code>NY85</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">contains existing accesses with clientData</span></td></tr><tr><td colspan="3"><b>Accesses access client data when given a few existing accesses accesses.create when called with clientData={} </b></td></tr><tr><td><test id="OMUO"><code>OMUO</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">creates an access with empty clientData</span></td></tr><tr><td colspan="3"><b>Accesses access client data when given a few existing accesses accesses.create when called with clientData=null </b></td></tr><tr><td><test id="E5C1"><code>E5C1</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">throws a schema error</span></td></tr><tr><td colspan="3"><b>Accesses access client data when given a few existing accesses accesses.create when called with complex clientData </b></td></tr><tr><td><test id="JYD4"><code>JYD4</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">creates an access with complex clientData</span></td></tr><tr><td colspan="3"><b>Accesses access client data when given a few existing accesses accesses.checkApp when the provided clientData matches the existing clientData </b></td></tr><tr><td><test id="U1AM"><code>U1AM</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">returns the matching access</span></td></tr><tr><td colspan="3"><b>Accesses access client data when given a few existing accesses accesses.checkApp when the provided clientData does not match the existing clientData </b></td></tr><tr><td><test id="2EER"><code>2EER</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">returns no match</span></td></tr><tr><td colspan="3"><b>Accesses access client data when given a few existing accesses accesses.checkApp when no clientData is provided but existing access has one </b></td></tr><tr><td><test id="DHZQ"><code>DHZQ</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">returns no match</span></td></tr><tr><td colspan="3"><b>Accesses access-info </b></td></tr><tr><td><test id="PH0K"><code>PH0K</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return the username</span></td></tr><tr><td colspan="3"><b>Account with system streams GET /account and when user has multiple events per stream and additional streams events </b></td></tr><tr><td><test id="XRKX"><code>XRKX</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return 200</span></td></tr><tr><td><test id="JUHR"><code>JUHR</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return account information in the structure that is defined in system streams and only active values</span></td></tr><tr><td><test id="R5S0"><code>R5S0</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return only visible default stream events</span></td></tr><tr><td colspan="3"><b>Account with system streams POST /change-password and when valid data is provided </b></td></tr><tr><td><test id="X9VQ"><code>X9VQ</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return 200</span></td></tr><tr><td><test id="PWAA"><code>PWAA</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should update event with password hash</span></td></tr><tr><td colspan="3"><b>Account with system streams POST /change-password when the password in the database does not exist </b></td></tr><tr><td><test id="8S2S"><code>8S2S</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return 400</span></td></tr><tr><td><test id="WG4L"><code>WG4L</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return the correct error</span></td></tr><tr><td colspan="3"><b>Account with system streams POST /reset-password when the password in the database does not exist </b></td></tr><tr><td><test id="551W"><code>551W</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return 500</span></td></tr><tr><td><test id="I5M6"><code>I5M6</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return the correct error</span></td></tr><tr><td colspan="3"><b>Account with system streams PUT /account and when user tries to modify the username </b></td></tr><tr><td><test id="P69J"><code>P69J</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return 400</span></td></tr><tr><td><test id="DBM6"><code>DBM6</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return the correct error</span></td></tr><tr><td colspan="3"><b>Account with system streams PUT /account and when user tries to modify non editable fields </b></td></tr><tr><td><test id="90N3"><code>90N3</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return 400</span></td></tr><tr><td><test id="QHZ4"><code>QHZ4</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return the correct error</span></td></tr><tr><td colspan="3"><b>Account with system streams PUT /account and when updating a unique field that are already taken and the field is not unique in mongodb </b></td></tr><tr><td><test id="K3X9"><code>K3X9</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return a 409 error</span></td></tr><tr><td><test id="8TRP"><code>8TRP</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return the correct error</span></td></tr><tr><td colspan="3"><b>Account with system streams PUT /account and when user tries to edit email or language when non-active fields exists </b></td></tr><tr><td><test id="JJ81"><code>JJ81</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return 200</span></td></tr><tr><td><test id="K9IC"><code>K9IC</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should returned updated account data</span></td></tr><tr><td><test id="JQHX"><code>JQHX</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should update only active events in the database</span></td></tr><tr><td><test id="Y6MC"><code>Y6MC</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">Should send a request to service-register to update its user main information and unique fields</span></td></tr><tr><td colspan="3"><b>Events of system streams GET /events When using a personal access </b></td></tr><tr><td><test id="KS6K"><code>KS6K</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return visible system events only</span></td></tr><tr><td><test id="C32B"><code>C32B</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should not return events internal properties that enforce db uniqueness</span></td></tr><tr><td colspan="3"><b>Events of system streams GET /events When using a shared access with a read-level permission on the .account stream </b></td></tr><tr><td><test id="DRFH"><code>DRFH</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return visible system events only</span></td></tr><tr><td colspan="3"><b>Events of system streams GET /events When using a shared access with a read-level permission on all streams (star) and a visible system stream </b></td></tr><tr><td><test id="GF3A"><code>GF3A</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return only the account event for which a permission was explicitely provided</span></td></tr><tr><td colspan="3"><b>Events of system streams GET /events When using a shared access with a read-level permission on all streams (star) </b></td></tr><tr><td><test id="RM74"><code>RM74</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should not return any system events</span></td></tr><tr><td colspan="3"><b>Events of system streams GET /events/<id> When using a personal access to retrieve a visible system event </id></b></td></tr><tr><td><test id="9IEX"><code>9IEX</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return 200</span></td></tr><tr><td><test id="IYE6"><code>IYE6</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return the event</span></td></tr><tr><td><test id="4Q5L"><code>4Q5L</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should not return the event&#x2019;s internal properties that enforce db uniqueness</span></td></tr><tr><td colspan="3"><b>Events of system streams GET /events/<id> When using a personal access to retrieve a non visible system event </id></b></td></tr><tr><td><test id="Y2OA"><code>Y2OA</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return 404</span></td></tr><tr><td><test id="DHZE"><code>DHZE</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return the right error message</span></td></tr><tr><td colspan="3"><b>Events of system streams GET /events/<id> When using a shared access with a read-level permission on all streams (star) and a visible system stream </id></b></td></tr><tr><td><test id="YPZX"><code>YPZX</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return 200</span></td></tr><tr><td><test id="1NRM"><code>1NRM</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return the event</span></td></tr><tr><td colspan="3"><b>Events of system streams POST /events When using a personal access to create an editable system event which is non indexed and non unique </b></td></tr><tr><td><test id="F308"><code>F308</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return 201</span></td></tr><tr><td><test id="9C2D"><code>9C2D</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return the created event</span></td></tr><tr><td><test id="A9DC"><code>A9DC</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should add the &#x2018;active&#x2019; streamId to the new event which should be removed from other events of the same stream</span></td></tr><tr><td colspan="3"><b>Events of system streams POST /events When using a personal access to create an editable system event which is indexed </b></td></tr><tr><td><test id="8C80"><code>8C80</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return 201</span></td></tr><tr><td><test id="67F7"><code>67F7</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return the created event</span></td></tr><tr><td><test id="467D"><code>467D</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should add the &#x2018;active&#x2019; streamId to the new event which should be removed from other events of the same stream</span></td></tr><tr><td><test id="199D"><code>199D</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should notify register with the new data</span></td></tr><tr><td colspan="3"><b>Events of system streams POST /events When using a personal access to create an editable system event which is indexed and unique whose content is unique </b></td></tr><tr><td><test id="SQZ2"><code>SQZ2</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return 201</span></td></tr><tr><td><test id="YS79"><code>YS79</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return the created event</span></td></tr><tr><td><test id="15H6"><code>15H6</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should add properties enforcing uniqueness in the storage</span></td></tr><tr><td><test id="DA23"><code>DA23</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should add the &#x2018;active&#x2019; streamId to the new event which should be removed from other events of the same stream</span></td></tr><tr><td><test id="D316"><code>D316</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should notify register with the new data</span></td></tr><tr><td colspan="3"><b>Events of system streams POST /events When using a personal access to create an editable system event which is indexed and unique whose content is already taken in register </b></td></tr><tr><td><test id="89BC"><code>89BC</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return 409</span></td></tr><tr><td><test id="10BC"><code>10BC</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return the correct error</span></td></tr><tr><td colspan="3"><b>Events of system streams POST /events When using a personal access to create an editable system event which is indexed and unique [6B8D] When creating an event that is already taken only on core </b></td></tr><tr><td><test id="2021"><code>2021</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return a 409 error</span></td></tr><tr><td><test id="121E"><code>121E</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return the correct error</span></td></tr><tr><td colspan="3"><b>Events of system streams POST /events When using a personal access to create a non editable system event </b></td></tr><tr><td><test id="6CE0"><code>6CE0</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return a 400 error</span></td></tr><tr><td><test id="90E6"><code>90E6</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return the correct error</span></td></tr><tr><td colspan="3"><b>Events of system streams POST /events when using a shared access with a contribute-level permission on a system stream </b></td></tr><tr><td><test id="X49R"><code>X49R</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return 201</span></td></tr><tr><td><test id="764A"><code>764A</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return the created event</span></td></tr><tr><td><test id="765A"><code>765A</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should notify register with the new data</span></td></tr><tr><td colspan="3"><b>Events of system streams POST /events when using a shared access with a manage-level permission on all streams (star) </b></td></tr><tr><td><test id="YX07"><code>YX07</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return 403</span></td></tr><tr><td><test id="YYU1"><code>YYU1</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return correct error id</span></td></tr><tr><td colspan="3"><b>Events of system streams PUT /events/<id> when using a personal access to update an editable system event which is non indexed and non unique </id></b></td></tr><tr><td><test id="2FA2"><code>2FA2</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return 200</span></td></tr><tr><td><test id="763A"><code>763A</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return the updated event</span></td></tr><tr><td colspan="3"><b>Events of system streams PUT /events/<id> when using a personal access to update an editable system event which is non indexed and non unique by adding the &#x201C;active&#x201D; streamId </id></b></td></tr><tr><td><test id="562A"><code>562A</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return 200</span></td></tr><tr><td><test id="5622"><code>5622</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return the updated event</span></td></tr><tr><td><test id="CF70"><code>CF70</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should remove the &#x201C;active&#x201D; streamId for events of the same stream</span></td></tr><tr><td colspan="3"><b>Events of system streams PUT /events/<id> when using a personal access to update an editable system event which is non indexed and non unique by changing its steamIds when editing with 2 streamIds at the time </id></b></td></tr><tr><td><test id="8BFK"><code>8BFK</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return 400</span></td></tr><tr><td><test id="E3KE"><code>E3KE</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return the correct error</span></td></tr><tr><td colspan="3"><b>Events of system streams PUT /events/<id> when using a personal access to update an editable system event which is non indexed and non unique by changing its steamIds when substituting a system stream with another one </id></b></td></tr><tr><td><test id="9004"><code>9004</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return 400</span></td></tr><tr><td><test id="E3AE"><code>E3AE</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return the correct error</span></td></tr><tr><td colspan="3"><b>Events of system streams PUT /events/<id> when using a personal access to update an editable system event which is indexed as register is working </id></b></td></tr><tr><td><test id="0RUK"><code>0RUK</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return 200</span></td></tr><tr><td><test id="E43M"><code>E43M</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should notify register with the updated data</span></td></tr><tr><td colspan="3"><b>Events of system streams PUT /events/<id> when using a personal access to update an editable system event which is indexed as register is working by adding the &#x201C;active&#x201D; streamId </id></b></td></tr><tr><td><test id="0D18"><code>0D18</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should notify register with the updated data</span></td></tr><tr><td colspan="3"><b>Events of system streams PUT /events/<id> when using a personal access to update an editable system event which is indexed as register is out </id></b></td></tr><tr><td><test id="AA92"><code>AA92</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return 500</span></td></tr><tr><td><test id="645C"><code>645C</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should notify register with the updated data</span></td></tr><tr><td colspan="3"><b>Events of system streams PUT /events/<id> when using a personal access to update an editable system event which is unique by updating a unique field that is valid </id></b></td></tr><tr><td><test id="4BB1"><code>4BB1</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return 200</span></td></tr><tr><td><test id="GWHU"><code>GWHU</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should send a request to service-register to update the unique field</span></td></tr><tr><td><test id="C457"><code>C457</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should save an additional field to enforce uniqueness in mongodb</span></td></tr><tr><td colspan="3"><b>Events of system streams PUT /events/<id> when using a personal access to update an editable system event which is unique by updating a unique field that is valid by adding the &#x201C;active&#x201D; streamId </id></b></td></tr><tr><td><test id="HJWE"><code>HJWE</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return 200</span></td></tr><tr><td><test id="6AAT"><code>6AAT</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should notify register with the updated data</span></td></tr><tr><td colspan="3"><b>Events of system streams PUT /events/<id> when using a personal access to update an editable system event which is unique by updating a unique field that is already taken with a field that is not unique in register </id></b></td></tr><tr><td><test id="F8A8"><code>F8A8</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return 409</span></td></tr><tr><td><test id="5A04"><code>5A04</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should notify register with the updated data</span></td></tr><tr><td colspan="3"><b>Events of system streams PUT /events/<id> when using a personal access to update an editable system event which is unique by updating a unique field that is already taken with a field that is not unique in mongodb </id></b></td></tr><tr><td><test id="5782"><code>5782</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return 409</span></td></tr><tr><td><test id="B285"><code>B285</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return the correct error</span></td></tr><tr><td colspan="3"><b>Events of system streams PUT /events/<id> when using a personal access to update a non editable system event </id></b></td></tr><tr><td><test id="034D"><code>034D</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return 400</span></td></tr><tr><td><test id="BB5F"><code>BB5F</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return the correct error</span></td></tr><tr><td colspan="3"><b>Events of system streams PUT /events/<id> when using a shared access with a contribute-level access on a system stream to update an editable system event </id></b></td></tr><tr><td><test id="W8PQ"><code>W8PQ</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return 200</span></td></tr><tr><td><test id="TFOI"><code>TFOI</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return the updated event</span></td></tr><tr><td colspan="3"><b>Events of system streams PUT /events/<id> when using a shared access with a manage-level permission on all streams (star) to update an editable system event </id></b></td></tr><tr><td><test id="H1XL"><code>H1XL</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return 403</span></td></tr><tr><td><test id="7QA3"><code>7QA3</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return the correct error</span></td></tr><tr><td colspan="3"><b>Events of system streams DELETE /events/<id> When using a personal access to delete an editable streams event that has no &#x2018;active&#x2019; streamId which is unique </id></b></td></tr><tr><td><test id="43B1"><code>43B1</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return 200</span></td></tr><tr><td><test id="3E12"><code>3E12</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return the trashed event</span></td></tr><tr><td><test id="FJK3"><code>FJK3</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should not return the event&#x2019;s internal properties that enforce db uniqueness</span></td></tr><tr><td><test id="F328"><code>F328</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should notify register with the deleted data</span></td></tr><tr><td colspan="3"><b>Events of system streams DELETE /events/<id> When using a personal access to delete an editable streams event that has no &#x2018;active&#x2019; streamId which is indexed </id></b></td></tr><tr><td><test id="1B70"><code>1B70</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return 200</span></td></tr><tr><td><test id="CBB9"><code>CBB9</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return the trashed event</span></td></tr><tr><td colspan="3"><b>Events of system streams DELETE /events/<id> When using a personal access to delete an editable streams event that has the &#x2018;active&#x2019; streamId </id></b></td></tr><tr><td><test id="10EC"><code>10EC</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return 400</span></td></tr><tr><td><test id="D4CA"><code>D4CA</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return the correct error</span></td></tr><tr><td colspan="3"><b>Events of system streams DELETE /events/<id> When using a personal access to delete a non editable system event </id></b></td></tr><tr><td><test id="8EDB"><code>8EDB</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return a 400</span></td></tr><tr><td><test id="A727"><code>A727</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return the correct error</span></td></tr><tr><td colspan="3"><b>Events of system streams DELETE /events/<id> when using a shared access with a contribute-level access on a system stream </id></b></td></tr><tr><td><test id="I1I1"><code>I1I1</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return 200</span></td></tr><tr><td><test id="UFLT"><code>UFLT</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return the updated event</span></td></tr><tr><td colspan="3"><b>Events of system streams DELETE /events/<id> when using a shared access with a manage-level permission on all streams (star) </id></b></td></tr><tr><td><test id="AT1E"><code>AT1E</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return 403</span></td></tr><tr><td><test id="FV8W"><code>FV8W</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return the correct error</span></td></tr><tr><td colspan="3"><b>System streams GET /streams When using a personal access </b></td></tr><tr><td><test id="9CGO"><code>9CGO</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">Should return all streams - including system ones</span></td></tr><tr><td colspan="3"><b>System streams POST /streams When using a personal access to create a child to a system stream </b></td></tr><tr><td><test id="GRI4"><code>GRI4</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return status 400</span></td></tr><tr><td><test id="XP07"><code>XP07</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return the correct error</span></td></tr><tr><td colspan="3"><b>System streams PUT /streams/<id> When using a personal access to update a system stream </id></b></td></tr><tr><td><test id="SLIR"><code>SLIR</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return status 400</span></td></tr><tr><td><test id="V6HC"><code>V6HC</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return the correct error</span></td></tr><tr><td colspan="3"><b>System streams DELETE /streams/<id> When using a personal access to delete a system stream </id></b></td></tr><tr><td><test id="1R35"><code>1R35</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return status 400</span></td></tr><tr><td><test id="4939"><code>4939</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return the correct error</span></td></tr><tr><td colspan="3"><b>[55JP] users pool create pool user </b></td></tr><tr><td><test id="80HI"><code>80HI</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">succeeds</span></td></tr><tr><td><test id="Y95U"><code>Y95U</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">contains a generated pool user id</span></td></tr><tr><td><test id="JKN6"><code>JKN6</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">created a user in the database</span></td></tr><tr><td colspan="3"><b>[55JP] users pool get pool size when empty </b></td></tr><tr><td><test id="DHID"><code>DHID</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must succeed</span></td></tr><tr><td><test id="LH6N"><code>LH6N</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return 0</span></td></tr><tr><td colspan="3"><b>[55JP] users pool get pool size when adding pool users </b></td></tr><tr><td><test id="CTP7"><code>CTP7</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">succeeds</span></td></tr><tr><td><test id="APQS"><code>APQS</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">has the right number of pool users</span></td></tr><tr><td colspan="3"><b>Accesses (app) GET / </b></td></tr><tr><td><test id="YEHW"><code>YEHW</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return shared accesses whose permissions are a subset of the current one&#x2019;s</span></td></tr><tr><td><test id="GLHP"><code>GLHP</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must be forbidden to requests with a shared access token</span></td></tr><tr><td colspan="3"><b>Accesses (app) POST / </b></td></tr><tr><td><test id="QVHS"><code>QVHS</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must create a new shared access with the sent data and return it</span></td></tr><tr><td><test id="6GR1"><code>6GR1</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must forbid trying to create a non-shared access</span></td></tr><tr><td><test id="A4MC"><code>A4MC</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must forbid trying to create an access with greater permissions</span></td></tr><tr><td><test id="QN6D"><code>QN6D</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return a correct error if the sent data is badly formatted</span></td></tr><tr><td><test id="4HAE"><code>4HAE</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must allow creation of shared accesses with an access that has superior permission on root stream (*)</span></td></tr><tr><td colspan="3"><b>Accesses (app) PUT /<token> </token></b></td></tr><tr><td><test id="11UZ"><code>11UZ</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return a 410 (Gone)</span></td></tr><tr><td colspan="3"><b>Accesses (app) DELETE /<id> </id></b></td></tr><tr><td><test id="5BOO"><code>5BOO</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must delete the shared access</span></td></tr><tr><td><test id="ZTSX"><code>ZTSX</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">forbid deletion of already deleted for AppTokens</span></td></tr><tr><td><test id="VGQS"><code>VGQS</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must forbid trying to delete a non-shared access</span></td></tr><tr><td><test id="ZTSY"><code>ZTSY</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must forbid trying to delete an access that was not created by itself</span></td></tr><tr><td><test id="J32P"><code>J32P</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return a correct error if the access does not exist</span></td></tr><tr><td colspan="3"><b>Accesses (personal) GET / </b></td></tr><tr><td><test id="K5BF"><code>K5BF</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return all accesses (including personal ones)</span></td></tr><tr><td colspan="3"><b>Accesses (personal) POST / </b></td></tr><tr><td><test id="BU9U"><code>BU9U</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must create a new shared access with the sent data, returning it</span></td></tr><tr><td><test id="FPUE"><code>FPUE</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must create a new app access with the sent data, creating/restoring requested streams</span></td></tr><tr><td><test id="865I"><code>865I</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must accept two app accesses with the same name (app ids) but different device names</span></td></tr><tr><td><test id="4Y3Y"><code>4Y3Y</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must ignore erroneous requests to create new streams</span></td></tr><tr><td><test id="WSG8"><code>WSG8</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must fail if a stream similar to that requested for creation already exists</span></td></tr><tr><td><test id="GVC7"><code>GVC7</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must refuse to create new personal accesses (obtained via login only)</span></td></tr><tr><td><test id="YRNE"><code>YRNE</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must slugify the new access&#x2019; predefined token</span></td></tr><tr><td><test id="V3AV"><code>V3AV</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return an error if the sent data is badly formatted</span></td></tr><tr><td><test id="HETK"><code>HETK</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must refuse empty <code>defaultName</code> values for streams</span></td></tr><tr><td><test id="YG81"><code>YG81</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return an error if an access with the same token already exists</span></td></tr><tr><td><test id="GZTH"><code>GZTH</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return an error if an access with the same name already exists</span></td></tr><tr><td><test id="4HO6"><code>4HO6</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return an error if an &#x201C;app&#x201D; access with the same name (app id) and device name already exists</span></td></tr><tr><td><test id="PO0R"><code>PO0R</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return an error if the device name is set for a non-app access</span></td></tr><tr><td><test id="RWGG"><code>RWGG</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return an error if the given predefined access&#x2019;s token is a reserved word</span></td></tr><tr><td colspan="3"><b>Accesses (personal) PUT /<token> </token></b></td></tr><tr><td><test id="U04A"><code>U04A</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return a 410 (Gone)</span></td></tr><tr><td colspan="3"><b>Accesses (personal) DELETE /<id> </id></b></td></tr><tr><td><test id="S8EK"><code>S8EK</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must delete the shared access</span></td></tr><tr><td><test id="5GBI"><code>5GBI</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must delete the personal access</span></td></tr><tr><td><test id="NN11"><code>NN11</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return an error if the access does not exist</span></td></tr><tr><td colspan="3"><b>Accesses (personal) POST /check-app </b></td></tr><tr><td><test id="VCH9"><code>VCH9</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return the adjusted permissions structure if no access exists</span></td></tr><tr><td><test id="R8H4"><code>R8H4</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must accept requested permissions with &#x201C;*&#x201D; for &#x201C;all streams&#x201D;</span></td></tr><tr><td><test id="9QNK"><code>9QNK</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return the existing app access if matching</span></td></tr><tr><td><test id="IF33"><code>IF33</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must also return the token of the existing mismatching access if any</span></td></tr><tr><td><test id="G5T2"><code>G5T2</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must propose fixes to duplicate ids of streams and signal an error when appropriate</span></td></tr><tr><td><test id="MTY1"><code>MTY1</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return an error if the sent data is badly formatted</span></td></tr><tr><td><test id="U5KD"><code>U5KD</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must be forbidden to non-personal accesses</span></td></tr><tr><td colspan="3"><b>Account GET / </b></td></tr><tr><td><test id="PHSB"><code>PHSB</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return the user&#x2019;s account details</span></td></tr><tr><td><test id="K5EI"><code>K5EI</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must be forbidden to non-personal accesses</span></td></tr><tr><td colspan="3"><b>Account PUT / </b></td></tr><tr><td><test id="0PPV"><code>0PPV</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must modify account details with the sent data, notifying register if e-mail changed</span></td></tr><tr><td><test id="AT0V"><code>AT0V</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return a correct error if the sent data is badly formatted</span></td></tr><tr><td><test id="NZE2"><code>NZE2</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must be forbidden to non-personal accesses</span></td></tr><tr><td colspan="3"><b>Account storage space monitoring </b></td></tr><tr><td><test id="NFJQ"><code>NFJQ</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must properly compute used storage size for a given user when called</span></td></tr><tr><td><test id="Y445"><code>Y445</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must properly compute storage size for all users in nightly script</span></td></tr><tr><td><test id="0QVH"><code>0QVH</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must be approximately updated (diff) when adding an attached file</span></td></tr><tr><td><test id="93AP"><code>93AP</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must be approximately updated (diff) when deleting an attached file</span></td></tr><tr><td><test id="5WO0"><code>5WO0</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must be approximately updated (diff) when deleting an event</span></td></tr><tr><td colspan="3"><b>Account /change-password </b></td></tr><tr><td><test id="6041"><code>6041</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must change the password to the given value</span></td></tr><tr><td><test id="STWH"><code>STWH</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return an error if the given old password does not match</span></td></tr><tr><td><test id="8I1N"><code>8I1N</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return a correct error if the sent data is badly formatted</span></td></tr><tr><td><test id="J5VH"><code>J5VH</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must be forbidden to non-personal accesses</span></td></tr><tr><td colspan="3"><b>Account /request-password-reset and /reset-password </b></td></tr><tr><td><test id="G1VN"><code>G1VN</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">&#x201C;request&#x201D; must trigger an email with a reset token, store that token, then &#x201C;reset&#x201D; must reset the password to the given value</span></td></tr><tr><td><test id="HV0V"><code>HV0V</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must not trigger a reset email if mailing is deactivated</span></td></tr><tr><td><test id="VZ1W"><code>VZ1W</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must not trigger a reset email if reset mail is deactivated</span></td></tr><tr><td><test id="3P2N"><code>3P2N</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must not be possible to use a reset token to illegally change password of another user</span></td></tr><tr><td><test id="J6GB"><code>J6GB</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">&#x201C;request&#x201D; must return an error if the requesting app is not trusted</span></td></tr><tr><td><test id="5K14"><code>5K14</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">&#x201C;request&#x201D; must return an error if sent data is badly formatted</span></td></tr><tr><td><test id="PKBP"><code>PKBP</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">&#x201C;reset&#x201D; must return an error if the reset token is invalid/expired</span></td></tr><tr><td><test id="ON9V"><code>ON9V</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">&#x201C;reset&#x201D; must return an error if the requesting app is not trusted</span></td></tr><tr><td><test id="T5L9"><code>T5L9</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">&#x201C;reset&#x201D; must return an error if sent data is badly formatted</span></td></tr><tr><td colspan="3"><b>Depending on &quot;user-account:delete&quot;  config parameter </b></td></tr><tr><td><test id="8UT7"><code>8UT7</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">Should accept when &#x201C;personalToken&#x201D; is active and a valid personal token is provided</span></td></tr><tr><td><test id="IJ5F"><code>IJ5F</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">Should reject when &#x201C;personalToken&#x201D; is active and an invalid token is provided</span></td></tr><tr><td><test id="NZ6G"><code>NZ6G</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">Should reject when only &#x201C;personalToken&#x201D; is active and a valid admin token is provided</span></td></tr><tr><td><test id="UK8H"><code>UK8H</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">Should accept when &#x201C;personalToken&#x201D; and &#x201C;adminToken&#x201D; are active and a valid admin token is provided</span></td></tr><tr><td colspan="3"><b>DnsLess:isActive = true, openSource:isActive = false when given existing username </b></td></tr><tr><td><test id="CM5Q"><code>CM5Q</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should respond with 200</span></td></tr><tr><td><test id="BQXA"><code>BQXA</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should delete user entries from impacted collections</span></td></tr><tr><td><test id="4Y76"><code>4Y76</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should delete user event files</span></td></tr><tr><td><test id="710F"><code>710F</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should not delete entries of other users</span></td></tr><tr><td><test id="GUPH"><code>GUPH</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should not delete other user event files</span></td></tr><tr><td><test id="IH6T"><code>IH6T</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should delete on register</span></td></tr><tr><td colspan="3"><b>DnsLess:isActive = true, openSource:isActive = false when given invalid authorization key </b></td></tr><tr><td><test id="JNVS"><code>JNVS</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should respond with 404</span></td></tr><tr><td colspan="3"><b>DnsLess:isActive = true, openSource:isActive = false when given not existing username </b></td></tr><tr><td><test id="C58U"><code>C58U</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should respond with 404</span></td></tr><tr><td colspan="3"><b>DnsLess:isActive = false, openSource:isActive = false when given existing username </b></td></tr><tr><td><test id="T21Z"><code>T21Z</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should respond with 200</span></td></tr><tr><td><test id="K4J1"><code>K4J1</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should delete user entries from impacted collections</span></td></tr><tr><td><test id="TIKT"><code>TIKT</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should delete user event files</span></td></tr><tr><td><test id="WMMV"><code>WMMV</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should not delete entries of other users</span></td></tr><tr><td><test id="9ZTM"><code>9ZTM</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should not delete other user event files</span></td></tr><tr><td><test id="N8TR"><code>N8TR</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should delete on register</span></td></tr><tr><td colspan="3"><b>DnsLess:isActive = false, openSource:isActive = false when given invalid authorization key </b></td></tr><tr><td><test id="T3UK"><code>T3UK</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should respond with 404</span></td></tr><tr><td colspan="3"><b>DnsLess:isActive = false, openSource:isActive = false when given not existing username </b></td></tr><tr><td><test id="O73J"><code>O73J</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should respond with 404</span></td></tr><tr><td colspan="3"><b>Events.streamIds events GET /events </b></td></tr><tr><td><test id="WJ0S"><code>WJ0S</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return streamIds &amp; streamId containing the first one (if many)</span></td></tr><tr><td colspan="3"><b>Events.streamIds events GET /events/:id </b></td></tr><tr><td><test id="IJQZ"><code>IJQZ</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return streamIds &amp; streamId containing the first one (if many)</span></td></tr><tr><td colspan="3"><b>Events.streamIds events POST /events </b></td></tr><tr><td><test id="X4PX"><code>X4PX</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must forbid to provide both streamId and streamIds</span></td></tr><tr><td colspan="3"><b>Events.streamIds events POST /events when using &quot;streamId&quot; </b></td></tr><tr><td><test id="1YUV"><code>1YUV</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return streamIds &amp; streamId</span></td></tr><tr><td colspan="3"><b>Events.streamIds events POST /events when using &quot;streamIds&quot; </b></td></tr><tr><td><test id="VXMG"><code>VXMG</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return streamIds &amp; streamId containing the first one</span></td></tr><tr><td><test id="2QZF"><code>2QZF</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must clean duplicate streamIds</span></td></tr><tr><td><test id="NY0E"><code>NY0E</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must forbid providing an unknown streamId</span></td></tr><tr><td><test id="6Z2D"><code>6Z2D</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must forbid creating an event in multiple streams, if a contribute permission is missing on at least one stream</span></td></tr><tr><td colspan="3"><b>Events.streamIds events PUT /events/:id </b></td></tr><tr><td><test id="BBBX"><code>BBBX</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return streamIds &amp; streamId containing the first one (if many)</span></td></tr><tr><td><test id="42KZ"><code>42KZ</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must allow modification, if you have a contribute permission on at least 1 streamId</span></td></tr><tr><td><test id="Q5P7"><code>Q5P7</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must forbid to provide both streamId and streamIds</span></td></tr><tr><td colspan="3"><b>Events.streamIds events PUT /events/:id when modifying streamIds </b></td></tr><tr><td><test id="TQHG"><code>TQHG</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must forbid providing an unknown streamId</span></td></tr><tr><td><test id="6Q8B"><code>6Q8B</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must allow streamId addition, if you have a contribute permission for it</span></td></tr><tr><td><test id="MFF7"><code>MFF7</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must forbid streamId addition, if you don&#x2019;t have a contribute permission for it</span></td></tr><tr><td><test id="83N6"><code>83N6</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must allow streamId deletion, if you have a contribute permission for it</span></td></tr><tr><td><test id="JLS5"><code>JLS5</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must forbid streamId deletion, if you have read but no contribute permission for it</span></td></tr><tr><td colspan="3"><b>Events.streamIds events POST /event/start </b></td></tr><tr><td><test id="FOM3"><code>FOM3</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return a 410 (Gone)</span></td></tr><tr><td colspan="3"><b>Events.streamIds events POST /event/stop </b></td></tr><tr><td><test id="BR33"><code>BR33</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return a 410 (Gone)</span></td></tr><tr><td colspan="3"><b>Events.streamIds events DELETE /events/:id </b></td></tr><tr><td><test id="BPL0"><code>BPL0</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return streamIds &amp; streamId containing the first one (if many)</span></td></tr><tr><td><test id="T5ZY"><code>T5ZY</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must allow trashing, if you have a contribute permission on at least 1 streamId</span></td></tr><tr><td><test id="2G32"><code>2G32</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must allow deletion, if you have a contribute permission on at least 1 streamId</span></td></tr><tr><td><test id="6W5Y"><code>6W5Y</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must forbid trashing, if you don&#x2019;t have a contribute permission on at least 1 streamId</span></td></tr><tr><td colspan="3"><b>Events.streamIds events GET /events/:id/:fileId </b></td></tr><tr><td><test id="JNS8"><code>JNS8</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should retrieve the attachment with the app token</span></td></tr><tr><td><test id="NH1O"><code>NH1O</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should retrieve the attachment with the shared access readToken</span></td></tr><tr><td><test id="9KAF"><code>9KAF</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should retrieve the attachment with the shared access token</span></td></tr><tr><td><test id="9MEL"><code>9MEL</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should retrieve the attachment with the shared access readToken</span></td></tr><tr><td colspan="3"><b>Events.streamIds streams POST /streams </b></td></tr><tr><td><test id="EGW2"><code>EGW2</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must forbid setting the &#x201C;singleActivity&#x201D; field</span></td></tr><tr><td colspan="3"><b>Events.streamIds streams PUT /streams/:id </b></td></tr><tr><td><test id="EY79"><code>EY79</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must forbid setting the &#x201C;singleActivity&#x201D; field</span></td></tr><tr><td colspan="3"><b>Events.streamIds streams DELETE /streams When the stream&apos;s event is part of at least another stream outside of its descendants when mergeEventsWithParent=false </b></td></tr><tr><td><test id="TWDG"><code>TWDG</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must not delete events, but remove the deleted streamId from their streamIds</span></td></tr><tr><td colspan="3"><b>Events.streamIds streams DELETE /streams When the event is part of the stream and its children when mergeEventsWithParent=false </b></td></tr><tr><td><test id="6SBU"><code>6SBU</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must delete the events</span></td></tr><tr><td colspan="3"><b>Events.streamIds streams DELETE /streams When the event is part of the stream and its children when mergeEventsWithParent=true </b></td></tr><tr><td><test id="2FRR"><code>2FRR</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must not delete events, but remove all streamIds and add its parentId</span></td></tr><tr><td colspan="3"><b>Events streaming with 1000 entries </b></td></tr><tr><td><test id="SE1K"><code>SE1K</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">Streams events</span></td></tr><tr><td colspan="3"><b>Events.get streams query Internal query helpers when transforming streams parameters </b></td></tr><tr><td><test id="D2B5"><code>D2B5</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must convert strings array to expanded array inside [{any: []}]</span></td></tr><tr><td><test id="JZWE"><code>JZWE</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must convert single string &#x201C;B&#x201D; to [{any: [&#x201C;B&#x201D;]}]</span></td></tr><tr><td><test id="8VV4"><code>8VV4</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must convert streams query with only &#x201C;any&#x201D; property to expanded streams query inside array [{any: []}])</span></td></tr><tr><td><test id="HFT2"><code>HFT2</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must convert streams query property &#x201C;all&#x201D; to &quot;and: [{any&#x2026;}, {any&#x2026;}]) with each containing expanded streamIds</span></td></tr><tr><td><test id="2W2K"><code>2W2K</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must accept two streams queries expanding them</span></td></tr><tr><td><test id="2EF9"><code>2EF9</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must convert streams query {any: &#x201C;*&#x201D;} to [{any: [all accessible streams]}]</span></td></tr><tr><td><test id="TUZT"><code>TUZT</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must convert streams query {any: [*], not: [&#x201C;A&#x201D;]} to [{any: [all accessible streams], [expanded &#x201C;A&#x201D;]}]</span></td></tr><tr><td><test id="NHGF"><code>NHGF</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must convert streams query {any: [*], all: [&#x201C;D&#x201D;], not: [&#x201C;A&#x201D;]} to [{any: [all accessible streams], and: [ any: [expanded &#x201C;D&#x201D;] , not: [expanded &#x201C;A&#x201D;]}]</span></td></tr><tr><td><test id="N3Q6"><code>N3Q6</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must convert {any: &#x201C;*&#x201D;, not: [&#x201C;A&#x201D;]} to [{any: [all accessible streams], not: [expanded &#x201C;A&#x201D;]}]</span></td></tr><tr><td><test id="L89B"><code>L89B</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return null if streams query is empty (because containing no accessible streams, here only trashed)</span></td></tr><tr><td colspan="3"><b>Events.get streams query Internal query helpers exception and errors </b></td></tr><tr><td><test id="9907"><code>9907</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">handles not existent stream {any: [&#x201C;Z&#x201D;]}</span></td></tr><tr><td><test id="IOLA"><code>IOLA</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must throw on malformed expressions</span></td></tr><tr><td colspan="3"><b>Events.get streams query Internal query helpers toMongoQuery() </b></td></tr><tr><td><test id="KKIH"><code>KKIH</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must convert to MongoDB including expansion</span></td></tr><tr><td><test id="4QMR"><code>4QMR</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must convert to MongoDB including with &#x201C;ALL&#x201D;</span></td></tr><tr><td><test id="NG7F"><code>NG7F</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must convert to MongoDB including expansion with &#x201C;NOT&#x201D;</span></td></tr><tr><td><test id="HC6X"><code>HC6X</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must convert to MongoDB including expansion with &#x201C;ALL&#x201D; and &#x201C;NOT&#x201D;</span></td></tr><tr><td><test id="1ZJU"><code>1ZJU</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must handle array of queries</span></td></tr><tr><td colspan="3"><b>Events.get streams query GET /events with streams queries </b></td></tr><tr><td><test id="NKH8"><code>NKH8</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must accept a simple string</span></td></tr><tr><td><test id="BW6Z"><code>BW6Z</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must accept array of strings</span></td></tr><tr><td><test id="HFA2"><code>HFA2</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must accept * (star) with a not without including items in trashed streams</span></td></tr><tr><td><test id="MMB0"><code>MMB0</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must accept * (star) with !B &amp;&amp; !E without including items in trashed streams</span></td></tr><tr><td><test id="VUER"><code>VUER</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return events in A &amp;&amp; E</span></td></tr><tr><td><test id="CBP2"><code>CBP2</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return events in A &amp;&amp; !B</span></td></tr><tr><td><test id="I19H"><code>I19H</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return events in A &amp;&amp; !D</span></td></tr><tr><td><test id="55HB"><code>55HB</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return events in A &amp;&amp; NOT-EQUAL D)</span></td></tr><tr><td><test id="O4DJ"><code>O4DJ</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return all events in B || (D &amp;&amp; !E)</span></td></tr><tr><td><test id="UJSB"><code>UJSB</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must accept an object in a batch call (instead of a stringified one)</span></td></tr><tr><td><test id="ENFE"><code>ENFE</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must accept a stringified object in a batch call</span></td></tr><tr><td colspan="3"><b>Events.get streams query GET /events with streams queries edge cases </b></td></tr><tr><td><test id="X8B1"><code>X8B1</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return an error on non-existing stream</span></td></tr><tr><td><test id="30NV"><code>30NV</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return error when provided a boolean instead of an expression</span></td></tr><tr><td><test id="YOJ9"><code>YOJ9</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return error when provided a null instead of an expression</span></td></tr><tr><td><test id="3X9I"><code>3X9I</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return an empty list when provided a trashed streamId</span></td></tr><tr><td colspan="3"><b>Events GET / </b></td></tr><tr><td><test id="WC8C"><code>WC8C</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return the last 20 non-trashed events (sorted descending) by default</span></td></tr><tr><td><test id="U8U9"><code>U8U9</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must only return events for the given streams (incl. sub-streams) when set</span></td></tr><tr><td><test id="S0M6"><code>S0M6</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return an error if some of the given streams do not exist</span></td></tr><tr><td><test id="R667"><code>R667</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must only return events with the given tag when set</span></td></tr><tr><td><test id="KNJY"><code>KNJY</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must only return events with any of the given tags when set</span></td></tr><tr><td><test id="QR4I"><code>QR4I</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must only return events of any of the given types when set</span></td></tr><tr><td><test id="TWP8"><code>TWP8</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must (unofficially) support a wildcard for event types</span></td></tr><tr><td><test id="7MOU"><code>7MOU</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must only return events in the given time period sorted ascending when set</span></td></tr><tr><td><test id="W5IT"><code>W5IT</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must take into account fromTime and toTime even if set to 0</span></td></tr><tr><td><test id="Y6SY"><code>Y6SY</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must take into account modifiedSince even if set to 0</span></td></tr><tr><td><test id="QNDP"><code>QNDP</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must properly exclude period events completed before the given period</span></td></tr><tr><td><test id="5UFW"><code>5UFW</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return ongoing events started before the given time period</span></td></tr><tr><td><test id="S9J4"><code>S9J4</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must only return events in the given paging range when set</span></td></tr><tr><td><test id="915E"><code>915E</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return only trashed events when requested</span></td></tr><tr><td><test id="6H0Z"><code>6H0Z</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return all events (trashed or not) when requested</span></td></tr><tr><td><test id="JZYF"><code>JZYF</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return only events modified since the given time when requested</span></td></tr><tr><td><test id="B766"><code>B766</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must include event deletions (since that time) when requested</span></td></tr><tr><td><test id="ESLZ"><code>ESLZ</code></test></td><td style="text-align: center;">&#x2753;</td><td><span class="type">must not keep event deletions past a certain time (cannot test because cannot force-run Mongo&#x2019;s TTL cleanup task)</span></td></tr><tr><td><test id="V72A"><code>V72A</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must only return running period event(s) when requested</span></td></tr><tr><td><test id="68IL"><code>68IL</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return an error if no access token is provided</span></td></tr><tr><td colspan="3"><b>Events GET /<event id>/<file id> </file></event></b></td></tr><tr><td><test id="F29M"><code>F29M</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return the attached file with the correct headers</span></td></tr><tr><td><test id="PP6G"><code>PP6G</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return readToken in attachments</span></td></tr><tr><td><test id="NL65"><code>NL65</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must accept a secure read token in the query string instead of the `&#x201C;Authorization&#x201D; header</span></td></tr><tr><td><test id="TN27"><code>TN27</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must allow a filename path suffix after the file id</span></td></tr><tr><td><test id="LOUB"><code>LOUB</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must allow any filename (including special characters)</span></td></tr><tr><td><test id="9NJ0"><code>9NJ0</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must refuse an invalid file read token</span></td></tr><tr><td><test id="9HNM"><code>9HNM</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must refuse auth via the regular &#x201C;auth&#x201D; query string parameter</span></td></tr><tr><td><test id="MMCZ"><code>MMCZ</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return a proper error if trying to get an unknown attachment</span></td></tr><tr><td colspan="3"><b>Events POST / </b></td></tr><tr><td><test id="1GR6"><code>1GR6</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must create an event with the sent data, returning it</span></td></tr><tr><td><test id="QSBV"><code>QSBV</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must set the event&#x2019;s time to &#x201C;now&#x201D; if missing</span></td></tr><tr><td><test id="6BVW"><code>6BVW</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must accept explicit null for optional fields</span></td></tr><tr><td><test id="D2TH"><code>D2TH</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must refuse events with no stream id</span></td></tr><tr><td><test id="WN86"><code>WN86</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return a correct error if an event with the same id already exists</span></td></tr><tr><td><test id="94PW"><code>94PW</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must not allow reuse of deleted ids (unlike streams)</span></td></tr><tr><td><test id="DRFA"><code>DRFA</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must only allow ids that are formatted like cuids</span></td></tr><tr><td><test id="O7Y2"><code>O7Y2</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must reject tags that are too long</span></td></tr><tr><td><test id="2885"><code>2885</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must fix the tags to an empty array if not set</span></td></tr><tr><td><test id="0IHM"><code>0IHM</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must try casting string event content to number if appropriate</span></td></tr><tr><td><test id="UL6Y"><code>UL6Y</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must not stop the running period event if the stream allows overlapping</span></td></tr><tr><td><test id="FZ4T"><code>FZ4T</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must validate the event&#x2019;s content if its type is known</span></td></tr><tr><td><test id="EL88"><code>EL88</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must not fail when validating the content if passing a string instead of an object</span></td></tr><tr><td><test id="JUM6"><code>JUM6</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return an error if the sent data is badly formatted</span></td></tr><tr><td><test id="5NEL"><code>5NEL</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return an error if the associated stream is unknown</span></td></tr><tr><td><test id="3S2T"><code>3S2T</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must allow the event&#x2019;s period overlapping existing periods when the stream allows it</span></td></tr><tr><td><test id="Q0L6"><code>Q0L6</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return an error if the assigned stream is trashed</span></td></tr><tr><td><test id="WUSC"><code>WUSC</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must not fail (500) when sending an array instead of an object</span></td></tr><tr><td colspan="3"><b>Events POST / (multipart content) </b></td></tr><tr><td><test id="4CUV"><code>4CUV</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must create a new event with the uploaded files</span></td></tr><tr><td><test id="HROI"><code>HROI</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must properly handle part names containing special chars (e.g. &#x201C;.&#x201D;, &#x201C;$&#x201D;)</span></td></tr><tr><td><test id="0QGV"><code>0QGV</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return an error if the non-file content part is not JSON</span></td></tr><tr><td><test id="R8ER"><code>R8ER</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return an error if there is more than one non-file content part</span></td></tr><tr><td colspan="3"><b>Events POST /<event id> (multipart content) </event></b></td></tr><tr><td><test id="ZI01"><code>ZI01</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must add the uploaded files to the event as attachments</span></td></tr><tr><td><test id="EUZM"><code>EUZM</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must add the uploaded files to the event without replacing existing attachments</span></td></tr><tr><td colspan="3"><b>Events GET /<id> </id></b></td></tr><tr><td><test id="8GSS"><code>8GSS</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">allows access at level=read</span></td></tr><tr><td><test id="IBO4"><code>IBO4</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">denies access without authorization</span></td></tr><tr><td colspan="3"><b>Events PUT /<id> </id></b></td></tr><tr><td><test id="4QRU"><code>4QRU</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must modify the event with the sent data</span></td></tr><tr><td><test id="6B05"><code>6B05</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must add/update/remove the specified client data fields without touching the others</span></td></tr><tr><td><test id="FM3G"><code>FM3G</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must accept explicit null for optional fields</span></td></tr><tr><td><test id="BS75"><code>BS75</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must validate the event&#x2019;s content if its type is known</span></td></tr><tr><td><test id="FU83"><code>FU83</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return an error if the event does not exist</span></td></tr><tr><td><test id="W2QL"><code>W2QL</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return an error if the sent data is badly formatted</span></td></tr><tr><td><test id="01B2"><code>01B2</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return an error if the associated stream is unknown</span></td></tr><tr><td><test id="CUM3"><code>CUM3</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must reject tags that are too long</span></td></tr><tr><td colspan="3"><b>Events PUT /<id> forbidden updates of protected fields </id></b></td></tr><tr><td><test id="L15U"><code>L15U</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must prevent update of protected fields and throw a forbidden error in strict mode</span></td></tr><tr><td><test id="6NZ7"><code>6NZ7</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must prevent update of protected fields and log a warning in non-strict mode</span></td></tr><tr><td colspan="3"><b>Events PUT HF/non-HF events </b></td></tr><tr><td><test id="Z7R1"><code>Z7R1</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">a normal event should not be updated to an hf-event</span></td></tr><tr><td><test id="Z7R2"><code>Z7R2</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">An hf-event should not be updated to a normal event</span></td></tr><tr><td colspan="3"><b>Events DELETE /<event id>/<file id> </file></event></b></td></tr><tr><td><test id="RW8M"><code>RW8M</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must delete the attachment (reference in event + file)</span></td></tr><tr><td><test id="ZLZN"><code>ZLZN</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return an error if not existing</span></td></tr><tr><td colspan="3"><b>Events DELETE /<id> </id></b></td></tr><tr><td><test id="AT5Y"><code>AT5Y</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must flag the event as trashed</span></td></tr><tr><td><test id="73CD"><code>73CD</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must delete the event when already trashed including all its attachments</span></td></tr><tr><td colspan="3"><b>Followed slices GET / </b></td></tr><tr><td><test id="TNKS"><code>TNKS</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return all followed slices (ordered by user name, then access token)</span></td></tr><tr><td><test id="U9M4"><code>U9M4</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must be forbidden to non-personal accesses</span></td></tr><tr><td colspan="3"><b>Followed slices POST / </b></td></tr><tr><td><test id="HVYA"><code>HVYA</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must create a new followed slice with the sent data, returning it</span></td></tr><tr><td><test id="BULL"><code>BULL</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return a correct error if the sent data is badly formatted</span></td></tr><tr><td><test id="GPZK"><code>GPZK</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return a correct error if the same followed slice (url and token) already exists</span></td></tr><tr><td><test id="RYNB"><code>RYNB</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return a correct error if a followed slice with the same name already exists</span></td></tr><tr><td colspan="3"><b>Followed slices PUT /<id> </id></b></td></tr><tr><td><test id="LM08"><code>LM08</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must modify the followed slice with the sent data</span></td></tr><tr><td><test id="QFGH"><code>QFGH</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return a correct error if the followed slice does not exist</span></td></tr><tr><td><test id="RUQE"><code>RUQE</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return a correct error if the sent data is badly formatted</span></td></tr><tr><td><test id="T256"><code>T256</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return a correct error if a followed slice with the same name already exists</span></td></tr><tr><td colspan="3"><b>Followed slices DELETE /<id> </id></b></td></tr><tr><td><test id="U7LY"><code>U7LY</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must delete the followed slice</span></td></tr><tr><td><test id="UATV"><code>UATV</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return a correct error if the followed slice does not exist</span></td></tr><tr><td colspan="3"><b>Methods/helpers/commonFunctions.js: catchForbiddenUpdate(schema) with streams schema </b></td></tr><tr><td><test id="DMGV"><code>DMGV</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must throw a forbidden error if &#x201C;ignoreProtectedFieldUpdates&#x201D; is null</span></td></tr><tr><td><test id="Z51K"><code>Z51K</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must throw a forbidden error if &#x201C;ignoreProtectedFieldUpdates&#x201D; is false</span></td></tr><tr><td><test id="EUKL"><code>EUKL</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must not throw any error if &#x201C;ignoreProtectedFieldUpdates&#x201D; is true but print a warn log</span></td></tr><tr><td colspan="3"><b>Methods/helpers/commonFunctions.js: catchForbiddenUpdate(schema) with events schema </b></td></tr><tr><td><test id="0RQM"><code>0RQM</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must throw a forbidden error if &#x201C;ignoreProtectedFieldUpdates&#x201D; is null</span></td></tr><tr><td><test id="6TK9"><code>6TK9</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must throw a forbidden error if &#x201C;ignoreProtectedFieldUpdates&#x201D; is false</span></td></tr><tr><td><test id="IJ4M"><code>IJ4M</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must not throw any error if &#x201C;ignoreProtectedFieldUpdates&#x201D; is true but print a warn log</span></td></tr><tr><td colspan="3"><b>Methods/helpers/commonFunctions.js: catchForbiddenUpdate(schema) with accesses schema </b></td></tr><tr><td><test id="GP6C"><code>GP6C</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must throw a forbidden error if &#x201C;ignoreProtectedFieldUpdates&#x201D; is null</span></td></tr><tr><td><test id="MUC0"><code>MUC0</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must throw a forbidden error if &#x201C;ignoreProtectedFieldUpdates&#x201D; is false</span></td></tr><tr><td><test id="QGDA"><code>QGDA</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must not throw any error if &#x201C;ignoreProtectedFieldUpdates&#x201D; is true but print a warn log</span></td></tr><tr><td colspan="3"><b>Auth /login </b></td></tr><tr><td><test id="2CV5"><code>2CV5</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must authenticate the given credentials, open a session and return the access token</span></td></tr><tr><td><test id="68SH"><code>68SH</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return expired</span></td></tr><tr><td><test id="5UMP"><code>5UMP</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must reuse the current session if already open</span></td></tr><tr><td><test id="509A"><code>509A</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must accept &#x201C;wildcarded&#x201D; app ids and origins</span></td></tr><tr><td><test id="ADL4"><code>ADL4</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must accept &#x201C;no origin&#x201D; (i.e. not a CORS request) if authorized</span></td></tr><tr><td><test id="A7JL"><code>A7JL</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must also accept &#x201C;referer&#x201D; in place of &#x201C;origin&#x201D; (e.g. some browsers do not provide &#x201C;origin&#x201D;)</span></td></tr><tr><td><test id="IKNM"><code>IKNM</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must also accept &#x201C;referer&#x201D; in place of &#x201C;origin&#x201D; (e.g. some browsers do not provide &#x201C;origin&#x201D;)</span></td></tr><tr><td><test id="1TI6"><code>1TI6</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must not be case-sensitive for the username</span></td></tr><tr><td><test id="L7JQ"><code>L7JQ</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return a correct error when the local credentials are missing or invalid</span></td></tr><tr><td><test id="4AQR"><code>4AQR</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return a correct error if the app id is missing or untrusted</span></td></tr><tr><td><test id="NDB0"><code>NDB0</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return a correct error if the origin is missing or does not match the app id</span></td></tr><tr><td><test id="FMJH"><code>FMJH</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must support concurrent login request, saving only the last token that is written in the storage</span></td></tr><tr><td><test id="9WHP"><code>9WHP</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must not leak _private object from Result</span></td></tr><tr><td colspan="3"><b>Auth /login when we log into a temporary log file </b></td></tr><tr><td><test id="C03J"><code>C03J</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must replace the password in the logs by (hidden) when an error occurs</span></td></tr><tr><td><test id="G0YT"><code>G0YT</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must not mention the password in the logs when none is provided</span></td></tr><tr><td colspan="3"><b>Auth /logout </b></td></tr><tr><td><test id="6W5M"><code>6W5M</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must terminate the access session and fail to logout a second time (session already expired)</span></td></tr><tr><td><test id="E2MD"><code>E2MD</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">(or any request) must alternatively accept the access token in the query string</span></td></tr><tr><td colspan="3"><b>Auth SSO support </b></td></tr><tr><td><test id="TIDW"><code>TIDW</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">GET /who-am-i must return a 410 as it has been removed</span></td></tr><tr><td colspan="3"><b>Mailing helper methods </b></td></tr><tr><td><test id="HGVD"><code>HGVD</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should throw an error if mailing method is invalid</span></td></tr><tr><td><test id="OKQ2"><code>OKQ2</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should throw an error if mailing method is missing</span></td></tr><tr><td colspan="3"><b>Mailing helper methods using Mandrill validating request body </b></td></tr><tr><td><test id="GU60"><code>GU60</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should not be empty</span></td></tr><tr><td><test id="8JJU"><code>8JJU</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should contain a valid auth key</span></td></tr><tr><td><test id="G906"><code>G906</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should contain a valid recipient</span></td></tr><tr><td><test id="KBE0"><code>KBE0</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should contain a valid substitution of variables</span></td></tr><tr><td><test id="2ABY"><code>2ABY</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should contain valid tags</span></td></tr><tr><td colspan="3"><b>Mailing helper methods using Microservice validating request body </b></td></tr><tr><td><test id="LHCB"><code>LHCB</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should not be empty</span></td></tr><tr><td><test id="9UEU"><code>9UEU</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should contain a valid auth key</span></td></tr><tr><td><test id="1Y6K"><code>1Y6K</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should contain a valid recipient</span></td></tr><tr><td><test id="UT8M"><code>UT8M</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should contain a valid substitution of variables</span></td></tr><tr><td colspan="3"><b>ArrayStream </b></td></tr><tr><td><test id="TWNI"><code>TWNI</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return an array preceded by a comma when called with parameter isFirst=false</span></td></tr><tr><td colspan="3"><b>ArrayStream testing around the array size limit </b></td></tr><tr><td><test id="U21Z"><code>U21Z</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return a valid array when receiving limit-3 items</span></td></tr><tr><td><test id="MKNL"><code>MKNL</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return a valid array when receiving limit-2 items</span></td></tr><tr><td><test id="MUPF"><code>MUPF</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return a valid array when receiving limit-1 items</span></td></tr><tr><td><test id="CM4Q"><code>CM4Q</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return a valid array when receiving limit+0 items</span></td></tr><tr><td><test id="F8S9"><code>F8S9</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return a valid array when receiving limit+1 items</span></td></tr><tr><td><test id="6T4V"><code>6T4V</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return a valid array when receiving limit+2 items</span></td></tr><tr><td><test id="QBOS"><code>QBOS</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return a valid array when receiving limit+3 items</span></td></tr><tr><td colspan="3"><b>ArrayStream testing with small number of items </b></td></tr><tr><td><test id="69F6"><code>69F6</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return a valid array when receiving 0 item(s)</span></td></tr><tr><td><test id="BJRT"><code>BJRT</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return a valid array when receiving 1 item(s)</span></td></tr><tr><td><test id="YJI0"><code>YJI0</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return a valid array when receiving 2 item(s)</span></td></tr><tr><td><test id="EKQQ"><code>EKQQ</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return a valid array when receiving 3 item(s)</span></td></tr><tr><td colspan="3"><b>DrainStream </b></td></tr><tr><td><test id="AFWR"><code>AFWR</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must be fed objects and return them in the callback</span></td></tr><tr><td><test id="23UQ"><code>23UQ</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return an error when the provided limit is exceeded</span></td></tr><tr><td colspan="3"><b>Permissions create-only level Permissions - create-only level Accesses GET / when using an access with a &quot;create-only&quot; permissions </b></td></tr><tr><td><test id="HOTO"><code>HOTO</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return an empty list</span></td></tr><tr><td colspan="3"><b>Permissions create-only level Permissions - create-only level Accesses POST / when using an access with a &quot;manage&quot; permission </b></td></tr><tr><td><test id="IBXP"><code>IBXP</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should forbid to create accesses with &#x201C;create-only&#x201D; permissions for tags</span></td></tr><tr><td colspan="3"><b>Permissions create-only level Permissions - create-only level Accesses POST / when using an access with a &quot;create-only&quot; permission </b></td></tr><tr><td><test id="X4Z1"><code>X4Z1</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should allow to create an access with a &#x201C;create-only&#x201D; permissions</span></td></tr><tr><td><test id="FEGI"><code>FEGI</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should forbid to create an access with a &#x201C;read&#x201D; level permission permission</span></td></tr><tr><td><test id="SL4P"><code>SL4P</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should forbid to create an access with a &#x201C;contribute&#x201D; level permission</span></td></tr><tr><td><test id="ZX1M"><code>ZX1M</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should forbid to create an access with a &#x201C;manage&#x201D; level permission</span></td></tr><tr><td colspan="3"><b>Permissions create-only level Permissions - create-only level Accesses PUT / </b></td></tr><tr><td><test id="1WXJ"><code>1WXJ</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should forbid updating accesses</span></td></tr><tr><td colspan="3"><b>Permissions create-only level Permissions - create-only level Accesses DELETE / </b></td></tr><tr><td><test id="G6IP"><code>G6IP</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should forbid deleting accesses</span></td></tr><tr><td colspan="3"><b>Permissions create-only level Events GET / </b></td></tr><tr><td><test id="CKF3"><code>CKF3</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return an error list when fetching explicitly &#x201C;create-only&#x201D; streams</span></td></tr><tr><td><test id="V4KJ"><code>V4KJ</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return events when fetching &#x201C;create-only&#x201D; streams that are children of &#x201C;read&#x201D; streams</span></td></tr><tr><td><test id="SYRW"><code>SYRW</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return events when fetching &#x201C;create-only&#x201D; streams that are children of &#x201C;contribute&#x201D; streams</span></td></tr><tr><td colspan="3"><b>Permissions create-only level Events GET /:id </b></td></tr><tr><td><test id="N61I"><code>N61I</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should forbid fetching an event when using a &#x201C;create-only&#x201D; permission</span></td></tr><tr><td colspan="3"><b>Permissions create-only level Events POST / </b></td></tr><tr><td><test id="0G8I"><code>0G8I</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should forbid creating events for out of scope streams</span></td></tr><tr><td><test id="F406"><code>F406</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should allow creating events for &#x201C;create-only&#x201D; streams</span></td></tr><tr><td colspan="3"><b>Permissions create-only level Events PUT / </b></td></tr><tr><td><test id="V0UO"><code>V0UO</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should forbid updating events for &#x201C;create-only&#x201D; streams</span></td></tr><tr><td colspan="3"><b>Permissions create-only level Events DELETE / </b></td></tr><tr><td><test id="5OUT"><code>5OUT</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should forbid deleting events for &#x201C;create-only&#x201D; streams</span></td></tr><tr><td colspan="3"><b>Permissions create-only level Events attachments GET /events/{id}/{fileId}[/{fileName}] </b></td></tr><tr><td><test id="VTU4"><code>VTU4</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should be forbidden</span></td></tr><tr><td colspan="3"><b>Permissions create-only level Events attachments POST /events/{id} </b></td></tr><tr><td><test id="8J8O"><code>8J8O</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should be forbidden</span></td></tr><tr><td colspan="3"><b>Permissions create-only level Events attachments DELETE /events/{id}/{fileId} </b></td></tr><tr><td><test id="GY6M"><code>GY6M</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should be forbidden</span></td></tr><tr><td colspan="3"><b>Permissions create-only level Streams GET / </b></td></tr><tr><td><test id="J12F"><code>J12F</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should only return streams for which permissions are defined</span></td></tr><tr><td colspan="3"><b>Permissions create-only level Streams POST / </b></td></tr><tr><td><test id="TFWF"><code>TFWF</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should forbid creating child streams in &#x201C;create-only&#x201D; streams</span></td></tr><tr><td colspan="3"><b>Permissions create-only level Streams PUT / </b></td></tr><tr><td><test id="PCO8"><code>PCO8</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should forbid updating &#x201C;create-only&#x201D; streams</span></td></tr><tr><td colspan="3"><b>Permissions create-only level Streams DELETE / </b></td></tr><tr><td><test id="PCO9"><code>PCO9</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should forbid deleting &#x201C;create-only&#x201D; streams</span></td></tr><tr><td colspan="3"><b>Permissions create-only level Webhooks CREATE / </b></td></tr><tr><td><test id="3AE9"><code>3AE9</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should allow creating webhooks</span></td></tr><tr><td colspan="3"><b>Access permissions - Tags stream-only </b></td></tr><tr><td><test id="QA3G"><code>QA3G</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should not be allowed to create tag-only accesses</span></td></tr><tr><td><test id="HT0Z"><code>HT0Z</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should not be able to add tags even if a subset of streams are kept</span></td></tr><tr><td colspan="3"><b>Access permissions - Tags tag-only </b></td></tr><tr><td><test id="HL9C"><code>HL9C</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should not be able to create accesses with additional tags</span></td></tr><tr><td><test id="88S2"><code>88S2</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should not be able to create stream-based accesses</span></td></tr><tr><td colspan="3"><b>Access permissions - Tags mixed </b></td></tr><tr><td><test id="TTUD"><code>TTUD</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should not be able to create tag-only accesses</span></td></tr><tr><td><test id="4UZ1"><code>4UZ1</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should not be able to create accesses with a subset of streams and additional tags</span></td></tr><tr><td><test id="E6Y5"><code>E6Y5</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should be able to create an access with a subset of streams and less tags</span></td></tr><tr><td colspan="3"><b>Access permissions Events </b></td></tr><tr><td><test id="1AK1"><code>1AK1</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type"><code>get</code> must only return events in accessible streams</span></td></tr><tr><td><test id="NKI5"><code>NKI5</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type"><code>get</code> must return all events when permissions are defined for &#x201C;all streams&#x201D; (*)</span></td></tr><tr><td><test id="FZ97"><code>FZ97</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type"><code>get</code> must only return events with accessible tags</span></td></tr><tr><td><test id="1DH6"><code>1DH6</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type"><code>get</code> must only return events in accessible streams <em>and</em> with accessible tags when both are defined</span></td></tr><tr><td><test id="5360"><code>5360</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type"><code>get</code> (or any request) must alternatively accept the access token in the query string</span></td></tr><tr><td><test id="KTM1"><code>KTM1</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must forbid getting an attached file if permissions are insufficient</span></td></tr><tr><td><test id="2773"><code>2773</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must forbid creating events for &#x2018;read-only&#x2019; streams</span></td></tr><tr><td><test id="Y0TI"><code>Y0TI</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must forbid creating events for &#x2018;read-only&#x2019; tags</span></td></tr><tr><td><test id="ZKZZ"><code>ZKZZ</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must forbid updating events for &#x2018;read-only&#x2019; streams</span></td></tr><tr><td><test id="9LKQ"><code>9LKQ</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must forbid updating events for &#x2018;read-only&#x2019; tags</span></td></tr><tr><td><test id="4H62"><code>4H62</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must forbid deleting events for &#x2018;read-only&#x2019; streams</span></td></tr><tr><td><test id="GBKV"><code>GBKV</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must forbid deleting events for &#x2018;read-only&#x2019; tags</span></td></tr><tr><td><test id="Y38T"><code>Y38T</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must allow creating events for &#x2018;contribute&#x2019; streams</span></td></tr><tr><td><test id="NIDD"><code>NIDD</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must allow creating events for &#x2018;contribute&#x2019; tags</span></td></tr><tr><td colspan="3"><b>Access permissions Streams </b></td></tr><tr><td><test id="BSFP"><code>BSFP</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type"><code>get</code> must only return streams for which permissions are defined</span></td></tr><tr><td><test id="R4IA"><code>R4IA</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must forbid creating child streams in &#x2018;read-only&#x2019; streams</span></td></tr><tr><td><test id="KHI7"><code>KHI7</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must forbid creating child streams in &#x2018;contribute&#x2019; streams</span></td></tr><tr><td><test id="MCDP"><code>MCDP</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must forbid deleting child streams in &#x2018;contribute&#x2019; streams</span></td></tr><tr><td><test id="7B6P"><code>7B6P</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must forbid updating &#x2018;contribute&#x2019; streams</span></td></tr><tr><td><test id="RG5R"><code>RG5R</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must forbid deleting &#x2018;contribute&#x2019; streams</span></td></tr><tr><td><test id="O1AZ"><code>O1AZ</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must allow creating child streams in &#x2018;managed&#x2019; streams</span></td></tr><tr><td><test id="5QPU"><code>5QPU</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must forbid moving streams into non-&#x2018;managed&#x2019; parent streams</span></td></tr><tr><td><test id="KP1Q"><code>KP1Q</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must allow deleting child streams in &#x2018;managed&#x2019; streams</span></td></tr><tr><td><test id="HHSS"><code>HHSS</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must recursively apply permissions to the streams&#x2019; child streams</span></td></tr><tr><td><test id="NJ1A"><code>NJ1A</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must allow access to all streams when no specific stream permissions are defined</span></td></tr><tr><td><test id="ZGK0"><code>ZGK0</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must allow access to all streams when only tag permissions are defined</span></td></tr><tr><td><test id="UYB2"><code>UYB2</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must only allow access to set streams when both tag and stream permissions are defined</span></td></tr><tr><td colspan="3"><b>Access permissions Auth and change tracking </b></td></tr><tr><td><test id="YE49"><code>YE49</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must handle optional caller id in auth (in addition to token)</span></td></tr><tr><td colspan="3"><b>Access permissions Auth and change tracking custom auth step (e.g. to validate/parse caller id) </b></td></tr><tr><td><test id="IA9K"><code>IA9K</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must be supported and deny access when failing</span></td></tr><tr><td><test id="H58R"><code>H58R</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must allow access when successful</span></td></tr><tr><td><test id="H58Z"><code>H58Z</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must allow access whith &#x201C;callerid&#x201D; headers</span></td></tr><tr><td><test id="ISE4"><code>ISE4</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must fail properly (i.e. not granting access) when the custom function crashes</span></td></tr><tr><td><test id="P4OM"><code>P4OM</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must validate the custom function at startup time</span></td></tr><tr><td colspan="3"><b>Profile (app) GET /public </b></td></tr><tr><td><test id="FWG1"><code>FWG1</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return publicly shared key-value profile info</span></td></tr><tr><td colspan="3"><b>Profile (app) GET /app </b></td></tr><tr><td><test id="13DL"><code>13DL</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return key-value settings for the current app</span></td></tr><tr><td><test id="J37U"><code>J37U</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must refuse requests with a shared access token</span></td></tr><tr><td><test id="GYBN"><code>GYBN</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must refuse requests with a personal access token</span></td></tr><tr><td colspan="3"><b>Profile (app) PUT /app </b></td></tr><tr><td><test id="1QFB"><code>1QFB</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must add/update/remove the specified keys without touching the others</span></td></tr><tr><td><test id="0H9A"><code>0H9A</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must refuse requests with a shared access token</span></td></tr><tr><td><test id="JC5F"><code>JC5F</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must refuse requests with a personal access token</span></td></tr><tr><td colspan="3"><b>Profile (personal) GET </b></td></tr><tr><td><test id="J61R"><code>J61R</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">/public must return publicly shared key-value profile info</span></td></tr><tr><td><test id="HIMS"><code>HIMS</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">/private must return private key-value profile info</span></td></tr><tr><td><test id="36B1"><code>36B1</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return an appropriate error for other paths</span></td></tr><tr><td><test id="FUJA"><code>FUJA</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">&#x201C;private&#x201D; must be forbidden to non-personal accesses</span></td></tr><tr><td colspan="3"><b>Profile (personal) PUT </b></td></tr><tr><td><test id="M28R"><code>M28R</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">/public must add/update/remove the specified keys without touching the others</span></td></tr><tr><td><test id="WU9C"><code>WU9C</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">/private must add/update/remove the specified keys without touching the others</span></td></tr><tr><td><test id="2AS6"><code>2AS6</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must create the profile if not existing</span></td></tr><tr><td><test id="Q99E"><code>Q99E</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return an appropriate error for other paths</span></td></tr><tr><td><test id="T565"><code>T565</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must be forbidden to non-personal accesses</span></td></tr><tr><td colspan="3"><b>Registration: cluster POST /users (create user) when a user with the same username (not email) already exists in core but not in register </b></td></tr><tr><td><test id="QV8Z"><code>QV8Z</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should respond with status 201</span></td></tr><tr><td><test id="TCOM"><code>TCOM</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should respond with the username and apiEndpoint</span></td></tr><tr><td><test id="7QB6"><code>7QB6</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should send the right data to register</span></td></tr><tr><td><test id="A2EM"><code>A2EM</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should replace first user events in the storage</span></td></tr><tr><td colspan="3"><b>Registration: cluster POST /users (create user) when a user with the same username/email already exists in core but not in register </b></td></tr><tr><td><test id="GRAW"><code>GRAW</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should respond with status 201</span></td></tr><tr><td><test id="AY44"><code>AY44</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should respond with the username and apiEndpoint (TODO)</span></td></tr><tr><td><test id="ZHYX"><code>ZHYX</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should send the right data to register</span></td></tr><tr><td colspan="3"><b>Registration: cluster POST /users (create user) when the username exists in register </b></td></tr><tr><td><test id="NUC9"><code>NUC9</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should respond with status 409</span></td></tr><tr><td><test id="X1IA"><code>X1IA</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should respond with the correct error</span></td></tr><tr><td><test id="JJJY"><code>JJJY</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should send the right data to register</span></td></tr><tr><td colspan="3"><b>Registration: cluster POST /users (create user) when the email exists in register </b></td></tr><tr><td><test id="SJXN"><code>SJXN</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should respond with status 409</span></td></tr><tr><td><test id="U0ZN"><code>U0ZN</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should respond with the correct error</span></td></tr><tr><td><test id="2UNK"><code>2UNK</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should send the right data to register</span></td></tr><tr><td colspan="3"><b>Registration: cluster POST /users (create user) when the user and email exist in register </b></td></tr><tr><td><test id="LUC6"><code>LUC6</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should respond with status 409</span></td></tr><tr><td><test id="XIN8"><code>XIN8</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should respond with the correct error</span></td></tr><tr><td><test id="OIRY"><code>OIRY</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should send the right data to register</span></td></tr><tr><td colspan="3"><b>Registration: cluster POST /users (create user) when there is a simultaneous registration </b></td></tr><tr><td><test id="I0HG"><code>I0HG</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should respond with status 409</span></td></tr><tr><td><test id="QFVZ"><code>QFVZ</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should respond with the correct error</span></td></tr><tr><td><test id="MMG9"><code>MMG9</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should send the right data to register</span></td></tr><tr><td colspan="3"><b>Registration: cluster POST /users (create user) when invitationTokens are undefined and a random string is provided as &quot;invitationToken&quot; </b></td></tr><tr><td><test id="CMOV"><code>CMOV</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should respond with status 201</span></td></tr><tr><td><test id="F0MO"><code>F0MO</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should send the right data to register</span></td></tr><tr><td colspan="3"><b>Registration: cluster POST /users (create user) when invitationTokens are undefined and &quot;invitationToken&quot; is missing </b></td></tr><tr><td><test id="LOIB"><code>LOIB</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should respond with status 201</span></td></tr><tr><td><test id="5O4Q"><code>5O4Q</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should send the right data to register</span></td></tr><tr><td colspan="3"><b>Registration: cluster POST /users (create user) when invitationTokens are defined when a valid one is provided </b></td></tr><tr><td><test id="Z2ZY"><code>Z2ZY</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should respond with status 201</span></td></tr><tr><td><test id="DIFS"><code>DIFS</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should send the right data to register</span></td></tr><tr><td colspan="3"><b>Registration: cluster POST /users (create user) when invitationTokens are defined when an invalid one is provided </b></td></tr><tr><td><test id="4GON"><code>4GON</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should respond with status 400</span></td></tr><tr><td><test id="ZBYW"><code>ZBYW</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should send the right data to register</span></td></tr><tr><td colspan="3"><b>Registration: cluster POST /users (create user) when invitationTokens are set to [] (forbidden creation) when any string is provided </b></td></tr><tr><td><test id="CX9N"><code>CX9N</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should respond with status 400</span></td></tr><tr><td><test id="IH6K"><code>IH6K</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should send the right data to register</span></td></tr><tr><td colspan="3"><b>Registration: cluster POST /users (create user) when custom account streams validation exists when email is set as required and it is not set in the request </b></td></tr><tr><td><test id="UMWB"><code>UMWB</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should respond with status 400</span></td></tr><tr><td><test id="8RDA"><code>8RDA</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should respond with the correct error</span></td></tr><tr><td colspan="3"><b>Registration: cluster POST /users (create user) when custom account streams validation exists when field does not match custom validation settings </b></td></tr><tr><td><test id="8W22"><code>8W22</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should respond with status 400</span></td></tr><tr><td><test id="GBKD"><code>GBKD</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should respond with the correct error</span></td></tr><tr><td colspan="3"><b>[BMM2] registration: DNS-less POST /users when given valid input </b></td></tr><tr><td><test id="KB3T"><code>KB3T</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should respond with status 201</span></td></tr><tr><td><test id="VDA8"><code>VDA8</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should respond with a username and apiEndpoint in the request body</span></td></tr><tr><td><test id="LPLP"><code>LPLP</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">Valid access token exists in the response</span></td></tr><tr><td><test id="M5XB"><code>M5XB</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should store all the fields</span></td></tr><tr><td colspan="3"><b>[BMM2] registration: DNS-less POST /users Schema validation when given an invalid username parameter that is too short </b></td></tr><tr><td><test id="3Q1H"><code>3Q1H</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should respond with status 400</span></td></tr><tr><td><test id="M6CD"><code>M6CD</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should respond with the correct error message</span></td></tr><tr><td colspan="3"><b>[BMM2] registration: DNS-less POST /users Schema validation when given an invalid username parameter that is too long </b></td></tr><tr><td><test id="WG46"><code>WG46</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should respond with status 400</span></td></tr><tr><td><test id="MST7"><code>MST7</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should respond with the correct error message</span></td></tr><tr><td colspan="3"><b>[BMM2] registration: DNS-less POST /users Schema validation when given an invalid username parameter that has invalid characters </b></td></tr><tr><td><test id="TL2W"><code>TL2W</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should respond with status 400</span></td></tr><tr><td><test id="TSC6"><code>TSC6</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should respond with the correct error message</span></td></tr><tr><td colspan="3"><b>[BMM2] registration: DNS-less POST /users Schema validation when given an invalid username parameter that has an invalid type </b></td></tr><tr><td><test id="XTD0"><code>XTD0</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should respond with status 400</span></td></tr><tr><td><test id="EIKE"><code>EIKE</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should respond with the correct error message</span></td></tr><tr><td colspan="3"><b>[BMM2] registration: DNS-less POST /users Schema validation when given an invalid username parameter that is null </b></td></tr><tr><td><test id="JQ7V"><code>JQ7V</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should respond with status 400</span></td></tr><tr><td><test id="G81N"><code>G81N</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should respond with the correct error message</span></td></tr><tr><td colspan="3"><b>[BMM2] registration: DNS-less POST /users Schema validation when given an invalid password parameter that is too short </b></td></tr><tr><td><test id="FSE9"><code>FSE9</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should respond with status 400</span></td></tr><tr><td><test id="OYZM"><code>OYZM</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should respond with the correct error message</span></td></tr><tr><td colspan="3"><b>[BMM2] registration: DNS-less POST /users Schema validation when given an invalid password parameter that is too long </b></td></tr><tr><td><test id="KJGF"><code>KJGF</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should respond with status 400</span></td></tr><tr><td><test id="LQWX"><code>LQWX</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should respond with the correct error message</span></td></tr><tr><td colspan="3"><b>[BMM2] registration: DNS-less POST /users Schema validation when given an invalid password parameter that has an invalid type </b></td></tr><tr><td><test id="SBCX"><code>SBCX</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should respond with status 400</span></td></tr><tr><td><test id="XFG4"><code>XFG4</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should respond with the correct error message</span></td></tr><tr><td colspan="3"><b>[BMM2] registration: DNS-less POST /users Schema validation when given an invalid password parameter that is null </b></td></tr><tr><td><test id="T56V"><code>T56V</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should respond with status 400</span></td></tr><tr><td><test id="MP5F"><code>MP5F</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should respond with the correct error message</span></td></tr><tr><td colspan="3"><b>[BMM2] registration: DNS-less POST /users Schema validation when given an invalid email parameter that is too long </b></td></tr><tr><td><test id="S8U8"><code>S8U8</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should respond with status 400</span></td></tr><tr><td><test id="1JN8"><code>1JN8</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should respond with the correct error message</span></td></tr><tr><td colspan="3"><b>[BMM2] registration: DNS-less POST /users Schema validation when given an invalid email parameter that has an invalid type </b></td></tr><tr><td><test id="GV6I"><code>GV6I</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should respond with status 400</span></td></tr><tr><td><test id="6OX5"><code>6OX5</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should respond with the correct error message</span></td></tr><tr><td colspan="3"><b>[BMM2] registration: DNS-less POST /users Schema validation when given an invalid email parameter that is null </b></td></tr><tr><td><test id="6SID"><code>6SID</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should respond with status 400</span></td></tr><tr><td><test id="PJY5"><code>PJY5</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should respond with the correct error message</span></td></tr><tr><td colspan="3"><b>[BMM2] registration: DNS-less POST /users Schema validation when given an invalid appId parameter that is too short </b></td></tr><tr><td><test id="5P2E"><code>5P2E</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should respond with status 400</span></td></tr><tr><td><test id="I9QE"><code>I9QE</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should respond with the correct error message</span></td></tr><tr><td colspan="3"><b>[BMM2] registration: DNS-less POST /users Schema validation when given an invalid appId parameter that is too long </b></td></tr><tr><td><test id="AQFL"><code>AQFL</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should respond with status 400</span></td></tr><tr><td><test id="HI9V"><code>HI9V</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should respond with the correct error message</span></td></tr><tr><td colspan="3"><b>[BMM2] registration: DNS-less POST /users Schema validation when given an invalid appId parameter that has an invalid type </b></td></tr><tr><td><test id="4XCV"><code>4XCV</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should respond with status 400</span></td></tr><tr><td><test id="8G9V"><code>8G9V</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should respond with the correct error message</span></td></tr><tr><td colspan="3"><b>[BMM2] registration: DNS-less POST /users Schema validation when given an invalid appId parameter that is null </b></td></tr><tr><td><test id="K4LE"><code>K4LE</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should respond with status 400</span></td></tr><tr><td><test id="NZ4J"><code>NZ4J</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should respond with the correct error message</span></td></tr><tr><td colspan="3"><b>[BMM2] registration: DNS-less POST /users Schema validation when given an invalid invitationToken parameter that has an invalid type </b></td></tr><tr><td><test id="CYW6"><code>CYW6</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should respond with status 400</span></td></tr><tr><td><test id="79A5"><code>79A5</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should respond with the correct error message</span></td></tr><tr><td colspan="3"><b>[BMM2] registration: DNS-less POST /users Schema validation when given an invalid invitationToken parameter that is null </b></td></tr><tr><td><test id="UEKC"><code>UEKC</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should respond with status 400</span></td></tr><tr><td><test id="FJ51"><code>FJ51</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should respond with the correct error message</span></td></tr><tr><td colspan="3"><b>[BMM2] registration: DNS-less POST /users Schema validation when given an invalid referer parameter that is too long </b></td></tr><tr><td><test id="5BNJ"><code>5BNJ</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should respond with status 400</span></td></tr><tr><td><test id="V51E"><code>V51E</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should respond with the correct error message</span></td></tr><tr><td colspan="3"><b>[BMM2] registration: DNS-less POST /users Schema validation when given an invalid referer parameter that has an invalid type </b></td></tr><tr><td><test id="J1DW"><code>J1DW</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should respond with status 400</span></td></tr><tr><td><test id="AFUH"><code>AFUH</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should respond with the correct error message</span></td></tr><tr><td colspan="3"><b>[BMM2] registration: DNS-less POST /users Schema validation when given an invalid language parameter that is too short </b></td></tr><tr><td><test id="UPWY"><code>UPWY</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should respond with status 400</span></td></tr><tr><td><test id="QYT8"><code>QYT8</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should respond with the correct error message</span></td></tr><tr><td colspan="3"><b>[BMM2] registration: DNS-less POST /users Schema validation when given an invalid language parameter that is too long </b></td></tr><tr><td><test id="GDMW"><code>GDMW</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should respond with status 400</span></td></tr><tr><td><test id="LP4S"><code>LP4S</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should respond with the correct error message</span></td></tr><tr><td colspan="3"><b>[BMM2] registration: DNS-less POST /users Schema validation when given an invalid language parameter that has an invalid type </b></td></tr><tr><td><test id="R1LT"><code>R1LT</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should respond with status 400</span></td></tr><tr><td><test id="E95A"><code>E95A</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should respond with the correct error message</span></td></tr><tr><td colspan="3"><b>[BMM2] registration: DNS-less POST /users Schema validation when given an invalid language parameter that is null </b></td></tr><tr><td><test id="RHT6"><code>RHT6</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should respond with status 400</span></td></tr><tr><td><test id="0QGW"><code>0QGW</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should respond with the correct error message</span></td></tr><tr><td colspan="3"><b>[BMM2] registration: DNS-less POST /users Property values uniqueness username property </b></td></tr><tr><td><test id="LZ1K"><code>LZ1K</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should respond with status 409</span></td></tr><tr><td><test id="M2HD"><code>M2HD</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should respond with the correct error message</span></td></tr><tr><td><test id="9L3R"><code>9L3R</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should not store the user in the database twice</span></td></tr><tr><td colspan="3"><b>[BMM2] registration: DNS-less GET /reg/:username/check </b></td></tr><tr><td><test id="7T9L"><code>7T9L</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">when checking a valid available username, it should respond with status 200 and {reserved:false}</span></td></tr><tr><td><test id="153Q"><code>153Q</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">when checking a valid taken username, it should respond with status 409 and the correct error</span></td></tr><tr><td><test id="H09H"><code>H09H</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">when checking a too short username, it should respond with status 400 and the correct error</span></td></tr><tr><td><test id="VFE1"><code>VFE1</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">when checking a too long username, it should respond with status 400 and the correct error</span></td></tr><tr><td><test id="FDTC"><code>FDTC</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">when checking a username with invalid characters, it should respond with status 400 and the correct error</span></td></tr><tr><td colspan="3"><b>Result toObject() </b></td></tr><tr><td><test id="NKHF"><code>NKHF</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return the result&#x2019;s content when not storing streams</span></td></tr><tr><td><test id="MHAS"><code>MHAS</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return the result content when storing streams</span></td></tr><tr><td><test id="6P4Z"><code>6P4Z</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return an error object when attempting to serialize streams containing an amountof objects exceeding the limit</span></td></tr><tr><td><test id="TTEL"><code>TTEL</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return an error when storing piped streams</span></td></tr><tr><td colspan="3"><b>Root GET / </b></td></tr><tr><td><test id="UA7B"><code>UA7B</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return basic server meta information as JSON when requested</span></td></tr><tr><td><test id="TO50"><code>TO50</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return basic server meta information as text otherwise</span></td></tr><tr><td><test id="TS3D"><code>TS3D</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return an error if trying to access an unknown user account</span></td></tr><tr><td colspan="3"><b>Root All requests: </b></td></tr><tr><td><test id="TJHO"><code>TJHO</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return correct common HTTP headers + meta data in response body</span></td></tr><tr><td><test id="OQ3G"><code>OQ3G</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return meta data in response body for errors as well</span></td></tr><tr><td><test id="P06Y"><code>P06Y</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should properly translate the Host header&#x2019;s username (i.e. subdomain)</span></td></tr><tr><td><test id="R3H5"><code>R3H5</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should translate the username in subdomain also when it only contains numbers</span></td></tr><tr><td><test id="5IQK"><code>5IQK</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should support POSTing &#x201C;urlencoded&#x201D; content with _json and _auth fields</span></td></tr><tr><td><test id="2YEI"><code>2YEI</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should support POSTing &#x201C;urlencoded&#x201D; content with _json, _method (PUT) and _auth fields</span></td></tr><tr><td><test id="VJTP"><code>VJTP</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should support POSTing &#x201C;urlencoded&#x201D; content with _json, _method (DELETE) and _auth fields</span></td></tr><tr><td><test id="6D5O"><code>6D5O</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should properly handle JSON errors when POSTing &#x201C;urlencoded&#x201D; content with _json field</span></td></tr><tr><td><test id="J2WP"><code>J2WP</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should update the access&#x2019;s &#x201C;last used&#x201D; time and <em>internal</em> request counters</span></td></tr><tr><td colspan="3"><b>Root OPTIONS / </b></td></tr><tr><td><test id="PDMA"><code>PDMA</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return OK</span></td></tr><tr><td colspan="3"><b>Root GET /access-info </b></td></tr><tr><td><test id="0MI8"><code>0MI8</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return current access information</span></td></tr><tr><td colspan="3"><b>Root Accept Basic Auth request </b></td></tr><tr><td><test id="0MI9"><code>0MI9</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must accept the https://token@user.domain/ AUTH schema</span></td></tr><tr><td><test id="0MI0"><code>0MI0</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must accept the https://token:anystring@user.domain/ AUTH schema</span></td></tr><tr><td><test id="3W3Y"><code>3W3Y</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must accept the https://token:@user.domain/ AUTH schema</span></td></tr><tr><td><test id="M54U"><code>M54U</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return a 401 error when basic auth is missing using https://@user.domain/</span></td></tr><tr><td><test id="TPH4"><code>TPH4</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return a 403 error when using https://:token@user.domain/</span></td></tr><tr><td colspan="3"><b>Root POST / (i.e. batch call) </b></td></tr><tr><td><test id="2IV3"><code>2IV3</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must be able to create streams with non-star permissions access</span></td></tr><tr><td><test id="ORT3"><code>ORT3</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must execute the given method calls and return the results</span></td></tr><tr><td><test id="TVPI"><code>TVPI</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must execute the method calls containing events.get and return the results</span></td></tr><tr><td><test id="U4RB"><code>U4RB</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should not add a null meta field in the response</span></td></tr><tr><td><test id="WGVY"><code>WGVY</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return an error if the sent data is badly formatted</span></td></tr><tr><td colspan="3"><b>Service GET /service/info </b></td></tr><tr><td><test id="FR4K"><code>FR4K</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return all service info</span></td></tr><tr><td colspan="3"><b>Service-reporting POST report on service-reporting (started) </b></td></tr><tr><td><test id="G1UG"><code>G1UG</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must start and successfully send a report when service-reporting is listening</span></td></tr><tr><td colspan="3"><b>Socket.IO </b></td></tr><tr><td><test id="25M0"><code>25M0</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must dynamically create a namespace for the user</span></td></tr><tr><td><test id="VGKX"><code>VGKX</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must connect with twice user name in the path (DnsLess)</span></td></tr><tr><td><test id="VGKH"><code>VGKH</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must connect to a user with a dash in the username</span></td></tr><tr><td><test id="OSOT"><code>OSOT</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must refuse connection if no valid access token is provided</span></td></tr><tr><td colspan="3"><b>Socket.IO calling API methods </b></td></tr><tr><td><test id="FI6F"><code>FI6F</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must properly route method call messages for events and return the results, including meta</span></td></tr><tr><td><test id="O3SW"><code>O3SW</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must properly route method call messages for streams and return the results</span></td></tr><tr><td><test id="TO6Z"><code>TO6Z</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must accept streamQuery as Javascript Object</span></td></tr><tr><td><test id="NGUZ"><code>NGUZ</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must not crash when callers omit the callback</span></td></tr><tr><td><test id="ACA3"><code>ACA3</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must fail if the called target does not exist</span></td></tr><tr><td><test id="L8WJ"><code>L8WJ</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must fail if the called method does not exist</span></td></tr><tr><td><test id="SNCW"><code>SNCW</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return API errors properly, including meta</span></td></tr><tr><td><test id="744Z"><code>744Z</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must notify other sockets for the same user about events changes</span></td></tr><tr><td><test id="GJLT"><code>GJLT</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must notify other sockets for the same user (only) about streams changes</span></td></tr><tr><td><test id="JC99"><code>JC99</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must notify on each change</span></td></tr><tr><td colspan="3"><b>Socket.IO when using an access with a &quot;create-only&quot; permission </b></td></tr><tr><td><test id="K2OO"><code>K2OO</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must allow a connection</span></td></tr><tr><td colspan="3"><b>Socket.IO when spawning 2 api-server processes, A and B </b></td></tr><tr><td><test id="JJRA"><code>JJRA</code></test></td><td style="text-align: center;">&#x2753;</td><td><span class="type">changes made in A notify clients of B</span></td></tr><tr><td colspan="3"><b>Streams GET / </b></td></tr><tr><td><test id="TG78"><code>TG78</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return non-trashed streams (as a tree) by default</span></td></tr><tr><td><test id="DPWG"><code>DPWG</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return all streams (trashed or not) when requested</span></td></tr><tr><td><test id="RDD5"><code>RDD5</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must include stream deletions (since the given time) when requested</span></td></tr><tr><td><test id="T8AM"><code>T8AM</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must include stream deletions even when the given time is 0</span></td></tr><tr><td><test id="1M8A"><code>1M8A</code></test></td><td style="text-align: center;">&#x2753;</td><td><span class="type">must not keep stream deletions past a certain time (cannot test because cannot force-run Mongo&#x2019;s TTL cleanup task)</span></td></tr><tr><td><test id="W9VC"><code>W9VC</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return a correct 401 error if no access token is provided</span></td></tr><tr><td><test id="UVWK"><code>UVWK</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return child streams when providing a parent stream id</span></td></tr><tr><td><test id="AJZL"><code>AJZL</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return a correct error if the parent stream is unknown</span></td></tr><tr><td colspan="3"><b>Streams POST / </b></td></tr><tr><td><test id="ENVV"><code>ENVV</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must create a new &#x201C;root&#x201D; stream with the sent data, returning it</span></td></tr><tr><td><test id="A2HP"><code>A2HP</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return a correct error if the sent data is badly formatted</span></td></tr><tr><td><test id="GGS3"><code>GGS3</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return a correct error if a stream with the same id already exists</span></td></tr><tr><td><test id="UHKI"><code>UHKI</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must allow reuse of deleted ids</span></td></tr><tr><td><test id="8WGG"><code>8WGG</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must accept explicit null for optional fields</span></td></tr><tr><td><test id="NR4D"><code>NR4D</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must fail if a sibling stream with the same name already exists</span></td></tr><tr><td><test id="JINC"><code>JINC</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return a correct error if the sent data is not valid JSON</span></td></tr><tr><td><test id="CHDM"><code>CHDM</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must create a new child stream (with predefined id) when providing a parent stream id</span></td></tr><tr><td><test id="88VQ"><code>88VQ</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return an error if the new stream&#x2019;s parentId is the empty string</span></td></tr><tr><td><test id="84RK"><code>84RK</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must slugify the new stream&#x2019;s predefined id</span></td></tr><tr><td><test id="2B3H"><code>2B3H</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return a correct error if the parent stream is unknown</span></td></tr><tr><td><test id="8JB5"><code>8JB5</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return a correct error if the given predefined stream&#x2019;s id is &#x201C;null&#x201D;</span></td></tr><tr><td><test id="6TPQ"><code>6TPQ</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return a correct error if the given predefined stream&#x2019;s id is &#x201C;*&#x201D;</span></td></tr><tr><td colspan="3"><b>Streams PUT /<id> </id></b></td></tr><tr><td><test id="SO48"><code>SO48</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must modify the stream with the sent data</span></td></tr><tr><td><test id="5KNJ"><code>5KNJ</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must accept explicit null for optional fields</span></td></tr><tr><td><test id="0ANV"><code>0ANV</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must add/update/remove the specified client data fields without touching the others</span></td></tr><tr><td><test id="PL2G"><code>PL2G</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return a correct error if the stream does not exist</span></td></tr><tr><td><test id="JWT4"><code>JWT4</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return a correct error if the sent data is badly formatted</span></td></tr><tr><td><test id="344I"><code>344I</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must fail if a sibling stream with the same name already exists</span></td></tr><tr><td><test id="PT1E"><code>PT1E</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must move the stream under the given parent when specified</span></td></tr><tr><td><test id="HJBH"><code>HJBH</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return a correct error if the new parent stream is unknown</span></td></tr><tr><td colspan="3"><b>Streams PUT /<id> forbidden updates of protected fields </id></b></td></tr><tr><td><test id="PN1H"><code>PN1H</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must fail and throw a forbidden error in strict mode</span></td></tr><tr><td><test id="A3WC"><code>A3WC</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must succeed by ignoring protected fields and log a warning in non-strict mode</span></td></tr><tr><td colspan="3"><b>Streams DELETE /<id> </id></b></td></tr><tr><td><test id="205A"><code>205A</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must flag the specified stream as trashed</span></td></tr><tr><td><test id="TEFF"><code>TEFF</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must delete the stream when already trashed with its descendants if there are no linked events</span></td></tr><tr><td><test id="LVTR"><code>LVTR</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return a correct error if there are linked events and the related parameter is missing</span></td></tr><tr><td><test id="RKEU"><code>RKEU</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must reject the deletion of a root stream with mergeEventsWithParent=true</span></td></tr><tr><td><test id="26V0"><code>26V0</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must reassign the linked events to the deleted stream&#x2019;s parent when specified</span></td></tr><tr><td><test id="KLD8"><code>KLD8</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must delete the linked events when mergeEventsWithParent is false</span></td></tr><tr><td><test id="1U1M"><code>1U1M</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return a correct error if the item is unknown</span></td></tr><tr><td colspan="3"><b>System route </b></td></tr><tr><td><test id="JT1A"><code>JT1A</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should parse correctly usernames starting with &#x201C;system&#x201D;</span></td></tr><tr><td colspan="3"><b>System (ex-register) POST /create-user </b></td></tr><tr><td><test id="0G7C"><code>0G7C</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must not send a welcome email if mailing is deactivated</span></td></tr><tr><td><test id="TWBF"><code>TWBF</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must not send a welcome email if welcome mail is deactivated</span></td></tr><tr><td colspan="3"><b>System (ex-register) POST /create-user when email sending really works </b></td></tr><tr><td><test id="FUTR"><code>FUTR</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must create a new user with the sent data, sending a welcome email</span></td></tr><tr><td colspan="3"><b>System (ex-register) POST /create-user when it just replies OK </b></td></tr><tr><td><test id="9K71"><code>9K71</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must run the process but not save anything for test username &#x201C;recla&#x201D;</span></td></tr><tr><td><test id="ZG1L"><code>ZG1L</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must support the old &#x201C;/register&#x201D; path for backwards-compatibility</span></td></tr><tr><td><test id="VGF5"><code>VGF5</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return a correct 400 error if the sent data is badly formatted</span></td></tr><tr><td><test id="ABI5"><code>ABI5</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return a correct 400 error if the language property is above 5 characters</span></td></tr><tr><td><test id="OVI4"><code>OVI4</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return a correct 400 error if the language property is the empty string</span></td></tr><tr><td><test id="RD10"><code>RD10</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return a correct 400 error if a user with the same user name already exists</span></td></tr><tr><td><test id="NPJE"><code>NPJE</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return a correct 400 error if a user with the same email address already exists</span></td></tr><tr><td><test id="Y5JB"><code>Y5JB</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return a correct 404 error when authentication is invalid</span></td></tr><tr><td><test id="GF3L"><code>GF3L</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return a correct error if the content type is wrong</span></td></tr><tr><td colspan="3"><b>System (ex-register) POST /create-user when we log into a temporary log file </b></td></tr><tr><td><test id="Y69B"><code>Y69B</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must replace the passwordHash in the logs by (hidden) when the authentication is invalid</span></td></tr><tr><td><test id="MEJ9"><code>MEJ9</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must replace the passwordHash in the logs by (hidden) when the payload is invalid (here parameters)</span></td></tr><tr><td><test id="CO6H"><code>CO6H</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must not mention the passwordHash in the logs when none is provided</span></td></tr><tr><td colspan="3"><b>System (ex-register) GET /user-info/{username} </b></td></tr><tr><td><test id="9C1A"><code>9C1A</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return user information (including time of last account use)</span></td></tr><tr><td><test id="FNJ5"><code>FNJ5</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return a correct 404 error when authentication is invalid</span></td></tr><tr><td colspan="3"><b>SystemStreams config When nested custom systemStreams are provided in the config for the account steam </b></td></tr><tr><td><test id="V9QB"><code>V9QB</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">New config does not override default one</span></td></tr><tr><td><test id="5T5S"><code>5T5S</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">Account config is merged correctly and New values are extended with default streams values</span></td></tr><tr><td><test id="ARD9"><code>ARD9</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">New systemStreams config is merged correctly</span></td></tr><tr><td colspan="3"><b>Config: serviceInfo init() when dnsLess is active </b></td></tr><tr><td><test id="O4I1"><code>O4I1</code></test></td><td style="text-align: center;">&#x2753;</td><td><span class="type">should work</span></td></tr><tr><td><test id="KEH6"><code>KEH6</code></test></td><td style="text-align: center;">&#x2753;</td><td><span class="type">should build serviceInfo</span></td></tr><tr><td colspan="3"><b>Config: serviceInfo init() when dnsLess is disabled when &quot;serviceInfoUrl&quot; points to a file </b></td></tr><tr><td><test id="WOQ8"><code>WOQ8</code></test></td><td style="text-align: center;">&#x2753;</td><td><span class="type">should work</span></td></tr><tr><td><test id="D2P7"><code>D2P7</code></test></td><td style="text-align: center;">&#x2753;</td><td><span class="type">should load serviceInfo</span></td></tr><tr><td colspan="3"><b>Config: serviceInfo init() when dnsLess is disabled when &quot;serviceInfoUrl&quot; points to an online resource </b></td></tr><tr><td><test id="4WYN"><code>4WYN</code></test></td><td style="text-align: center;">&#x2753;</td><td><span class="type">should work</span></td></tr><tr><td><test id="NY3E"><code>NY3E</code></test></td><td style="text-align: center;">&#x2753;</td><td><span class="type">should load serviceInfo</span></td></tr><tr><td colspan="3"><b>Uploads middleware hasFileUpload </b></td></tr><tr><td><test id="GY5H"><code>GY5H</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should parse file uploads</span></td></tr><tr><td colspan="3"><b>Notifications #serverReady </b></td></tr><tr><td><test id="B76G"><code>B76G</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">notifies internal listeners</span></td></tr><tr><td><test id="SRAU"><code>SRAU</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">notifies axon listeners</span></td></tr><tr><td colspan="3"><b>Notifications #accountChanged </b></td></tr><tr><td><test id="P6ZD"><code>P6ZD</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">notifies internal listeners</span></td></tr><tr><td><test id="Q96S"><code>Q96S</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">notifies axon listeners</span></td></tr><tr><td colspan="3"><b>Notifications #accessesChanged </b></td></tr><tr><td><test id="P5CG"><code>P5CG</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">notifies internal listeners</span></td></tr><tr><td><test id="VSN6"><code>VSN6</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">notifies axon listeners</span></td></tr><tr><td colspan="3"><b>Notifications #followedSlicesChanged </b></td></tr><tr><td><test id="VU4A"><code>VU4A</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">notifies internal listeners</span></td></tr><tr><td><test id="UD2B"><code>UD2B</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">notifies axon listeners</span></td></tr><tr><td colspan="3"><b>Notifications #streamsChanged </b></td></tr><tr><td><test id="LDUQ"><code>LDUQ</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">notifies internal listeners</span></td></tr><tr><td><test id="BUR1"><code>BUR1</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">notifies axon listeners</span></td></tr><tr><td colspan="3"><b>Notifications #eventsChanged </b></td></tr><tr><td><test id="N8RI"><code>N8RI</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">notifies internal listeners</span></td></tr><tr><td><test id="TRMW"><code>TRMW</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">notifies axon listeners</span></td></tr><tr><td colspan="3"><b>Service Register Errors </b></td></tr><tr><td><test id="LPD4"><code>LPD4</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">Should remove not matching params from duplicate Error</span></td></tr><tr><td colspan="3"><b>Authentication hasProperties </b></td></tr><tr><td><test id="IKAI"><code>IKAI</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">returns true if all properties exist</span></td></tr><tr><td><test id="K2PZ"><code>K2PZ</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">returns false if not all properties exist</span></td></tr><tr><td><test id="U2NA"><code>U2NA</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">returns false if null is given</span></td></tr><tr><td><test id="WJ7J"><code>WJ7J</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">returns false if a string is given</span></td></tr><tr><td colspan="3"><b>TryCoerceStringValues </b></td></tr><tr><td><test id="DTZ1"><code>DTZ1</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should behave as documented in the method</span></td></tr><tr><td><test id="X26S"><code>X26S</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">doesn&#x2019;t create keys in object</span></td></tr><tr><td><test id="4MHH"><code>4MHH</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should convert to array</span></td></tr><tr><td><test id="X8PY"><code>X8PY</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">number conversion works</span></td></tr><tr><td colspan="3"><b>NatsPublisher </b></td></tr><tr><td><test id="S386"><code>S386</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should construct</span></td></tr><tr><td><test id="I21M"><code>I21M</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">delivers messages to &#x201C;USERNAME.sok1&#x201D;</span></td></tr><tr><td colspan="3"><b>NatsSubscriber </b></td></tr><tr><td><test id="DMMP"><code>DMMP</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should construct</span></td></tr><tr><td colspan="3"><b>NatsSubscriber when subscribed to &quot;foobar&quot; subscribe(&quot;USERNAME&quot;) </b></td></tr><tr><td><test id="4MAI"><code>4MAI</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">accepts messages from USERNAME.sok1 and dispatches them to sinks</span></td></tr><tr><td><test id="47BP"><code>47BP</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">ignores messages from other users</span></td></tr><tr><td colspan="3"><b>NatsSubscriber when subscribed to &quot;foobar&quot; unsubscribe() </b></td></tr><tr><td><test id="L49E"><code>L49E</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should unsubscribe from NATS</span></td></tr><tr><td colspan="3"><b>Versioning Events </b></td></tr><tr><td><test id="RWIA"><code>RWIA</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must not return history when calling events.get</span></td></tr><tr><td colspan="3"><b>Versioning Events deletionMode </b></td></tr><tr><td><test id="FLLW"><code>FLLW</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must delete the event&#x2019;s history when deleting it with deletionMode=keep-nothing</span></td></tr><tr><td><test id="6W0B"><code>6W0B</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must minimize the event&#x2019;s history when deleting it with deletionMode=keep-authors</span></td></tr><tr><td><test id="1DBC"><code>1DBC</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must not modify the event&#x2019;s history when deleting it with deletionMode=keep-everything</span></td></tr><tr><td colspan="3"><b>Versioning Events events.getOne </b></td></tr><tr><td><test id="YRI7"><code>YRI7</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must not return an event&#x2019;s history when calling getOne with includeHistory flag off</span></td></tr><tr><td><test id="KPQZ"><code>KPQZ</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return an event&#x2019;s history when calling getOne with includeHistory flag on</span></td></tr><tr><td colspan="3"><b>Versioning Events forceKeepHistory is OFF </b></td></tr><tr><td><test id="PKA9"><code>PKA9</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must not generate history when updating an event</span></td></tr><tr><td colspan="3"><b>Versioning Events forceKeepHistory is ON </b></td></tr><tr><td><test id="0P6S"><code>0P6S</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must generate history when updating an event</span></td></tr><tr><td><test id="NZQB"><code>NZQB</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must generate history when trashing an event</span></td></tr><tr><td colspan="3"><b>Versioning Streams </b></td></tr><tr><td><test id="H1PK"><code>H1PK</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must generate events&#x2019; history when their stream is deleted with  mergeEventsWithParents=true since their streamId is modified</span></td></tr><tr><td><test id="95TJ"><code>95TJ</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must delete the events&#x2019; history when their stream is deleted with  mergeEventsWithParents=false and deletionMode=&#x2018;keep-nothing&#x2019;</span></td></tr><tr><td><test id="4U91"><code>4U91</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must keep the events&#x2019; minimal history when their stream is deleted with  mergeEventsWithParents=false and deletionMode=&#x2018;keep-authors&#x2019;</span></td></tr><tr><td><test id="D4CY"><code>D4CY</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must not delete the events&#x2019; history when their stream is deleted with mergeEventsWithParents=false and deletionMode=&#x2018;keep-everything&#x2019;</span></td></tr><tr><td colspan="3"><b>Webhooks GET / when using an app token </b></td></tr><tr><td><test id="R5KD"><code>R5KD</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return a status 200 with a webhooks object which is an array</span></td></tr><tr><td><test id="67CX"><code>67CX</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should fetch all webhooks reachable by an app token</span></td></tr><tr><td><test id="WSJG"><code>WSJG</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should not fetch any Webhook outside its scope</span></td></tr><tr><td colspan="3"><b>Webhooks GET / when using a personal token </b></td></tr><tr><td><test id="6MNC"><code>6MNC</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return a status 200 with a webhooks object which is an array</span></td></tr><tr><td><test id="4YFQ"><code>4YFQ</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should fetch all webhooks for the user</span></td></tr><tr><td colspan="3"><b>Webhooks GET / when using a shared token </b></td></tr><tr><td><test id="RIZV"><code>RIZV</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return a status 200 with a webhooks object which is an array</span></td></tr><tr><td colspan="3"><b>Webhooks GET /:webhookId when using an app token when fetching an existing webhook inside its scope </b></td></tr><tr><td><test id="XMB7"><code>XMB7</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return a status 200 with a webhook object</span></td></tr><tr><td colspan="3"><b>Webhooks GET /:webhookId when using an app token when fetching an existing webhook outside of its scope </b></td></tr><tr><td><test id="BDC2"><code>BDC2</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return a status 403 with a forbidden error</span></td></tr><tr><td colspan="3"><b>Webhooks GET /:webhookId when using an app token when fetching an unexistant webhook </b></td></tr><tr><td><test id="O6MM"><code>O6MM</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return a status 404 with a unknown resource error</span></td></tr><tr><td colspan="3"><b>Webhooks GET /:webhookId when using a personal token </b></td></tr><tr><td><test id="D8YQ"><code>D8YQ</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return a status 200 with a webhook object</span></td></tr><tr><td colspan="3"><b>Webhooks GET /:webhookId when using a shared token </b></td></tr><tr><td><test id="604H"><code>604H</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return a status 200 with a webhook object</span></td></tr><tr><td colspan="3"><b>Webhooks POST / when using an app token when providing a valid webhook </b></td></tr><tr><td><test id="Z1XD"><code>Z1XD</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return a status 201 with the created webhook</span></td></tr><tr><td><test id="XKLU"><code>XKLU</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should save it to the storage</span></td></tr><tr><td colspan="3"><b>Webhooks POST / when using an app token when providing an existing url </b></td></tr><tr><td><test id="60OQ"><code>60OQ</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return a status 409 with a collision error error</span></td></tr><tr><td colspan="3"><b>Webhooks POST / when using an app token when providing invalid parameters when url is not a string </b></td></tr><tr><td><test id="3VIU"><code>3VIU</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return a status 400 with a invalid parameters error</span></td></tr><tr><td colspan="3"><b>Webhooks POST / when using a shared token when providing a valid webhook </b></td></tr><tr><td><test id="YTLW"><code>YTLW</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return a status 201 with the created webhook</span></td></tr><tr><td><test id="UC6J"><code>UC6J</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should save it to the storage</span></td></tr><tr><td colspan="3"><b>Webhooks POST / when using a personal token when providing a valid webhook </b></td></tr><tr><td><test id="3AZO"><code>3AZO</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return a status 403 with a forbidden error</span></td></tr><tr><td colspan="3"><b>Webhooks PUT /:webhookId when using an app token when updating an existing webhook when changing a valid parameter </b></td></tr><tr><td><test id="C9FU"><code>C9FU</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return a status 200 with the updated webhook</span></td></tr><tr><td><test id="JSOH"><code>JSOH</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should apply the changes to the storage</span></td></tr><tr><td colspan="3"><b>Webhooks PUT /:webhookId when using an app token when updating an existing webhook when changing a readonly parameter </b></td></tr><tr><td><test id="PW4I"><code>PW4I</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return a status 403 with an invalid parameter error</span></td></tr><tr><td colspan="3"><b>Webhooks PUT /:webhookId when using an app token when updating a webhook outside its scope </b></td></tr><tr><td><test id="8T2G"><code>8T2G</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return a status 403 with a forbidden error</span></td></tr><tr><td colspan="3"><b>Webhooks PUT /:webhookId when using an app token when updating an unexistant webhook </b></td></tr><tr><td><test id="AR5R"><code>AR5R</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return a status 404 with an unknown resource error</span></td></tr><tr><td colspan="3"><b>Webhooks PUT /:webhookId when using a personal token when providing valid parameters </b></td></tr><tr><td><test id="LCKN"><code>LCKN</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return a status 200 with the updated webhook</span></td></tr><tr><td colspan="3"><b>Webhooks PUT /:webhookId when using a shared token when providing valid parameters </b></td></tr><tr><td><test id="TMIZ"><code>TMIZ</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return a status 200 with the updated webhook</span></td></tr><tr><td colspan="3"><b>Webhooks DELETE /:webhookId when using an app token when deleting an existing webhook </b></td></tr><tr><td><test id="A0CG"><code>A0CG</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return a status 200 with the webhook deletion</span></td></tr><tr><td><test id="KA98"><code>KA98</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should delete it in the storage</span></td></tr><tr><td colspan="3"><b>Webhooks DELETE /:webhookId when using an app token when deleting an unexistant webhook </b></td></tr><tr><td><test id="ZPRT"><code>ZPRT</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return a status 404 with an unknown resource error</span></td></tr><tr><td colspan="3"><b>Webhooks DELETE /:webhookId when using an app token when deleting an already deleted webhook </b></td></tr><tr><td><test id="5UX7"><code>5UX7</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return a status 404 with an unknown resource error</span></td></tr><tr><td colspan="3"><b>Webhooks DELETE /:webhookId when using an app token when deleting a webhook outside of its scope </b></td></tr><tr><td><test id="7O0F"><code>7O0F</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return a status 403 with a forbidden error</span></td></tr><tr><td colspan="3"><b>Webhooks DELETE /:webhookId when using a personal token when deleting an existing webhook </b></td></tr><tr><td><test id="P6X4"><code>P6X4</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return a status 200 with the webhook deletion</span></td></tr><tr><td colspan="3"><b>Webhooks DELETE /:webhookId when using a shared token when deleting an existing webhook </b></td></tr><tr><td><test id="OZZB"><code>OZZB</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return a status 200 with the webhook deletion</span></td></tr><tr><td colspan="3"><b>Webhooks POST /:webhookId/test when using an app token when the webhook exists when the URL is valid </b></td></tr><tr><td><test id="ZM2B"><code>ZM2B</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return a status 200 with a webhook object</span></td></tr><tr><td><test id="Q7KL"><code>Q7KL</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should send a POST request to the URL</span></td></tr><tr><td colspan="3"><b>Webhooks POST /:webhookId/test when using an app token when the webhook exists when the URL is invalid </b></td></tr><tr><td><test id="KLRO"><code>KLRO</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return a status 400 with an error object</span></td></tr><tr><td colspan="3"><b>Webhooks POST /:webhookId/test when using an app token when the webhook does not exist </b></td></tr><tr><td><test id="KXA8"><code>KXA8</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return a status 404 with a unknown resource error</span></td></tr><tr><td colspan="3"><b>Webhooks POST /:webhookId/test when using an app token when the webhook is outside of its scope </b></td></tr><tr><td><test id="KZJD"><code>KZJD</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return a status 403 with a forbidden error</span></td></tr><tr><td colspan="3"><b>Webhooks POST /:webhookId/test when using a personal token when the webhook exists </b></td></tr><tr><td><test id="HYZZ"><code>HYZZ</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return a status 200 with a webhook object</span></td></tr><tr><td><test id="SBI7"><code>SBI7</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should send a POST request to the URL</span></td></tr><tr><td colspan="3"><b>Webhooks POST /:webhookId/test when using a shared token when the webhook exists </b></td></tr><tr><td><test id="O8PB"><code>O8PB</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return a status 200 with a webhook object</span></td></tr><tr><td><test id="C62I"><code>C62I</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should send a POST request to the URL</span></td></tr></tbody></table></div></section><section id="service-core 1-6.18-business"><h2 id="business-component"><!--business-component--><code>business</code> component</h2><div class="content"><div class="meta"></div><h3 id="summary-2"><!--summary-2-->Summary</h3><table class="definitions"><tr><th><strong>74</strong></th><td><strong>tests total</strong></td></tr><tr><th>74</th><td>&#x2705; passing</td></tr><tr><th>0</th><td>&#x2753; pending</td></tr><tr><th>0</th><td>&#x274C; failing</td></tr></table><h3 id="tests-1"><!--tests-1-->Tests</h3><table><thead><tr><th>Id</th><th style="text-align: center;">Status</th><th>Test</th></tr></thead><tbody><tr><td colspan="3"><b>Manage InfluxDB data (business.series.*) </b></td></tr><tr><td><test id="8GFH"><code>8GFH</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should allow writing to a series</span></td></tr><tr><td colspan="3"><b>Webhook send() when sending to an existing endpoint when the endpoint answers ASAP </b></td></tr><tr><td><test id="Q7B2"><code>Q7B2</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should send it</span></td></tr><tr><td><test id="FICW"><code>FICW</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should add a log to runs</span></td></tr><tr><td><test id="2VRK"><code>2VRK</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should add the correct status to the last run</span></td></tr><tr><td><test id="AOCP"><code>AOCP</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should add the correct timestamp to the last run</span></td></tr><tr><td><test id="2M6F"><code>2M6F</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should increment runCount</span></td></tr><tr><td><test id="S1CY"><code>S1CY</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should not increment failCount</span></td></tr><tr><td><test id="22X1"><code>22X1</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should send the meta</span></td></tr><tr><td colspan="3"><b>Webhook send() when sending to an existing endpoint when the endpoint answers with a long delay </b></td></tr><tr><td><test id="SRDL"><code>SRDL</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should send the second message after the first</span></td></tr><tr><td colspan="3"><b>Webhook send() when sending to an unexistant endpoint </b></td></tr><tr><td><test id="6UJH"><code>6UJH</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should add a log to runs</span></td></tr><tr><td><test id="VKUA"><code>VKUA</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should add the no status to the last run</span></td></tr><tr><td><test id="40UZ"><code>40UZ</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should add the correct timestamp to the last run</span></td></tr><tr><td><test id="UE17"><code>UE17</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should increment runCount</span></td></tr><tr><td><test id="UJ2Y"><code>UJ2Y</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should increment failCount</span></td></tr><tr><td><test id="V5NH"><code>V5NH</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should increment currentRetries</span></td></tr><tr><td colspan="3"><b>Webhook send() when scheduling for a retry when the notifications service is down </b></td></tr><tr><td><test id="E5VQ"><code>E5VQ</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should save the run</span></td></tr><tr><td><test id="XP7G"><code>XP7G</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should increment currentRetries</span></td></tr><tr><td><test id="9AL1"><code>9AL1</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should schedule for a retry</span></td></tr><tr><td><test id="OHLY"><code>OHLY</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should send scheduled messages after an interval</span></td></tr><tr><td><test id="1VIT"><code>1VIT</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should reset error tracking properties</span></td></tr><tr><td colspan="3"><b>Webhook send() when throttling frequent calls </b></td></tr><tr><td><test id="73TG"><code>73TG</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should only send the message once</span></td></tr><tr><td><test id="WPMH"><code>WPMH</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should accumulate messages</span></td></tr><tr><td><test id="YLWK"><code>YLWK</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should schedule for a retry after minInterval</span></td></tr><tr><td><test id="OZGP"><code>OZGP</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should send scheduled messages after an interval</span></td></tr><tr><td><test id="86OP"><code>86OP</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should remove the timeout afterwards</span></td></tr><tr><td colspan="3"><b>Webhook send() when the webhook becomes inactive after failures </b></td></tr><tr><td><test id="768L"><code>768L</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should run 5 times</span></td></tr><tr><td><test id="PX10"><code>PX10</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should update the state to inactive</span></td></tr><tr><td><test id="BLNP"><code>BLNP</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should update the stored version</span></td></tr><tr><td><test id="ODNM"><code>ODNM</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should not run anymore</span></td></tr><tr><td colspan="3"><b>Webhook send() when the runs array gets shifted </b></td></tr><tr><td><test id="FYOR"><code>FYOR</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should rotate the runs</span></td></tr><tr><td colspan="3"><b>BatchRequest .parse </b></td></tr><tr><td><test id="QJ6L"><code>QJ6L</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should parse the happy case</span></td></tr><tr><td><test id="VV2O"><code>VV2O</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">accepts an empty batch</span></td></tr><tr><td><test id="0NWO"><code>0NWO</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">throws if format is missing or wrong</span></td></tr><tr><td><test id="881Y"><code>881Y</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">throws if another type is passed in</span></td></tr><tr><td><test id="2PZ0"><code>2PZ0</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">throws if envelope doesn&#x2019;t have a data attribute</span></td></tr><tr><td colspan="3"><b>BatchRequestElement .parse(obj) </b></td></tr><tr><td><test id="AGQK"><code>AGQK</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should parse a good looking object</span></td></tr><tr><td><test id="LWME"><code>LWME</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">fails if input is not an Object</span></td></tr><tr><td><test id="BU7Q"><code>BU7Q</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">fails if eventId is missing or the wrong type</span></td></tr><tr><td colspan="3"><b>DataMatrix .parse(obj) </b></td></tr><tr><td><test id="576J"><code>576J</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should accept the happy path</span></td></tr><tr><td><test id="IQTE"><code>IQTE</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">refuses if not an object</span></td></tr><tr><td><test id="WQGB"><code>WQGB</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">refuses if format is not flatJSON</span></td></tr><tr><td><test id="34RS"><code>34RS</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">refuses if fields are not strings</span></td></tr><tr><td><test id="M5BI"><code>M5BI</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">refuses if points is not an array</span></td></tr><tr><td><test id="V0SH"><code>V0SH</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">refuses if field names are not correct</span></td></tr><tr><td><test id="SBU1"><code>SBU1</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">refuses if data cannot be coerced</span></td></tr><tr><td colspan="3"><b>DataMatrix #eachRow </b></td></tr><tr><td><test id="QUQ3"><code>QUQ3</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should iterate over all matrix rows</span></td></tr><tr><td colspan="3"><b>DataMatrix #transform </b></td></tr><tr><td><test id="L03R"><code>L03R</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should call fn for each cell</span></td></tr><tr><td><test id="7BRV"><code>7BRV</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should store the return value in the matrix</span></td></tr><tr><td colspan="3"><b>DataMatrix #minmax() </b></td></tr><tr><td><test id="QGY6"><code>QGY6</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">returns the minimum and maximum deltaTime used</span></td></tr><tr><td><test id="ROK8"><code>ROK8</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">throws an error if the matrix is empty</span></td></tr><tr><td><test id="79DA"><code>79DA</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">throws an error if the deltaTime is missing</span></td></tr><tr><td colspan="3"><b>Business.series.Row toStruct </b></td></tr><tr><td><test id="NJ4G"><code>NJ4G</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return a js object for the row</span></td></tr><tr><td colspan="3"><b>Business.series.Repository with stubbed out connection </b></td></tr><tr><td><test id="0UEA"><code>0UEA</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should produce series objects for events</span></td></tr><tr><td colspan="3"><b>Business.types.TypeRepository type list update </b></td></tr><tr><td><test id="WMDW"><code>WMDW</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should work (must be called manually)</span></td></tr><tr><td><test id="6VL6"><code>6VL6</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should fail gracefully</span></td></tr><tr><td colspan="3"><b>Business.types.TypeRepository basic types like mass/kg </b></td></tr><tr><td><test id="EEWV"><code>EEWV</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should be known</span></td></tr><tr><td><test id="J0CJ"><code>J0CJ</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return a type instance allowing conversion</span></td></tr><tr><td><test id="8WI1"><code>8WI1</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should throw when conversion fails</span></td></tr><tr><td><test id="WKCS"><code>WKCS</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should coerce to number during validation</span></td></tr><tr><td colspan="3"><b>Business.types.TypeRepository complex types like position/wgs84 </b></td></tr><tr><td><test id="05LA"><code>05LA</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should be known</span></td></tr><tr><td><test id="0QZ3"><code>0QZ3</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return a complex type instance</span></td></tr><tr><td colspan="3"><b>Business.types.TypeRepository complex types on several levels like message/facebook </b></td></tr><tr><td><test id="D0GT"><code>D0GT</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return the correct value type for all fields</span></td></tr><tr><td><test id="3BC9"><code>3BC9</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return the correct value type for optional fields</span></td></tr><tr><td><test id="IVPF"><code>IVPF</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should resolve nested fields</span></td></tr><tr><td><test id="5PMM"><code>5PMM</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">does NOT handle requiredFields fully yet: only surface requirements are returned</span></td></tr><tr><td colspan="3"><b>Business.types.TypeRepository placeholder types like picture/attached </b></td></tr><tr><td><test id="78HI"><code>78HI</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should be known</span></td></tr><tr><td><test id="85BQ"><code>85BQ</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return a type instance allowing conversion</span></td></tr><tr><td colspan="3"><b>Business.types.TypeRepository series types like series:mass/kg </b></td></tr><tr><td><test id="SQNQ"><code>SQNQ</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should be known</span></td></tr><tr><td><test id="IR3B"><code>IR3B</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should inform about fields correctly</span></td></tr><tr><td colspan="3"><b>Business.types.TypeValidator </b></td></tr><tr><td><test id="AE3Q"><code>AE3Q</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should be produced via a type repository</span></td></tr><tr><td><test id="JT1F"><code>JT1F</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should validate simple types</span></td></tr><tr><td><test id="QIVH"><code>QIVH</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should validate complex types</span></td></tr><tr><td colspan="3"><b>Users repository createUser() </b></td></tr><tr><td><test id="7C22"><code>7C22</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must throw a duplicate error when username field is not unique</span></td></tr><tr><td><test id="6CFE"><code>6CFE</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must throw a duplicate error when email field is not unique</span></td></tr></tbody></table></div></section><section id="service-core 1-6.18-hfs-server"><h2 id="hfs-server-component"><!--hfs-server-component--><code>hfs-server</code> component</h2><div class="content"><div class="meta"></div><h3 id="summary-3"><!--summary-3-->Summary</h3><table class="definitions"><tr><th><strong>34</strong></th><td><strong>tests total</strong></td></tr><tr><th>34</th><td>&#x2705; passing</td></tr><tr><th>0</th><td>&#x2753; pending</td></tr><tr><th>0</th><td>&#x274C; failing</td></tr></table><h3 id="tests-2"><!--tests-2-->Tests</h3><table><thead><tr><th>Id</th><th style="text-align: center;">Status</th><th>Test</th></tr></thead><tbody><tr><td colspan="3"><b>Storing data in a HF series Use Case: Store data in InfluxDB, Verification on either half </b></td></tr><tr><td><test id="ZUBI"><code>ZUBI</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should convert timestamp to deltaTime</span></td></tr><tr><td><test id="GZIZ"><code>GZIZ</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should store data correctly</span></td></tr><tr><td><test id="KC15"><code>KC15</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return data once stored</span></td></tr><tr><td><test id="YALY"><code>YALY</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should accept a request when the authorized permission is on the event&#x2019;s 2nd streamId</span></td></tr><tr><td colspan="3"><b>Storing data in a HF series UPDATE and DELETE on handling event affect the serie </b></td></tr><tr><td><test id="UD1C"><code>UD1C</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">moving event in time does empty the cache</span></td></tr><tr><td><test id="UD2C"><code>UD2C</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">trashed event cannot be written to</span></td></tr><tr><td><test id="ZTG6"><code>ZTG6</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">deleted events deletes series</span></td></tr><tr><td colspan="3"><b>Storing data in a HF series POST /events/EVENT_ID/series bypassing authentication with auth success </b></td></tr><tr><td><test id="N3PM"><code>N3PM</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">stores data into InfluxDB</span></td></tr><tr><td><test id="TL0D"><code>TL0D</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return core-metadata in every call</span></td></tr><tr><td><test id="RESC"><code>RESC</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should reject non-JSON bodies</span></td></tr><tr><td><test id="KT1R"><code>KT1R</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">responds with headers that allow CORS on OPTIONS</span></td></tr><tr><td><test id="H1CG"><code>H1CG</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">responds with headers that allow CORS on POST</span></td></tr><tr><td colspan="3"><b>Storing data in a HF series POST /events/EVENT_ID/series bypassing authentication with auth success when request is malformed </b></td></tr><tr><td><test id="96HC"><code>96HC</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should be rejected (format is not flatJSON)</span></td></tr><tr><td><test id="38W3"><code>38W3</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should be rejected (matrix is not square - not enough fields)</span></td></tr><tr><td><test id="GJL5"><code>GJL5</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should be rejected (no negative deltaTime)</span></td></tr><tr><td><test id="GJL4"><code>GJL4</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should be rejected (value types are not all valid)</span></td></tr><tr><td><test id="JJRO"><code>JJRO</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should be rejected (missing deltaTime column)</span></td></tr><tr><td><test id="LKFG"><code>LKFG</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should be rejected (missing value column for a simple input)</span></td></tr><tr><td colspan="3"><b>Storing data in a HF series POST /events/EVENT_ID/series bypassing authentication with auth success when using a metadata updater stub </b></td></tr><tr><td><test id="GU3L"><code>GU3L</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should schedule a metadata update on every store</span></td></tr><tr><td colspan="3"><b>Storing data in a HF series POST /events/EVENT_ID/series bypassing authentication with auth failure </b></td></tr><tr><td><test id="NLAW"><code>NLAW</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">refuses invalid/unauthorized accesses</span></td></tr><tr><td colspan="3"><b>Storing data in a HF series POST /events/EVENT_ID/series storing data in different formats </b></td></tr><tr><td><test id="Y3BL"><code>Y3BL</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">stores data of any basic type</span></td></tr><tr><td><test id="3WGH"><code>3WGH</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">stores data of complex types</span></td></tr><tr><td><test id="1NDB"><code>1NDB</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">doesn&#x2019;t accept data in non-series format</span></td></tr><tr><td><test id="YMHK"><code>YMHK</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">stores strings</span></td></tr><tr><td><test id="ZL7C"><code>ZL7C</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">stores floats</span></td></tr><tr><td colspan="3"><b>Storing data in a HF series POST /events/EVENT_ID/series complex types such as ratio/generic </b></td></tr><tr><td><test id="DTZ2"><code>DTZ2</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">refuses to store when deltaTime is present twice (ambiguous!)</span></td></tr><tr><td><test id="UU4R"><code>UU4R</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">refuses to store when other fields are present twice (ambiguous!)</span></td></tr><tr><td colspan="3"><b>Storing data in a HF series POST /events/EVENT_ID/series complex types such as ratio/generic when not all required fields are given </b></td></tr><tr><td><test id="FNDT"><code>FNDT</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">refuses to store when not all required fields are given</span></td></tr><tr><td><test id="H525"><code>H525</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">returns error id &#x201C;invalid-request-structure&#x201D;</span></td></tr><tr><td colspan="3"><b>Storing data in a HF series POST /events/EVENT_ID/series complex types such as ratio/generic when field names don&apos;t match the type </b></td></tr><tr><td><test id="AJMS"><code>AJMS</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">refuses to store when field names don&#x2019;t match the type</span></td></tr><tr><td><test id="7CR7"><code>7CR7</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">returns the error message with the id &#x201C;invalid-request-structure&#x201D;</span></td></tr><tr><td colspan="3"><b>Storing data in a HF series POST /events/EVENT_ID/series complex types such as position/wgs84 </b></td></tr><tr><td><test id="UDHO"><code>UDHO</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">allows storing any number of optional fields, on each request</span></td></tr><tr><td><test id="JDTH"><code>JDTH</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">refuses unknown fields</span></td></tr><tr><td colspan="3"><b>Storing data in a HF series POST /events/EVENT_ID/series using a &quot;create-only&quot; permissions </b></td></tr><tr><td><test id="YCGZ"><code>YCGZ</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should work</span></td></tr></tbody></table></div></section><section id="service-core 1-6.18-metadata"><h2 id="metadata-component"><!--metadata-component--><code>metadata</code> component</h2><div class="content"><div class="meta"></div><h3 id="summary-4"><!--summary-4-->Summary</h3><table class="definitions"><tr><th><strong>22</strong></th><td><strong>tests total</strong></td></tr><tr><th>22</th><td>&#x2705; passing</td></tr><tr><th>0</th><td>&#x2753; pending</td></tr><tr><th>0</th><td>&#x274C; failing</td></tr></table><h3 id="tests-3"><!--tests-3-->Tests</h3><table><thead><tr><th>Id</th><th style="text-align: center;">Status</th><th>Test</th></tr></thead><tbody><tr><td colspan="3"><b>Metadata Updater </b></td></tr><tr><td><test id="POMC"><code>POMC</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">allows scheduling an update</span></td></tr><tr><td colspan="3"><b>Metadata Updater/Controller #runEach(ms) </b></td></tr><tr><td><test id="9TJ0"><code>9TJ0</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">starts a timer and runs #act every n ms</span></td></tr><tr><td colspan="3"><b>Metadata Updater/Controller #flushOp(update) </b></td></tr><tr><td><test id="2W9C"><code>2W9C</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">constructs an Flush operation for the update and returns it</span></td></tr><tr><td colspan="3"><b>Metadata Updater/Controller #act </b></td></tr><tr><td><test id="CIPH"><code>CIPH</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">pulls elapsed updates and flushes them to MongoDB</span></td></tr><tr><td colspan="3"><b>ErrorLogger </b></td></tr><tr><td><test id="9UOR"><code>9UOR</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">forwards calls</span></td></tr><tr><td><test id="5AVE"><code>5AVE</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">catches and logs all exceptions, rethrowing afterwards</span></td></tr><tr><td><test id="9J9U"><code>9J9U</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">also works for async methods, waiting for the eventual result</span></td></tr><tr><td colspan="3"><b>Flush event with no existing metadata </b></td></tr><tr><td><test id="D5N1"><code>D5N1</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">writes event metadata to disk</span></td></tr><tr><td colspan="3"><b>Flush event with existing metadata </b></td></tr><tr><td><test id="5QO0"><code>5QO0</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">doesn&#x2019;t modfify duration</span></td></tr><tr><td><test id="Z70F"><code>Z70F</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">leaves base data intact</span></td></tr><tr><td colspan="3"><b>UsersRepository #resolve(name) </b></td></tr><tr><td><test id="80TC"><code>80TC</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">returns the user id</span></td></tr><tr><td><test id="8K9H"><code>8K9H</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">caches the user information for a while</span></td></tr><tr><td colspan="3"><b>PendingUpdatesMap #merge and #get </b></td></tr><tr><td><test id="RE2D"><code>RE2D</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">stores updates</span></td></tr><tr><td><test id="JJ2Y"><code>JJ2Y</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">merges updates with preexisting updates via #merge</span></td></tr><tr><td colspan="3"><b>PendingUpdatesMap #elapsed </b></td></tr><tr><td><test id="O55W"><code>O55W</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">returns all updates that should be flushed</span></td></tr><tr><td><test id="HWPP"><code>HWPP</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">uses #flushAt to determine deadlines</span></td></tr><tr><td colspan="3"><b>PendingUpdate #merge </b></td></tr><tr><td><test id="412V"><code>412V</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">constructively merges two updates</span></td></tr><tr><td><test id="HS79"><code>HS79</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">fails when key is not equal</span></td></tr><tr><td colspan="3"><b>PendingUpdate #flushAt() </b></td></tr><tr><td><test id="79JJ"><code>79JJ</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">returns <code>cooldown</code> when deadline is far away</span></td></tr><tr><td><test id="OQLP"><code>OQLP</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">returns <code>deadline</code> when deadline is &lt; <code>cooldown</code></span></td></tr><tr><td colspan="3"><b>Heap #pop </b></td></tr><tr><td><test id="CW89"><code>CW89</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">pops an item</span></td></tr><tr><td><test id="S15J"><code>S15J</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">returns null if the heap is empty</span></td></tr></tbody></table></div></section><section id="service-core 1-6.18-middleware"><h2 id="middleware-component"><!--middleware-component--><code>middleware</code> component</h2><div class="content"><div class="meta"></div><h3 id="summary-5"><!--summary-5-->Summary</h3><table class="definitions"><tr><th><strong>7</strong></th><td><strong>tests total</strong></td></tr><tr><th>7</th><td>&#x2705; passing</td></tr><tr><th>0</th><td>&#x2753; pending</td></tr><tr><th>0</th><td>&#x274C; failing</td></tr></table><h3 id="tests-4"><!--tests-4-->Tests</h3><table><thead><tr><th>Id</th><th style="text-align: center;">Status</th><th>Test</th></tr></thead><tbody><tr><td colspan="3"><b>LoadAccess middleware when an access is actually loaded in request context </b></td></tr><tr><td><test id="OD3D"><code>OD3D</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should add the access id as Pryv-access-id header if token is valid</span></td></tr><tr><td><test id="UDW7"><code>UDW7</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should still set the Pryv-access-id header in case of error (e.g. expired token)</span></td></tr><tr><td colspan="3"><b>LoadAccess middleware when the access can not be loaded (e.g. invalid token) </b></td></tr><tr><td><test id="9E2D"><code>9E2D</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should not set the Pryv-access-id header</span></td></tr><tr><td colspan="3"><b>ProjectVersion#version when a &quot;.api-version&quot; file exists in the project </b></td></tr><tr><td><test id="HV40"><code>HV40</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">reads .api-version and returns that constant</span></td></tr><tr><td colspan="3"><b>SubdomainToPath middleware using a minimal application </b></td></tr><tr><td><test id="V0R9"><code>V0R9</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should not transform illegal usernames</span></td></tr><tr><td><test id="Q5A5"><code>Q5A5</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should transform username into a path segment</span></td></tr><tr><td><test id="IDDE"><code>IDDE</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should accept dashes</span></td></tr></tbody></table></div></section><section id="service-core 1-6.18-model"><h2 id="model-component"><!--model-component--><code>model</code> component</h2><div class="content"><div class="meta"></div><h3 id="summary-6"><!--summary-6-->Summary</h3><table class="definitions"><tr><th><strong>4</strong></th><td><strong>tests total</strong></td></tr><tr><th>4</th><td>&#x2705; passing</td></tr><tr><th>0</th><td>&#x2753; pending</td></tr><tr><th>0</th><td>&#x274C; failing</td></tr></table><h3 id="tests-5"><!--tests-5-->Tests</h3><table><thead><tr><th>Id</th><th style="text-align: center;">Status</th><th>Test</th></tr></thead><tbody><tr><td colspan="3"><b>MethodContext #parseAuth </b></td></tr><tr><td><test id="ZRW8"><code>ZRW8</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should parse token out</span></td></tr><tr><td><test id="AUIY"><code>AUIY</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should also parse the callerId when available</span></td></tr><tr><td colspan="3"><b>MethodContext #retrieveAccessFromId </b></td></tr><tr><td><test id="OJW2"><code>OJW2</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">checks expiry of the access</span></td></tr><tr><td><test id="D0RZ"><code>D0RZ</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">loads the access</span></td></tr></tbody></table></div></section><section id="service-core 1-6.18-previews-server"><h2 id="previews-server-component"><!--previews-server-component--><code>previews-server</code> component</h2><div class="content"><div class="meta"></div><h3 id="summary-7"><!--summary-7-->Summary</h3><table class="definitions"><tr><th><strong>16</strong></th><td><strong>tests total</strong></td></tr><tr><th>16</th><td>&#x2705; passing</td></tr><tr><th>0</th><td>&#x2753; pending</td></tr><tr><th>0</th><td>&#x274C; failing</td></tr></table><h3 id="tests-6"><!--tests-6-->Tests</h3><table><thead><tr><th>Id</th><th style="text-align: center;">Status</th><th>Test</th></tr></thead><tbody><tr><td colspan="3"><b>Event previews GET /<event id>/preview </event></b></td></tr><tr><td><test id="NRT9"><code>NRT9</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return JPEG previews for &#x201C;picture/attached&#x201D; events and cache the result</span></td></tr><tr><td><test id="FEWU"><code>FEWU</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must accept &#x201C;.jpg&#x201D; extension in the path (backwards-compatibility)</span></td></tr><tr><td><test id="PBC1"><code>PBC1</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must adjust the desired size to the bigger standard size (if exists)</span></td></tr><tr><td><test id="415L"><code>415L</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must limit the desired size to the biggest standard size if too big</span></td></tr><tr><td><test id="CWTQ"><code>CWTQ</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must serve the cached file if available</span></td></tr><tr><td><test id="2MME"><code>2MME</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must regenerate the cached file if obsolete</span></td></tr><tr><td><test id="7Y91"><code>7Y91</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must respond with &#x201C;no content&#x201D; if the event type is not supported</span></td></tr><tr><td><test id="61N8"><code>61N8</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return a proper error if the event does not exist</span></td></tr><tr><td><test id="VIJO"><code>VIJO</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must forbid requests missing an access token</span></td></tr><tr><td><test id="FAK4"><code>FAK4</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must forbid requests with unauthorized accesses</span></td></tr><tr><td><test id="QUM3"><code>QUM3</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return a proper error if event data is corrupted (no attachment object)</span></td></tr><tr><td><test id="DQF6"><code>DQF6</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return a proper error if event data is corrupted (no attached file)</span></td></tr><tr><td><test id="GSDF"><code>GSDF</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must work with animated GIFs too</span></td></tr><tr><td colspan="3"><b>Event previews POST /clean-up-cache </b></td></tr><tr><td><test id="FUYE"><code>FUYE</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must clean up cached previews not accessed for one week by default</span></td></tr><tr><td><test id="G5JR"><code>G5JR</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must ignore files with no readable extended attribute</span></td></tr><tr><td colspan="3"><b>(index) OPTIONS / </b></td></tr><tr><td><test id="E5MW"><code>E5MW</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should return OK</span></td></tr></tbody></table></div></section><section id="service-core 1-6.18-storage"><h2 id="storage-component"><!--storage-component--><code>storage</code> component</h2><div class="content"><div class="meta"></div><h3 id="summary-8"><!--summary-8-->Summary</h3><table class="definitions"><tr><th><strong>15</strong></th><td><strong>tests total</strong></td></tr><tr><th>5</th><td>&#x2705; passing</td></tr><tr><th>10</th><td>&#x2753; pending</td></tr><tr><th>0</th><td>&#x274C; failing</td></tr></table><h3 id="tests-7"><!--tests-7-->Tests</h3><table><thead><tr><th>Id</th><th style="text-align: center;">Status</th><th>Test</th></tr></thead><tbody><tr><td colspan="3"><b>Database #close() </b></td></tr><tr><td><test id="BYRG"><code>BYRG</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">closes the database connection</span></td></tr><tr><td colspan="3"><b>Database Mongo duplicate errors </b></td></tr><tr><td><test id="9UBA"><code>9UBA</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must detect mongo duplicate errors with isDuplicateError</span></td></tr><tr><td><test id="W1FO"><code>W1FO</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must augment mongo duplicate errors with duplicate check utilities</span></td></tr><tr><td><test id="D0EN"><code>D0EN</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must fail if mongo duplicate error message changed</span></td></tr><tr><td colspan="3"><b>Versions </b></td></tr><tr><td><test id="CRPD"><code>CRPD</code></test></td><td style="text-align: center;">&#x2753;</td><td><span class="type">must handle data migration from v1.3.40 to 1.4.0</span></td></tr><tr><td><test id="CRPX"><code>CRPX</code></test></td><td style="text-align: center;">&#x2753;</td><td><span class="type">must handle data migration from v1.4.0 to 1.5.0</span></td></tr><tr><td><test id="VMKO"><code>VMKO</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must handle data migration from 1.5.22 to 1.6.0</span></td></tr></tbody></table></div></section><section id="service-core 1-6.18-tprpc"><h2 id="tprpc-component"><!--tprpc-component--><code>tprpc</code> component</h2><div class="content"><div class="meta"></div><h3 id="summary-9"><!--summary-9-->Summary</h3><table class="definitions"><tr><th><strong>3</strong></th><td><strong>tests total</strong></td></tr><tr><th>3</th><td>&#x2705; passing</td></tr><tr><th>0</th><td>&#x2753; pending</td></tr><tr><th>0</th><td>&#x274C; failing</td></tr></table><h3 id="tests-8"><!--tests-8-->Tests</h3><table><thead><tr><th>Id</th><th style="text-align: center;">Status</th><th>Test</th></tr></thead><tbody><tr><td colspan="3"><b>Base API </b></td></tr><tr><td><test id="GZFK"><code>GZFK</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">making a call</span></td></tr><tr><td><test id="V7MJ"><code>V7MJ</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">failing a call (server-side)</span></td></tr><tr><td colspan="3"><b>Type Compilation </b></td></tr><tr><td><test id="0YBR"><code>0YBR</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">compiles a .proto 3 syntax file into a set of flow-type interfaces</span></td></tr></tbody></table></div></section><section id="service-core 1-6.18-utils"><h2 id="utils-component"><!--utils-component--><code>utils</code> component</h2><div class="content"><div class="meta"></div><h3 id="summary-10"><!--summary-10-->Summary</h3><table class="definitions"><tr><th><strong>10</strong></th><td><strong>tests total</strong></td></tr><tr><th>10</th><td>&#x2705; passing</td></tr><tr><th>0</th><td>&#x2753; pending</td></tr><tr><th>0</th><td>&#x274C; failing</td></tr></table><h3 id="tests-9"><!--tests-9-->Tests</h3><table><thead><tr><th>Id</th><th style="text-align: center;">Status</th><th>Test</th></tr></thead><tbody><tr><td colspan="3"><b>Tree utils buildTree() </b></td></tr><tr><td><test id="32CB"><code>32CB</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must build a correct tree for a given consistent array</span></td></tr><tr><td><test id="VVVS"><code>VVVS</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must throw an error if objects do not contain the necessary properties</span></td></tr><tr><td><test id="CEUF"><code>CEUF</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must throw an error if the object in argument is not an array</span></td></tr><tr><td colspan="3"><b>Tree utils flattenTree() </b></td></tr><tr><td><test id="11JJ"><code>11JJ</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must build a correct array for a given tree</span></td></tr><tr><td><test id="OVJM"><code>OVJM</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must throw an error if the object in argument is not an array</span></td></tr><tr><td colspan="3"><b>Tree utils findInTree() </b></td></tr><tr><td><test id="S1N0"><code>S1N0</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return the first item matching the given iterator function</span></td></tr><tr><td><test id="SI6L"><code>SI6L</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return null if no item matches the given iterator function</span></td></tr><tr><td colspan="3"><b>Tree utils filterTree() </b></td></tr><tr><td><test id="YIE6"><code>YIE6</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return only items matching the given iterator function</span></td></tr><tr><td colspan="3"><b>Tree utils collect() </b></td></tr><tr><td><test id="AU44"><code>AU44</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return an array with values matching the iterator function for each item in the tree</span></td></tr><tr><td colspan="3"><b>Tree utils expandIds() </b></td></tr><tr><td><test id="PFJP"><code>PFJP</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">must return an array with the ids passed in argument plus those of all their descendants</span></td></tr></tbody></table></div></section><section id="service-core 1-6.18-webhooks"><h2 id="webhooks-component"><!--webhooks-component--><code>webhooks</code> component</h2><div class="content"><div class="meta"></div><h3 id="summary-11"><!--summary-11-->Summary</h3><table class="definitions"><tr><th><strong>8</strong></th><td><strong>tests total</strong></td></tr><tr><th>8</th><td>&#x2705; passing</td></tr><tr><th>0</th><td>&#x2753; pending</td></tr><tr><th>0</th><td>&#x274C; failing</td></tr></table><h3 id="tests-10"><!--tests-10-->Tests</h3><table><thead><tr><th>Id</th><th style="text-align: center;">Status</th><th>Test</th></tr></thead><tbody><tr><td colspan="3"><b>Webhooks when loading Webhooks on startup when booting the webhooks application </b></td></tr><tr><td><test id="YD6N"><code>YD6N</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should send a boot message to all active webhooks</span></td></tr><tr><td><test id="UM4T"><code>UM4T</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should send nothing to inactive webhooks</span></td></tr><tr><td colspan="3"><b>Webhooks when loading Webhooks on startup when creating an event in a Webhook scope when the notifications server is running </b></td></tr><tr><td><test id="3TMH"><code>3TMH</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should send API call to the notifications server</span></td></tr><tr><td><test id="7N4L"><code>7N4L</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should update the Webhook&#x2019;s data to the storage</span></td></tr><tr><td colspan="3"><b>Webhooks [BBB] when creating a Webhook through api-server when the notifications server is running returning 400 </b></td></tr><tr><td><test id="EXQD"><code>EXQD</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should register a new webhook in the service through NATS</span></td></tr><tr><td><test id="8Q4E"><code>8Q4E</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should deactivate after failures</span></td></tr><tr><td><test id="PY61"><code>PY61</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should be run again when updating its state</span></td></tr><tr><td colspan="3"><b>Webhooks when there are running webhooks when deleting a webhook through API server </b></td></tr><tr><td><test id="904D"><code>904D</code></test></td><td style="text-align: center;">&#x2705;</td><td><span class="type">should deactivate the current running webhook through NATS</span></td></tr></tbody></table></div></section></section></div><nav id="toc"></nav></div><footer id="page-footer"><nav class="navbar navbar-default"><div class="container-fluid"><div id="footer-nav"><ul class="nav navbar-nav"><li><a href="mailto:developers@pryv.com">Send a message</a></li><li><a href="https://github.com/pryv">GitHub</a></li><li><a href="https://pryv.com">pryv.com</a></li></ul></div></div></nav></footer><script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script><script src="/assets/bootstrap.min.js"></script><script src="/assets/js/toc.min.js"></script><!-- TOC generation--><script>jQuery(document).ready(function($) {
  // Header is about 51 pixels. This equals to 'header + fuzz', fuzz was
  // determined experimentally.
  var offset = 90;

  // Display TOC on the left side of the page.
  $('#toc').toc({
    selector: '#main h1:not(.page-title),#main h2,#main h3',
    ulClass: 'nav'
  });

  // Synchronise scroll/click motion with TOC display.
  $(document).ready(function() {
    // NOTE This is done at onLoad since we need to wait for all CSS
    // to appear.
    $('body').scrollspy({
      target: '#toc',
      offset: offset
    });
    scrollBy(0, 1); // make it scroll to be sure scrollspy gets it
    
    // fix offset when navigating
    $('#toc li a, a.toc-anchor').click(function (e) {
      e.preventDefault();
      var target = $(this).attr('href');
      window.location.hash = target;
      
      $(target)[0].scrollIntoView();
      if ($(window).scrollTop() + $(window).height() !== $(document).height()) {
        //only adjust when not at bottom
        scrollBy(0, -offset + 40);
      }
      return true;
    });
  
  });
});
</script><!-- Code blocks highlighting--><script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();
</script><!-- Google Analytics--><script>var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-36589447-2']);
_gaq.push(['_trackPageview']);
(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();</script></body></html>