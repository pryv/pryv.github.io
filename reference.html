<!DOCTYPE html><html lang="en" class="no-js"><head><meta charset="UTF-8"><title>Pryv API - Reference</title><meta name="description" content="TODO"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="stylesheet" type="text/css" href="bootstrap/css/bootstrap.min.css"><link rel="stylesheet" type="text/css" href="style.css"><link rel="stylesheet" type="text/css" href="bootstrap/css/bootstrap-responsive.min.css"><link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=PT+Sans"><link rel="stylesheet" type="text/css" href="fonts/stylesheet.css"><script src="scripts/modernizr.min.js"></script><script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.js"></script><script src="scripts/jquery.toc.min.js"></script><script src="bootstrap/js/bootstrap.min.js"></script><link rel="stylesheet" type="text/css" href="highlight.css"><script src="highlight/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();
</script><script>var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-36589447-2']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
</script></head><body class="with-toc with-examples"><header id="page-header" class="navbar navbar-fixed-top"><div class="navbar-inner"><a href="dev-index.html" class="brand">Pryv</a><a data-toggle="collapse" data-target=".nav-collapse" class="btn btn-navbar"><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></a><div class="nav-collapse collapse"><ul class="nav"><li><a href="about.html">About</a></li><li><a href="concepts.html">Concepts</a></li><li><a href="reference.html">API reference</a></li><li><a href="event-typez.html">Event types</a></li><li><a href="app-access.html">App access</a></li><li class="dropdown"><a href="#" data-toggle="dropdown" class="dropdown-toggle">More <b class="caret"></b></a><ul class="dropdown-menu"><li><a href="apps-and-services.html">Pryv apps and services</a></li><li><a href="code-libraries.html">Code libraries</a></li></ul></li><!--li.dropdown<a href="#" data-toggle="dropdown" class="dropdown-toggle">Guides <b class="caret"></b></a><ul class="dropdown-menu"><li><a href="#">Getting started</a></li><li><a href="#">Data modeling</a></li></ul>--><!--li.dropdown<a href="#" data-toggle="dropdown" class="dropdown-toggle">Reference <b class="caret"></b></a><ul class="dropdown-menu"><li><a href="reference.html">API</a></li><li><a href="event-typez.html">Event types</a></li><li><a href="standard-structure.html">Standard data structure</a></li><li><a href="app-access.html">App authorization</a></li></ul>--><!--li<a href="#">Blog</a>--></ul></div><div class="nav-header pull-right"><ul class="nav nav-pills examples-menu"><li><p class="navbar-text">Examples:&nbsp;</p></li><li class="json active"><a href="javascript:showExamples(&quot;json&quot;)">Raw JSON</a></li><li class="http"><a href="javascript:showExamples(&quot;http&quot;)">HTTP</a></li><li class="sockets"><a href="javascript:showExamples(&quot;sockets&quot;)">Socket.IO</a></li><li class="divider-vertical"></li><li><p class="navbar-text version">API version: <strong>0.7.0</strong></p></li></ul></div></div></header><div id="main-wrapper" class="container"><div id="main" class="row"><section id="basics"><h1 id="basics">Basics</h1>
<section id="basics-endpoint-url" class=""><h2 id="endpoint-url">Endpoint URL</h2>
<div class="content"><div class="intro"><pre><code>https://{username}.pryv.io
</code></pre><p>Because each user account is potentially served from a different machine according to the user&#39;s choice, each user has a dedicated API endpoint.</p>
</div></div><aside><div class="example"><p>For instance, user &#39;chuangzi&#39; would be served from <code>https://chuangzi.pryv.io</code></p>
</div></aside></section><section id="basics-calling-with-http" class=""><h2 id="calling-with-http">Calling with HTTP</h2>
<div class="content"><div class="intro"><p>The API serves regular REST-like HTTP requests, with the usual verbs for reading and manipulating data:</p>
<ul>
<li><strong>GET</strong> (parameters: query string)<br>
for reading resources</li>
<li><strong>POST</strong> (parameters: request body)<br>
for creating new resources and other methods modifying data</li>
<li><strong>PUT</strong> (parameters: request body)<br>
for modifying resources</li>
<li><strong>DELETE</strong> (parameters: query string)<br>
for removing resources; logical deletion (trashing) is supported for some resources such as events and streams</li>
</ul>
</div></div><aside><div class="example"><p>Example request</p>
<pre><code class="lang-http">GET /events HTTP/1.1
Host: {username}.pryv.io
Authorization: {access-token}
</code></pre>
</div></aside><section id="basics-calling-with-http-alternative-http-request-method" class=""><h3 id="alternative-http-request-method">Alternative HTTP request method</h3>
<div class="content"><div class="intro"><p>Because we could&#39;t fathom out the rationale behind <a href="https://developer.mozilla.org/en-US/docs/HTTP/Access_control_CORS">HTTP access control (CORS) rules</a>, the API allows web apps to fake POST, PUT and DELETE requests through <code>application/x-www-form-urlencoded</code> POST requests with the following fields (all optional):</p>
</div><table class="definitions"><tr><th><code>_method</code></th><td><div class="header"></div><div class="description"><p>The HTTP override method to use (usually <code>PUT</code> or <code>DELETE</code>; <code>POST</code> is used if not set).</p>
</div></td></tr><tr><th><code>_auth</code></th><td><div class="header"></div><div class="description"><p>The <code>Authorization</code> header value (alternative to sending the header itself).</p>
</div></td></tr><tr><th><code>_json</code></th><td><div class="header"></div><div class="description"><p>Considered as the JSON request body if set (overriding all other body content, if any).</p>
</div></td></tr></table></div></section></section><section id="basics-calling-with-websockets" class=""><h2 id="calling-with-websockets">Calling with websockets</h2>
<div class="content"><div class="intro"><p>The API supports real-time interaction by accepting websocket connections via <a href="http://socket.io">Socket.IO</a>.</p>
</div></div><section id="basics-calling-with-websockets-connecting" class=""><h3 id="connecting">Connecting</h3>
<div class="content"><div class="intro"><p>First, load the right Socket.IO client library.</p>
<ul>
<li><p>For a web app, the Javascript lib is directly served by the API at:</p>
<pre><code>https://{username}.pryv.io/socket.io/socket.io.js</code></pre>
</li>
<li><p>For other platforms see the <a href="https://github.com/learnboost/socket.io/wiki#wiki-in-other-languages">Socket.IO wiki</a>.)</p>
</li>
</ul>
<p>Then initialize the connection with the URL:</p>
<pre><code>https://{username}.pryv.io:443/{username}?auth={accessToken}&amp;resource=/{username}
</code></pre></div></div><aside><div class="example"><p>In a web app</p>
<pre><code class="lang-html">&lt;script src=&quot;https://chuangzi.pryv.io/socket.io/socket.io.js&quot;&gt;&lt;/script&gt;
&lt;script&gt;
var socket = io.connect(&quot;https://chuangzi.pryv.io:443/chuangzi?auth=chrhwsuin00037cjxqnmt1jkq&amp;resource=/chuangzi&quot;);
});
&lt;/script&gt;
</code></pre>
</div></aside></section><section id="basics-calling-with-websockets-calling-methods" class=""><h3 id="calling-methods">Calling methods</h3>
<div class="content"><div class="intro"><p>You call API methods by sending a corresponding Socket.IO <code>{method-id}</code> message, passing a parameters object and a callback:</p>
<pre><code class="lang-javascript">// javascript
socket.emit(&#39;{method-id}&#39;, {/*parameters*/}, function (error, result) {
  // handle result
});
</code></pre>
<p>See each method&#39;s doc for its id.</p>
</div></div><aside><div class="example"><p>Retrieving events (Javascript)</p>
<pre><code class="lang-javascript">socket.emit(&#39;events.get&#39;, {sortAscending: true}, function (error, result) {
  // ...
});
</code></pre>
</div></aside></section><section id="basics-calling-with-websockets-subscribing-to-changes" class=""><h3 id="subscribing-to-changes">Subscribing to changes</h3>
<div class="content"><div class="intro"><p>Get notified when data changes by subscribing to messages <code>eventsChanged</code> and <code>streamsChanged</code>.</p>
</div></div><aside><div class="example"><p>Subscribing to events changes (Javascript)</p>
<pre><code class="lang-javascript">socket.on(&#39;eventsChanged&#39;, function() {
  // retrieve latest changes and update
});
</code></pre>
</div></aside></section></section><section id="basics-data-format" class=""><h2 id="data-format">Data format</h2>
<div class="content"><div class="intro"><p>The API exchanges data with clients in JSON (MIME type <code>application/json</code>), except when uploading/downloading attached files.</p>
</div></div><aside><div class="example"><p>Example event</p>
<pre><code>{
  "id": "chrhwsum3000u7cjx7xc56eh9",
  "time": 1350373077.359,
  "streamId": "diary",
  "tags": [],
  "type": "position/wgs84",
  "content": {
    "latitude": 40.714728,
    "longitude": -73.998672
  },
  "created": 1392039731.451,
  "createdBy": "chrhwsuim00007cjxwoh8zxjp",
  "modified": 1392039731.451,
  "modifiedBy": "chrhwsuim00007cjxwoh8zxjp"
}</code></pre></div></aside></section><section id="basics-authorization" class=""><h2 id="authorization">Authorization</h2>
<div class="content"><div class="intro"><p>All requests for retrieving and manipulating activity data must carry a valid <a href="#data-structure-access">access token</a> in the HTTP <code>Authorization</code> header or, alternatively, in the query string&#39;s <code>auth</code> parameter. With Socket.IO the token is passed in the handshake.</p>
<p>(Access tokens are obtained via the <a href="app-access.html">app auth flow</a> or from sharing.)</p>
</div></div><aside><div class="example"><p>HTTP <code>Authorization</code> header</p>
<pre><code class="lang-http">GET /events HTTP/1.1
Host: {username}.pryv.io
Authorization: {access-token}
</code></pre>
</div><div class="example"><p>HTTP <code>auth</code> query string parameter</p>
<pre><code class="lang-http">GET /events?auth={access-token} HTTP/1.1
Host: {username}.pryv.io
</code></pre>
</div></aside></section><section id="basics-common-metadata" class=""><h2 id="common-metadata">Common metadata</h2>
<div class="content"><div class="intro"><p>General API and server information.</p>
</div></div><section id="basics-common-metadata-http" class=""><h3 id="in-http-headers">In HTTP headers</h3>
<div class="content"><div class="intro"><p>Every HTTP response has header:</p>
</div><table class="definitions"><tr><th><code>API-Version</code></th><td><div class="header"></div><div class="description"><p>The version of the API in the form <code>{major}.{minor}.{revision}</code>. Mirrored in method results as <code>meta.apiVersion</code>.</p>
</div></td></tr></table></div></section><section id="basics-common-metadata-method-results" class=""><h3 id="in-method-results">In method results</h3>
<div class="content"><div class="intro"><p>Every JSON method result has properties:</p>
</div><table class="definitions"><tr><th><code>meta.apiVersion</code></th><td><div class="header"></div><div class="description"><p>The version of the API in the form <code>{major}.{minor}.{revision}</code>. Mirrored in HTTP header <code>API-Version</code>.</p>
</div></td></tr><tr><th><code>meta.serverTime</code></th><td><div class="header"></div><div class="description"><p>The current server time as a <a href="#data-structure-timestamp">timestamp</a>. Keeping track of server time is necessary to properly handle time in API calls.</p>
</div></td></tr></table></div></section></section><section id="basics-errors" class=""><h2 id="errors">Errors</h2>
<div class="content"><div class="intro"><p>When an error occurs, the API returns a response with an <code>error</code> object (see <a href="#data-structure-error">error</a>) detailing the cause. (Over HTTP, the response status is set to 4xx or 5xx.) In this documentation, errors are identified by their <code>id</code>.</p>
</div></div><aside><div class="example"><pre><code>{
  "id": "invalid-access-token",
  "message": "Cannot find access with token 'bad-token'."
}</code></pre></div></aside><section id="basics-errors-usual-errors" class=""><h3 id="usual-errors">Usual errors</h3>
<div class="content"><div class="intro"><p>See also <a href="#data-structure-error">error data structure</a>.</p>
</div><table class="definitions"><tr><th><code>invalid-request-structure</code></th><td><div class="header"><span class="http"><span class="label">HTTP</span><span class="label-value"><code>400</code></span></span></div><div class="description"><p>The request&#39;s structure is not that expected; for example: invalid JSON syntax, unexpected multipart structure when uploading file attachments.</p>
</div></td></tr><tr><th><code>invalid-parameters-format</code></th><td><div class="header"><span class="http"><span class="label">HTTP</span><span class="label-value"><code>400</code></span></span></div><div class="description"><p>The request&#39;s parameters do not follow the expected format. The error&#39;s <code>data</code> contains an array of validation errors.</p>
</div></td></tr><tr><th><code>unknown-event</code></th><td><div class="header"><span class="http"><span class="label">HTTP</span><span class="label-value"><code>400</code></span></span></div><div class="description"><p>The referenced event(s) can&#39;t be found. If relevant, the unknown items&#39; ids are listed as an array in the error&#39;s <code>data.unknownIds</code>.</p>
</div></td></tr><tr><th><code>unknown-stream</code></th><td><div class="header"><span class="http"><span class="label">HTTP</span><span class="label-value"><code>400</code></span></span></div><div class="description"><p>The referenced stream(s) can&#39;t be found. If relevant, the unknown items&#39; ids are listed as an array in the error&#39;s <code>data.unknownIds</code>.</p>
</div></td></tr><tr><th><code>unknown-tag</code></th><td><div class="header"><span class="http"><span class="label">HTTP</span><span class="label-value"><code>400</code></span></span></div><div class="description"><p>The referenced typed tag(s) can&#39;t be found. If relevant, the unknown items&#39; ids are listed as an array in the error&#39;s <code>data.unknownIds</code>.</p>
</div></td></tr><tr><th><code>invalid-access-token</code></th><td><div class="header"><span class="http"><span class="label">HTTP</span><span class="label-value"><code>401</code></span></span></div><div class="description"><p>The access token is missing or invalid.</p>
</div></td></tr><tr><th><code>forbidden</code></th><td><div class="header"><span class="http"><span class="label">HTTP</span><span class="label-value"><code>403</code></span></span></div><div class="description"><p>The given access token does not grant permission for this operation. See <a href="#data-structure-access">accesses</a> for more details about accesses and permissions.</p>
</div></td></tr><tr><th><code>unknown-event</code></th><td><div class="header"><span class="http"><span class="label">HTTP</span><span class="label-value"><code>404</code></span></span></div><div class="description"><p>The event can&#39;t be found.</p>
</div></td></tr><tr><th><code>unknown-stream</code></th><td><div class="header"><span class="http"><span class="label">HTTP</span><span class="label-value"><code>404</code></span></span></div><div class="description"><p>The activity stream can&#39;t be found.</p>
</div></td></tr><tr><th><code>unknown-tag</code></th><td><div class="header"><span class="http"><span class="label">HTTP</span><span class="label-value"><code>404</code></span></span></div><div class="description"><p>The tag can&#39;t be found.</p>
</div></td></tr><tr><th><code>unknown-attachment</code></th><td><div class="header"><span class="http"><span class="label">HTTP</span><span class="label-value"><code>404</code></span></span></div><div class="description"><p>The attached file can&#39;t be found for the specified event.</p>
</div></td></tr><tr><th><code>user-account-relocated</code></th><td><div class="header"><span class="http"><span class="label">HTTP</span><span class="label-value"><code>301</code></span></span></div><div class="description"><p>The user has relocated her account to another server. Both the <code>Location</code> header and the error&#39;s <code>data</code> contain the equivalent URL pointing to the physical server now hosting the user&#39;s account. This error can only occur between the moment the account is relocated and the moment your DNS is updated to point to the new server. So we&#39;re stretching the HTTP convention a little, in that the returned URL should not be used permanently (only until <code>{username}.pryv.io</code> points to the correct server again). It&#39;s up to you to decide whether to keep it for the duration of the session (if you use sessions), for a given time, etc.</p>
</div></td></tr><tr><th><code>user-intervention-required</code></th><td><div class="header"><span class="http"><span class="label">HTTP</span><span class="label-value"><code>402</code></span></span></div><div class="description"><p>The request cannot be served temporarily because the user&#39;s account has exceeded its limits. The user must log into her account and fix the issue.</p>
</div></td></tr></table></div></section></section></section><section id="methods"><h1 id="api-methods">API methods</h1>
<section id="methods-events" class=""><h2 id="events">Events</h2>
<div class="content"><div class="intro"><p>Methods to retrieve and manipulate <a href="#data-structure-event">events</a>.</p>
</div></div><section id="methods-events-events-get" class="method"><h3 id="get-events">Get events</h3>
<div class="content"><div class="meta"><span class="method-id"><span class="label">id</span><span class="label-value"><code>events.get</code></span></span><span class="http"><span class="label">HTTP</span><span class="label-value"><code>GET /events</code></span></span></div><div class="intro"><p>Queries accessible events.</p>
</div><h4 id="parameters">Parameters</h4>
<table class="definitions"><tr><th><code>fromTime</code></th><td><div class="header"><span class="type"><a href="#data-structure-timestamp">timestamp</a></span><span class="label optional">optional</span></div><div class="description"><p>The start time of the timeframe you want to retrieve events for. Default is 24 hours before <code>toTime</code> if the latter is set; otherwise it is not taken into account.</p>
</div></td></tr><tr><th><code>toTime</code></th><td><div class="header"><span class="type"><a href="#data-structure-timestamp">timestamp</a></span><span class="label optional">optional</span></div><div class="description"><p>The end time of the timeframe you want to retrieve events for. Default is the current time. Note: events are considered to be within a given timeframe based on their <code>time</code> only (<code>duration</code> is not considered).</p>
</div></td></tr><tr><th><code>streams</code></th><td><div class="header"><span class="type">array of <a href="#data-structure-identity">identity</a></span><span class="label optional">optional</span></div><div class="description"><p>If set, only events assigned to the specified streams and their sub-streams will be returned. By default, all accessible events are returned regardless of their stream.</p>
</div></td></tr><tr><th><code>tags</code></th><td><div class="header"><span class="type">array of strings</span><span class="label optional">optional</span></div><div class="description"><p>If set, only events assigned to all of the listed tags will be returned.</p>
</div></td></tr><tr><th><code>running</code></th><td><div class="header"><span class="type">boolean</span><span class="label optional">optional</span></div><div class="description"><p>If <code>true</code>, only running period events will be returned.</p>
</div></td></tr><tr><th><code>sortAscending</code></th><td><div class="header"><span class="type"><code>true</code>|<code>false</code></span><span class="label optional">optional</span></div><div class="description"><p>If <code>true</code>, events will be sorted from oldest to newest. Default: false (sort descending).</p>
</div></td></tr><tr><th><code>skip</code></th><td><div class="header"><span class="type">number</span><span class="label optional">optional</span></div><div class="description"><p>The number of items to skip in the results.</p>
</div></td></tr><tr><th><code>limit</code></th><td><div class="header"><span class="type">number</span><span class="label optional">optional</span></div><div class="description"><p>The number of items to return in the results. A default value of 20 items is used if no other range limiting parameter is specified (<code>fromTime</code>, <code>toTime</code>).</p>
</div></td></tr><tr><th><code>state</code></th><td><div class="header"><span class="type"><code>default</code>|<code>trashed</code>|<code>all</code></span><span class="label optional">optional</span></div><div class="description"><p>Indicates what items to return depending on their state. By default, only items that are not in the trash are returned; <code>trashed</code> returns only items in the trash, while <code>all</code> return all items regardless of their state.</p>
</div></td></tr><tr><th><code>modifiedSince</code></th><td><div class="header"><span class="type"><a href="#data-structure-timestamp">timestamp</a></span><span class="label optional">optional</span></div><div class="description"><p>If specified, only events modified since that time will be returned.</p>
</div></td></tr></table><h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>200 OK</code></span></span><table class="definitions"><tr><th><code>events</code></th><td><div class="header"><span class="type">array of <a href="#data-structure-event">events</a></span></div><div class="description"><p>The accessible events ordered by time (see <code>sortAscending</code> above).</p>
</div></td></tr></table></div><aside><div class="example"><div class="tab-content"><div class="tab-pane json active"><pre><code>{}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "events": [
    {
      "id": "chrhwsum3000s7cjxwici44e6",
      "time": 1392043331.451,
      "streamId": "diary",
      "tags": [],
      "type": "picture/attached",
      "content": null,
      "attachments": [
        {
          "id": "chrhwsum3000t7cjxfi6kik1s",
          "fileName": "photo.jpg",
          "type": "image/jpeg",
          "size": 2561
        }
      ],
      "created": 1392050531.451,
      "createdBy": "chrhwsuin00047cjxa73fag8d",
      "modified": 1392050531.451,
      "modifiedBy": "chrhwsuin00047cjxa73fag8d"
    },
    {
      "id": "chrhwsum2000j7cjx0zbsd4md",
      "time": 1392046931.45,
      "streamId": "jogging",
      "tags": [],
      "type": "activity/pryv",
      "content": null,
      "created": 1392046931.45,
      "createdBy": "chrhwsuin00017cjxkw8cjgo4",
      "modified": 1392046931.45,
      "modifiedBy": "chrhwsuin00017cjxkw8cjgo4"
    },
    {
      "id": "chrhwsum3000u7cjx7xc56eh9",
      "time": 1350373077.359,
      "streamId": "diary",
      "tags": [],
      "type": "position/wgs84",
      "content": {
        "latitude": 40.714728,
        "longitude": -73.998672
      },
      "created": 1392039731.451,
      "createdBy": "chrhwsuim00007cjxwoh8zxjp",
      "modified": 1392039731.451,
      "modifiedBy": "chrhwsuim00007cjxwoh8zxjp"
    }
  ]
}</code></pre></div><div class="tab-pane http"><pre><code>GET /events HTTP/1.1
Host: https://{username}.pryv.io
Authentication: {access-token}

{}</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 0.7.0

{
  "events": [
    {
      "id": "chrhwsum3000s7cjxwici44e6",
      "time": 1392043331.451,
      "streamId": "diary",
      "tags": [],
      "type": "picture/attached",
      "content": null,
      "attachments": [
        {
          "id": "chrhwsum3000t7cjxfi6kik1s",
          "fileName": "photo.jpg",
          "type": "image/jpeg",
          "size": 2561
        }
      ],
      "created": 1392050531.451,
      "createdBy": "chrhwsuin00047cjxa73fag8d",
      "modified": 1392050531.451,
      "modifiedBy": "chrhwsuin00047cjxa73fag8d"
    },
    {
      "id": "chrhwsum2000j7cjx0zbsd4md",
      "time": 1392046931.45,
      "streamId": "jogging",
      "tags": [],
      "type": "activity/pryv",
      "content": null,
      "created": 1392046931.45,
      "createdBy": "chrhwsuin00017cjxkw8cjgo4",
      "modified": 1392046931.45,
      "modifiedBy": "chrhwsuin00017cjxkw8cjgo4"
    },
    {
      "id": "chrhwsum3000u7cjx7xc56eh9",
      "time": 1350373077.359,
      "streamId": "diary",
      "tags": [],
      "type": "position/wgs84",
      "content": {
        "latitude": 40.714728,
        "longitude": -73.998672
      },
      "created": 1392039731.451,
      "createdBy": "chrhwsuim00007cjxwoh8zxjp",
      "modified": 1392039731.451,
      "modifiedBy": "chrhwsuim00007cjxwoh8zxjp"
    }
  ]
}</code></pre></div><div class="tab-pane sockets"><pre><code>socket.emit('events.get', {}, callback);</code></pre><div class="step-marker">⬇</div><pre><code>{
  "events": [
    {
      "id": "chrhwsum3000s7cjxwici44e6",
      "time": 1392043331.451,
      "streamId": "diary",
      "tags": [],
      "type": "picture/attached",
      "content": null,
      "attachments": [
        {
          "id": "chrhwsum3000t7cjxfi6kik1s",
          "fileName": "photo.jpg",
          "type": "image/jpeg",
          "size": 2561
        }
      ],
      "created": 1392050531.451,
      "createdBy": "chrhwsuin00047cjxa73fag8d",
      "modified": 1392050531.451,
      "modifiedBy": "chrhwsuin00047cjxa73fag8d"
    },
    {
      "id": "chrhwsum2000j7cjx0zbsd4md",
      "time": 1392046931.45,
      "streamId": "jogging",
      "tags": [],
      "type": "activity/pryv",
      "content": null,
      "created": 1392046931.45,
      "createdBy": "chrhwsuin00017cjxkw8cjgo4",
      "modified": 1392046931.45,
      "modifiedBy": "chrhwsuin00017cjxkw8cjgo4"
    },
    {
      "id": "chrhwsum3000u7cjx7xc56eh9",
      "time": 1350373077.359,
      "streamId": "diary",
      "tags": [],
      "type": "position/wgs84",
      "content": {
        "latitude": 40.714728,
        "longitude": -73.998672
      },
      "created": 1392039731.451,
      "createdBy": "chrhwsuim00007cjxwoh8zxjp",
      "modified": 1392039731.451,
      "modifiedBy": "chrhwsuim00007cjxwoh8zxjp"
    }
  ]
}</code></pre></div></div></div></aside></section><section id="methods-events-events-create" class="method"><h3 id="create-event">Create event</h3>
<div class="content"><div class="meta"><span class="method-id"><span class="label">id</span><span class="label-value"><code>events.create</code></span></span><span class="http"><span class="label">HTTP</span><span class="label-value"><code>POST /events</code></span></span></div><div class="intro"><p>Records a new event. It is recommended that events recorded this way are completed events, i.e. either period events with a known duration or mark events. To start a running period event, use <a href="#methods-events-events-start">Start period</a> instead.</p>
<p>In addition to JSON, this request accepts standard multipart/form-data content to support the creation of event with attached files in a single request. When sending a multipart request, one content part must hold the JSON for the new event and all other content parts must be the attached files.</p>
</div><h4 id="parameters">Parameters</h4>
<p>The new event&#39;s data: see <a href="#data-structure-event">Event</a>.</p>
<h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>201 Created</code></span></span><table class="definitions"><tr><th><code>event</code></th><td><div class="header"><span class="type"><a href="#data-structure-event">event</a></span></div><div class="description"><p>The created event.</p>
</div></td></tr><tr><th><code>stoppedId</code></th><td><div class="header"><span class="type"><a href="#data-structure-identity">identity</a></span></div><div class="description"><p>Only in <code>singleActivity</code> streams. If set, indicates the id of the previously running period event that was stopped as a consequence of inserting the new event.</p>
</div></td></tr></table><h4 id="specific-errors">Specific errors</h4>
<table class="definitions"><tr><th><code>invalid-operation</code></th><td><div class="header"><span class="http"><span class="label">HTTP</span><span class="label-value"><code>400</code></span></span></div><div class="description"><p>The stream is in the trash, and we prevent the recording of new events into trashed streams.</p>
</div></td></tr><tr><th><code>periods-overlap</code></th><td><div class="header"><span class="http"><span class="label">HTTP</span><span class="label-value"><code>400</code></span></span></div><div class="description"><p>Only in <code>singleActivity</code> streams: the new event overlaps existing period events. The overlapped events&#39; ids are listed as an array in the error&#39;s <code>data.overlappedIds</code>.</p>
</div></td></tr></table></div><aside><div class="example"><p>Capturing a simple number value</p>
<div class="tab-content"><div class="tab-pane json active"><pre><code>{
  "streamId": "weight",
  "type": "mass/kg",
  "content": 90
}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "event": {
    "id": "chrhwsum3000q7cjxtc3pc14n",
    "time": 1392046931.451,
    "streamId": "weight",
    "tags": [],
    "type": "mass/kg",
    "content": 90,
    "created": 1392046931.451,
    "createdBy": "chrhwsuin00017cjxkw8cjgo4",
    "modified": 1392046931.451,
    "modifiedBy": "chrhwsuin00017cjxkw8cjgo4"
  }
}</code></pre></div><div class="tab-pane http"><pre><code>POST /events HTTP/1.1
Host: https://{username}.pryv.io
Authentication: {access-token}

{
  "streamId": "weight",
  "type": "mass/kg",
  "content": 90
}</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 201 Created
Content-Type: application/json; charset=utf-8
API-Version: 0.7.0

{
  "event": {
    "id": "chrhwsum3000q7cjxtc3pc14n",
    "time": 1392046931.451,
    "streamId": "weight",
    "tags": [],
    "type": "mass/kg",
    "content": 90,
    "created": 1392046931.451,
    "createdBy": "chrhwsuin00017cjxkw8cjgo4",
    "modified": 1392046931.451,
    "modifiedBy": "chrhwsuin00017cjxkw8cjgo4"
  }
}</code></pre></div><div class="tab-pane sockets"><pre><code>socket.emit('events.create', {
  "streamId": "weight",
  "type": "mass/kg",
  "content": 90
}, callback);</code></pre><div class="step-marker">⬇</div><pre><code>{
  "event": {
    "id": "chrhwsum3000q7cjxtc3pc14n",
    "time": 1392046931.451,
    "streamId": "weight",
    "tags": [],
    "type": "mass/kg",
    "content": 90,
    "created": 1392046931.451,
    "createdBy": "chrhwsuin00017cjxkw8cjgo4",
    "modified": 1392046931.451,
    "modifiedBy": "chrhwsuin00017cjxkw8cjgo4"
  }
}</code></pre></div></div></div><div class="example"><p>cURL with attachment</p>
<pre><code class="lang-bash">curl -i -F &#39;event={&quot;streamId&quot;:&quot;diary&quot;,&quot;type&quot;:&quot;picture/attached&quot;}&#39;  -F &quot;file=@photo.jpg&quot; https://{username}.pryv.io/events?auth={token}
</code></pre>
<div class="step-marker">⬇</div><pre><code>{
  "event": {
    "id": "chrhwsum3000s7cjxwici44e6",
    "time": 1392043331.451,
    "streamId": "diary",
    "tags": [],
    "type": "picture/attached",
    "content": null,
    "attachments": [
      {
        "id": "chrhwsum3000t7cjxfi6kik1s",
        "fileName": "photo.jpg",
        "type": "image/jpeg",
        "size": 2561
      }
    ],
    "created": 1392050531.451,
    "createdBy": "chrhwsuin00047cjxa73fag8d",
    "modified": 1392050531.451,
    "modifiedBy": "chrhwsuin00047cjxa73fag8d"
  }
}</code></pre></div></aside></section><section id="methods-events-events-start" class="method"><h3 id="start-period">Start period</h3>
<div class="content"><div class="meta"><span class="method-id"><span class="label">id</span><span class="label-value"><code>events.start</code></span></span><span class="http"><span class="label">HTTP</span><span class="label-value"><code>POST /events/start</code></span></span></div><div class="intro"><p>Starts a new period event. This is equivalent to starting an event with a null <code>duration</code>. In <code>singleActivity</code> streams, also stops the previously running period event if any.</p>
<p>See <a href="#methods-events-events-create">Create event</a> for details.</p>
</div></div><aside><div class="example"><p>Starting an activity</p>
<div class="tab-content"><div class="tab-pane json active"><pre><code>{
  "streamId": "bicycling",
  "type": "activity/pryv"
}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "event": {
    "id": "chrhwsum2000k7cjxqozip4y4",
    "time": 1392046931.45,
    "duration": null,
    "streamId": "bicycling",
    "tags": [],
    "type": "activity/pryv",
    "content": null,
    "created": 1392046931.45,
    "createdBy": "chrhwsuin00017cjxkw8cjgo4",
    "modified": 1392046931.45,
    "modifiedBy": "chrhwsuin00017cjxkw8cjgo4"
  }
}</code></pre></div><div class="tab-pane http"><pre><code>POST /events/start HTTP/1.1
Host: https://{username}.pryv.io
Authentication: {access-token}

{
  "streamId": "bicycling",
  "type": "activity/pryv"
}</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 201 Created
Content-Type: application/json; charset=utf-8
API-Version: 0.7.0

{
  "event": {
    "id": "chrhwsum2000k7cjxqozip4y4",
    "time": 1392046931.45,
    "duration": null,
    "streamId": "bicycling",
    "tags": [],
    "type": "activity/pryv",
    "content": null,
    "created": 1392046931.45,
    "createdBy": "chrhwsuin00017cjxkw8cjgo4",
    "modified": 1392046931.45,
    "modifiedBy": "chrhwsuin00017cjxkw8cjgo4"
  }
}</code></pre></div><div class="tab-pane sockets"><pre><code>socket.emit('events.start', {
  "streamId": "bicycling",
  "type": "activity/pryv"
}, callback);</code></pre><div class="step-marker">⬇</div><pre><code>{
  "event": {
    "id": "chrhwsum2000k7cjxqozip4y4",
    "time": 1392046931.45,
    "duration": null,
    "streamId": "bicycling",
    "tags": [],
    "type": "activity/pryv",
    "content": null,
    "created": 1392046931.45,
    "createdBy": "chrhwsuin00017cjxkw8cjgo4",
    "modified": 1392046931.45,
    "modifiedBy": "chrhwsuin00017cjxkw8cjgo4"
  }
}</code></pre></div></div></div></aside></section><section id="methods-events-events-stop" class="method"><h3 id="stop-period">Stop period</h3>
<div class="content"><div class="meta"><span class="method-id"><span class="label">id</span><span class="label-value"><code>events.stop</code></span></span><span class="http"><span class="label">HTTP</span><span class="label-value"><code>POST /events/stop</code></span></span></div><div class="intro"><p>Stops a running period event. In <code>singleActivity</code> streams, which guarantee that only one event is running at any given time, that event is automatically determined; for regular streams, the event to stop must be specified.</p>
</div><h4 id="parameters">Parameters</h4>
<table class="definitions"><tr><th><code>streamId</code></th><td><div class="header"><span class="type"><a href="#data-structure-identity">identity</a></span></div><div class="description"><p>The id of the <code>singleActivity</code> stream in which to stop the running event. Either this or <code>id</code> must be specified.</p>
</div></td></tr><tr><th><code>id</code></th><td><div class="header"><span class="type"><a href="#data-structure-identity">identity</a></span></div><div class="description"><p>The id of the event to stop. Either this or <code>streamId</code> must be specified.</p>
</div></td></tr><tr><th><code>time</code></th><td><div class="header"><span class="type"><a href="#data-structure-timestamp">timestamp</a></span><span class="label optional">optional</span></div><div class="description"><p>The stop time. Default: now.</p>
</div></td></tr></table><h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>200 OK</code></span></span><table class="definitions"><tr><th><code>stoppedId</code></th><td><div class="header"><span class="type"><a href="#data-structure-identity">identity</a></span></div><div class="description"><p>The id of the event that was stopped or null if no running event was found.</p>
</div></td></tr></table><h4 id="specific-errors">Specific errors</h4>
<table class="definitions"><tr><th><code>unknown-event</code></th><td><div class="header"><span class="http"><span class="label">HTTP</span><span class="label-value"><code>400</code></span></span></div><div class="description"><p>The specified event cannot be found.</p>
</div></td></tr><tr><th><code>invalid-operation</code></th><td><div class="header"><span class="http"><span class="label">HTTP</span><span class="label-value"><code>400</code></span></span></div><div class="description"><p>The specified event is not a running period event.</p>
</div></td></tr><tr><th><code>missing-parameter</code></th><td><div class="header"><span class="http"><span class="label">HTTP</span><span class="label-value"><code>400</code></span></span></div><div class="description"><p>No <code>id</code> was specified and the specified stream is not a <code>singleActivity</code> stream (so that there can be more than one running event).</p>
</div></td></tr></table></div><aside><div class="example"><div class="tab-content"><div class="tab-pane json active"><pre><code>{
  "streamId": "bicycling",
  "time": 1392046931.692
}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "stoppedId": "chrhwsum2000k7cjxqozip4y4"
}</code></pre></div><div class="tab-pane http"><pre><code>POST /events/stop HTTP/1.1
Host: https://{username}.pryv.io
Authentication: {access-token}

{
  "streamId": "bicycling",
  "time": 1392046931.692
}</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 0.7.0

{
  "stoppedId": "chrhwsum2000k7cjxqozip4y4"
}</code></pre></div><div class="tab-pane sockets"><pre><code>socket.emit('events.stop', {
  "streamId": "bicycling",
  "time": 1392046931.692
}, callback);</code></pre><div class="step-marker">⬇</div><pre><code>{
  "stoppedId": "chrhwsum2000k7cjxqozip4y4"
}</code></pre></div></div></div></aside></section><section id="methods-events-events-update" class="method"><h3 id="update-event">Update event</h3>
<div class="content"><div class="meta"><span class="method-id"><span class="label">id</span><span class="label-value"><code>events.update</code></span></span><span class="http"><span class="label">HTTP</span><span class="label-value"><code>PUT /events/{id}</code></span></span></div><div class="intro"><p>Modifies the event.</p>
</div><h4 id="parameters">Parameters</h4>
<table class="definitions"><tr><th><code>id</code></th><td><div class="header"><span class="type"><a href="#data-structure-identity">identity</a></span><span class="http"><span class="label">HTTP</span><span class="label-value"><span>set in request path</span></span></span></div><div class="description"><p>The id of the event.</p>
</div></td></tr><tr><th><code>update</code></th><td><div class="header"><span class="type">object</span><span class="http"><span class="label">HTTP</span><span class="label-value"><span>= request body</span></span></span></div><div class="description"><p>New values for the event&#39;s fields: see <a href="#data-structure-event">event</a>. All fields are optional, and only modified values must be included.</p>
</div></td></tr></table><h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>200 OK</code></span></span><table class="definitions"><tr><th><code>event</code></th><td><div class="header"><span class="type"><a href="#data-structure-event">event</a></span></div><div class="description"><p>The updated event.</p>
</div></td></tr><tr><th><code>stoppedId</code></th><td><div class="header"><span class="type"><a href="#data-structure-identity">identity</a></span></div><div class="description"><p>Only in <code>singleActivity</code> streams. If set, indicates the id of the previously running period event that was stopped as a consequence of modifying the event.</p>
</div></td></tr></table><h4 id="specific-errors">Specific errors</h4>
<table class="definitions"><tr><th><code>invalid-operation</code></th><td><div class="header"><span class="http"><span class="label">HTTP</span><span class="label-value"><code>400</code></span></span></div><div class="description"><p>Only in <code>singleActivity</code> streams. The duration of the period event cannot be set to <code>null</code> (i.e. still running) if one or more other period event(s) exist later in time. The error&#39;s <code>data.conflictingPeriodId</code> provides the id of the closest conflicting event.</p>
</div></td></tr><tr><th><code>periods-overlap</code></th><td><div class="header"><span class="http"><span class="label">HTTP</span><span class="label-value"><code>400</code></span></span></div><div class="description"><p>Only in <code>singleActivity</code> streams. The time and/or duration of the period event cannot be set to overlap with other period events. The overlapping events&#39; ids are listed as an array in the error&#39;s <code>data.overlappedIds</code>.</p>
</div></td></tr></table></div><aside><div class="example"><p>Adding a tag</p>
<div class="tab-content"><div class="tab-pane json active"><pre><code>{
  "id": "chrhwsum3000u7cjx7xc56eh9",
  "update": {
    "tags": [
      "home"
    ]
  }
}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "event": {
    "tags": [
      "home"
    ],
    "modified": 1392046931.692,
    "modifiedBy": "chrhwsuin00017cjxkw8cjgo4",
    "id": "chrhwsum3000u7cjx7xc56eh9",
    "time": 1350373077.359,
    "streamId": "diary",
    "type": "position/wgs84",
    "content": {
      "latitude": 40.714728,
      "longitude": -73.998672
    },
    "created": 1392039731.451,
    "createdBy": "chrhwsuim00007cjxwoh8zxjp"
  }
}</code></pre></div><div class="tab-pane http"><pre><code>PUT /events/{id} HTTP/1.1
Host: https://{username}.pryv.io
Authentication: {access-token}

{
  "id": "chrhwsum3000u7cjx7xc56eh9",
  "update": {
    "tags": [
      "home"
    ]
  }
}</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 0.7.0

{
  "event": {
    "tags": [
      "home"
    ],
    "modified": 1392046931.692,
    "modifiedBy": "chrhwsuin00017cjxkw8cjgo4",
    "id": "chrhwsum3000u7cjx7xc56eh9",
    "time": 1350373077.359,
    "streamId": "diary",
    "type": "position/wgs84",
    "content": {
      "latitude": 40.714728,
      "longitude": -73.998672
    },
    "created": 1392039731.451,
    "createdBy": "chrhwsuim00007cjxwoh8zxjp"
  }
}</code></pre></div><div class="tab-pane sockets"><pre><code>socket.emit('events.update', {
  "id": "chrhwsum3000u7cjx7xc56eh9",
  "update": {
    "tags": [
      "home"
    ]
  }
}, callback);</code></pre><div class="step-marker">⬇</div><pre><code>{
  "event": {
    "tags": [
      "home"
    ],
    "modified": 1392046931.692,
    "modifiedBy": "chrhwsuin00017cjxkw8cjgo4",
    "id": "chrhwsum3000u7cjx7xc56eh9",
    "time": 1350373077.359,
    "streamId": "diary",
    "type": "position/wgs84",
    "content": {
      "latitude": 40.714728,
      "longitude": -73.998672
    },
    "created": 1392039731.451,
    "createdBy": "chrhwsuim00007cjxwoh8zxjp"
  }
}</code></pre></div></div></div></aside></section><section id="methods-events-events-addAttachment" class="method"><h3 id="add-attachment-s-">Add attachment(s)</h3>
<div class="content"><div class="meta"><span class="http"><span class="label">HTTP-only</span><span class="label-value"><code>POST /events/{id}</code></span></span></div><div class="intro"><p>Adds one or more file attachments to the event. This request expects standard multipart/form-data content, with all content parts being the attached files.</p>
</div><h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>200 OK</code></span></span><table class="definitions"><tr><th><code>event</code></th><td><div class="header"><span class="type"><a href="#data-structure-event">event</a></span></div><div class="description"><p>The updated event.</p>
</div></td></tr></table></div><aside><div class="example"><p>cURL</p>
<pre><code class="lang-bash">curl -i -F &quot;file=@{filename}&quot; https://{username}.pryv.io/events/chrhwsum3000s7cjxwici44e6?auth={token}
</code></pre>
</div></aside></section><section id="methods-events-events-getAttachment" class="method"><h3 id="get-attachment">Get attachment</h3>
<div class="content"><div class="meta"><span class="http"><span class="label">HTTP-only</span><span class="label-value"><code>GET /events/{id}/{fileId}</code></span></span></div><div class="intro"><p>Gets the attached file.</p>
</div><h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>200 OK</code></span></span><p>The file&#39;s contents.</p>
</div><aside></aside></section><section id="methods-events-events-deleteAttachment" class="method"><h3 id="delete-attachment">Delete attachment</h3>
<div class="content"><div class="meta"><span class="method-id"><span class="label">id</span><span class="label-value"><code>events.deleteAttachment</code></span></span><span class="http"><span class="label">HTTP</span><span class="label-value"><code>DELETE /events/{id}/{fileId}</code></span></span></div><div class="intro"><p>Irreversibly deletes the attached file.</p>
</div><h4 id="parameters">Parameters</h4>
<table class="definitions"><tr><th><code>id</code></th><td><div class="header"><span class="type"><a href="#data-structure-identity">identity</a></span><span class="http"><span class="label">HTTP</span><span class="label-value"><span>set in request path</span></span></span></div><div class="description"><p>The id of the event.</p>
</div></td></tr><tr><th><code>fileId</code></th><td><div class="header"><span class="type"><a href="#data-structure-identity">identity</a></span><span class="http"><span class="label">HTTP</span><span class="label-value"><span>set in request path</span></span></span></div><div class="description"><p>The id of the attached file.</p>
</div></td></tr></table><h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>200 OK</code></span></span><table class="definitions"><tr><th><code>event</code></th><td><div class="header"><span class="type"><a href="#data-structure-event">event</a></span></div><div class="description"><p>The updated event.</p>
</div></td></tr></table></div><aside><div class="example"><div class="tab-content"><div class="tab-pane json active"><pre><code>{
  "id": "chrhwsum2000l7cjxopeh3m67",
  "fileId": "chrhwsum2000m7cjxkn7sfbe2"
}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "event": {
    "id": "chrhwsum2000l7cjxopeh3m67",
    "time": 1392046931.45,
    "duration": null,
    "streamId": "chrhwsum100097cjx98k5pqgn",
    "tags": [],
    "type": "activity/pryv",
    "content": null,
    "created": 1392046931.45,
    "createdBy": "chrhwsuin00017cjxkw8cjgo4",
    "modified": 1392046931.45,
    "modifiedBy": "chrhwsuin00017cjxkw8cjgo4"
  }
}</code></pre></div><div class="tab-pane http"><pre><code>DELETE /events/{id}/{fileId} HTTP/1.1
Host: https://{username}.pryv.io
Authentication: {access-token}

{
  "id": "chrhwsum2000l7cjxopeh3m67",
  "fileId": "chrhwsum2000m7cjxkn7sfbe2"
}</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 0.7.0

{
  "event": {
    "id": "chrhwsum2000l7cjxopeh3m67",
    "time": 1392046931.45,
    "duration": null,
    "streamId": "chrhwsum100097cjx98k5pqgn",
    "tags": [],
    "type": "activity/pryv",
    "content": null,
    "created": 1392046931.45,
    "createdBy": "chrhwsuin00017cjxkw8cjgo4",
    "modified": 1392046931.45,
    "modifiedBy": "chrhwsuin00017cjxkw8cjgo4"
  }
}</code></pre></div><div class="tab-pane sockets"><pre><code>socket.emit('events.deleteAttachment', {
  "id": "chrhwsum2000l7cjxopeh3m67",
  "fileId": "chrhwsum2000m7cjxkn7sfbe2"
}, callback);</code></pre><div class="step-marker">⬇</div><pre><code>{
  "event": {
    "id": "chrhwsum2000l7cjxopeh3m67",
    "time": 1392046931.45,
    "duration": null,
    "streamId": "chrhwsum100097cjx98k5pqgn",
    "tags": [],
    "type": "activity/pryv",
    "content": null,
    "created": 1392046931.45,
    "createdBy": "chrhwsuin00017cjxkw8cjgo4",
    "modified": 1392046931.45,
    "modifiedBy": "chrhwsuin00017cjxkw8cjgo4"
  }
}</code></pre></div></div></div></aside></section><section id="methods-events-events-delete" class="method"><h3 id="delete-event">Delete event</h3>
<div class="content"><div class="meta"><span class="method-id"><span class="label">id</span><span class="label-value"><code>events.delete</code></span></span><span class="http"><span class="label">HTTP</span><span class="label-value"><code>DELETE /events/{id}</code></span></span></div><div class="intro"><p>Trashes or deletes the specified event, depending on its current state:</p>
<ul>
<li>If the event is not already in the trash, it will be moved to the trash (i.e. flagged as <code>trashed</code>)</li>
<li>If the event is already in the trash, it will be irreversibly deleted (including all its attached files, if any).</li>
</ul>
</div><h4 id="parameters">Parameters</h4>
<table class="definitions"><tr><th><code>id</code></th><td><div class="header"><span class="type"><a href="#data-structure-identity">identity</a></span><span class="http"><span class="label">HTTP</span><span class="label-value"><span>set in request path</span></span></span></div><div class="description"><p>The id of the event.</p>
</div></td></tr></table><h4 id="result-trashed">Result: trashed</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>200 OK</code></span></span><table class="definitions"><tr><th><code>event</code></th><td><div class="header"><span class="type"><a href="#data-structure-event">event</a></span></div><div class="description"><p>The trashed event.</p>
</div></td></tr></table><h4 id="result-deleted">Result: deleted</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>204 No content</code></span></span></div><aside><div class="example"><p>Trashing</p>
<div class="tab-content"><div class="tab-pane json active"><pre><code>{
  "id": "chrhwsum3000r7cjxhxxszw2i"
}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "event": {
    "trashed": true,
    "modified": 1392046931.693,
    "modifiedBy": "chrhwsuin00017cjxkw8cjgo4",
    "id": "chrhwsum3000r7cjxhxxszw2i",
    "time": 1392043331.451,
    "streamId": "diary",
    "tags": [],
    "type": "note/text",
    "content": "道可道非常道。。。",
    "created": 1392082931.451,
    "createdBy": "chrhwsuin00017cjxkw8cjgo4"
  }
}</code></pre></div><div class="tab-pane http"><pre><code>DELETE /events/{id} HTTP/1.1
Host: https://{username}.pryv.io
Authentication: {access-token}

{
  "id": "chrhwsum3000r7cjxhxxszw2i"
}</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 0.7.0

{
  "event": {
    "trashed": true,
    "modified": 1392046931.693,
    "modifiedBy": "chrhwsuin00017cjxkw8cjgo4",
    "id": "chrhwsum3000r7cjxhxxszw2i",
    "time": 1392043331.451,
    "streamId": "diary",
    "tags": [],
    "type": "note/text",
    "content": "道可道非常道。。。",
    "created": 1392082931.451,
    "createdBy": "chrhwsuin00017cjxkw8cjgo4"
  }
}</code></pre></div><div class="tab-pane sockets"><pre><code>socket.emit('events.delete', {
  "id": "chrhwsum3000r7cjxhxxszw2i"
}, callback);</code></pre><div class="step-marker">⬇</div><pre><code>{
  "event": {
    "trashed": true,
    "modified": 1392046931.693,
    "modifiedBy": "chrhwsuin00017cjxkw8cjgo4",
    "id": "chrhwsum3000r7cjxhxxszw2i",
    "time": 1392043331.451,
    "streamId": "diary",
    "tags": [],
    "type": "note/text",
    "content": "道可道非常道。。。",
    "created": 1392082931.451,
    "createdBy": "chrhwsuin00017cjxkw8cjgo4"
  }
}</code></pre></div></div></div></aside></section></section><section id="methods-streams" class=""><h2 id="streams">Streams</h2>
<div class="content"><div class="intro"><p>Methods to retrieve and manipulate <a href="#data-structure-stream">streams</a>.</p>
</div></div><section id="methods-streams-streams-get" class="method"><h3 id="get-streams">Get streams</h3>
<div class="content"><div class="meta"><span class="method-id"><span class="label">id</span><span class="label-value"><code>streams.get</code></span></span><span class="http"><span class="label">HTTP</span><span class="label-value"><code>GET /streams</code></span></span></div><div class="intro"><p>Gets the accessible streams hierarchy.</p>
</div><h4 id="parameters">Parameters</h4>
<table class="definitions"><tr><th><code>parentId</code></th><td><div class="header"><span class="type"><a href="#data-structure-identity">identity</a></span><span class="label optional">optional</span></div><div class="description"><p>The id of the parent stream from which to retrieve streams. Default: <code>null</code> (returns all accessible streams from the root level).</p>
</div></td></tr><tr><th><code>state</code></th><td><div class="header"><span class="type"><code>default</code>|<code>all</code></span><span class="label optional">optional</span></div><div class="description"><p>By default, only items that are not in the trash are returned; <code>all</code> return all items regardless of their state.</p>
</div></td></tr></table><h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>200 OK</code></span></span><table class="definitions"><tr><th><code>streams</code></th><td><div class="header"><span class="type">array of <a href="#data-structure-stream">streams</a></span></div><div class="description"><p>The tree of the accessible streams, sorted by name.</p>
</div></td></tr></table></div><aside><div class="example"><p>Retrieving streams for work activities</p>
<div class="tab-content"><div class="tab-pane json active"><pre><code>{
  "parentId": "work"
}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "streams": [
    {
      "id": "chrhwsum100087cjxwez4uu19",
      "name": "Noble Works Co.",
      "parentId": "work",
      "children": [
        {
          "id": "chrhwsum1000a7cjxf8t266qe",
          "name": "Last Be First",
          "parentId": "chrhwsum100087cjxwez4uu19",
          "children": [],
          "created": 1328974953.4001656,
          "createdBy": "chrhwsuim00007cjxwoh8zxjp",
          "modified": 1328975308.6558669,
          "modifiedBy": "chrhwsuim00007cjxwoh8zxjp"
        },
        {
          "id": "chrhwsum1000b7cjxe8zwk3oi",
          "name": "Big Tree",
          "parentId": "chrhwsum100087cjxwez4uu19",
          "children": [],
          "created": 1328974953.4001656,
          "createdBy": "chrhwsuim00007cjxwoh8zxjp",
          "modified": 1328975048.2504184,
          "modifiedBy": "chrhwsuim00007cjxwoh8zxjp"
        },
        {
          "id": "chrhwsum1000c7cjx4gaxlrtt",
          "name": "Inner Light",
          "parentId": "chrhwsum100087cjxwez4uu19",
          "children": [],
          "created": 1328974953.4001656,
          "createdBy": "chrhwsuim00007cjxwoh8zxjp",
          "modified": 1328975226.3280065,
          "modifiedBy": "chrhwsuim00007cjxwoh8zxjp"
        }
      ],
      "created": 1328974941.8452144,
      "createdBy": "chrhwsuim00007cjxwoh8zxjp",
      "modified": 1328975017.4804037,
      "modifiedBy": "chrhwsuim00007cjxwoh8zxjp"
    },
    {
      "id": "chrhwsum100097cjx98k5pqgn",
      "name": "Freelancing",
      "parentId": "work",
      "children": [
        {
          "id": "chrhwsum1000d7cjxft2vimgz",
          "name": "Funky Veggies",
          "parentId": "chrhwsum100097cjx98k5pqgn",
          "children": [],
          "created": 1328974966.6648707,
          "createdBy": "chrhwsuim00007cjxwoh8zxjp",
          "modified": 1328975060.3655026,
          "modifiedBy": "chrhwsuim00007cjxwoh8zxjp"
        },
        {
          "id": "chrhwsum1000e7cjxq63d6o4h",
          "name": "Jojo Lapin & sons",
          "parentId": "chrhwsum100097cjx98k5pqgn",
          "children": [],
          "created": 1328974966.6648707,
          "createdBy": "chrhwsuim00007cjxwoh8zxjp",
          "modified": 1328975101.9166229,
          "modifiedBy": "chrhwsuim00007cjxwoh8zxjp"
        }
      ],
      "created": 1328974941.8452144,
      "createdBy": "chrhwsuim00007cjxwoh8zxjp",
      "modified": 1328975142.5111687,
      "modifiedBy": "chrhwsuim00007cjxwoh8zxjp"
    }
  ]
}</code></pre></div><div class="tab-pane http"><pre><code>GET /streams HTTP/1.1
Host: https://{username}.pryv.io
Authentication: {access-token}

{
  "parentId": "work"
}</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 0.7.0

{
  "streams": [
    {
      "id": "chrhwsum100087cjxwez4uu19",
      "name": "Noble Works Co.",
      "parentId": "work",
      "children": [
        {
          "id": "chrhwsum1000a7cjxf8t266qe",
          "name": "Last Be First",
          "parentId": "chrhwsum100087cjxwez4uu19",
          "children": [],
          "created": 1328974953.4001656,
          "createdBy": "chrhwsuim00007cjxwoh8zxjp",
          "modified": 1328975308.6558669,
          "modifiedBy": "chrhwsuim00007cjxwoh8zxjp"
        },
        {
          "id": "chrhwsum1000b7cjxe8zwk3oi",
          "name": "Big Tree",
          "parentId": "chrhwsum100087cjxwez4uu19",
          "children": [],
          "created": 1328974953.4001656,
          "createdBy": "chrhwsuim00007cjxwoh8zxjp",
          "modified": 1328975048.2504184,
          "modifiedBy": "chrhwsuim00007cjxwoh8zxjp"
        },
        {
          "id": "chrhwsum1000c7cjx4gaxlrtt",
          "name": "Inner Light",
          "parentId": "chrhwsum100087cjxwez4uu19",
          "children": [],
          "created": 1328974953.4001656,
          "createdBy": "chrhwsuim00007cjxwoh8zxjp",
          "modified": 1328975226.3280065,
          "modifiedBy": "chrhwsuim00007cjxwoh8zxjp"
        }
      ],
      "created": 1328974941.8452144,
      "createdBy": "chrhwsuim00007cjxwoh8zxjp",
      "modified": 1328975017.4804037,
      "modifiedBy": "chrhwsuim00007cjxwoh8zxjp"
    },
    {
      "id": "chrhwsum100097cjx98k5pqgn",
      "name": "Freelancing",
      "parentId": "work",
      "children": [
        {
          "id": "chrhwsum1000d7cjxft2vimgz",
          "name": "Funky Veggies",
          "parentId": "chrhwsum100097cjx98k5pqgn",
          "children": [],
          "created": 1328974966.6648707,
          "createdBy": "chrhwsuim00007cjxwoh8zxjp",
          "modified": 1328975060.3655026,
          "modifiedBy": "chrhwsuim00007cjxwoh8zxjp"
        },
        {
          "id": "chrhwsum1000e7cjxq63d6o4h",
          "name": "Jojo Lapin & sons",
          "parentId": "chrhwsum100097cjx98k5pqgn",
          "children": [],
          "created": 1328974966.6648707,
          "createdBy": "chrhwsuim00007cjxwoh8zxjp",
          "modified": 1328975101.9166229,
          "modifiedBy": "chrhwsuim00007cjxwoh8zxjp"
        }
      ],
      "created": 1328974941.8452144,
      "createdBy": "chrhwsuim00007cjxwoh8zxjp",
      "modified": 1328975142.5111687,
      "modifiedBy": "chrhwsuim00007cjxwoh8zxjp"
    }
  ]
}</code></pre></div><div class="tab-pane sockets"><pre><code>socket.emit('streams.get', {
  "parentId": "work"
}, callback);</code></pre><div class="step-marker">⬇</div><pre><code>{
  "streams": [
    {
      "id": "chrhwsum100087cjxwez4uu19",
      "name": "Noble Works Co.",
      "parentId": "work",
      "children": [
        {
          "id": "chrhwsum1000a7cjxf8t266qe",
          "name": "Last Be First",
          "parentId": "chrhwsum100087cjxwez4uu19",
          "children": [],
          "created": 1328974953.4001656,
          "createdBy": "chrhwsuim00007cjxwoh8zxjp",
          "modified": 1328975308.6558669,
          "modifiedBy": "chrhwsuim00007cjxwoh8zxjp"
        },
        {
          "id": "chrhwsum1000b7cjxe8zwk3oi",
          "name": "Big Tree",
          "parentId": "chrhwsum100087cjxwez4uu19",
          "children": [],
          "created": 1328974953.4001656,
          "createdBy": "chrhwsuim00007cjxwoh8zxjp",
          "modified": 1328975048.2504184,
          "modifiedBy": "chrhwsuim00007cjxwoh8zxjp"
        },
        {
          "id": "chrhwsum1000c7cjx4gaxlrtt",
          "name": "Inner Light",
          "parentId": "chrhwsum100087cjxwez4uu19",
          "children": [],
          "created": 1328974953.4001656,
          "createdBy": "chrhwsuim00007cjxwoh8zxjp",
          "modified": 1328975226.3280065,
          "modifiedBy": "chrhwsuim00007cjxwoh8zxjp"
        }
      ],
      "created": 1328974941.8452144,
      "createdBy": "chrhwsuim00007cjxwoh8zxjp",
      "modified": 1328975017.4804037,
      "modifiedBy": "chrhwsuim00007cjxwoh8zxjp"
    },
    {
      "id": "chrhwsum100097cjx98k5pqgn",
      "name": "Freelancing",
      "parentId": "work",
      "children": [
        {
          "id": "chrhwsum1000d7cjxft2vimgz",
          "name": "Funky Veggies",
          "parentId": "chrhwsum100097cjx98k5pqgn",
          "children": [],
          "created": 1328974966.6648707,
          "createdBy": "chrhwsuim00007cjxwoh8zxjp",
          "modified": 1328975060.3655026,
          "modifiedBy": "chrhwsuim00007cjxwoh8zxjp"
        },
        {
          "id": "chrhwsum1000e7cjxq63d6o4h",
          "name": "Jojo Lapin & sons",
          "parentId": "chrhwsum100097cjx98k5pqgn",
          "children": [],
          "created": 1328974966.6648707,
          "createdBy": "chrhwsuim00007cjxwoh8zxjp",
          "modified": 1328975101.9166229,
          "modifiedBy": "chrhwsuim00007cjxwoh8zxjp"
        }
      ],
      "created": 1328974941.8452144,
      "createdBy": "chrhwsuim00007cjxwoh8zxjp",
      "modified": 1328975142.5111687,
      "modifiedBy": "chrhwsuim00007cjxwoh8zxjp"
    }
  ]
}</code></pre></div></div></div></aside></section><section id="methods-streams-streams-create" class="method"><h3 id="create-stream">Create stream</h3>
<div class="content"><div class="meta"><span class="method-id"><span class="label">id</span><span class="label-value"><code>streams.create</code></span></span><span class="http"><span class="label">HTTP</span><span class="label-value"><code>POST /streams</code></span></span></div><div class="intro"><p>Creates a new stream.</p>
</div><h4 id="parameters">Parameters</h4>
<p>The new stream&#39;s data: see <a href="#data-structure-stream">activity stream</a>.</p>
<h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>201 Created</code></span></span><table class="definitions"><tr><th><code>stream</code></th><td><div class="header"><span class="type"><a href="#data-structure-stream">stream</a></span></div><div class="description"><p>The created stream.</p>
</div></td></tr></table><h4 id="specific-errors">Specific errors</h4>
<table class="definitions"><tr><th><code>item-id-already-exists</code></th><td><div class="header"><span class="http"><span class="label">HTTP</span><span class="label-value"><code>400</code></span></span></div><div class="description"><p>A stream already exists with the same id.</p>
</div></td></tr><tr><th><code>item-name-already-exists</code></th><td><div class="header"><span class="http"><span class="label">HTTP</span><span class="label-value"><code>400</code></span></span></div><div class="description"><p>A sibling stream already exists with the same name.</p>
</div></td></tr><tr><th><code>invalid-item-id</code></th><td><div class="header"><span class="http"><span class="label">HTTP</span><span class="label-value"><code>400</code></span></span></div><div class="description"><p>The specified id is invalid (e.g. it&#39;s a reserved word such as <code>null</code>).</p>
</div></td></tr></table></div><aside><div class="example"><p>Create sub-stream &#39;diastolic&#39; of &#39;heart&#39;</p>
<div class="tab-content"><div class="tab-pane json active"><pre><code>{
  "id": "diastolic",
  "name": "Diastolic pressure",
  "parentId": "heart"
}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "stream": {
    "id": "diastolic",
    "name": "Diastolic pressure",
    "parentId": "heart",
    "children": [],
    "created": 1392046931.449,
    "createdBy": "chrhwsuin00017cjxkw8cjgo4",
    "modified": 1392046931.449,
    "modifiedBy": "chrhwsuin00017cjxkw8cjgo4"
  }
}</code></pre></div><div class="tab-pane http"><pre><code>POST /streams HTTP/1.1
Host: https://{username}.pryv.io
Authentication: {access-token}

{
  "id": "diastolic",
  "name": "Diastolic pressure",
  "parentId": "heart"
}</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 201 Created
Content-Type: application/json; charset=utf-8
API-Version: 0.7.0

{
  "stream": {
    "id": "diastolic",
    "name": "Diastolic pressure",
    "parentId": "heart",
    "children": [],
    "created": 1392046931.449,
    "createdBy": "chrhwsuin00017cjxkw8cjgo4",
    "modified": 1392046931.449,
    "modifiedBy": "chrhwsuin00017cjxkw8cjgo4"
  }
}</code></pre></div><div class="tab-pane sockets"><pre><code>socket.emit('streams.create', {
  "id": "diastolic",
  "name": "Diastolic pressure",
  "parentId": "heart"
}, callback);</code></pre><div class="step-marker">⬇</div><pre><code>{
  "stream": {
    "id": "diastolic",
    "name": "Diastolic pressure",
    "parentId": "heart",
    "children": [],
    "created": 1392046931.449,
    "createdBy": "chrhwsuin00017cjxkw8cjgo4",
    "modified": 1392046931.449,
    "modifiedBy": "chrhwsuin00017cjxkw8cjgo4"
  }
}</code></pre></div></div></div></aside></section><section id="methods-streams-streams-update" class="method"><h3 id="update-stream">Update stream</h3>
<div class="content"><div class="meta"><span class="method-id"><span class="label">id</span><span class="label-value"><code>streams.update</code></span></span><span class="http"><span class="label">HTTP</span><span class="label-value"><code>PUT /streams/{id}</code></span></span></div><div class="intro"><p>Modifies the stream.</p>
</div><h4 id="parameters">Parameters</h4>
<table class="definitions"><tr><th><code>id</code></th><td><div class="header"><span class="type"><a href="#data-structure-identity">identity</a></span><span class="http"><span class="label">HTTP</span><span class="label-value"><span>set in request path</span></span></span></div><div class="description"><p>The id of the stream.</p>
</div></td></tr><tr><th><code>update</code></th><td><div class="header"><span class="type">object</span><span class="http"><span class="label">HTTP</span><span class="label-value"><span>= request body</span></span></span></div><div class="description"><p>New values for the stream&#39;s fields: see <a href="#data-structure-stream">stream</a>. All fields are optional, and only modified values must be included.</p>
</div></td></tr></table><h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>200 OK</code></span></span><table class="definitions"><tr><th><code>stream</code></th><td><div class="header"><span class="type"><a href="#data-structure-stream">stream</a></span></div><div class="description"><p>The updated stream (without child streams).</p>
</div></td></tr></table><h4 id="specific-errors">Specific errors</h4>
<table class="definitions"><tr><th><code>item-name-already-exists</code></th><td><div class="header"><span class="http"><span class="label">HTTP</span><span class="label-value"><code>400</code></span></span></div><div class="description"><p>A sibling stream already exists with the same name.</p>
</div></td></tr></table></div><aside><div class="example"><p>Renaming a stream</p>
<div class="tab-content"><div class="tab-pane json active"><pre><code>{
  "id": "sport",
  "update": {
    "name": "Slothing"
  }
}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "stream": {
    "name": "Slothing",
    "modified": 1392046931.693,
    "modifiedBy": "chrhwsuin00017cjxkw8cjgo4",
    "id": "sport",
    "parentId": null,
    "created": 1328974931.45,
    "createdBy": "chrhwsuim00007cjxwoh8zxjp"
  }
}</code></pre></div><div class="tab-pane http"><pre><code>PUT /streams/{id} HTTP/1.1
Host: https://{username}.pryv.io
Authentication: {access-token}

{
  "id": "sport",
  "update": {
    "name": "Slothing"
  }
}</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 0.7.0

{
  "stream": {
    "name": "Slothing",
    "modified": 1392046931.693,
    "modifiedBy": "chrhwsuin00017cjxkw8cjgo4",
    "id": "sport",
    "parentId": null,
    "created": 1328974931.45,
    "createdBy": "chrhwsuim00007cjxwoh8zxjp"
  }
}</code></pre></div><div class="tab-pane sockets"><pre><code>socket.emit('streams.update', {
  "id": "sport",
  "update": {
    "name": "Slothing"
  }
}, callback);</code></pre><div class="step-marker">⬇</div><pre><code>{
  "stream": {
    "name": "Slothing",
    "modified": 1392046931.693,
    "modifiedBy": "chrhwsuin00017cjxkw8cjgo4",
    "id": "sport",
    "parentId": null,
    "created": 1328974931.45,
    "createdBy": "chrhwsuim00007cjxwoh8zxjp"
  }
}</code></pre></div></div></div></aside></section><section id="methods-streams-streams-delete" class="method"><h3 id="delete-stream">Delete stream</h3>
<div class="content"><div class="meta"><span class="method-id"><span class="label">id</span><span class="label-value"><code>streams.delete</code></span></span><span class="http"><span class="label">HTTP</span><span class="label-value"><code>DELETE /streams/{id}</code></span></span></div><div class="intro"><p>Trashes or deletes the specified stream, depending on its current state:</p>
<ul>
<li>If the stream is not already in the trash, it will be moved to the trash (i.e. flagged as <code>trashed</code>)</li>
<li>If the stream is already in the trash, it will be irreversibly deleted with its descendants (if any). If events exist that refer to the deleted item(s), you must indicate how to handle them with the parameter <code>mergeEventsWithParent</code>.</li>
</ul>
</div><h4 id="parameters">Parameters</h4>
<table class="definitions"><tr><th><code>id</code></th><td><div class="header"><span class="type"><a href="#data-structure-identity">identity</a></span><span class="http"><span class="label">HTTP</span><span class="label-value"><span>set in request path</span></span></span></div><div class="description"><p>The id of the stream.</p>
</div></td></tr><tr><th><code>mergeEventsWithParent</code></th><td><div class="header"><span class="type"><code>true</code>|<code>false</code></span></div><div class="description"><p>Required if actually deleting the item and if it (or any of its descendants) has linked events, ignored otherwise. If <code>true</code>, the linked events will be assigned to the parent of the deleted item; if <code>false</code>, the linked events will be deleted.</p>
</div></td></tr></table><h4 id="result-trashed">Result: trashed</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>200 OK</code></span></span><table class="definitions"><tr><th><code>stream</code></th><td><div class="header"><span class="type"><a href="#data-structure-stream">stream</a></span></div><div class="description"><p>The trashed stream.</p>
</div></td></tr></table><h4 id="result-deleted">Result: deleted</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>204 No content</code></span></span><h4 id="specific-errors">Specific errors</h4>
<table class="definitions"><tr><th><code>missing-parameter</code></th><td><div class="header"><span class="http"><span class="label">HTTP</span><span class="label-value"><code>400</code></span></span></div><div class="description"><p>There are events referring to the deleted item(s) and the <code>mergeEventsWithParent</code> parameter is missing.</p>
</div></td></tr></table></div><aside><div class="example"><p>Trashing</p>
<div class="tab-content"><div class="tab-pane json active"><pre><code>{
  "id": "weight"
}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "event": {
    "trashed": true,
    "modified": 1392046931.693,
    "modifiedBy": "chrhwsuin00017cjxkw8cjgo4",
    "id": "weight",
    "name": "Weight",
    "parentId": "health",
    "children": [],
    "created": 1328974941.6500986,
    "createdBy": "chrhwsuim00007cjxwoh8zxjp"
  }
}</code></pre></div><div class="tab-pane http"><pre><code>DELETE /streams/{id} HTTP/1.1
Host: https://{username}.pryv.io
Authentication: {access-token}

{
  "id": "weight"
}</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 0.7.0

{
  "event": {
    "trashed": true,
    "modified": 1392046931.693,
    "modifiedBy": "chrhwsuin00017cjxkw8cjgo4",
    "id": "weight",
    "name": "Weight",
    "parentId": "health",
    "children": [],
    "created": 1328974941.6500986,
    "createdBy": "chrhwsuim00007cjxwoh8zxjp"
  }
}</code></pre></div><div class="tab-pane sockets"><pre><code>socket.emit('streams.delete', {
  "id": "weight"
}, callback);</code></pre><div class="step-marker">⬇</div><pre><code>{
  "event": {
    "trashed": true,
    "modified": 1392046931.693,
    "modifiedBy": "chrhwsuin00017cjxkw8cjgo4",
    "id": "weight",
    "name": "Weight",
    "parentId": "health",
    "children": [],
    "created": 1328974941.6500986,
    "createdBy": "chrhwsuim00007cjxwoh8zxjp"
  }
}</code></pre></div></div></div></aside></section></section><section id="methods-accesses" class=""><h2 id="accesses">Accesses</h2>
<div class="content"><div class="intro"><p>Methods to retrieve and manipulate <a href="#data-structure-access">accesses</a>, e.g. for sharing.
Any app can manage shared accesses whose permissions are a subset of its own. (Full access management is available to trusted apps.)</p>
</div></div><section id="methods-accesses-accesses-get" class="method"><h3 id="get-accesses">Get accesses</h3>
<div class="content"><div class="meta"><span class="method-id"><span class="label">id</span><span class="label-value"><code>accesses.get</code></span></span><span class="http"><span class="label">HTTP</span><span class="label-value"><code>GET /accesses</code></span></span></div><div class="intro"><p>Gets manageable accesses.</p>
</div><h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>200 OK</code></span></span><table class="definitions"><tr><th><code>accesses</code></th><td><div class="header"><span class="type">array of <a href="#data-structure-access">accesses</a></span></div><div class="description"><p>All manageable accesses in the user&#39;s account, ordered by name.</p>
</div></td></tr></table></div><aside><div class="example"><div class="tab-content"><div class="tab-pane json active"><pre><code>{}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "accesses": [
    {
      "id": "chrhwsuin00047cjxa73fag8d",
      "token": "chrhwsuin00057cjxgasn5tyq",
      "type": "shared",
      "name": "Arthur",
      "permissions": [
        {
          "streamId": "family",
          "level": "contribute"
        }
      ],
      "created": 1392003731.327,
      "createdBy": "chrhwsuin00017cjxkw8cjgo4",
      "modified": 1392003731.327,
      "modifiedBy": "chrhwsuin00017cjxkw8cjgo4"
    }
  ]
}</code></pre></div><div class="tab-pane http"><pre><code>GET /accesses HTTP/1.1
Host: https://{username}.pryv.io
Authentication: {access-token}

{}</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 0.7.0

{
  "accesses": [
    {
      "id": "chrhwsuin00047cjxa73fag8d",
      "token": "chrhwsuin00057cjxgasn5tyq",
      "type": "shared",
      "name": "Arthur",
      "permissions": [
        {
          "streamId": "family",
          "level": "contribute"
        }
      ],
      "created": 1392003731.327,
      "createdBy": "chrhwsuin00017cjxkw8cjgo4",
      "modified": 1392003731.327,
      "modifiedBy": "chrhwsuin00017cjxkw8cjgo4"
    }
  ]
}</code></pre></div><div class="tab-pane sockets"><pre><code>socket.emit('accesses.get', {}, callback);</code></pre><div class="step-marker">⬇</div><pre><code>{
  "accesses": [
    {
      "id": "chrhwsuin00047cjxa73fag8d",
      "token": "chrhwsuin00057cjxgasn5tyq",
      "type": "shared",
      "name": "Arthur",
      "permissions": [
        {
          "streamId": "family",
          "level": "contribute"
        }
      ],
      "created": 1392003731.327,
      "createdBy": "chrhwsuin00017cjxkw8cjgo4",
      "modified": 1392003731.327,
      "modifiedBy": "chrhwsuin00017cjxkw8cjgo4"
    }
  ]
}</code></pre></div></div></div></aside></section><section id="methods-accesses-accesses-create" class="method"><h3 id="create-access">Create access</h3>
<div class="content"><div class="meta"><span class="method-id"><span class="label">id</span><span class="label-value"><code>accesses.create</code></span></span><span class="http"><span class="label">HTTP</span><span class="label-value"><code>POST /accesses</code></span></span></div><div class="intro"><p>Creates a new access. You can only create accesses whose permissions are a subset of those granted to your own access token.</p>
</div><h4 id="parameters">Parameters</h4>
<p>An object with the new access&#39;s data: see <a href="#data-structure-access">access</a>.</p>
<h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>201 Created</code></span></span><table class="definitions"><tr><th><code>access</code></th><td><div class="header"><span class="type"><a href="#data-structure-access">access</a></span></div><div class="description"><p>The created access.</p>
</div></td></tr></table><h4 id="specific-errors">Specific errors</h4>
<table class="definitions"><tr><th><code>invalid-item-id</code></th><td><div class="header"><span class="http"><span class="label">HTTP</span><span class="label-value"><code>400</code></span></span></div><div class="description"><p>The specified token is invalid (e.g. it&#39;s a reserved word such as <code>null</code>).</p>
</div></td></tr></table></div><aside><div class="example"><div class="tab-content"><div class="tab-pane json active"><pre><code>{
  "name": "For colleagues",
  "permissions": [
    {
      "streamId": "work",
      "level": "read"
    }
  ]
}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "access": {
    "id": "chrhwsuin00067cjx9clnqzq8",
    "token": "chrhwsuin00077cjxckj608dj",
    "type": "shared",
    "name": "For colleagues",
    "permissions": [
      {
        "streamId": "work",
        "level": "read"
      }
    ],
    "created": 1392046931.327,
    "createdBy": "chrhwsuin00017cjxkw8cjgo4",
    "modified": 1392046931.327,
    "modifiedBy": "chrhwsuin00017cjxkw8cjgo4"
  }
}</code></pre></div><div class="tab-pane http"><pre><code>POST /accesses HTTP/1.1
Host: https://{username}.pryv.io
Authentication: {access-token}

{
  "name": "For colleagues",
  "permissions": [
    {
      "streamId": "work",
      "level": "read"
    }
  ]
}</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 201 Created
Content-Type: application/json; charset=utf-8
API-Version: 0.7.0

{
  "access": {
    "id": "chrhwsuin00067cjx9clnqzq8",
    "token": "chrhwsuin00077cjxckj608dj",
    "type": "shared",
    "name": "For colleagues",
    "permissions": [
      {
        "streamId": "work",
        "level": "read"
      }
    ],
    "created": 1392046931.327,
    "createdBy": "chrhwsuin00017cjxkw8cjgo4",
    "modified": 1392046931.327,
    "modifiedBy": "chrhwsuin00017cjxkw8cjgo4"
  }
}</code></pre></div><div class="tab-pane sockets"><pre><code>socket.emit('accesses.create', {
  "name": "For colleagues",
  "permissions": [
    {
      "streamId": "work",
      "level": "read"
    }
  ]
}, callback);</code></pre><div class="step-marker">⬇</div><pre><code>{
  "access": {
    "id": "chrhwsuin00067cjx9clnqzq8",
    "token": "chrhwsuin00077cjxckj608dj",
    "type": "shared",
    "name": "For colleagues",
    "permissions": [
      {
        "streamId": "work",
        "level": "read"
      }
    ],
    "created": 1392046931.327,
    "createdBy": "chrhwsuin00017cjxkw8cjgo4",
    "modified": 1392046931.327,
    "modifiedBy": "chrhwsuin00017cjxkw8cjgo4"
  }
}</code></pre></div></div></div></aside></section><section id="methods-accesses-accesses-update" class="method"><h3 id="update-access">Update access</h3>
<div class="content"><div class="meta"><span class="method-id"><span class="label">id</span><span class="label-value"><code>accesses.update</code></span></span><span class="http"><span class="label">HTTP</span><span class="label-value"><code>PUT /accesses/{id}</code></span></span></div><div class="intro"><p>Modifies the specified access. You can only modify accesses whose permissions are a subset of those granted to your own access token.</p>
</div><h4 id="parameters">Parameters</h4>
<table class="definitions"><tr><th><code>id</code></th><td><div class="header"><span class="type"><a href="#data-structure-identity">identity</a></span><span class="http"><span class="label">HTTP</span><span class="label-value"><span>set in request path</span></span></span></div><div class="description"><p>The id of the access.</p>
</div></td></tr><tr><th><code>update</code></th><td><div class="header"><span class="type">object</span><span class="http"><span class="label">HTTP</span><span class="label-value"><span>= request body</span></span></span></div><div class="description"><p>New values for the access&#39;s fields: see <a href="#data-structure-access">access</a>. All fields are optional, and only modified values must be included.</p>
</div></td></tr></table><h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>200 OK</code></span></span><table class="definitions"><tr><th><code>access</code></th><td><div class="header"><span class="type"><a href="#data-structure-access">access</a></span></div><div class="description"><p>The updated access.</p>
</div></td></tr></table></div><aside><div class="example"><p>Adjusting permission level</p>
<div class="tab-content"><div class="tab-pane json active"><pre><code>{
  "id": "chrhwsuin00067cjx9clnqzq8",
  "update": {
    "permissions": [
      {
        "level": "contribute",
        "streamId": "work"
      }
    ]
  }
}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "access": {
    "permissions": [
      {
        "level": "contribute",
        "streamId": "work"
      }
    ],
    "modified": 1392046931.693,
    "modifiedBy": "chrhwsuin00017cjxkw8cjgo4",
    "id": "chrhwsuin00067cjx9clnqzq8",
    "token": "chrhwsuin00077cjxckj608dj",
    "type": "shared",
    "name": "For colleagues",
    "created": 1392046931.327,
    "createdBy": "chrhwsuin00017cjxkw8cjgo4"
  }
}</code></pre></div><div class="tab-pane http"><pre><code>PUT /accesses/{id} HTTP/1.1
Host: https://{username}.pryv.io
Authentication: {access-token}

{
  "id": "chrhwsuin00067cjx9clnqzq8",
  "update": {
    "permissions": [
      {
        "level": "contribute",
        "streamId": "work"
      }
    ]
  }
}</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 0.7.0

{
  "access": {
    "permissions": [
      {
        "level": "contribute",
        "streamId": "work"
      }
    ],
    "modified": 1392046931.693,
    "modifiedBy": "chrhwsuin00017cjxkw8cjgo4",
    "id": "chrhwsuin00067cjx9clnqzq8",
    "token": "chrhwsuin00077cjxckj608dj",
    "type": "shared",
    "name": "For colleagues",
    "created": 1392046931.327,
    "createdBy": "chrhwsuin00017cjxkw8cjgo4"
  }
}</code></pre></div><div class="tab-pane sockets"><pre><code>socket.emit('accesses.update', {
  "id": "chrhwsuin00067cjx9clnqzq8",
  "update": {
    "permissions": [
      {
        "level": "contribute",
        "streamId": "work"
      }
    ]
  }
}, callback);</code></pre><div class="step-marker">⬇</div><pre><code>{
  "access": {
    "permissions": [
      {
        "level": "contribute",
        "streamId": "work"
      }
    ],
    "modified": 1392046931.693,
    "modifiedBy": "chrhwsuin00017cjxkw8cjgo4",
    "id": "chrhwsuin00067cjx9clnqzq8",
    "token": "chrhwsuin00077cjxckj608dj",
    "type": "shared",
    "name": "For colleagues",
    "created": 1392046931.327,
    "createdBy": "chrhwsuin00017cjxkw8cjgo4"
  }
}</code></pre></div></div></div></aside></section><section id="methods-accesses-accesses-delete" class="method"><h3 id="delete-access">Delete access</h3>
<div class="content"><div class="meta"><span class="method-id"><span class="label">id</span><span class="label-value"><code>accesses.delete</code></span></span><span class="http"><span class="label">HTTP</span><span class="label-value"><code>DELETE /accesses/{id}</code></span></span></div><div class="intro"><p>Deletes the specified access. You can only delete accesses whose permissions are a subset of those granted to your own access token.</p>
</div><h4 id="parameters">Parameters</h4>
<table class="definitions"><tr><th><code>id</code></th><td><div class="header"><span class="type"><a href="#data-structure-identity">identity</a></span><span class="http"><span class="label">HTTP</span><span class="label-value"><span>set in request path</span></span></span></div><div class="description"><p>The id of the access.</p>
</div></td></tr></table><h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>204 No content</code></span></span></div><aside><div class="example"><div class="tab-content"><div class="tab-pane json active"><pre><code>{
  "id": "chrhwsuin00047cjxa73fag8d"
}</code></pre><div class="step-marker">⬇</div><pre><code>{}</code></pre></div><div class="tab-pane http"><pre><code>DELETE /accesses/{id} HTTP/1.1
Host: https://{username}.pryv.io
Authentication: {access-token}

{
  "id": "chrhwsuin00047cjxa73fag8d"
}</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 204 No content
Content-Type: application/json; charset=utf-8
API-Version: 0.7.0

{}</code></pre></div><div class="tab-pane sockets"><pre><code>socket.emit('accesses.delete', {
  "id": "chrhwsuin00047cjxa73fag8d"
}, callback);</code></pre><div class="step-marker">⬇</div><pre><code>{}</code></pre></div></div></div></aside></section></section><section id="methods-profile" class=""><h2 id="profile-sets">Profile sets</h2>
<div class="content"><div class="intro"><p>Methods to read and write profile sets. Profile sets are plain key-value stores of user-level settings.</p>
</div></div><section id="methods-profile-profile-getPublic" class="method"><h3 id="get-public-user-profile">Get public user profile</h3>
<div class="content"><div class="meta"><span class="method-id"><span class="label">id</span><span class="label-value"><code>profile.getPublic</code></span></span><span class="http"><span class="label">HTTP</span><span class="label-value"><code>GET /profile/public</code></span></span></div><div class="intro"><p>Gets the user&#39;s public profile set, which contains the information the user makes publicly available (e.g. avatar image). Available to all accesses.</p>
</div><h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>200 OK</code></span></span><table class="definitions"><tr><th><code>profile</code></th><td><div class="header"><span class="type">object</span></div><div class="description"><p>The user&#39;s current public profile set.</p>
</div></td></tr></table></div><aside><div class="example"><div class="tab-content"><div class="tab-pane json active"><pre><code>{}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "profile": {
    "avatarURL": "http://www.gravatar.com/avatar/1beb9d80bf842c1d90ebdab356908538"
  }
}</code></pre></div><div class="tab-pane http"><pre><code>GET /profile/public HTTP/1.1
Host: https://{username}.pryv.io
Authentication: {access-token}

{}</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 0.7.0

{
  "profile": {
    "avatarURL": "http://www.gravatar.com/avatar/1beb9d80bf842c1d90ebdab356908538"
  }
}</code></pre></div><div class="tab-pane sockets"><pre><code>socket.emit('profile.getPublic', {}, callback);</code></pre><div class="step-marker">⬇</div><pre><code>{
  "profile": {
    "avatarURL": "http://www.gravatar.com/avatar/1beb9d80bf842c1d90ebdab356908538"
  }
}</code></pre></div></div></div></aside></section><section id="methods-profile-profile-getApp" class="method"><h3 id="get-app-profile">Get app profile</h3>
<div class="content"><div class="meta"><span class="method-id"><span class="label">id</span><span class="label-value"><code>profile.getApp</code></span></span><span class="http"><span class="label">HTTP</span><span class="label-value"><code>GET /profile/app</code></span></span></div><div class="intro"><p>Gets the app&#39;s dedicated user profile set, which contains app-level settings for the user. Available to app accesses.</p>
</div><h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>200 OK</code></span></span><table class="definitions"><tr><th><code>profile</code></th><td><div class="header"><span class="type">object</span></div><div class="description"><p>The app&#39;s current profile set. (Empty if the app never defined any setting.)</p>
</div></td></tr></table></div><aside><div class="example"><div class="tab-content"><div class="tab-pane json active"><pre><code>{}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "profile": {
    "setting1": "value",
    "setting2": true,
    "setting3": 123
  }
}</code></pre></div><div class="tab-pane http"><pre><code>GET /profile/app HTTP/1.1
Host: https://{username}.pryv.io
Authentication: {access-token}

{}</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 0.7.0

{
  "profile": {
    "setting1": "value",
    "setting2": true,
    "setting3": 123
  }
}</code></pre></div><div class="tab-pane sockets"><pre><code>socket.emit('profile.getApp', {}, callback);</code></pre><div class="step-marker">⬇</div><pre><code>{
  "profile": {
    "setting1": "value",
    "setting2": true,
    "setting3": 123
  }
}</code></pre></div></div></div></aside></section><section id="methods-profile-profile-updateApp" class="method"><h3 id="update-app-profile">Update app profile</h3>
<div class="content"><div class="meta"><span class="method-id"><span class="label">id</span><span class="label-value"><code>profile.updateApp</code></span></span><span class="http"><span class="label">HTTP</span><span class="label-value"><code>PUT /profile/app</code></span></span></div><div class="intro"><p>Adds, updates or delete app profile keys.</p>
<ul>
<li>To add or update a key, just set its value</li>
<li>To delete a key, set its value to <code>null</code></li>
</ul>
<p>Existing keys not included in the update are left untouched.</p>
</div><h4 id="parameters">Parameters</h4>
<table class="definitions"><tr><th><code>update</code></th><td><div class="header"><span class="type">object</span><span class="http"><span class="label">HTTP</span><span class="label-value"><span>= request body</span></span></span></div><div class="description"><p>An object with the desired key changes (see above).</p>
</div></td></tr></table><h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>200 OK</code></span></span><table class="definitions"><tr><th><code>profile</code></th><td><div class="header"><span class="type">object</span></div><div class="description"><p>The app&#39;s updated profile set.</p>
</div></td></tr></table></div><aside><div class="example"><div class="tab-content"><div class="tab-pane json active"><pre><code>{
  "setting1": "new value",
  "setting2": null
}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "profile": {
    "setting1": "new value",
    "setting3": 123
  }
}</code></pre></div><div class="tab-pane http"><pre><code>PUT /profile/app HTTP/1.1
Host: https://{username}.pryv.io
Authentication: {access-token}

{
  "setting1": "new value",
  "setting2": null
}</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 0.7.0

{
  "profile": {
    "setting1": "new value",
    "setting3": 123
  }
}</code></pre></div><div class="tab-pane sockets"><pre><code>socket.emit('profile.updateApp', {
  "setting1": "new value",
  "setting2": null
}, callback);</code></pre><div class="step-marker">⬇</div><pre><code>{
  "profile": {
    "setting1": "new value",
    "setting3": 123
  }
}</code></pre></div></div></div></aside></section></section><section id="methods-utils" class=""><h2 id="utils">Utils</h2>
<div class="content"><div class="intro"><p>Utility methods that don&#39;t pertain to a particular resource type.</p>
</div></div><section id="methods-utils-getAccessInfo" class="method"><h3 id="get-current-access-info">Get current access info</h3>
<div class="content"><div class="meta"><span class="method-id"><span class="label">id</span><span class="label-value"><code>getAccessInfo</code></span></span><span class="http"><span class="label">HTTP</span><span class="label-value"><code>GET /access-info</code></span></span></div><div class="intro"><p>Retrieves the name, type and permissions of the access in use.</p>
</div><h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>200 OK</code></span></span><table class="definitions"><tr><th><code>name</code></th><td><div class="header"><span class="type">string</span></div><div class="description"><p>The access&#39; name.</p>
</div></td></tr><tr><th><code>type</code></th><td><div class="header"><span class="type"><a href="#data-structure-access">access</a>.type</span></div><div class="description"><p>The access&#39; type.</p>
</div></td></tr><tr><th><code>permissions</code></th><td><div class="header"><span class="type"><a href="#data-structure-access">access</a>.permissions</span></div><div class="description"><p>The access&#39; permissions.</p>
</div></td></tr></table></div><aside><div class="example"><div class="tab-content"><div class="tab-pane json active"><pre><code>{}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "name": "my-app-id",
  "type": "app",
  "permissions": [
    {
      "streamId": "health",
      "level": "contribute"
    }
  ]
}</code></pre></div><div class="tab-pane http"><pre><code>GET /access-info HTTP/1.1
Host: https://{username}.pryv.io
Authentication: {access-token}

{}</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 0.7.0

{
  "name": "my-app-id",
  "type": "app",
  "permissions": [
    {
      "streamId": "health",
      "level": "contribute"
    }
  ]
}</code></pre></div><div class="tab-pane sockets"><pre><code>socket.emit('getAccessInfo', {}, callback);</code></pre><div class="step-marker">⬇</div><pre><code>{
  "name": "my-app-id",
  "type": "app",
  "permissions": [
    {
      "streamId": "health",
      "level": "contribute"
    }
  ]
}</code></pre></div></div></div></aside></section><section id="methods-utils-callBatch" class="method"><h3 id="call-batch">Call batch</h3>
<div class="content"><div class="meta"><span class="method-id"><span class="label">id</span><span class="label-value"><code>callBatch</code></span></span><span class="http"><span class="label">HTTP</span><span class="label-value"><code>POST /</code></span></span></div><div class="intro"><p>Sends a batch of API methods calls in one go (e.g. for to syncing offline changes when resuming connectivity).</p>
</div><h4 id="parameters">Parameters</h4>
<p>Array of method call objects, each defined as follows:</p>
<table class="definitions"><tr><th><code>method</code></th><td><div class="header"><span class="type">string</span></div><div class="description"><p>The method id.</p>
</div></td></tr><tr><th><code>params</code></th><td><div class="header"><span class="type">object or array</span></div><div class="description"><p>The call parameters as required by the method.</p>
</div></td></tr></table><h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>200 OK</code></span></span><table class="definitions"><tr><th><code>results</code></th><td><div class="header"><span class="type">array of call results</span></div><div class="description"><p>The results of each method call, in order.</p>
</div></td></tr></table></div><aside><div class="example"><p>Sync some health metrics</p>
<div class="tab-content"><div class="tab-pane json active"><pre><code>[
  {
    "methodId": "events.create",
    "params": {
      "time": 1385046854.282,
      "streamId": "heart",
      "type": "frequency/bpm",
      "content": 90
    }
  },
  {
    "methodId": "events.create",
    "params": {
      "time": 1385046854.282,
      "streamId": "systolic",
      "type": "pressure/mmhg",
      "content": 120
    }
  },
  {
    "methodId": "events.create",
    "params": {
      "time": 1385046854.282,
      "streamId": "diastolic",
      "type": "pressure/mmhg",
      "content": 80
    }
  }
]</code></pre><div class="step-marker">⬇</div><pre><code>{
  "results": [
    {
      "event": {
        "id": "chrhwsum3000n7cjxnp6kwzae",
        "time": 1385046854.282,
        "streamId": "heart",
        "tags": [],
        "type": "frequency/bpm",
        "content": 90,
        "created": 1392046931.451,
        "createdBy": "chrhwsuin00017cjxkw8cjgo4",
        "modified": 1392046931.451,
        "modifiedBy": "chrhwsuin00017cjxkw8cjgo4"
      }
    },
    {
      "event": {
        "id": "chrhwsum3000o7cjxyzurwqe0",
        "time": 1385046854.282,
        "streamId": "systolic",
        "tags": [],
        "type": "pressure/mmhg",
        "content": 120,
        "created": 1392046931.451,
        "createdBy": "chrhwsuin00017cjxkw8cjgo4",
        "modified": 1392046931.451,
        "modifiedBy": "chrhwsuin00017cjxkw8cjgo4"
      }
    },
    {
      "event": {
        "id": "chrhwsum3000p7cjxxquwfyzt",
        "time": 1385046854.282,
        "streamId": "diastolic",
        "tags": [],
        "type": "pressure/mmhg",
        "content": 80,
        "created": 1392046931.451,
        "createdBy": "chrhwsuin00017cjxkw8cjgo4",
        "modified": 1392046931.451,
        "modifiedBy": "chrhwsuin00017cjxkw8cjgo4"
      }
    }
  ]
}</code></pre></div><div class="tab-pane http"><pre><code>POST / HTTP/1.1
Host: https://{username}.pryv.io
Authentication: {access-token}

[
  {
    "methodId": "events.create",
    "params": {
      "time": 1385046854.282,
      "streamId": "heart",
      "type": "frequency/bpm",
      "content": 90
    }
  },
  {
    "methodId": "events.create",
    "params": {
      "time": 1385046854.282,
      "streamId": "systolic",
      "type": "pressure/mmhg",
      "content": 120
    }
  },
  {
    "methodId": "events.create",
    "params": {
      "time": 1385046854.282,
      "streamId": "diastolic",
      "type": "pressure/mmhg",
      "content": 80
    }
  }
]</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 0.7.0

{
  "results": [
    {
      "event": {
        "id": "chrhwsum3000n7cjxnp6kwzae",
        "time": 1385046854.282,
        "streamId": "heart",
        "tags": [],
        "type": "frequency/bpm",
        "content": 90,
        "created": 1392046931.451,
        "createdBy": "chrhwsuin00017cjxkw8cjgo4",
        "modified": 1392046931.451,
        "modifiedBy": "chrhwsuin00017cjxkw8cjgo4"
      }
    },
    {
      "event": {
        "id": "chrhwsum3000o7cjxyzurwqe0",
        "time": 1385046854.282,
        "streamId": "systolic",
        "tags": [],
        "type": "pressure/mmhg",
        "content": 120,
        "created": 1392046931.451,
        "createdBy": "chrhwsuin00017cjxkw8cjgo4",
        "modified": 1392046931.451,
        "modifiedBy": "chrhwsuin00017cjxkw8cjgo4"
      }
    },
    {
      "event": {
        "id": "chrhwsum3000p7cjxxquwfyzt",
        "time": 1385046854.282,
        "streamId": "diastolic",
        "tags": [],
        "type": "pressure/mmhg",
        "content": 80,
        "created": 1392046931.451,
        "createdBy": "chrhwsuin00017cjxkw8cjgo4",
        "modified": 1392046931.451,
        "modifiedBy": "chrhwsuin00017cjxkw8cjgo4"
      }
    }
  ]
}</code></pre></div><div class="tab-pane sockets"><pre><code>socket.emit('callBatch', [
  {
    "methodId": "events.create",
    "params": {
      "time": 1385046854.282,
      "streamId": "heart",
      "type": "frequency/bpm",
      "content": 90
    }
  },
  {
    "methodId": "events.create",
    "params": {
      "time": 1385046854.282,
      "streamId": "systolic",
      "type": "pressure/mmhg",
      "content": 120
    }
  },
  {
    "methodId": "events.create",
    "params": {
      "time": 1385046854.282,
      "streamId": "diastolic",
      "type": "pressure/mmhg",
      "content": 80
    }
  }
], callback);</code></pre><div class="step-marker">⬇</div><pre><code>{
  "results": [
    {
      "event": {
        "id": "chrhwsum3000n7cjxnp6kwzae",
        "time": 1385046854.282,
        "streamId": "heart",
        "tags": [],
        "type": "frequency/bpm",
        "content": 90,
        "created": 1392046931.451,
        "createdBy": "chrhwsuin00017cjxkw8cjgo4",
        "modified": 1392046931.451,
        "modifiedBy": "chrhwsuin00017cjxkw8cjgo4"
      }
    },
    {
      "event": {
        "id": "chrhwsum3000o7cjxyzurwqe0",
        "time": 1385046854.282,
        "streamId": "systolic",
        "tags": [],
        "type": "pressure/mmhg",
        "content": 120,
        "created": 1392046931.451,
        "createdBy": "chrhwsuin00017cjxkw8cjgo4",
        "modified": 1392046931.451,
        "modifiedBy": "chrhwsuin00017cjxkw8cjgo4"
      }
    },
    {
      "event": {
        "id": "chrhwsum3000p7cjxxquwfyzt",
        "time": 1385046854.282,
        "streamId": "diastolic",
        "tags": [],
        "type": "pressure/mmhg",
        "content": 80,
        "created": 1392046931.451,
        "createdBy": "chrhwsuin00017cjxkw8cjgo4",
        "modified": 1392046931.451,
        "modifiedBy": "chrhwsuin00017cjxkw8cjgo4"
      }
    }
  ]
}</code></pre></div></div></div></aside></section></section></section><section id="data-structure"><h1 id="data-structure">Data structure</h1>
<div class="intro"><p>This section describes the structure of the different types of objects and values exchanged in the API.</p>
</div><section id="data-structure-event" class=""><h2 id="event">Event</h2>
<div class="content"><div class="intro"><p>See also: <a href="concepts.html#core-events">core concepts</a>.</p>
</div><table class="definitions"><tr><th><code>id</code></th><td><div class="header"><span class="type"><a href="#data-structure-identity">identity</a></span><span class="label unique">unique</span><span class="label read-only">read-only</span></div><div class="description"><p>The server-assigned identifier for the event.</p>
</div></td></tr><tr><th><code>streamId</code></th><td><div class="header"><span class="type"><a href="#data-structure-identity">identity</a></span></div><div class="description"><p>The id of the belonging stream.</p>
</div></td></tr><tr><th><code>time</code></th><td><div class="header"><span class="type"><a href="#data-structure-timestamp">timestamp</a></span></div><div class="description"><p>The event&#39;s time. For period events, this is the time the event started.</p>
</div></td></tr><tr><th><code>duration</code></th><td><div class="header"><span class="type"><a href="#data-structure-timestamp">timestamp</a></span><span class="label optional">optional</span></div><div class="description"><p>If present, indicates that the event is a period event. <strong>Running period events have a duration set to <code>null</code></strong>. (We use a dedicated field for duration—instead of using the <code>content</code> field—as we do specific processing of event durations, intervals and overlapping.)</p>
</div></td></tr><tr><th><code>type</code></th><td><div class="header"><span class="type">string</span></div><div class="description"><p>The type of the event. See the <a href="event-typez.html#directory">event type directory</a> for a list of standard types.</p>
</div></td></tr><tr><th><code>content</code></th><td><div class="header"><span class="type">any type</span><span class="label optional">optional</span></div><div class="description"><p>The <code>type</code>-specific content of the event, if any.</p>
</div></td></tr><tr><th><code>tags</code></th><td><div class="header"><span class="type">array of strings</span><span class="label optional">optional (always present in read items)</span></div><div class="description"><p>The tags associated with the event.</p>
</div></td></tr><tr><th><code>references</code></th><td><div class="header"><span class="type">array of <a href="#data-structure-identity">identity</a></span><span class="label optional">optional (always present in read items)</span></div><div class="description"><p>Other events associated with the event. <em>Note: event references aren&#39;t yet implemented in the API today.</em></p>
</div></td></tr><tr><th><code>description</code></th><td><div class="header"><span class="type">string</span><span class="label optional">optional</span></div><div class="description"><p>User description or comment for the event.</p>
</div></td></tr><tr><th><code>attachments</code></th><td><div class="header"><span class="type">array of attachment objects</span><span class="label optional">optional</span><span class="label read-only">read-only</span></div><div class="description"><p>An array describing the files attached to the event. Each item has the following structure:</p>
</div><table class="definitions"><tr><th><code>id</code></th><td><div class="header"><span class="type"><a href="#data-structure-identity">identity</a></span></div><div class="description"><p>The file&#39;s id. The attached file&#39;s URL is obtained by appending this id to the event&#39;s resource URL.</p>
</div></td></tr><tr><th><code>fileName</code></th><td><div class="header"><span class="type">string</span></div><div class="description"><p>The file&#39;s name as uploaded.</p>
</div></td></tr><tr><th><code>type</code></th><td><div class="header"><span class="type">string</span></div><div class="description"><p>The MIME type of the file.</p>
</div></td></tr><tr><th><code>size</code></th><td><div class="header"><span class="type">number</span></div><div class="description"><p>The size of the file, in bytes.</p>
</div></td></tr></table></td></tr><tr><th><code>clientData</code></th><td><div class="header"><span class="type"><a href="#data-structure-key-value">key-value</a></span><span class="label optional">optional</span></div><div class="description"><p>Additional client data for the event.</p>
</div></td></tr><tr><th><code>trashed</code></th><td><div class="header"><span class="type">boolean</span><span class="label optional">optional</span></div><div class="description"><p><code>true</code> if the event is in the trash.</p>
</div></td></tr><tr><th><code>created</code></th><td><div class="header"><span class="type"><a href="#data-structure-timestamp">timestamp</a></span><span class="label read-only">read-only</span></div><div class="description"><p>The time the event was created.</p>
</div></td></tr><tr><th><code>createdBy</code></th><td><div class="header"><span class="type"><a href="#data-structure-identity">identity</a></span><span class="label read-only">read-only</span></div><div class="description"><p>The id of the access used to create the event.</p>
</div></td></tr><tr><th><code>modified</code></th><td><div class="header"><span class="type"><a href="#data-structure-timestamp">timestamp</a></span><span class="label read-only">read-only</span></div><div class="description"><p>The time the event was last modified.</p>
</div></td></tr><tr><th><code>modifiedBy</code></th><td><div class="header"><span class="type"><a href="#data-structure-identity">identity</a></span><span class="label read-only">read-only</span></div><div class="description"><p>The id of the last access used to modify the event.</p>
</div></td></tr></table></div><aside><div class="example"><p>A picture</p>
<pre><code>{
  "id": "chrhwsum3000s7cjxwici44e6",
  "time": 1392043331.451,
  "streamId": "diary",
  "tags": [],
  "type": "picture/attached",
  "content": null,
  "attachments": [
    {
      "id": "chrhwsum3000t7cjxfi6kik1s",
      "fileName": "photo.jpg",
      "type": "image/jpeg",
      "size": 2561
    }
  ],
  "created": 1392050531.451,
  "createdBy": "chrhwsuin00047cjxa73fag8d",
  "modified": 1392050531.451,
  "modifiedBy": "chrhwsuin00047cjxa73fag8d"
}</code></pre></div><div class="example"><p>An activity</p>
<pre><code>{
  "id": "chrhwsum2000j7cjx0zbsd4md",
  "time": 1392046931.45,
  "streamId": "jogging",
  "tags": [],
  "type": "activity/pryv",
  "content": null,
  "created": 1392046931.45,
  "createdBy": "chrhwsuin00017cjxkw8cjgo4",
  "modified": 1392046931.45,
  "modifiedBy": "chrhwsuin00017cjxkw8cjgo4"
}</code></pre></div><div class="example"><p>A position</p>
<pre><code>{
  "id": "chrhwsum3000u7cjx7xc56eh9",
  "time": 1350373077.359,
  "streamId": "diary",
  "tags": [],
  "type": "position/wgs84",
  "content": {
    "latitude": 40.714728,
    "longitude": -73.998672
  },
  "created": 1392039731.451,
  "createdBy": "chrhwsuim00007cjxwoh8zxjp",
  "modified": 1392039731.451,
  "modifiedBy": "chrhwsuim00007cjxwoh8zxjp"
}</code></pre></div></aside></section><section id="data-structure-stream" class=""><h2 id="stream">Stream</h2>
<div class="content"><div class="intro"><p>See also: <a href="concepts.html#core-streams">core concepts</a>.</p>
</div><table class="definitions"><tr><th><code>id</code></th><td><div class="header"><span class="type"><a href="#data-structure-identity">identity</a></span><span class="label unique">unique</span><span class="label read-only">read-only (except at creation)</span></div><div class="description"><p>The identifier for the stream. Automatically generated if not set when creating the stream; <strong>slugified if necessary</strong>.</p>
</div></td></tr><tr><th><code>name</code></th><td><div class="header"><span class="type">string</span><span class="label unique">unique among siblings</span></div><div class="description"><p>A name identifying the stream for users. The name must be unique among the stream&#39;s siblings in the streams tree structure.</p>
</div></td></tr><tr><th><code>parentId</code></th><td><div class="header"><span class="type"><a href="#data-structure-identity">identity</a></span><span class="label optional">optional</span></div><div class="description"><p>The identifier of the stream&#39;s parent, if any. A value of <code>null</code> indicates that the stream has no parent (i.e. root stream).</p>
</div></td></tr><tr><th><code>singleActivity</code></th><td><div class="header"><span class="type">boolean</span><span class="label optional">optional</span></div><div class="description"><p>If specified and <code>true</code>, the system will ensure that period events in this stream and its children never overlap.</p>
</div></td></tr><tr><th><code>clientData</code></th><td><div class="header"><span class="type"><a href="#data-structure-key-value">key-value</a></span><span class="label optional">optional</span></div><div class="description"><p>Additional client data for the stream.</p>
</div></td></tr><tr><th><code>children</code></th><td><div class="header"><span class="type">array of streams</span><span class="label read-only">read-only</span></div><div class="description"><p>The stream&#39;s sub-streams, if any. This field cannot be set in requests creating a new streams: streams are created individually by design.</p>
</div></td></tr><tr><th><code>trashed</code></th><td><div class="header"><span class="type">boolean</span><span class="label optional">optional</span></div><div class="description"><p><code>true</code> if the stream is in the trash.</p>
</div></td></tr><tr><th><code>created</code></th><td><div class="header"><span class="type"><a href="#data-structure-timestamp">timestamp</a></span><span class="label read-only">read-only</span></div><div class="description"><p>The time the stream was created.</p>
</div></td></tr><tr><th><code>createdBy</code></th><td><div class="header"><span class="type"><a href="#data-structure-identity">identity</a></span><span class="label read-only">read-only</span></div><div class="description"><p>The id of the access used to create the stream.</p>
</div></td></tr><tr><th><code>modified</code></th><td><div class="header"><span class="type"><a href="#data-structure-timestamp">timestamp</a></span><span class="label read-only">read-only</span></div><div class="description"><p>The time the stream was last modified.</p>
</div></td></tr><tr><th><code>modifiedBy</code></th><td><div class="header"><span class="type"><a href="#data-structure-identity">identity</a></span><span class="label read-only">read-only</span></div><div class="description"><p>The id of the last access used to modify the stream.</p>
</div></td></tr></table></div><aside><div class="example"><p>A structure for activities</p>
<pre><code>[
  {
    "id": "sport",
    "name": "Sport",
    "parentId": null,
    "children": [
      {
        "id": "jogging",
        "name": "Jogging",
        "parentId": "sport",
        "children": [],
        "created": 1328974931.7176647,
        "createdBy": "chrhwsuim00007cjxwoh8zxjp",
        "modified": 1328975223.393832,
        "modifiedBy": "chrhwsuim00007cjxwoh8zxjp"
      },
      {
        "id": "bicycling",
        "name": "Bicycling",
        "parentId": "sport",
        "children": [],
        "created": 1328974931.7176647,
        "createdBy": "chrhwsuim00007cjxwoh8zxjp",
        "modified": 1328975095.7521498,
        "modifiedBy": "chrhwsuim00007cjxwoh8zxjp"
      }
    ],
    "created": 1328974931.45,
    "createdBy": "chrhwsuim00007cjxwoh8zxjp",
    "modified": 1328975069.3878276,
    "modifiedBy": "chrhwsuim00007cjxwoh8zxjp"
  },
  {
    "id": "work",
    "name": "Work",
    "parentId": null,
    "singleActivity": true,
    "children": [
      {
        "id": "chrhwsum100087cjxwez4uu19",
        "name": "Noble Works Co.",
        "parentId": "work",
        "children": [
          {
            "id": "chrhwsum1000a7cjxf8t266qe",
            "name": "Last Be First",
            "parentId": "chrhwsum100087cjxwez4uu19",
            "children": [],
            "created": 1328974953.4001656,
            "createdBy": "chrhwsuim00007cjxwoh8zxjp",
            "modified": 1328975308.6558669,
            "modifiedBy": "chrhwsuim00007cjxwoh8zxjp"
          },
          {
            "id": "chrhwsum1000b7cjxe8zwk3oi",
            "name": "Big Tree",
            "parentId": "chrhwsum100087cjxwez4uu19",
            "children": [],
            "created": 1328974953.4001656,
            "createdBy": "chrhwsuim00007cjxwoh8zxjp",
            "modified": 1328975048.2504184,
            "modifiedBy": "chrhwsuim00007cjxwoh8zxjp"
          },
          {
            "id": "chrhwsum1000c7cjx4gaxlrtt",
            "name": "Inner Light",
            "parentId": "chrhwsum100087cjxwez4uu19",
            "children": [],
            "created": 1328974953.4001656,
            "createdBy": "chrhwsuim00007cjxwoh8zxjp",
            "modified": 1328975226.3280065,
            "modifiedBy": "chrhwsuim00007cjxwoh8zxjp"
          }
        ],
        "created": 1328974941.8452144,
        "createdBy": "chrhwsuim00007cjxwoh8zxjp",
        "modified": 1328975017.4804037,
        "modifiedBy": "chrhwsuim00007cjxwoh8zxjp"
      },
      {
        "id": "chrhwsum100097cjx98k5pqgn",
        "name": "Freelancing",
        "parentId": "work",
        "children": [
          {
            "id": "chrhwsum1000d7cjxft2vimgz",
            "name": "Funky Veggies",
            "parentId": "chrhwsum100097cjx98k5pqgn",
            "children": [],
            "created": 1328974966.6648707,
            "createdBy": "chrhwsuim00007cjxwoh8zxjp",
            "modified": 1328975060.3655026,
            "modifiedBy": "chrhwsuim00007cjxwoh8zxjp"
          },
          {
            "id": "chrhwsum1000e7cjxq63d6o4h",
            "name": "Jojo Lapin & sons",
            "parentId": "chrhwsum100097cjx98k5pqgn",
            "children": [],
            "created": 1328974966.6648707,
            "createdBy": "chrhwsuim00007cjxwoh8zxjp",
            "modified": 1328975101.9166229,
            "modifiedBy": "chrhwsuim00007cjxwoh8zxjp"
          }
        ],
        "created": 1328974941.8452144,
        "createdBy": "chrhwsuim00007cjxwoh8zxjp",
        "modified": 1328975142.5111687,
        "modifiedBy": "chrhwsuim00007cjxwoh8zxjp"
      }
    ],
    "created": 1328974931.45,
    "createdBy": "chrhwsuim00007cjxwoh8zxjp",
    "modified": 1328975107.253257,
    "modifiedBy": "chrhwsuim00007cjxwoh8zxjp"
  }
]</code></pre></div></aside></section><section id="data-structure-tag" class=""><h2 id="tag">Tag</h2>
<div class="content"><div class="intro"><p>Tags can be plain text or typed tags; this describes the latter. See also: <a href="concepts.html#core-tags">core concepts</a>. <em>Note: typed tags aren&#39;t yet implemented in the API today.</em></p>
</div><table class="definitions"><tr><th><code>id</code></th><td><div class="header"><span class="type"><a href="#data-structure-identity">identity</a></span><span class="label unique">unique</span><span class="label read-only">read-only</span></div><div class="description"><p>The identifier for the tag.</p>
</div></td></tr><tr><th><code>type</code></th><td><div class="header"><span class="type">string</span></div><div class="description"><p>The type of the tag. See the <a href="#TODO">tag type directory</a> for a list of standard types.</p>
</div></td></tr><tr><th><code>content</code></th><td><div class="header"><span class="type">any type</span><span class="label optional">optional</span></div><div class="description"><p>The <code>type</code>-specific content of the tag, if any.</p>
</div></td></tr><tr><th><code>clientData</code></th><td><div class="header"><span class="type"><a href="#data-structure-key-value">key-value</a></span><span class="label optional">optional</span></div><div class="description"><p>Additional client data for the tag.</p>
</div></td></tr><tr><th><code>trashed</code></th><td><div class="header"><span class="type">boolean</span><span class="label optional">optional</span></div><div class="description"><p><code>true</code> if the tag is in the trash.</p>
</div></td></tr><tr><th><code>created</code></th><td><div class="header"><span class="type"><a href="#data-structure-timestamp">timestamp</a></span><span class="label read-only">read-only</span></div><div class="description"><p>The time the tag was created.</p>
</div></td></tr><tr><th><code>createdBy</code></th><td><div class="header"><span class="type"><a href="#data-structure-identity">identity</a></span><span class="label read-only">read-only</span></div><div class="description"><p>The id of the access used to create the tag.</p>
</div></td></tr><tr><th><code>modified</code></th><td><div class="header"><span class="type"><a href="#data-structure-timestamp">timestamp</a></span><span class="label read-only">read-only</span></div><div class="description"><p>The time the tag was last modified.</p>
</div></td></tr><tr><th><code>modifiedBy</code></th><td><div class="header"><span class="type"><a href="#data-structure-identity">identity</a></span><span class="label read-only">read-only</span></div><div class="description"><p>The id of the last access used to modify the tag.</p>
</div></td></tr></table></div><aside></aside></section><section id="data-structure-access" class=""><h2 id="access">Access</h2>
<div class="content"><div class="intro"><p>See also: <a href="concepts.html#core-accesses">core concepts</a>.</p>
</div><table class="definitions"><tr><th><code>id</code></th><td><div class="header"><span class="type"><a href="#data-structure-identity">identity</a></span><span class="label unique">unique</span><span class="label read-only">read-only</span></div><div class="description"><p>The identifier for the access.</p>
</div></td></tr><tr><th><code>token</code></th><td><div class="header"><span class="type">string</span><span class="label unique">unique</span><span class="label read-only">read-only (except at creation)</span></div><div class="description"><p>The token identifying the access. Automatically generated if not set when creating the access; <strong>slugified if necessary</strong>.</p>
</div></td></tr><tr><th><code>type</code></th><td><div class="header"><span class="type"><code>&quot;personal&quot;</code>|<code>&quot;app&quot;</code>|<code>&quot;shared&quot;</code></span><span class="label optional">optional</span><span class="label read-only">read-only (except at creation)</span></div><div class="description"><p>The type — or usage — of the access. Default: <code>&quot;shared&quot;</code>.</p>
</div></td></tr><tr><th><code>name</code></th><td><div class="header"><span class="type">string</span><span class="label unique">unique per type and device</span></div><div class="description"><p>The name identifying the access for the user. (For personal and app access, the name is used as a technical identifier and not shown as-is to the user.)</p>
</div></td></tr><tr><th><code>deviceName</code></th><td><div class="header"><span class="type">string</span><span class="label unique">unique per type and name</span><span class="label optional">optional</span></div><div class="description"><p>For app accesses only. The name of the client device running the app, if applicable.</p>
</div></td></tr><tr><th><code>permissions</code></th><td><div class="header"><span class="type">array of permission objects</span></div><div class="description"><p>Ignored for personal accesses. If permission levels conflict (e.g. stream set to &quot;manage&quot; and child stream set to &quot;contribute&quot;), only the highest level is considered. Each permission object has the following structure:</p>
</div><table class="definitions"><tr><th><code>streamId</code></th><td><div class="header"><span class="type"><a href="#data-structure-identity">identity</a></span></div><div class="description"><p>The id of the stream the permission applies to, or <code>&quot;*&quot;</code> for &quot;all streams&quot;. If the stream has child streams, the permission applies to them as well.</p>
</div></td></tr><tr><th><code>level</code></th><td><div class="header"><span class="type"><code>&quot;read&quot;</code>|<code>&quot;contribute&quot;</code>|<code>&quot;manage&quot;</code></span></div><div class="description"><p>The level of access to the stream. With <code>&quot;contribute&quot;</code>, one can see and record events for the stream (and its child streams, if any); with <code>&quot;manage&quot;</code>, one can in addition create, modify and delete child streams.</p>
</div></td></tr></table></td></tr><tr><th><code>created</code></th><td><div class="header"><span class="type"><a href="#data-structure-timestamp">timestamp</a></span><span class="label read-only">read-only</span></div><div class="description"><p>The time the access was created.</p>
</div></td></tr><tr><th><code>createdBy</code></th><td><div class="header"><span class="type"><a href="#data-structure-identity">identity</a></span><span class="label read-only">read-only</span></div><div class="description"><p>The id of the access used to create the access.</p>
</div></td></tr><tr><th><code>modified</code></th><td><div class="header"><span class="type"><a href="#data-structure-timestamp">timestamp</a></span><span class="label read-only">read-only</span></div><div class="description"><p>The time the access was last modified.</p>
</div></td></tr><tr><th><code>modifiedBy</code></th><td><div class="header"><span class="type"><a href="#data-structure-identity">identity</a></span><span class="label read-only">read-only</span></div><div class="description"><p>The id of the last access used to modify the access.</p>
</div></td></tr></table></div><aside></aside></section><section id="data-structure-followed-slices" class=""><h2 id="followed-slices">Followed slices</h2>
<div class="content"><div class="intro"><p>See also: <a href="concepts.html#core-followed-slices">core concepts</a>.</p>
</div><table class="definitions"><tr><th><code>id</code></th><td><div class="header"><span class="type"><a href="#data-structure-identity">identity</a></span><span class="label unique">unique</span><span class="label read-only">read-only</span></div><div class="description"><p>The server-assigned identifier for the followed slice.</p>
</div></td></tr><tr><th><code>name</code></th><td><div class="header"><span class="type">string</span><span class="label unique">unique</span></div><div class="description"><p>A name identifying the followed slice for the user.</p>
</div></td></tr><tr><th><code>url</code></th><td><div class="header"><span class="type">URL</span></div><div class="description"><p>The URL of the API endpoint of the account hosting the slice. Not modifiable after creation.</p>
</div></td></tr><tr><th><code>accessToken</code></th><td><div class="header"><span class="type">string</span></div><div class="description"><p>The token of the shared access itself. Not modifiable after creation.</p>
</div></td></tr></table></div><aside></aside></section><section id="data-structure-key-value" class=""><h2 id="key-value">Key-value</h2>
<div class="content"><div class="intro"><p>An object (key-value map) for client apps to store additional data about the containing item (stream, event, etc.), such as a color, a reference to an associated icon, or other app-specific metadata.</p>
<h3 id="adding-updating-and-removing-client-data">Adding, updating and removing client data</h3>
<p>When the containing item is updated, additional data fields can be added, updated and removed as follows:</p>
<ul>
<li>To add or update a field, just set its value; for example: <code>{&quot;clientData&quot;: {&quot;keyToAddOrUpdate&quot;: &quot;value&quot;}}</code></li>
<li>To delete a field, set its value to <code>null</code>; for example: <code>{&quot;clientData&quot;: {&quot;keyToDelete&quot;: null}}</code></li>
</ul>
<p>Fields you don&#39;t specify in the update are left untouched.</p>
<h3 id="naming-convention">Naming convention</h3>
<p>The convention is that each app names the keys it uses with an <code>&quot;{app-id}:&quot;</code> prefix. For example, an app with id &quot;riki&quot; would store its data in fields such as <code>&quot;riki:key&quot;: &quot;some value&quot;</code>.</p>
</div></div><aside></aside></section><section id="data-structure-error" class=""><h2 id="error">Error</h2>
<div class="content"><table class="definitions"><tr><th><code>id</code></th><td><div class="header"><span class="type">string</span></div><div class="description"><p>Identifier for the error.</p>
</div></td></tr><tr><th><code>message</code></th><td><div class="header"><span class="type">string</span></div><div class="description"><p>A human-readable description of the error.</p>
</div></td></tr><tr><th><code>data</code></th><td><div class="header"><span class="type">any type</span><span class="label optional">optional</span></div><div class="description"><p>Additional machine-readable details (specified for each error if relevant).</p>
</div></td></tr><tr><th><code>subErrors</code></th><td><div class="header"><span class="type">array of errors</span><span class="label optional">optional</span></div><div class="description"><p>Lists the detailed causes of the main error, if any.</p>
</div></td></tr></table></div><aside></aside></section><section id="data-structure-identity" class=""><h2 id="item-identity">Item identity</h2>
<div class="content"><div class="intro"><p>A string uniquely identifying an item for a given user. For some types of items (&quot;structural&quot; ones such as streams), it is allowed for the identity to be optionally set by API clients; otherwise the identity is generated by the server.</p>
</div></div><aside></aside></section><section id="data-structure-timestamp" class=""><h2 id="timestamp">Timestamp</h2>
<div class="content"><div class="intro"><p>A positive floating-point number representing a number of seconds since any reference date and time, <strong>independently from the time zone</strong>. Because date and time synchronization between server time and client time is done by the client simply comparing the current server timestamp with its own, the reference date and time does not actually matter (but we do use standard Unix epoch time).</p>
</div></div><aside><div class="example"><p>Getting a valid timestamp:</p>
<ul>
<li>JavaScript: <code>Date.now() / 1000</code></li>
<li>PHP (5+): <code>microtime(true)</code></li>
<li>TODO: more</li>
</ul>
</div></aside></section></section></div><div id="toc"></div><script>jQuery(document).ready(function($) {
  $('#toc').toc({
    'selectors': 'h1,h2',
    'container': '#main',
    'smoothScrolling': false,
    'prefix': 'toc',
    'onHighlight': function(el) {},
    'highlightOnScroll': true,
    'highlightOffset': 100,
    'anchorName': function(i, heading, prefix) {
      var $heading = $(heading),
          sectionId = $heading.parents('section[id]').attr('id');
      return sectionId + ($heading.is('h1') ? '' : '-' + slugify($heading.text()));
    },
    'headerText': function(i, heading, $heading) {
      return $heading.text();
    }
  });
  
  function slugify(text) {
    return text.toLowerCase().replace(/[^\w- ]+/g,'').replace(/ +/g,'-');
  }
});
</script><script>function showExamples(format) {
  var removeSelectors = [];
  ['json', 'http', 'sockets'].forEach(function(f) {
    if (format !== f) {
      removeSelectors.push('.examples-menu li.' + f + '.active');
      removeSelectors.push('.example .tab-pane.' + f + '.active');
    }
  });
  $(removeSelectors.join(',')).removeClass("active");
  $('.examples-menu li.' + format + ', .example .tab-pane.' + format).addClass("active");
}</script></div></body></html>