<!DOCTYPE html><html lang="en" class="no-js"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="description" property="og:description" content="Pryv API reference and resources for developers"><meta name="author" content="Pryv SA"><meta property="og:type" content="website"><meta name="image" property="og:image" content="/assets/images/logo-256.png"><meta name="viewport" content="width=device-width, initial-scale=1"><title>API change log | Pryv API</title><link rel="icon" href="/assets/images/favicon-black.ico" type="image/x-icon"><link rel="apple-touch-icon" sizes="120x120" href="/assets/images/apple-touch-icon-120x120-black.png"><link rel="apple-touch-icon" sizes="152x152" href="/assets/images/apple-touch-icon-152x152-black.png"><link rel="apple-touch-icon" sizes="180x180" href="/assets/images/apple-touch-icon-180x180-black.png"><!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
  <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]--><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:400,300,500,700,400italic|Roboto+Condensed:400,300,700"><link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/docco.min.css"><link rel="stylesheet" type="text/css" href="/assets/fonts/ss-gizmo.min.css"><link rel="stylesheet" type="text/css" href="/assets/style.css"></head><body class="change-log"><header id="page-header"><nav role="navigation" class="navbar navbar-default navbar-fixed-top"><div class="container-fluid"><div class="navbar-header"><a href="https://pryv.com" title="Pryv home" class="navbar-brand logo pryv-home"><img src="/assets/images/icon-home.svg" alt="Pryv home" height="50"></a><a href="/" title="Developers home" class="navbar-brand logo"><img src="/assets/images/logo-256-black.png" alt="Developers home"></a><button type="button" data-toggle="collapse" data-target="#main-nav" class="navbar-toggle"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button></div><div id="main-nav" class="collapse navbar-collapse"><ul class="nav navbar-nav"><li class="dropdown"><a href="#" data-toggle="dropdown" class="dropdown-toggle">Guides <b class="caret"></b></a><ul class="dropdown-menu"><li><a href="/getting-started/">Getting started</a></li><li><a href="/concepts/">API concepts</a></li><li><a href="/guides/data-modelling/">Data modelling</a></li><li><a href="/guides/webhooks/">Webhooks</a></li><li><a href="/guides/app-guidelines/">App guidelines</a></li><li><a href="/external-resources/">External resources</a></li></ul></li><li class="dropdown"><a href="#" data-toggle="dropdown" class="dropdown-toggle">Reference <b class="caret"></b></a><ul class="dropdown-menu"><li><a href="/reference/">API reference</a></li><li><a href="/reference-system/">API System reference</a></li><li><a href="/event-types/">Event types</a></li><li><a href="/open-api/">Open API (Postman)</a></li><li class="active"><a href="/change-log/">API change log</a></li><!--+menuItem('standardStructure')--></ul></li><li class="dropdown"><a href="#" data-toggle="dropdown" class="dropdown-toggle">FAQ <b class="caret"></b></a><ul class="dropdown-menu"><li><a href="/faq-api/">API</a></li><li><a href="/faq-infra/">Infrastructure</a></li></ul></li><li><a href="https://support.pryv.com/hc/en-us/community/topics">Community</a></li><li><a href="https://github.com/pryv/open-pryv.io">Open Pryv.io</a></li></ul><div class="navbar-right"><p class="navbar-text version"><a href="/change-log/" title="View change log">API version: <strong>1.5.9</strong></a></p></div></div></div></nav></header><div id="main-wrapper" class="container container-narrow"><div id="main"><h1 class="page-title">API change log</h1><h2 id="v1-5-9">v1.5.9</h2>
<p>Changes:</p>
<ul>
<li>Call &#39;POST /user&#39; (create user) on register. The property <code>server</code> is now deprecated in favor of <code>apiEnpoint</code>.</li>
</ul>
<h2 id="v1-5-6">v1.5.6</h2>
<p>Changes:</p>
<ul>
<li>Webhooks API routes now available for <code>shared</code> accesses.</li>
<li>Socket.io interface availablel for <code>shared</code> accesses.</li>
<li>Socket.io interface availablel for accesses with <code>create-only</code> permissions.</li>
</ul>
<h2 id="v1-5-5">v1.5.5</h2>
<p>New feature: </p>
<ul>
<li>Access permission <code>{ &quot;feature&quot;: &quot;selfRevoke&quot;, &quot;setting&quot;: &quot;forbidden&quot;}</code>, more details on <a href="/reference/#access">Access data structure</a>.</li>
</ul>
<h2 id="v1-5">v1.5</h2>
<p>New Features:</p>
<ul>
<li>Events can now be part of multiple streamIds</li>
<li><code>authUrl</code> replaces <code>url</code> in <strong>Auth request</strong> in-progress response</li>
<li><code>pryvApiEndpoint</code> replaces <code>username</code> and <code>token</code> in <strong>Auth request</strong> accepted response</li>
<li><code>accesses.delete</code> has been extended for self revocation to <code>shared</code> and <code>app</code> accesses</li>
</ul>
<p>Deprecated:</p>
<ul>
<li><code>event.streamId</code>: replaced by <code>event.streamIds</code></li>
<li><code>event.tags</code>: their functionality will soon be totally replaced by streamIds</li>
<li><code>url</code> in <strong>Auth request</strong> in-progress response</li>
<li><code>username</code> and <code>token</code> in <strong>Auth request</strong> accepted response</li>
</ul>
<p>Removals:</p>
<ul>
<li>Timetracking functionalities have been removed<ul>
<li>singleActivity streams are now standard streams</li>
<li><code>events.start</code></li>
<li><code>events.stop</code></li>
</ul>
</li>
<li><code>accesses.update</code></li>
</ul>
<h2 id="v1-4">V1.4</h2>
<p>New features:</p>
<ul>
<li>Auth request now accepts a custom <code>serviceInfo</code> object, which is returned by the polling url. In case of success, a <code>pryvApiEndpoint</code> field is returned. See <a href="/reference/#authorizing-your-app">Auth request</a> for more details.</li>
<li>Add <code>create-only</code> permission level. See the <a href="/reference/#access">Access data structure</a> for more details.</li>
<li>Add multi-factor authentication for login using the optional MFA service. See the <a href="/reference/#multi-factor-authentication">MFA API methods</a> for more details.</li>
<li>Add auditing capabilities through the Audit API. See the <a href="/reference/#audit">Audit API methods</a> for more details.</li>
<li>Pryv.io API now supports the Basic HTTP Authentication scheme.</li>
<li>Release of webhooks to notify of data changes. See Webhook <a href="/reference/#webhook">data structure</a> and <a href="/reference/#webhooks">methods</a> for more details.</li>
<li>Add route <code>/service/info</code> that provides a unified way for third party services to access the necessary information related to a Pryv.io platform. See <a href="/reference/#service-info">description</a> for more details.</li>
<li>Most API calls now present a <code>Pryv-Access-Id</code> response header that contains the id of the access used for the call. This is the case only when a valid authorization token has been provided during the request (even if the token is expired). See <a href="/reference/#in-http-headers">metadata</a> for more details.</li>
</ul>
<p>Changes:</p>
<ul>
<li>Enrich <a href="/reference/#get-current-access-info">access-info</a> result with exhaustive access properties.</li>
<li>Improve the update account API call, in particular when it applies a change of email address. It now correctly checks if the email address is not already in use before updating the account and throws consistent errors.</li>
</ul>
<p>Deprecated:</p>
<ul>
<li>Timetracking functionalities<ul>
<li>singleActivity streams</li>
<li>events.start</li>
<li>events.stop</li>
</ul>
</li>
</ul>
<h2 id="v1-3">V1.3</h2>
<p>New features:</p>
<ul>
<li>High Frequency events allow storing data at high frequency and high data density. Create them by using types that start with <code>series:X</code>, where X is a normal Pryv type. The API also supports inputting data into multiple series at once, this is called a &#39;seriesBatch&#39; (POST <code>/series/batch</code>).</li>
<li>Add <code>clientData</code> field to Accesses.</li>
<li>Add <code>httpOnly</code> flag to server-side cookie sent in response to successful <code>/auth/login</code> request.</li>
<li>Deleted accesses can now be retrieved. See <a href="/reference/#get-accesses">accesses.get method</a> for more details.</li>
<li>Accesses can now be made to expire. See the <a href="/reference/#access">access data structure documentation</a> for more details.</li>
</ul>
<p>Changes:</p>
<ul>
<li>Some invalid requests that used to return a HTTP status code of 401 (Unauthorized) now return a 403 (Forbidden). Only the requests that are missing some form of authentication will return a 401 code.</li>
<li><code>updates.ignoreProtectedFields</code> is now off by default. This means that updates that address protected fields will result in an error being returned.</li>
</ul>
<h2 id="v1-2">v1.2</h2>
<p>Changes:</p>
<ul>
<li>Fix login with Firefox (and other browsers using Referer but no Origin).</li>
<li>Security fix 2018020801: &#39;accesses.update&#39; was missing an authorisation check.</li>
<li>Update of the API version in API responses.</li>
<li>Fix events.get JSON formatting.</li>
<li>Add configuration options to disable resetPassword and welcome emails.</li>
<li>Add configuration option to ignore updates of read-only fields.</li>
<li>Tags have a maximum length of 500 characters. An error is returned from the API when this limit is exceeded.</li>
</ul>
<h2 id="v1-1-8">v1.1.8</h2>
<p>Changes:</p>
<ul>
<li>Fix edge-case behaviour on very large <code>streams.delete</code> operations.</li>
<li>Direct <code>events.get</code> API call now supports really large results. Changes made have improved this call&#39;s performance by around 30%. As a by-product of this change, we now do not send the &#39;Content-Size&#39; HTTP header anymore.</li>
<li>Allow custom cuid-like ids when creating events.</li>
</ul>
<h2 id="v1-1">v1.1</h2>
<p>New feature:</p>
<ul>
<li>Versioning:<ul>
<li>a new endpoint on <code>/events/{id}</code> allows to retrieve a specific event by his <code>id</code>. Setting the 
<code>includeHistory</code> parameter to <code>true</code>, the response will contain an array of the previous versions
of the event in the <code>history</code> field.</li>
</ul>
</li>
</ul>
<h2 id="v1-0">v1.0</h2>
<p>Validated initial set of API features.</p>
<h2 id="v0-8">v0.8</h2>
<p>Changes:</p>
<ul>
<li>Deletion methods now:<ul>
<li>Reply to permanent deletions with a <code>{item}Deletion</code> field confirming the deleted item&#39;s identifier.</li>
<li>Always return code 200 on HTTP (that&#39;s a rollback of the v0.7.x change which was a bit too zealous to be practical).</li>
</ul>
</li>
</ul>
<p>New features:</p>
<ul>
<li>Event and stream deletions are now kept for sync purposes; they&#39;re accessible via parameter <code>includeDeletions</code> (<code>events.get</code>) or <code>includeDeletionsSince</code> (<code>streams.get</code>). Deletions are cleaned up after some time (currently a year).</li>
</ul>
<h2 id="v0-7">v0.7</h2>
<p>Major changes here towards more standardization and flexibility:</p>
<ul>
<li>All JSON responses (both in HTTP and Socket.IO) are now structured as follows:<ul>
<li><code>{ &quot;{resource}&quot;: {...} }</code> if a single resource item is expected; for example: <code>{ &quot;event&quot;: {...} }</code>, <code>{ &quot;error&quot;: {...} }</code></li>
<li><code>{ &quot;{resources}&quot;: [ {...}, ... ] }</code> if an indeterminate number of items is expected; for example: <code>{ &quot;events&quot;: [ {...}, ... ] }</code></li>
</ul>
</li>
<li>All responses to resource creation and update calls now include the full object instead of respectively its id and nothing; for example: <code>{ &quot;stream&quot;: {...} }</code></li>
<li>All JSON responses now include <code>meta.apiVersion</code> and <code>meta.serverTime</code> properties mirroring the original <code>API-Version</code> and <code>Server-Time</code> HTTP headers; HTTP header <code>API-Version</code> remains</li>
<li>Deleting a resource now returns code 204 if the item was permanently deleted; it still returns a 200 when trashed (now including the trashed item in the response)</li>
<li>Method ids for deletion/trashing are now <code>{resource}.delete</code> instead of <code>{resource}.del</code></li>
<li>The <code>attachments</code> property of events is now an array (instead of an object), with each attachment now identified by a new <code>id</code> property (instead of <code>fileName</code>)</li>
<li>As a security measure, reading attached files now either requires auth via the <code>Authorization</code> HTTP header or a new <code>readToken</code> query string parameter (<code>auth</code> isn&#39;t allowed anymore in this case); the token to use is specific to each file and access, and is defined in the <code>readToken</code> property of each event attachment</li>
<li>Event batch creation method has been replaced with generic batch method (<code>callBatch</code>, HTTP: <code>POST /</code>)</li>
<li>Bookmarks have been renamed to &quot;followed slices&quot;, corresponding method ids to <code>followedSlices.*</code> and HTTP routes to <code>/followed-slices</code></li>
<li>Getting events: setting the <code>tags</code> parameter now returns events with <em>any</em> of the specified tags, instead of <em>all</em> of them</li>
<li>Error ids:<ul>
<li><code>unknown-*</code> errors replaced with either <code>unknown-resource</code> or <code>unknown-referenced-resource</code></li>
<li><code>item-*-already-exists</code> replaced with <code>item-already-exists</code></li>
<li><code>missing-parameter</code> replaced with <code>invalid-parameters-format</code></li>
</ul>
</li>
<li>Other improvements and fixes (data validation performance, minor bugs on auth for trusted apps)</li>
</ul>
<p>New features:</p>
<ul>
<li>Getting events: filter for specific event types with the <code>types</code> parameter</li>
<li>Accesses can now define tag permissions in <code>permissions</code> (in addition to the existing stream permissions)<ul>
<li>If only tag permissions are set, all streams are considered readable, and vice-versa</li>
<li>When stream and tag permissions conflict, the highest permission level is considered</li>
</ul>
</li>
<li>Full support for managing account information, including password change and reset</li>
</ul>
<h2 id="v0-6">v0.6</h2>
<p>Changes to HTTP paths and auth for trusted apps:</p>
<ul>
<li>Get streams: removed <code>trashed</code> option for <code>state</code> as it was more trouble than anything useful</li>
<li>Accesses now includes property <code>id</code> (exposed for referencing)<ul>
<li>Create access response now includes both <code>id</code> and <code>token</code> properties</li>
<li>For existing accesses, <code>id</code> and <code>token</code> are equal</li>
</ul>
</li>
<li>Events, streams and accesses now includes change tracking properties:<ul>
<li><code>created</code> and <code>modified</code> (timestamp)</li>
<li><code>createdBy</code> and <code>modifiedBy</code> (access id or <code>&quot;system&quot;</code>)</li>
</ul>
</li>
<li>Socket.IO method calls now directly use method ids (e.g. <code>events.create</code>  and pass method params, instead of using <code>command</code> and passing an object with method id and params</li>
<li>For trusted apps only: removed the distinction between &quot;admin&quot; methods and others; <strong>breaking changes</strong><ul>
<li><code>/admin/login</code>, <code>/admin/logout</code> and <code>/admin/who-am-i</code> moved to <code>/auth/login</code>, <code>/auth/logout</code> and <code>/auth/who-am-i</code> respectively</li>
<li><code>sessionID</code> renamed to <code>token</code> in login response and SSO cookie data</li>
<li><em>Personal</em> accesses are now automatically created on login; they can&#39;t be created explicitly anymore</li>
<li><code>/admin/user-info</code> moved to <code>/user-info</code></li>
<li><code>/admin/accesses</code> merged into <code>/accesses</code></li>
<li><code>/admin/bookmarks</code> moved to <code>/bookmarks</code></li>
<li><code>/admin/profile</code> merged into <code>/profile</code></li>
</ul>
</li>
</ul>
<h2 id="v0-5">v0.5</h2>
<p>This is a major update that will break most libs and clients, which should be updated ASAP.</p>
<ul>
<li>Simplified the API by removing channels and renamed folders into &quot;streams&quot;; adjusted the structure of accesses, streams and events accordingly; more details:<ul>
<li>As a consequence, every event now belongs to a stream</li>
<li>Data migration: former channels will be converted into root-level streams, and former folders into sub-streams of those</li>
</ul>
</li>
<li>Events structure:<ul>
<li><code>event.type</code> is now a string of format <code>{class}/{format}</code> (e.g. <code>picture/attached</code>) instead of an object with <code>class</code> and <code>format</code> properties</li>
<li><code>event.value</code> has been renamed to <code>event.content</code></li>
</ul>
</li>
<li>Get events:<ul>
<li>Renamed parameter <code>onlyFolders</code> to just <code>streams</code></li>
<li>Added <code>running</code> boolean parameter, replacing &quot;get running periods&quot; method</li>
</ul>
</li>
<li>Removed &quot;get running periods&quot; (i.e. <code>GET /events/running</code>, see above)</li>
<li>Removed <code>hidden</code> property of streams (ex-folders), which was mostly unused and out of place</li>
</ul>
<h2 id="v0-4">v0.4</h2>
<ul>
<li>New feature: Allow HTTP method overriding by POSTing _method, _json, and _auth parameters in an URL-encoded request</li>
<li>Improvement: Retrieving events for a specific timeframe now includes all events that overlap that timeframe, including period events that started earlier</li>
<li>Added event type validation: the API will now check if an event being created or updated has a known type (as listed on our event types directory), and if yes perform data validation on its value (returning a 400 error if invalid)</li>
<li>All error ids have been changed to use <code>slug-style</code> instead of <code>C_CONSTANT_STYLE</code> (so that e.g. <code>INVALID_PARAMETERS_FORMAT</code> is now <code>invalid-parameters-format</code>); this is consistent with the other ids weâ€™re using in the system</li>
</ul>
<h2 id="earlier">Earlier</h2>
<p>Versions earlier than v0.4 are not covered here.</p>
</div></div><footer id="page-footer"><nav class="navbar navbar-default"><div class="container-fluid"><div id="footer-nav"><ul class="nav navbar-nav"><li><a href="mailto:developers@pryv.com">Send a message</a></li><li><a href="https://github.com/pryv">GitHub</a></li><li><a href="https://pryv.com">pryv.com</a></li></ul></div></div></nav></footer><script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script><script src="/assets/bootstrap.min.js"></script><!-- Code blocks highlighting--><script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();
</script><!-- Google Analytics--><script>var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-36589447-2']);
_gaq.push(['_trackPageview']);
(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();</script></body></html>