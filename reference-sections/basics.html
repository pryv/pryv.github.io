<html><head></head><body><h1>Basics</h1>
<h2>What's the URL?</h2>
<p><code>https://{username}.pryv.io</code> (where <code>{username}</code> is the name of the user whose data you want to access)

</p>
<p>Because Pryv potentially stores each user's data in a different location according to the user's choice, the API's base URL is unique for each user.


</p>
<h2>Calling API methods</h2>
<p>Most of the API follows REST principles, meaning each item has its own unique resource URL and can be read or modified via HTTP verbs:

</p>
<ul>
<li>GET to read the item(s)</li>
<li>POST to create a new item</li>
<li>PUT to modify the item</li>
<li>DELETE to delete the item (note that logical deletion, or trashing, is supported for items like events, folders and channels)</li>
</ul>
<p>Here's an example API request:
</p>
<pre class="highlighted"><code class="language-http"><span class="request">GET <span class="string">/{channel-id}/events</span> HTTP/1.1</span>
<span class="attribute">Host</span>: <span class="string">{user-name}.pryv.io</span>
<span class="attribute">Authorization</span>: <span class="string">{access-token}</span></code></pre>
<p>Note that the API also supports Socket.IO, for both calling API methods and receiving live notifications of changes to activity data. See <a href="#socketio">the dedicated section</a>.


</p>
<h2>Data format</h2>
<p>The API uses JSON for serializing data. Here's what an event can look like:
</p>
<pre class="highlighted"><code class="language-json">{
  "<span class="attribute">id</span>": <span class="value"><span class="string">"5051941d04b8ffd00500000d"</span></span>,
  "<span class="attribute">time</span>": <span class="value"><span class="number">1347864935.964</span></span>,
  "<span class="attribute">folderId</span>": <span class="value"><span class="string">"5058370ade44feaa03000015"</span></span>,
  "<span class="attribute">type</span>": <span class="value">{ "<span class="attribute">class</span>": <span class="value"><span class="string">"position"</span></span>, "<span class="attribute">format</span>": <span class="value"><span class="string">"wgs84"</span> </span>}</span>,
  "<span class="attribute">value</span>": <span class="value">{ "<span class="attribute">location</span>": <span class="value">{ "<span class="attribute">lat</span>": <span class="value"><span class="number">40.714728</span></span>, "<span class="attribute">lng</span>": <span class="value">-<span class="number">73.998672</span> </span>} </span>}</span>,
}</code></pre>
<h2>Common HTTP headers</h2>
<p>The following headers are included in every response:

</p>
<ul>
<li><code>API-Version</code>: The version of the API in the form <code>{major}.{minor}.{revision}</code>.</li>
<li><code>Server-Time</code>: The current server time as a <a href="#data-structure-timestamp">timestamp</a>. Keeping reference of the server time is an absolute necessity to properly read and write event times.</li>
</ul>
<h2>Errors</h2>
<p>When an error occurs, the API returns a 4xx or 5xx status code, with the response body usually containing an <a href="#data-structure-error">error</a> object detailing the cause.

</p>
<p>Here's an example "401 Unauthorized" error response:
</p>
<pre class="highlighted"><code class="language-json">{
  "<span class="attribute">id</span>": <span class="value"><span class="string">"INVALID_ACCESS_TOKEN"</span></span>,
  "<span class="attribute">message</span>": <span class="value"><span class="string">"Cannot find access with token 'bad-token'."</span>
</span>}</code></pre>
</body></html>