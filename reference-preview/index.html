<!DOCTYPE html><html lang="en" class="no-js"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="description" property="og:description" content="Pryv API reference and resources for developers"><meta name="author" content="Pryv SA"><meta property="og:type" content="website"><meta name="image" property="og:image" content="/assets/images/logo-256.png"><meta name="viewport" content="width=device-width, initial-scale=1"><title>API reference | Pryv API</title><link rel="icon" href="/assets/images/favicon-black.ico" type="image/x-icon"><link rel="apple-touch-icon" sizes="120x120" href="/assets/images/apple-touch-icon-120x120-black.png"><link rel="apple-touch-icon" sizes="152x152" href="/assets/images/apple-touch-icon-152x152-black.png"><link rel="apple-touch-icon" sizes="180x180" href="/assets/images/apple-touch-icon-180x180-black.png"><!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
  <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]--><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:400,300,500,700,400italic|Roboto+Condensed:400,300,700"><link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/docco.min.css"><link rel="stylesheet" type="text/css" href="/assets/fonts/ss-gizmo.min.css"><link rel="stylesheet" type="text/css" href="/assets/style.css"></head><body class="reference with-toc with-examples"><header id="page-header"><nav role="navigation" class="navbar navbar-default navbar-fixed-top"><div class="container-fluid"><div class="navbar-header"><a href="https://pryv.com" title="Pryv home" class="navbar-brand logo pryv-home"><img src="/assets/images/icon-home.svg" alt="Pryv home" height="50"></a><a href="/" title="Developers home" class="navbar-brand logo"><img src="/assets/images/logo-256-black.png" alt="Developers home"></a><button type="button" data-toggle="collapse" data-target="#main-nav" class="navbar-toggle"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button></div><div id="main-nav" class="collapse navbar-collapse"><ul class="nav navbar-nav"><li class="dropdown"><a href="#" data-toggle="dropdown" class="dropdown-toggle">Guides <b class="caret"></b></a><ul class="dropdown-menu"><li><a href="/getting-started/">Getting started</a></li><li><a href="/concepts/">API concepts</a></li><li><a href="/guides/data-modelling/">Data modelling</a></li><li><a href="/guides/webhooks/">Webhooks</a></li><li><a href="/guides/app-guidelines/">App guidelines</a></li><li><a href="/external-resources/">External resources</a></li></ul></li><li class="dropdown"><a href="#" data-toggle="dropdown" class="dropdown-toggle">Reference <b class="caret"></b></a><ul class="dropdown-menu"><li class="active"><a href="/reference/">API reference</a></li><li><a href="/reference-system/">API System reference</a></li><li><a href="/event-types/">Event types</a></li><li><a href="/open-api/">Open API (Postman)</a></li><li><a href="/change-log/">API change log</a></li><!--+menuItem('standardStructure')--></ul></li><li class="dropdown"><a href="#" data-toggle="dropdown" class="dropdown-toggle">FAQ <b class="caret"></b></a><ul class="dropdown-menu"><li><a href="/faq-api/">API</a></li><li><a href="/faq-infra/">Infrastructure</a></li></ul></li><li><a href="https://support.pryv.com/hc/en-us/community/topics">Community</a></li><li><a href="https://github.com/pryv/open-pryv.io">Open Pryv.io</a></li></ul><div class="navbar-right"><p class="navbar-text version"><a href="/change-log/" title="View change log">API version: <strong>1.5.18</strong></a></p></div><form class="navbar-form navbar-right"><div class="form-group"><label for="examples-api">API:&nbsp;</label><select id="examples-api" class="form-control"><option value="pryv.me" selected="selected">Pryv Lab: ${username}.pryv.me</option><option value="DNS-less">DNS-less: ${hostname}/${username}</option><option value="Own">Own domain: ${username}.${domain}</option></select></div><div class="form-group"><label for="examples-format">&nbsp;Examples:&nbsp;</label><select id="examples-format" class="form-control"><option value="json" selected="selected">REST payload</option><option value="batch">Batch block</option><option value="http">cURL</option><option value="sockets">Socket.IO</option><option value="httpAuth">cURL auth</option></select></div></form></div></div></nav></header><div id="main-wrapper" class="container-fluid"><div id="main"><h1 class="page-title">API reference</h1><section id="basics"><h1 id="basics">Basics</h1>
<!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="basics-endpoint-url"><h2 id="api-endpoint">API endpoint</h2>
<div class="content"><div class="meta"></div><div class="intro"><p>Depending on the Pryv.io setup or distribution, the root endpoint can have the following formats:</p>
<p>Pryv Lab: <code>https://{username}.pryv.me</code><br>Own Domain: <code>https://{username}.{domain}</code><br>DNS-less (Open): <code>https://{hostname}/{username}</code></p>
<p>Each user account has a dedicated root API endpoint as it is potentially served from a different location. The API endpoint format may vary, so check your platform&#39;s <a href="#service-info">service information</a> if needed.</p>
<p>You can adapt the examples with &quot;API&quot; selector in the top navigation bar.</p>
</div></div><aside><div class="example"><p>For instance, user &#39;chuangzi&#39; would be served from <code>https://chuangzi.pryv.me</code> or <code>https://host.your-domain.io/chuangzi</code></p>
</div></aside></section><!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="basics-call-with-http"><h2 id="call-with-http">Call with HTTP</h2>
<div class="content"><div class="meta"></div><div class="intro"><p>The API serves regular REST-like HTTP requests, with the usual verbs for reading and manipulating data:</p>
<ul>
<li><strong>GET</strong> (parameters: query string)<br>
for reading resources</li>
<li><strong>POST</strong> (parameters: request body)<br>
for creating new resources and other methods modifying data</li>
<li><strong>PUT</strong> (parameters: request body)<br>
for modifying resources</li>
<li><strong>DELETE</strong> (parameters: query string)<br>
for removing resources; logical deletion (trashing) is supported for some resources such as events and streams</li>
</ul>
</div></div><aside><div class="example"><p>Example request</p>
<p> Pryv Lab:</p>
<pre><code class="lang-http"> GET /events HTTP/1.1
 Host: {username}.pryv.me
 Authorization: {token}
</code></pre>
<p>DNS-less:</p>
<pre><code class="lang-http"> GET /{username}/events HTTP/1.1
 Host: host.your-domain.io
 Authorization: {token}
</code></pre>
</div></aside><!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="basics-call-with-http-alternative-http-request-method"> <h3 id="alternative-http-request-method">Alternative HTTP request method</h3>
<div class="content"><div class="meta"></div><div class="intro"><p>For those having trouble with <a href="https://developer.mozilla.org/en-US/docs/HTTP/Access_control_CORS">HTTP access control (CORS) rules</a>, the API allows web apps to fake POST, PUT and DELETE requests through <code>application/x-www-form-urlencoded</code> POST requests with the following fields (all optional):</p>
</div><table class="definitions"><tr><th><code>_method</code></th><td><div class="header"></div><div class="description"><p>The HTTP override method to use (usually <code>PUT</code> or <code>DELETE</code>; <code>POST</code> is used if not set).</p>
</div></td></tr><tr><th><code>_auth</code></th><td><div class="header"></div><div class="description"><p>The <code>Authorization</code> header value (alternative to sending the header itself).</p>
</div></td></tr><tr><th><code>_json</code></th><td><div class="header"></div><div class="description"><p>Considered as the JSON request body if set (overriding all other body content, if any).</p>
</div></td></tr></table></div></section></section><!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="basics-call-with-websockets"><h2 id="call-with-websockets">Call with websockets</h2>
<div class="content"><div class="meta"></div><div class="intro"><p>The API supports real-time interaction by accepting websocket connections via <a href="http://socket.io">Socket.io 2.0</a></p>
<p>For API versions prior to 1.5.8, use Socket.io 0.9.</p>
</div></div><!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="basics-call-with-websockets-connecting"> <h3 id="connecting">Connecting</h3>
<div class="content"><div class="meta"></div><div class="intro"><p>First, load the right Socket.IO client library.</p>
<p>Then initialize the connection with the URL:</p>
<p>Pryv Lab:</p>
<pre><code>https://{username}.pryv.me/{username}?auth={accessToken}
</code></pre><p>Own Domain: </p>
<pre><code>https://{username}.{domain}/{username}?auth={accessToken}
</code></pre><p>DNS-less:</p>
<pre><code>https://host.your-domain.io/{username}/{username}?auth={accessToken}
</code></pre><p><em>Yes, the username is quoted 2 times..</em></p>
<p>For API versions prior to 1.5.8, append <code>&amp;resource={username}</code>.</p>
</div></div><aside><div class="example"><p>In a web app</p>
<p>Pryv.me:</p>
<pre><code class="lang-html">&lt;script&gt;
var socket = io(&quot;https://chuangzi.pryv.me/chuangzi?auth=ckcka7ucn0003glpvs3j7daq2&quot;);
});
&lt;/script&gt;
</code></pre>
<p>Own domain:</p>
<pre><code class="lang-html">&lt;script&gt;
var socket = io(&quot;https://chuangzi.{domain}/chuangzi?auth=ckcka7ucn0003glpvs3j7daq2&quot;);
});
&lt;/script&gt;
</code></pre>
<p>DNS-less:</p>
<pre><code class="lang-html">&lt;script&gt;
var socket = io(&quot;https://host.your-domain.io/chuangzi/chuangzi?auth=ckcka7ucn0003glpvs3j7daq2&quot;);
});
&lt;/script&gt;
</code></pre>
</div></aside></section><!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="basics-call-with-websockets-call-methods"> <h3 id="call-methods">Call methods</h3>
<div class="content"><div class="meta"></div><div class="intro"><p>You call API methods by sending a corresponding Socket.IO <code>{method-id}</code> message, passing a parameters object and a callback:</p>
<pre><code class="lang-javascript">// javascript
socket.emit(&#39;{method-id}&#39;, {/*parameters*/}, function (error, result) {
  // handle result
});
</code></pre>
<p>See each method&#39;s doc for its id.</p>
</div><h4 id="specific-errors">Specific errors</h4>
<table class="definitions"><tr><th><code>invalid-method</code></th><td><div class="header"><span class="http"><span class="label">HTTP</span><span class="label-value"><code>404</code></span></span></div><div class="description"><p>The given method id is invalid.</p>
</div></td></tr></table></div><aside><div class="example"><p>Retrieving events (Javascript)</p>
<pre><code class="lang-javascript">socket.emit(&#39;events.get&#39;, {sortAscending: true}, function (error, result) {
  // ...
});
</code></pre>
</div></aside></section></section><!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="basics-subscribe-to-changes"><h2 id="subscribe-to-changes">Subscribe to changes</h2>
<div class="content"><div class="meta"></div><div class="intro"><p>Get notified when data changes by subscribing to messages. 
Available messages are: </p>
<ul>
<li><code>eventsChanged</code></li>
<li><code>streamsChanged</code></li>
<li><code>accessesChanged</code></li>
<li><code>systemBoot</code> (webhooks only)</li>
</ul>
<p>Messages do not include the content of the changes, but they describe what type of resource has been changed (created, updated or deleted).
They inform the server that it needs to fetch new or updated data through the API by doing a HTTP GET request with a valid access token. 
The <code>systemBoot</code> message is executed when the notifications system is started in order to query possibly missed data changes.</p>
</div></div><!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="basics-subscribe-to-changes-with-websockets"> <h3 id="with-websockets">With websockets</h3>
<div class="content"><div class="meta"></div><div class="intro"><p>Get notified of data changes in a web application using websockets.</p>
</div></div><aside><div class="example"><p>Subscribe to events changes (Javascript)</p>
<pre><code class="lang-javascript">socket.on(&#39;eventsChanged&#39;, function() {
  // retrieve latest changes and act accordingly
});
</code></pre>
</div></aside></section><!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="basics-subscribe-to-changes-with-webhooks"> <h3 id="with-webhooks">With webhooks</h3>
<div class="content"><div class="meta"></div><div class="intro"><p>Get notified of data changes in a web service using <a href="#webhook">webhooks</a>.</p>
</div></div><aside><div class="example"><p>Webhooks data changes payload</p>
<pre><code class="lang-json">{
  &quot;messages&quot;: [
    &quot;eventsChanged&quot;,
    &quot;streamsChanged&quot;
  ],
  &quot;meta&quot;: {
    &quot;apiVersion&quot;: &quot;1.4.11&quot;,
    &quot;serial&quot;: &quot;20190802&quot;,
    &quot;serverTime&quot;: 1594631155.665
  }
}
</code></pre>
</div></aside></section></section><!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="basics-service-info"><h2 id="service-info">Service info</h2>
<div class="content"><div class="meta"></div><div class="intro"><p>Service information provides a unified way for third party services to access the necessary information related to a Pryv.io platform as this route is served by any Pryv.io API endpoint.</p>
<p>For many applications, the first step is to authenticate a user. For this you need to know the path to <strong>access</strong> which is usually set to <code>https://access.{domain}/</code> or <code>https://{hostname}/access/</code>.<br>Fetching the path <code>/service/info</code> on any valid URL endpoint will return you a list of useful informations, such as <strong>access</strong>, containing the URL to access. </p>
<p>See <a href="/guides/app-guidelines/#auto-configuration">Auto-Configuration</a> in the guide <em>App Guidelines</em>.              </p>
</div><h4 id="parameters">Parameters</h4>
<table class="definitions"></table><h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>200 OK</code></span></span><table class="definitions"><tr><th><code>register</code></th><td><div class="header"><span class="type">string</span></div><div class="description"><p>The URL of the register service.</p>
</div></td></tr><tr><th><code>access</code></th><td><div class="header"><span class="type">string</span></div><div class="description"><p>The URL to perform <a href="#auth-request">authentication requests</a>.</p>
</div></td></tr><tr><th><code>api</code></th><td><div class="header"><span class="type">string</span></div><div class="description"><p>The API endpoint format.</p>
</div></td></tr><tr><th><code>name</code></th><td><div class="header"><span class="type">string</span></div><div class="description"><p>The platform name.</p>
</div></td></tr><tr><th><code>home</code></th><td><div class="header"><span class="type">string</span></div><div class="description"><p>The URL of the platform&#39;s home page.</p>
</div></td></tr><tr><th><code>support</code></th><td><div class="header"><span class="type">string</span></div><div class="description"><p>The email or URL of the support page.</p>
</div></td></tr><tr><th><code>terms</code></th><td><div class="header"><span class="type">string</span></div><div class="description"><p>The terms and conditions, in plain text or the URL displaying them.</p>
</div></td></tr><tr><th><code>eventTypes</code></th><td><div class="header"><span class="type">string</span></div><div class="description"><p>The URL of the list of validated event types.</p>
</div></td></tr></table></div><aside><div class="example"><p>Retrieving service information.</p>
<div class="tab-content"><div class="tab-pane json active"><pre><code>{}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "register": "https://reg.pryv.me",
  "access": "https://access.pryv.me/access",
  "api": "https://{username}.pryv.me/",
  "name": "Pryv Lab",
  "home": "https://www.pryv.com",
  "support": "https://pryv.com/helpdesk",
  "terms": "https://pryv.com/pryv-lab-terms-of-use/",
  "eventTypes": "https://api.pryv.com/event-types/flat.json"
}</code></pre></div><div class="tab-pane http"><pre><code>curl -i "https://${token}@<span class="api-curl">${username}.pryv.me</span>/service/info"</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 1.5.18

{
  "register": "https://reg.pryv.me",
  "access": "https://access.pryv.me/access",
  "api": "https://{username}.pryv.me/",
  "name": "Pryv Lab",
  "home": "https://www.pryv.com",
  "support": "https://pryv.com/helpdesk",
  "terms": "https://pryv.com/pryv-lab-terms-of-use/",
  "eventTypes": "https://api.pryv.com/event-types/flat.json"
}
</code></pre></div><div class="tab-pane sockets"><pre><code>socket.emit('service-info', {}, callback);</code></pre><div class="step-marker">⬇</div><pre><code>{
  "register": "https://reg.pryv.me",
  "access": "https://access.pryv.me/access",
  "api": "https://{username}.pryv.me/",
  "name": "Pryv Lab",
  "home": "https://www.pryv.com",
  "support": "https://pryv.com/helpdesk",
  "terms": "https://pryv.com/pryv-lab-terms-of-use/",
  "eventTypes": "https://api.pryv.com/event-types/flat.json"
}</code></pre></div><div class="tab-pane batch"><pre><code>{
  "method": "service-info",
  "params": {}
}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "register": "https://reg.pryv.me",
  "access": "https://access.pryv.me/access",
  "api": "https://{username}.pryv.me/",
  "name": "Pryv Lab",
  "home": "https://www.pryv.com",
  "support": "https://pryv.com/helpdesk",
  "terms": "https://pryv.com/pryv-lab-terms-of-use/",
  "eventTypes": "https://api.pryv.com/event-types/flat.json"
}</code></pre></div><div class="tab-pane httpAuth"><pre><code>curl -i "https://<span class="api-curl">${username}.pryv.me</span>/service/info?auth=${token}"</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 1.5.18

{
  "register": "https://reg.pryv.me",
  "access": "https://access.pryv.me/access",
  "api": "https://{username}.pryv.me/",
  "name": "Pryv Lab",
  "home": "https://www.pryv.com",
  "support": "https://pryv.com/helpdesk",
  "terms": "https://pryv.com/pryv-lab-terms-of-use/",
  "eventTypes": "https://api.pryv.com/event-types/flat.json"
}

</code></pre></div></div></div></aside></section><!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="basics-data-format"><h2 id="data-format">Data format</h2>
<div class="content"><div class="meta"></div><div class="intro"><p>The API exchanges data with clients in JSON (MIME type <code>application/json</code>), except when uploading/downloading attached files.</p>
</div></div><aside><div class="example"><p>Example event</p>
<pre><code>{
  "id": "ckcka7ued0012glpvfods46ep",
  "time": 1350373077.359,
  "streamIds": [
    "diary"
  ],
  "streamId": "diary",
  "tags": [],
  "type": "position/wgs84",
  "content": {
    "latitude": 40.714728,
    "longitude": -73.998672
  },
  "created": 1594623955.621,
  "createdBy": "ckcka7ucm0000glpvlbfb25cq",
  "modified": 1594623955.621,
  "modifiedBy": "ckcka7ucm0000glpvlbfb25cq"
}</code></pre></div></aside></section><!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="basics-authorization"><h2 id="authorization">Authorization</h2>
<div class="content"><div class="meta"></div><div class="intro"><p>All requests for retrieving and manipulating activity data must carry a valid <a href="#data-structure-access">access token</a>. 
The preferred method is to use the HTTP <code>Authorization</code> header. </p>
<p>Access tokens are obtained via the <a href="#authenticate-your-app">app authentication</a> or from sharing.</p>
<p><strong>Alternative methods:</strong></p>
<p>1- Pryv.io supports the <strong>Basic HTTP</strong> Authorization Scheme This allows to present 
a Pryv.io endpoint as a single URL without exposing the token in query parameters:  </p>
<pre><code>curl https://{token}@<span class="api">{username}.pryv.me</span>/access-info
</code></pre>

<p>This method is not supported by modern browsers but by tools such as <a href="https://curl.haxx.se">cURL</a>, the Node.js library <a href="https://visionmedia.github.io/superagent/">superagent</a> 
or <a href="https://www.getpostman.com">Postman</a>.</p>
<p>Note that Pryv.io does not require a username, so only the token should be Base64 encoded. For more information see <a href="https://tools.ietf.org/html/rfc7617">RFC671</a>. </p>
<p>2- The access token can be provided in the query string&#39;s <code>auth</code> parameter, for example during the Socket.IO handshake or for a direct HTTP GET call in a browser:</p>
<pre><code>curl https://{token}@<span class="api">{username}.pryv.me</span>/access-info?auth={token}
</code></pre>
</div></div><aside><div class="example"><p>HTTP <code>Authorization</code> header</p>
<pre><code>GET <span class='api-user'></span>/events HTTP/1.1
Host: <span class='api-host'>{username}.pryv.me</span>
Authorization: {token}
</code></pre></div><div class="example"><p>HTTP <code>Basic HTTP</code> authorization header</p>
<pre><code>GET <span class='api-user'></span>/events HTTP/1.1
Host: <span class='api-host'>{username}.pryv.me</span>
Authorization: Basic {Base64 encoded token}
</code></pre></div><div class="example"><p>HTTP <code>auth</code> query string parameter</p>
<pre><code>GET <span class='api-user'></span>/events?auth={token} HTTP/1.1
Host: <span class='api-host'>{username}.pryv.me</span>
Authorization: Basic {Base64 encoded token}
</code></pre></div></aside></section><!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="basics-trusted-apps-verification"><h2 id="trusted-apps-verification">Trusted apps verification</h2>
<div class="content"><div class="meta"><span onclick="location='/reference/#trusted-apps-verification'" class="label trusted-only">Trusted apps only</span><text>&nbsp;</text></div><div class="intro"><p>These API methods require that the <code>appId</code> parameter and <code>Origin</code> (or <code>Referer</code>) header are trusted.  </p>
<p>Only Apps that need to use a Personal token are be registered as &quot;Trusted Apps&quot;.  </p>
<p>These are usually:</p>
<ol>
<li>The web app for the Authentication and Consent process such as <a href="https://github.com/pryv/app-web-auth3">app-web-auth3</a></li>
<li>An admin panel for the end-user to manage Access Tokens and Profile.</li>
</ol>
<p>Trusted app api methods are tagged with <span class="trusted-tag"><span title="Trusted Apps Only" class="label">T</span></span></p>
<p>This setting can be adapted in the Pryv.io service configuration.<br>By default, any valid <code>appId</code> works and the <code>Origin</code> (or <code>Referer</code>) header must be in the form <code>https://*.{domain}</code>, ex.: <code>https://login.{domain}</code>.</p>
</div></div><aside><div class="example"><p>HTTP <code>Origin</code> header</p>
 <pre><code>POST <span class='api-user'></span>/auth/login HTTP/1.1
Host: <span class='api-host'>{username}.pryv.me</span>
Authorization: Basic {Base64 encoded token}
Origin: https://sw.{domain}</code></pre></div><div class="example"><p>HTTP <code>Referer</code> header</p>
 <pre><code>POST <span class='api-user'></span>/auth/login HTTP/1.1
Host: <span class='api-host'>{username}.pryv.me</span>
Authorization: Basic {Base64 encoded token}
Referer: https://sw.{domain}</code></pre></div></aside></section><!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="basics-authenticate-your-app"><h2 id="authenticate-your-app">Authenticate your app</h2>
<div class="content"><div class="meta"></div><div class="intro"><p>To authenticate users in your app, and thus for users to grant your app access to their data, you must:</p>
<ol>
<li>Choose an app identifier (min. length 6 chars)</li>
<li>Fetch the <a href="#service-info">service information</a></li>
<li>Send an <a href="#auth-request">auth request</a> to the URL exposed by the <strong>access</strong> parameter of the service information</li>
<li>Open the <code>authUrl</code> field of the HTTP response in a browser or webframe. The web page will prompt the user to sign in using her Pryv.io credentials (or to create an account if she doesn&#39;t have one).</li>
<li>The result of the sign-in process: an authenticated Pryv API endpoint or a refusal can be obtained in two ways: <ul>
<li>by <a href="#poll-request">polling the URL</a> obtained in the <code>poll</code> field of the HTTP response to the auth request (preferred method)</li>
<li>by being redirected to the <code>returnURL</code> provided in the auth request with the result in query parameters</li>
</ul>
</li>
</ol>
<h4 id="generate-token-app">Generate token app</h4>
<p>The <strong>Access token generator</strong> is a simple web application that allows its user to enter the parameters of the <a href="#auth-request">Auth request</a> and performs it. It is accessible at the following URL:</p>
<pre><code>https://api.pryv.com/app-web-access/?pryvServiceInfoUrl=${pryvServiceInfoUrl}
</code></pre><p>For example:</p>
<p><a href="https://api.pryv.com/app-web-access/?pryvServiceInfoUrl=https://reg.pryv.me/service/info">https://api.pryv.com/app-web-access/?pryvServiceInfoUrl=https://reg.pryv.me/service/info</a></p>
</div></div><!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="basics-authenticate-your-app-auth-request" class="method"> <h3 id="auth-request">Auth request</h3>
<div class="content"><div class="meta"><span class="http"><span class="label">HTTP-only</span><span class="label-value"><span>POST to <code>{serviceInfo.access}</code></span></span></span></div><div class="intro"><p>The API endpoint to use is given by the <a href="#service-info">service information&#39;s</a> <code>access</code> property.</p>
</div><h4 id="parameters">Parameters</h4>
<table class="definitions"><tr><th><code>requestingAppId</code></th><td><div class="header"><span class="type">string</span></div><div class="description"><p>Your app&#39;s identifier.</p>
</div></td></tr><tr><th><code>requestedPermissions</code></th><td><div class="header"><span class="type">array of permission request objects</span></div><div class="description"><p>The requested permissions. Each permission request has properties:</p>
</div><table class="definitions"><tr><th><code>streamId</code></th><td><div class="header"><span class="type"><a href="#data-structure-identifier">identifier</a></span></div><div class="description"><p>The id of the requested stream.</p>
</div></td></tr><tr><th><code>level</code></th><td><div class="header"><span class="type"><code>read</code>|<code>contribute</code>|<code>manage</code></span></div><div class="description"><p>The required permission level.</p>
</div></td></tr><tr><th><code>defaultName</code></th><td><div class="header"><span class="type">string</span></div><div class="description"><p>The name to create the stream if needed (in the language of the user).</p>
</div></td></tr></table></td></tr><tr><th><code>languageCode</code></th><td><div class="header"><span class="type">string</span><span class="label label-default optional">optional</span></div><div class="description"><p>The two-letter ISO (639-1) code of the language in which to display user instructions, if possible. Default: <code>en</code>.</p>
</div></td></tr><tr><th><code>returnURL</code></th><td><div class="header"><span class="type">string</span><span class="label label-default optional">optional</span></div><div class="description"><p>The URL to redirect the user to after authentication completes.
Required if you are not using polling to retrieve the authentication result (see Result below).</p>
</div></td></tr><tr><th><code>clientData</code></th><td><div class="header"><span class="type"><a href="#data-structure-key-value">key-value</a></span><span class="label label-default optional">optional</span></div><div class="description"><p>Additional client data that will be transmitted alongside the auth request (see Result below).</p>
</div></td></tr><tr><th><code>authUrl</code></th><td><div class="header"><span class="type">string</span><span class="label label-default optional">optional</span></div><div class="description"><p>Specify a custom url for the authentication process.
The authUrl&#39;s beginning must match with one of the trusted URLs set in the Register&#39;s configuration.</p>
</div></td></tr><tr><th><code>serviceInfo</code></th><td><div class="header"><span class="type">object</span><span class="label label-default optional">optional</span></div><div class="description"><p>Overrides the default <a href="#service-info">service information</a> object that will be transmitted in the polling responses.</p>
</div></td></tr><tr><th><code>deviceName</code></th><td><div class="header"><span class="type">string</span><span class="label label-default optional">optional</span></div><div class="description"><p>See <a href="#data-structure-access">access data structure</a></p>
</div></td></tr><tr><th><code>expireAfter</code></th><td><div class="header"><span class="type">number</span><span class="label label-default optional">optional</span></div><div class="description"><p>See <a href="#data-structure-access">access data structure</a></p>
</div></td></tr><tr><th><code>referer</code></th><td><div class="header"><span class="type">string</span><span class="label label-default optional">optional</span></div><div class="description"><p>Used when creating a user in the process of authentication. See <a href="https://api.pryv.com/reference-system/#create-user">Create user method</a>.</p>
</div></td></tr></table><h4 id="result-need-sign-in">Result: need sign-in</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>200</code></span></span><table class="definitions"><tr><th><code>status</code></th><td><div class="header"><span class="type"><code>NEED_SIGNIN</code></span></div><div class="description"><p>Authentication in progress.</p>
</div></td></tr><tr><th><code>url</code></th><td><div class="header"><span class="type">string</span></div><div class="description"><p><strong>(DEPRECATED)</strong><br>Please use the <code>authUrl</code> parameter. The URL of the authentication page to show the user from your app as popup or webframe.</p>
</div></td></tr><tr><th><code>authUrl</code></th><td><div class="header"><span class="type">string</span></div><div class="description"><p>The URL of the authentication page to show the user from your app as popup or webframe.</p>
</div></td></tr><tr><th><code>key</code></th><td><div class="header"><span class="type">string</span></div><div class="description"><p>The key used to identify the auth request. It is also part of the poll URL described just below.</p>
</div></td></tr><tr><th><code>poll</code></th><td><div class="header"><span class="type">string</span></div><div class="description"><p>The poll URL to use for retrieving the auth result via an HTTP GET request.<br>Responses to polling requests are the same as those from the auth request.</p>
</div></td></tr><tr><th><code>poll_rate_ms</code></th><td><div class="header"><span class="type">number</span></div><div class="description"><p>The rate at which the poll URL can be polled, in milliseconds.</p>
</div></td></tr><tr><th><code>requestingAppId</code></th><td><div class="header"><span class="type">string</span></div><div class="description"><p>The app identifier provided during the auth request.</p>
</div></td></tr><tr><th><code>requestedPermissions</code></th><td><div class="header"><span class="type">string</span></div><div class="description"><p>The permissions provided during the auth request.</p>
</div></td></tr><tr><th><code>lang</code></th><td><div class="header"><span class="type">string</span><span class="label label-default optional">optional</span></div><div class="description"><p>The language code provided during the auth request.</p>
</div></td></tr><tr><th><code>returnURL</code></th><td><div class="header"><span class="type">string</span><span class="label label-default optional">optional</span></div><div class="description"><p>The return URL provided during the auth request.</p>
</div></td></tr><tr><th><code>clientData</code></th><td><div class="header"><span class="type"><a href="#data-structure-key-value">key-value</a></span><span class="label label-default optional">optional</span></div><div class="description"><p>The client data provided during the auth request.</p>
</div></td></tr><tr><th><code>serviceInfo</code></th><td><div class="header"><span class="type">string</span><span class="label label-default optional">optional</span></div><div class="description"><p>The <a href="#service-info">service information</a>.</p>
</div></td></tr></table></div><aside><div class="example"><p>Auth request on Pryv Lab</p>
<pre><code class="lang-http">POST https://access.pryv.me/access HTTP/1.1
Host: access.pryv.me

{
  &quot;requestingAppId&quot;: &quot;test-app-id&quot;,
  &quot;requestedPermissions&quot;: [
    {
      &quot;streamId&quot;: &quot;diary&quot;,
      &quot;level&quot;: &quot;read&quot;,
      &quot;defaultName&quot;: &quot;Journal&quot;
    },
    {
      &quot;streamId&quot;: &quot;position&quot;,
      &quot;level&quot;: &quot;contribute&quot;,
      &quot;defaultName&quot;: &quot;Position&quot;
    }
  ],
  &quot;languageCode&quot;: &quot;fr&quot;
}
</code></pre>
<div class="step-marker">⬇</div><pre><code>{
  "status": "NEED_SIGNIN",
  "url": "https://sw.pryv.me/access/access.html?lang=fr&key=6CInm4R2TLaoqtl4&requestingAppId=test-app-id&domain=pryv.me&registerURL=https%3A%2F%2Freg.pryv.me&poll=https%3A%2F%2Freg.pryv.me%2Faccess%2F6CInm4R2TLaoqtl4",
  "authUrl": "https://sw.pryv.me/access/access.html?poll=https://access.pryv.me/access/6CInm4R2TLaoqtl4",
  "key": "6CInm4R2TLaoqtl4",
  "poll": "https://access.pryv.me/access/6CInm4R2TLaoqtl4",
  "poll_rate_ms": 1000,
  "requestingAppId": "test-app-id",
  "requestedPermissions": [
    {
      "streamId": "diary",
      "level": "read",
      "defaultName": "Journal"
    },
    {
      "streamId": "position",
      "level": "contribute",
      "defaultName": "Position"
    }
  ],
  "lang": "fr",
  "serviceInfo": {}
}</code></pre></div><div class="example"><p>Auth request using cURL</p>
<pre><code class="lang-bash">curl -i -H &#39;Content-Type: application/json&#39; -X POST -d &#39;{&quot;requestingAppId&quot;: &quot;my-app-id&quot;,&quot;requestedPermissions&quot;: [{&quot;streamId&quot;: &quot;diary&quot;,&quot;level&quot;: &quot;read&quot;,&quot;defaultName&quot;: &quot;Journal&quot;},{&quot;streamId&quot;: &quot;position&quot;,&quot;level&quot;: &quot;contribute&quot;,&quot;defaultName&quot;: &quot;Position&quot;}]}&#39; &quot;https://access.pryv.me/access&quot;
</code></pre>
</div></aside></section><!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="basics-authenticate-your-app-poll-request" class="method"> <h3 id="poll-request">Poll request</h3>
<div class="content"><div class="meta"><span class="http"><span class="label">HTTP-only</span><span class="label-value"><span>GET <code>{needSignInResponse.poll}</code></span></span></span></div><div class="intro"><p>The polling URL is given by the <code>poll</code> parameter in the result the <a href="#auth-request">Auth Request</a> or a Poll request.</p>
</div><h4 id="result-need-sign-in">Result: need sign-in</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>200</code></span></span><p>indentical to <code>RESULT: SIGN-IN</code> from <a href="#auth-request">Auth Request</a></p>
<h4 id="result-accepted">Result: accepted</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>200</code></span></span><table class="definitions"><tr><th><code>status</code></th><td><div class="header"><span class="type"><code>ACCEPTED</code></span></div><div class="description"><p>Authentication successful.</p>
</div></td></tr><tr><th><code>username</code></th><td><div class="header"><span class="type">string</span></div><div class="description"><p><strong>(DEPRECATED)</strong><br>Please use the <code>apiEndpoint</code> parameter. The authenticated user&#39;s username.</p>
</div></td></tr><tr><th><code>token</code></th><td><div class="header"><span class="type">string</span></div><div class="description"><p><strong>(DEPRECATED)</strong><br>Please use the <code>apiEndpoint</code> parameter. Your app&#39;s API access token.</p>
</div></td></tr><tr><th><code>apiEndpoint</code></th><td><div class="header"><span class="type">string</span></div><div class="description"><p>The API endpoint containing the authorization token. See <a href="/guides/app-guidelines/">App Guidelines</a>.</p>
</div></td></tr><tr><th><code>serviceInfo</code></th><td><div class="header"><span class="type">object</span><span class="label label-default optional">optional</span></div><div class="description"><p>The <a href="#service-info">service information</a>.</p>
</div></td></tr></table><h4 id="result-refused">Result: refused</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>403</code></span></span><table class="definitions"><tr><th><code>status</code></th><td><div class="header"><span class="type"><code>REFUSED</code></span></div><div class="description"><p>Authentication failed.</p>
</div></td></tr><tr><th><code>reasonID</code></th><td><div class="header"><span class="type">string</span></div><div class="description"><p>A code indicating the reason for the failure.</p>
</div></td></tr><tr><th><code>message</code></th><td><div class="header"><span class="type">string</span></div><div class="description"><p>A message indicating the reason for the failure.</p>
</div></td></tr><tr><th><code>serviceInfo</code></th><td><div class="header"><span class="type">object</span><span class="label label-default optional">optional</span></div><div class="description"><p>The <a href="#service-info">service information</a>.</p>
</div></td></tr></table></div><aside><div class="example"><p>Polling request on Pryv Lab</p>
<pre><code class="lang-http">GET /access/6CInm4R2TLaoqtl4 HTTP/1.1
Host: access.pryv.me
</code></pre>
</div><div class="example"><p><strong>&quot;Need sign-in&quot;</strong> response</p>
<p>identical to <code>RESULT: NEED SIGN-IN</code> from <a href="#auth-request">Auth Request</a></p>
<pre><code>{
  &quot;status&quot;: &quot;NEED_SIGNIN&quot;,
  ... 
}
</code></pre></div><div class="example"><p><strong>&quot;Accepted&quot;</strong> response</p>
<pre><code class="lang-json"> {
    &quot;status&quot;: &quot;ACCEPTED&quot;,
    &quot;apiEndpoint&quot;: &quot;https://ckcka7ucn0003glpvs3j7daq2@chuangzi.pryv.me/&quot;,
    &quot;serviceInfo&quot;: {...}
}
</code></pre>
</div><div class="example"><p><strong>&quot;Refused&quot;</strong> response</p>
<pre><code class="lang-json"> {
    &quot;status&quot;: &quot;REFUSED&quot;,
    &quot;resonID&quot;: &quot;REASON_UNDEFINED&quot;,
    &quot;message&quot;: &quot;....&quot;
    &quot;serviceInfo&quot;: {...}
}
</code></pre>
</div></aside></section></section><!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="basics-common-metadata"><h2 id="common-metadata">Common metadata</h2>
<div class="content"><div class="meta"></div><div class="intro"><p>General API and server information.</p>
</div></div><!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="basics-common-metadata-http"> <h3 id="in-http-headers">In HTTP headers</h3>
<div class="content"><div class="meta"></div><div class="intro"><p>Every HTTP response has header:</p>
</div><table class="definitions"><tr><th><code>API-Version</code></th><td><div class="header"></div><div class="description"><p>The version of the API in the form <code>{major}.{minor}.{revision}</code>. Mirrored in method results as <code>meta.apiVersion</code>.</p>
</div></td></tr><tr><th><code>Pryv-Access-Id</code></th><td><div class="header"><span class="label label-default optional">optional</span></div><div class="description"><p>The id of the <a href="#data-structure-access">Access</a> used for the API call.
Only present if a valid access token has been provided.</p>
</div></td></tr></table></div></section><!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="basics-common-metadata-method-results"> <h3 id="in-method-results">In method results</h3>
<div class="content"><div class="meta"></div><div class="intro"><p>Every JSON method result has properties:</p>
</div><table class="definitions"><tr><th><code>meta.apiVersion</code></th><td><div class="header"></div><div class="description"><p>The version of the API in the form <code>{major}.{minor}.{revision}</code>. Mirrored in HTTP header <code>API-Version</code>.</p>
</div></td></tr><tr><th><code>meta.serverTime</code></th><td><div class="header"></div><div class="description"><p>The current server time as a <a href="#data-structure-timestamp">timestamp</a>. Keeping track of server time is necessary to properly handle time in API calls.</p>
</div></td></tr><tr><th><code>meta.serial</code></th><td><div class="header"></div><div class="description"><p>The serial will change every time the core or register is updated. If you compare it with the serial of a previous response and notice a difference, you should reload the service information.</p>
</div></td></tr></table></div><aside><div class="example"><p>Metadata in API Response</p>
<pre><code>{
  "apiVersion": "1.5.18",
  "serial": "20190428",
  "time": 1594631155.65
}</code></pre></div></aside></section></section><!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="basics-errors"><h2 id="errors">Errors</h2>
<div class="content"><div class="meta"></div><div class="intro"><p>When an error occurs, the API returns a response with an <code>error</code> object (see <a href="#data-structure-error">error</a> detailing the cause. (Over HTTP, the response status is set to 4xx or 5xx.) In this documentation, errors are identified by their <code>id</code>.</p>
</div></div><aside><div class="example"><pre><code>{
  "id": "invalid-access-token",
  "message": "Cannot find access with token 'bad-token'."
}</code></pre></div></aside><!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="basics-errors-usual-errors"> <h3 id="usual-errors">Usual errors</h3>
<div class="content"><div class="meta"></div><div class="intro"><p>See also <a href="#data-structure-error">error data structure</a>.</p>
</div><table class="definitions"><tr><th><code>invalid-request-structure</code></th><td><div class="header"><span class="http"><span class="label">HTTP</span><span class="label-value"><code>400</code></span></span></div><div class="description"><p>The request&#39;s structure is not that expected; for example: invalid JSON syntax, unexpected multipart structure when uploading file attachments.</p>
</div></td></tr><tr><th><code>invalid-parameters-format</code></th><td><div class="header"><span class="http"><span class="label">HTTP</span><span class="label-value"><code>400</code></span></span></div><div class="description"><p>The request&#39;s parameters do not follow the expected format. The error&#39;s <code>data</code> contains an array of validation errors.</p>
</div></td></tr><tr><th><code>unknown-referenced-resource</code></th><td><div class="header"><span class="http"><span class="label">HTTP</span><span class="label-value"><code>400</code></span></span></div><div class="description"><p>One or more referenced resource(s) can&#39;t be found. The error&#39;s <code>data.{method-parameter-key}</code> (e.g. <code>data.streamId</code>) contains the unknown reference(s).</p>
</div></td></tr><tr><th><code>invalid-access-token</code></th><td><div class="header"><span class="http"><span class="label">HTTP</span><span class="label-value"><code>401</code></span></span></div><div class="description"><p>The access token is missing or invalid.</p>
</div></td></tr><tr><th><code>forbidden</code></th><td><div class="header"><span class="http"><span class="label">HTTP</span><span class="label-value"><code>403</code></span></span></div><div class="description"><p>The given access token does not grant permission for this operation. See <a href="#data-structure-access">accesses</a> for more details about accesses and permissions.</p>
</div></td></tr><tr><th><code>unknown-resource</code></th><td><div class="header"><span class="http"><span class="label">HTTP</span><span class="label-value"><code>404</code></span></span></div><div class="description"><p>The resource can&#39;t be found.</p>
</div></td></tr><tr><th><code>too-many-results</code></th><td><div class="header"><span class="http"><span class="label">HTTP</span><span class="label-value"><code>413</code></span></span></div><div class="description"><p>The <code>events.get</code> method in batch or websocket call yielded too many results. Call the API method directly, narrow the request scope or page the request.</p>
</div></td></tr><tr><th><code>removed-method</code></th><td><div class="header"><span class="http"><span class="label">HTTP</span><span class="label-value"><code>410</code></span></span></div><div class="description"><p>The resource or method has been removed from the API.</p>
</div></td></tr><tr><th><code>user-account-relocated</code></th><td><div class="header"><span class="http"><span class="label">HTTP</span><span class="label-value"><code>301</code></span></span></div><div class="description"><p>The user has relocated her account to another server. Both the <code>Location</code> header and the error&#39;s <code>data</code> contain the equivalent URL pointing to the physical server now hosting the user&#39;s account. This error can only occur between the moment the account is relocated and the moment your DNS is updated to point to the new server. So we&#39;re stretching the HTTP convention a little, in that the returned URL should not be used permanently (only until <code>{username}.pryv.me</code> points to the correct server again). It&#39;s up to you to decide whether to keep it for the duration of the session (if you use sessions), for a given time, etc.</p>
</div></td></tr><tr><th><code>user-intervention-required</code></th><td><div class="header"><span class="http"><span class="label">HTTP</span><span class="label-value"><code>402</code></span></span></div><div class="description"><p>The request cannot be served temporarily because the user&#39;s account has exceeded its limits. The user must log into her account and fix the issue.</p>
</div></td></tr></table></div></section></section></section><section id="methods"><h1 id="api-methods">API methods</h1>
<!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="methods-auth"><h2 id="authentication">Authentication</h2>
<div class="content"><div class="meta"><span onclick="location='/reference/#trusted-apps-verification'" class="label trusted-only">Trusted apps only</span><text>&nbsp;</text></div><div class="intro"><p>Methods for trusted apps to login/logout users.</p>
</div></div><!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="methods-auth-auth-login" class="method"> <h3 id="login-user">Login user</h3>
<div class="content"><div class="meta"><span onclick="location='/reference/#trusted-apps-verification'" class="trusted-tag"><span title="Trusted Apps Only" class="label">T</span></span><span class="http"><span class="label">HTTP-only</span><span class="label-value"><code>POST /auth/login</code></span></span></div><div class="intro"><p>Authenticates the user against the provided credentials, opening a personal access session. This is one of the only API methods that do not expect an <a href="#basics-authorization">auth parameter</a>.<br>This method requires that the <code>appId</code> and <code>Origin</code> (or <code>Referer</code>) header comply with the <a href="#basics-trusted-apps-verification">trusted app verification</a>.</p>
</div><h4 id="parameters">Parameters</h4>
<table class="definitions"><tr><th><code>username</code></th><td><div class="header"><span class="type">string</span></div><div class="description"><p>The user&#39;s username.</p>
</div></td></tr><tr><th><code>password</code></th><td><div class="header"><span class="type">string</span></div><div class="description"><p>The user&#39;s password.</p>
</div></td></tr><tr><th><code>appId</code></th><td><div class="header"><span class="type">string</span></div><div class="description"><p>Your app&#39;s unique identifier.</p>
</div></td></tr></table><h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>200 OK</code></span></span><table class="definitions"><tr><th><code>token</code></th><td><div class="header"><span class="type">string</span></div><div class="description"><p>The personal access token to use for further API calls.</p>
</div></td></tr><tr><th><code>preferredLanguage</code></th><td><div class="header"><span class="type">string</span></div><div class="description"><p>The user&#39;s preferred language as a 2-letter ISO language code.</p>
</div></td></tr></table></div><aside><div class="example"><div class="tab-content"><div class="tab-pane json active"><pre><code>{
  "username": "chuangzi",
  "password": "B|_|tt3rfly!",
  "appId": "my-app-id"
}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "token": "ckcka7ucn0002glpvrkqwi5bp",
  "preferredLanguage": "zh"
}</code></pre></div><div class="tab-pane http"><pre><code>curl -i -X POST -H 'Origin: https://sw.pryv.me' -H 'Content-Type: application/json' -d '{"username":"chuangzi","password":"B|_|tt3rfly!","appId":"my-app-id"}' "https://<span class="api-curl">${username}.pryv.me</span>/auth/login"</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 1.5.18

{
  "token": "ckcka7ucn0002glpvrkqwi5bp",
  "preferredLanguage": "zh"
}
</code></pre></div><div class="tab-pane sockets"><pre>Only available for HTTP REST</pre></div><div class="tab-pane batch"><pre>Only available for HTTP REST</pre></div><div class="tab-pane httpAuth"><pre><code>curl -i -X POST -H 'Origin: https://sw.pryv.me' -H 'Content-Type: application/json' -d '{"username":"chuangzi","password":"B|_|tt3rfly!","appId":"my-app-id"}' "https://<span class="api-curl">${username}.pryv.me</span>/auth/login"</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 1.5.18

{
  "token": "ckcka7ucn0002glpvrkqwi5bp",
  "preferredLanguage": "zh"
}

</code></pre></div></div></div></aside></section><!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="methods-auth-auth-logout" class="method"> <h3 id="logout-user">Logout user</h3>
<div class="content"><div class="meta"><span onclick="location='/reference/#trusted-apps-verification'" class="trusted-tag"><span title="Trusted Apps Only" class="label">T</span></span><span class="http"><span class="label">HTTP-only</span><span class="label-value"><code>POST /auth/logout</code></span></span></div><div class="intro"><p>Terminates a personal access session by invalidating its access token (the user will have to login again).
Simply provide the Authorization token in own of <a href="/reference/#authorization">the supported ways</a>, no request body is required.</p>
</div><h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>200 OK</code></span></span></div><aside><div class="example"><div class="tab-content"><div class="tab-pane json active"><pre><code>{}</code></pre><div class="step-marker">⬇</div><pre><code>{}</code></pre></div><div class="tab-pane http"><pre><code>curl -i -X POST -H 'Content-Type: application/json' -d '{}' "https://${token}@<span class="api-curl">${username}.pryv.me</span>/auth/logout"</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 1.5.18

{}
</code></pre></div><div class="tab-pane sockets"><pre>Only available for HTTP REST</pre></div><div class="tab-pane batch"><pre>Only available for HTTP REST</pre></div><div class="tab-pane httpAuth"><pre><code>curl -i -X POST -H 'Content-Type: application/json' -d '{}' "https://<span class="api-curl">${username}.pryv.me</span>/auth/logout?auth=${token}"</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 1.5.18

{}

</code></pre></div></div></div></aside></section></section><!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="methods-mfa"><h2 id="multi-factor-authentication">Multi-factor authentication</h2>
<div class="content"><div class="meta"><span onclick="location='/reference/#trusted-apps-verification'" class="label trusted-only">Trusted apps only</span><text>&nbsp;</text><span onclick="location='/concepts/#entreprise-license-open-source-license'" class="label entreprise-only">Entreprise license only</span><text>&nbsp;</text></div><div class="intro"><p>Methods for handling multi-factor authentication (MFA) on top of the usual <a href="#methods-auth-auth-login">Login method</a>.</p>
</div></div><!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="methods-mfa-mfa-login" class="method"> <h3 id="login-with-mfa">Login with MFA</h3>
<div class="content"><div class="meta"><span onclick="location='/reference/#trusted-apps-verification'" class="trusted-tag"><span title="Trusted Apps Only" class="label">T</span></span><span onclick="location='/concepts/#entreprise-license-open-source-license'" class="entreprise-tag"><span title="Entreprise License Only" class="label">Y</span></span><span class="http"><span class="label">HTTP-only</span><span class="label-value"><code>POST /auth/login</code></span></span></div><div class="intro"><p>Proxied <a href="#methods-auth-auth-login">Login</a> call that initiates MFA authentication,
when MFA is activated for the current user.</p>
</div><h4 id="parameters">Parameters</h4>
<p>Similar to the usual <a href="#methods-auth-auth-login">Login</a> parameters.</p>
<h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>302 Found</code></span></span><table class="definitions"><tr><th><code>mfaToken</code></th><td><div class="header"><span class="type">string</span></div><div class="description"><p>An expiring MFA session token to be used all along the MFA flow (challenge, verification).</p>
</div></td></tr></table></div><aside><div class="example"><p>Login when MFA is activated.</p>
<div class="tab-content"><div class="tab-pane json active"><pre><code>{
  "username": "chuangzi",
  "password": "B|_|tt3rfly!",
  "appId": "my-app-id"
}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "mfaToken": "215bcc40-1296-11ea-9ff7-453ff2437834"
}</code></pre></div><div class="tab-pane http"><pre><code>curl -i -X POST -H 'Origin: https://sw.pryv.me' -H 'Content-Type: application/json' -d '{"username":"chuangzi","password":"B|_|tt3rfly!","appId":"my-app-id"}' "https://<span class="api-curl">${username}.pryv.me</span>/auth/login"</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 302 Found
Content-Type: application/json; charset=utf-8
API-Version: 1.5.18

{
  "mfaToken": "215bcc40-1296-11ea-9ff7-453ff2437834"
}
</code></pre></div><div class="tab-pane sockets"><pre>Only available for HTTP REST</pre></div><div class="tab-pane batch"><pre>Only available for HTTP REST</pre></div><div class="tab-pane httpAuth"><pre><code>curl -i -X POST -H 'Origin: https://sw.pryv.me' -H 'Content-Type: application/json' -d '{"username":"chuangzi","password":"B|_|tt3rfly!","appId":"my-app-id"}' "https://<span class="api-curl">${username}.pryv.me</span>/auth/login"</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 302 Found
Content-Type: application/json; charset=utf-8
API-Version: 1.5.18

{
  "mfaToken": "215bcc40-1296-11ea-9ff7-453ff2437834"
}

</code></pre></div></div></div></aside></section><!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="methods-mfa-mfa-activate" class="method"> <h3 id="activate-mfa">Activate MFA</h3>
<div class="content"><div class="meta"><span onclick="location='/reference/#trusted-apps-verification'" class="trusted-tag"><span title="Trusted Apps Only" class="label">T</span></span><span onclick="location='/concepts/#entreprise-license-open-source-license'" class="entreprise-tag"><span title="Entreprise License Only" class="label">Y</span></span><span class="http"><span class="label">HTTP-only</span><span class="label-value"><code>POST /mfa/activate</code></span></span></div><div class="intro"><p>Initiates the MFA activation flow for a given Pryv.io user, triggering the MFA challenge.</p>
<p>Requires a personal token as <a href="#basics-authorization">authorization</a>, which should be obtained during a prior <a href="#methods-auth-auth-login">Login call</a>.</p>
</div><h4 id="parameters">Parameters</h4>
<p>The parameters depend entirely on the chosen MFA method and will be forwarded to the service generating the challenge.</p>
<h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>302 Found</code></span></span><table class="definitions"><tr><th><code>mfaToken</code></th><td><div class="header"><span class="type">string</span></div><div class="description"><p>An expiring MFA session token to be used all along the MFA flow (challenge, verification).</p>
</div></td></tr></table></div><aside><div class="example"><p>Initiating the MFA activation using a phone number.</p>
<div class="tab-content"><div class="tab-pane json active"><pre><code>{
  "phone_number": "41791234567"
}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "mfaToken": "215bcc40-1296-11ea-9ff7-453ff2437834"
}</code></pre></div><div class="tab-pane http"><pre><code>curl -i -X POST -H 'Content-Type: application/json' -d '{"phone_number":"41791234567"}' "https://${token}@<span class="api-curl">${username}.pryv.me</span>/mfa/activate"</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 302 Found
Content-Type: application/json; charset=utf-8
API-Version: 1.5.18

{
  "mfaToken": "215bcc40-1296-11ea-9ff7-453ff2437834"
}
</code></pre></div><div class="tab-pane sockets"><pre>Only available for HTTP REST</pre></div><div class="tab-pane batch"><pre>Only available for HTTP REST</pre></div><div class="tab-pane httpAuth"><pre><code>curl -i -X POST -H 'Content-Type: application/json' -d '{"phone_number":"41791234567"}' "https://<span class="api-curl">${username}.pryv.me</span>/mfa/activate?auth=${token}"</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 302 Found
Content-Type: application/json; charset=utf-8
API-Version: 1.5.18

{
  "mfaToken": "215bcc40-1296-11ea-9ff7-453ff2437834"
}

</code></pre></div></div></div></aside></section><!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="methods-mfa-mfa-confirm" class="method"> <h3 id="confirm-mfa-activation">Confirm MFA activation</h3>
<div class="content"><div class="meta"><span onclick="location='/reference/#trusted-apps-verification'" class="trusted-tag"><span title="Trusted Apps Only" class="label">T</span></span><span onclick="location='/concepts/#entreprise-license-open-source-license'" class="entreprise-tag"><span title="Entreprise License Only" class="label">Y</span></span><span class="http"><span class="label">HTTP-only</span><span class="label-value"><code>POST /mfa/confirm</code></span></span></div><div class="intro"><p>Confirms the MFA activation by verifying the MFA challenge triggered by a prior <a href="#methods-mfa-mfa-activate">MFA activation call</a>.</p>
<p>Requires a MFA session token as <a href="#basics-authorization">authorization</a>.</p>
</div><h4 id="parameters">Parameters</h4>
<p>The parameters depend entirely on the chosen MFA method and will be forwarded to the service verifying the challenge.</p>
<h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>200 OK</code></span></span><table class="definitions"><tr><th><code>recoveryCodes</code></th><td><div class="header"><span class="type">array of strings</span></div><div class="description"><p>An array of recovery codes that can be used for the <a href="#methods-mfa-mfa-recover">MFA recover method</a>.</p>
</div></td></tr></table><h4 id="specific-errors">Specific errors</h4>
<table class="definitions"><tr><th><code>forbidden</code></th><td><div class="header"><span class="http"><span class="label">HTTP</span><span class="label-value"><code>403</code></span></span></div><div class="description"><p>Invalid MFA session token.</p>
</div></td></tr></table></div><aside><div class="example"><p>Finalizing the MFA activation.</p>
<div class="tab-content"><div class="tab-pane json active"><pre><code>{
  "code": "1234"
}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "recoveryCodes": [
    "fba6e1f6-9f8f-4a0a-9c4f-8cf3458b4c55",
    "eb81be18-3168-4a44-8914-d97187df991c",
    "f7d7e863-0589-4779-8ddd-6c7e33df66af",
    "fb1d579f-2b92-42e3-82fa-8d7154c334f6",
    "52d3f019-3712-41d3-8c13-4924c3a7a703",
    "ac9de48c-a47d-46db-b276-e045ba693672",
    "de1072aa-6ed9-46a7-962c-1f8bb88ece2e",
    "cb5277cf-af86-47c3-a03e-7cc5011314ac",
    "16055dff-bc09-4262-b276-d70df82a9a2b",
    "36c7dd9b-5d23-4fb9-8504-c3e04aeb62c0"
  ]
}</code></pre></div><div class="tab-pane http"><pre><code>curl -i -X POST -H 'Content-Type: application/json' -d '{"code":"1234"}' "https://${token}@<span class="api-curl">${username}.pryv.me</span>/mfa/confirm"</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 1.5.18

{
  "recoveryCodes": [
    "fba6e1f6-9f8f-4a0a-9c4f-8cf3458b4c55",
    "eb81be18-3168-4a44-8914-d97187df991c",
    "f7d7e863-0589-4779-8ddd-6c7e33df66af",
    "fb1d579f-2b92-42e3-82fa-8d7154c334f6",
    "52d3f019-3712-41d3-8c13-4924c3a7a703",
    "ac9de48c-a47d-46db-b276-e045ba693672",
    "de1072aa-6ed9-46a7-962c-1f8bb88ece2e",
    "cb5277cf-af86-47c3-a03e-7cc5011314ac",
    "16055dff-bc09-4262-b276-d70df82a9a2b",
    "36c7dd9b-5d23-4fb9-8504-c3e04aeb62c0"
  ]
}
</code></pre></div><div class="tab-pane sockets"><pre>Only available for HTTP REST</pre></div><div class="tab-pane batch"><pre>Only available for HTTP REST</pre></div><div class="tab-pane httpAuth"><pre><code>curl -i -X POST -H 'Content-Type: application/json' -d '{"code":"1234"}' "https://<span class="api-curl">${username}.pryv.me</span>/mfa/confirm?auth=${token}"</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 1.5.18

{
  "recoveryCodes": [
    "fba6e1f6-9f8f-4a0a-9c4f-8cf3458b4c55",
    "eb81be18-3168-4a44-8914-d97187df991c",
    "f7d7e863-0589-4779-8ddd-6c7e33df66af",
    "fb1d579f-2b92-42e3-82fa-8d7154c334f6",
    "52d3f019-3712-41d3-8c13-4924c3a7a703",
    "ac9de48c-a47d-46db-b276-e045ba693672",
    "de1072aa-6ed9-46a7-962c-1f8bb88ece2e",
    "cb5277cf-af86-47c3-a03e-7cc5011314ac",
    "16055dff-bc09-4262-b276-d70df82a9a2b",
    "36c7dd9b-5d23-4fb9-8504-c3e04aeb62c0"
  ]
}

</code></pre></div></div></div></aside></section><!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="methods-mfa-mfa-challenge" class="method"> <h3 id="trigger-mfa-challenge">Trigger MFA challenge</h3>
<div class="content"><div class="meta"><span onclick="location='/reference/#trusted-apps-verification'" class="trusted-tag"><span title="Trusted Apps Only" class="label">T</span></span><span onclick="location='/concepts/#entreprise-license-open-source-license'" class="entreprise-tag"><span title="Entreprise License Only" class="label">Y</span></span><span class="method-id"><span class="label">id</span><span class="label-value"><code>mfa.challenge</code></span></span><span class="http"><span class="label">HTTP</span><span class="label-value"><code>POST /mfa/challenge</code></span></span></div><div class="intro"><p>Triggers the MFA challenge, depending on the chosen MFA method (e.g. send a verification code by SMS).</p>
<p>Requires a MFA session token as <a href="#basics-authorization">authorization</a>.</p>
</div><h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>200 OK</code></span></span><table class="definitions"><tr><th><code>message</code></th><td><div class="header"><span class="type">string</span></div><div class="description"><p>&quot;Please verify the MFA challenge.&quot;</p>
</div></td></tr></table><h4 id="specific-errors">Specific errors</h4>
<table class="definitions"><tr><th><code>forbidden</code></th><td><div class="header"><span class="http"><span class="label">HTTP</span><span class="label-value"><code>403</code></span></span></div><div class="description"><p>Invalid MFA session token.</p>
</div></td></tr></table></div></section><!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="methods-mfa-mfa-verify" class="method"> <h3 id="verify-mfa-challenge">Verify MFA challenge</h3>
<div class="content"><div class="meta"><span onclick="location='/reference/#trusted-apps-verification'" class="trusted-tag"><span title="Trusted Apps Only" class="label">T</span></span><span onclick="location='/concepts/#entreprise-license-open-source-license'" class="entreprise-tag"><span title="Entreprise License Only" class="label">Y</span></span><span class="http"><span class="label">HTTP-only</span><span class="label-value"><code>POST /mfa/verify</code></span></span></div><div class="intro"><p>Verifies the MFA challenge triggered by a prior <a href="#methods-mfa-mfa-challenge">MFA challenge call</a>.</p>
<p>Requires a MFA session token as <a href="#basics-authorization">authorization</a>.</p>
</div><h4 id="parameters">Parameters</h4>
<p>The parameters depend entirely on the chosen MFA method and will be forwarded to the service verifying the challenge.</p>
<h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>200 OK</code></span></span><table class="definitions"><tr><th><code>token</code></th><td><div class="header"><span class="type">string</span></div><div class="description"><p>The personal access token to use for further API calls.</p>
</div></td></tr></table><h4 id="specific-errors">Specific errors</h4>
<table class="definitions"><tr><th><code>forbidden</code></th><td><div class="header"><span class="http"><span class="label">HTTP</span><span class="label-value"><code>403</code></span></span></div><div class="description"><p>Invalid MFA session token.</p>
</div></td></tr></table></div><aside><div class="example"><p>Verifying the MFA challenge.</p>
<div class="tab-content"><div class="tab-pane json active"><pre><code>{
  "code": "1234"
}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "token": "ckcka7ucn0002glpvrkqwi5bp"
}</code></pre></div><div class="tab-pane http"><pre><code>curl -i -X POST -H 'Content-Type: application/json' -d '{"code":"1234"}' "https://${token}@<span class="api-curl">${username}.pryv.me</span>/mfa/verify"</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 1.5.18

{
  "token": "ckcka7ucn0002glpvrkqwi5bp"
}
</code></pre></div><div class="tab-pane sockets"><pre>Only available for HTTP REST</pre></div><div class="tab-pane batch"><pre>Only available for HTTP REST</pre></div><div class="tab-pane httpAuth"><pre><code>curl -i -X POST -H 'Content-Type: application/json' -d '{"code":"1234"}' "https://<span class="api-curl">${username}.pryv.me</span>/mfa/verify?auth=${token}"</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 1.5.18

{
  "token": "ckcka7ucn0002glpvrkqwi5bp"
}

</code></pre></div></div></div></aside></section><!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="methods-mfa-mfa-deactivate" class="method"> <h3 id="deactivate-mfa">Deactivate MFA</h3>
<div class="content"><div class="meta"><span onclick="location='/reference/#trusted-apps-verification'" class="trusted-tag"><span title="Trusted Apps Only" class="label">T</span></span><span onclick="location='/concepts/#entreprise-license-open-source-license'" class="entreprise-tag"><span title="Entreprise License Only" class="label">Y</span></span><span class="http"><span class="label">HTTP-only</span><span class="label-value"><code>POST /mfa/deactivate</code></span></span></div><div class="intro"><p>Deactivate MFA for a given Pryv.io user.</p>
<p>Requires a personal token as <a href="#basics-authorization">authorization</a>.</p>
</div><h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>200 OK</code></span></span><table class="definitions"><tr><th><code>message</code></th><td><div class="header"><span class="type">string</span></div><div class="description"><p>&quot;MFA deactivated.&quot;</p>
</div></td></tr></table></div></section><!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="methods-mfa-mfa-recover" class="method"> <h3 id="recover-mfa">Recover MFA</h3>
<div class="content"><div class="meta"><span onclick="location='/reference/#trusted-apps-verification'" class="trusted-tag"><span title="Trusted Apps Only" class="label">T</span></span><span onclick="location='/concepts/#entreprise-license-open-source-license'" class="entreprise-tag"><span title="Entreprise License Only" class="label">Y</span></span><span class="method-id"><span class="label">id</span><span class="label-value"><code>mfa.recover</code></span></span><span class="http"><span class="label">HTTP</span><span class="label-value"><code>POST /mfa/recover</code></span></span></div><div class="intro"><p>Deactivate MFA for a given Pryv.io user using a MFA recovery code.</p>
<p>This is useful when <a href="#methods-mfa-mfa-deactivate">Deactivate MFA</a> can not be used (in case of 2nd factor loss).
Instead, requires a MFA recovery code (obtained when <a href="#methods-mfa-mfa-confirm">confirming the MFA activation</a>), as well as the usual <a href="#methods-auth-auth-login">Login</a> parameters.</p>
</div><h4 id="parameters">Parameters</h4>
<p>Similar to the usual <a href="#methods-auth-auth-login">Login</a> parameters, as well as:</p>
<table class="definitions"><tr><th><code>recoveryCode</code></th><td><div class="header"><span class="type">string</span></div><div class="description"><p>One MFA recovery code.</p>
</div></td></tr></table><h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>200 OK</code></span></span><table class="definitions"><tr><th><code>message</code></th><td><div class="header"><span class="type">string</span></div><div class="description"><p>&quot;MFA deactivated.&quot;</p>
</div></td></tr></table><h4 id="specific-errors">Specific errors</h4>
<table class="definitions"><tr><th><code>missing-parameter</code></th><td><div class="header"><span class="http"><span class="label">HTTP</span><span class="label-value"><code>400</code></span></span></div><div class="description"><p>Missing parameter: recoveryCode.</p>
</div></td></tr><tr><th><code>invalid-parameter</code></th><td><div class="header"><span class="http"><span class="label">HTTP</span><span class="label-value"><code>400</code></span></span></div><div class="description"><p>Invalid recovery code.</p>
</div></td></tr></table></div><aside><div class="example"><p>Deactivate MFA using a recovery code.</p>
<div class="tab-content"><div class="tab-pane json active"><pre><code>{
  "recoveryCode": "fba6e1f6-9f8f-4a0a-9c4f-8cf3458b4c55",
  "username": "chuangzi",
  "password": "B|_|tt3rfly!",
  "appId": "my-app-id"
}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "message": "MFA deactivated."
}</code></pre></div><div class="tab-pane http"><pre><code>curl -i -X POST -H 'Origin: https://sw.pryv.me' -H 'Content-Type: application/json' -d '{"recoveryCode":"fba6e1f6-9f8f-4a0a-9c4f-8cf3458b4c55","username":"chuangzi","password":"B|_|tt3rfly!","appId":"my-app-id"}' "https://<span class="api-curl">${username}.pryv.me</span>/mfa/recover"</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 1.5.18

{
  "message": "MFA deactivated."
}
</code></pre></div><div class="tab-pane sockets"><pre><code>socket.emit('mfa.recover', {"recoveryCode":"fba6e1f6-9f8f-4a0a-9c4f-8cf3458b4c55","username":"chuangzi","password":"B|_|tt3rfly!","appId":"my-app-id"}, callback);</code></pre><div class="step-marker">⬇</div><pre><code>{
  "message": "MFA deactivated."
}</code></pre></div><div class="tab-pane batch"><pre><code>{
  "method": "mfa.recover",
  "params": {
    "recoveryCode": "fba6e1f6-9f8f-4a0a-9c4f-8cf3458b4c55",
    "username": "chuangzi",
    "password": "B|_|tt3rfly!",
    "appId": "my-app-id"
  }
}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "message": "MFA deactivated."
}</code></pre></div><div class="tab-pane httpAuth"><pre><code>curl -i -X POST -H 'Origin: https://sw.pryv.me' -H 'Content-Type: application/json' -d '{"recoveryCode":"fba6e1f6-9f8f-4a0a-9c4f-8cf3458b4c55","username":"chuangzi","password":"B|_|tt3rfly!","appId":"my-app-id"}' "https://<span class="api-curl">${username}.pryv.me</span>/mfa/recover"</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 1.5.18

{
  "message": "MFA deactivated."
}

</code></pre></div></div></div></aside></section></section><!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="methods-callBatch" class="method"><h2 id="call-batch">Call batch</h2>
<div class="content"><div class="meta"><span class="method-id"><span class="label">id</span><span class="label-value"><code>callBatch</code></span></span><span class="http"><span class="label">HTTP</span><span class="label-value"><code>POST /</code></span></span></div><div class="intro"><p>Sends a batch of API methods calls in one go (e.g. for to syncing offline changes when resuming connectivity).</p>
</div><h4 id="parameters">Parameters</h4>
<p>Array of method call objects, each defined as follows:</p>
<table class="definitions"><tr><th><code>method</code></th><td><div class="header"><span class="type">string</span></div><div class="description"><p>The method id.</p>
</div></td></tr><tr><th><code>params</code></th><td><div class="header"><span class="type">object or array</span></div><div class="description"><p>The call parameters as required by the method.</p>
</div></td></tr></table><h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>200 OK</code></span></span><table class="definitions"><tr><th><code>results</code></th><td><div class="header"><span class="type">array of call results</span></div><div class="description"><p>The results of each method call, in order.</p>
</div></td></tr></table></div><aside><div class="example"><p>Ensure stream path for a new event. In this example the &#39;health&#39; stream already exists.</p>
<div class="tab-content"><div class="tab-pane json active"><pre><code>[
  {
    "method": "streams.create",
    "params": {
      "id": "health",
      "name": "Health"
    }
  },
  {
    "method": "streams.create",
    "params": {
      "id": "heart",
      "name": "Heart",
      "parentId": "health"
    }
  },
  {
    "method": "events.create",
    "params": {
      "streamIds": [
        "heart"
      ],
      "type": "frequency/bpm",
      "content": 90
    }
  }
]</code></pre><div class="step-marker">⬇</div><pre><code>{
  "results": [
    {
      "error": {
        "id": "item-already-exists",
        "message": "A stream with id \"health\" already exists",
        "data": {
          "id": "health"
        }
      }
    },
    {
      "stream": {
        "id": "heart",
        "name": "Heart",
        "parentId": "health",
        "children": [],
        "created": 1594631155.621,
        "createdBy": "ckcka7ucn0001glpvjku7747i",
        "modified": 1594631155.621,
        "modifiedBy": "ckcka7ucn0001glpvjku7747i"
      }
    },
    {
      "event": {
        "id": "ckcka7ued000tglpvw6ls4rza",
        "time": 1385046854.282,
        "streamIds": [
          "heart"
        ],
        "streamId": "heart",
        "tags": [],
        "type": "frequency/bpm",
        "content": 90,
        "created": 1594631155.621,
        "createdBy": "ckcka7ucn0001glpvjku7747i",
        "modified": 1594631155.621,
        "modifiedBy": "ckcka7ucn0001glpvjku7747i"
      }
    }
  ]
}</code></pre></div><div class="tab-pane http"><pre><code>curl -i -X POST -H 'Content-Type: application/json' -d '[{"method":"streams.create","params":{"id":"health","name":"Health"}},{"method":"streams.create","params":{"id":"heart","name":"Heart","parentId":"health"}},{"method":"events.create","params":{"streamIds":["heart"],"type":"frequency/bpm","content":90}}]' "https://${token}@<span class="api-curl">${username}.pryv.me</span>/"</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 1.5.18

{
  "results": [
    {
      "error": {
        "id": "item-already-exists",
        "message": "A stream with id \"health\" already exists",
        "data": {
          "id": "health"
        }
      }
    },
    {
      "stream": {
        "id": "heart",
        "name": "Heart",
        "parentId": "health",
        "children": [],
        "created": 1594631155.621,
        "createdBy": "ckcka7ucn0001glpvjku7747i",
        "modified": 1594631155.621,
        "modifiedBy": "ckcka7ucn0001glpvjku7747i"
      }
    },
    {
      "event": {
        "id": "ckcka7ued000tglpvw6ls4rza",
        "time": 1385046854.282,
        "streamIds": [
          "heart"
        ],
        "streamId": "heart",
        "tags": [],
        "type": "frequency/bpm",
        "content": 90,
        "created": 1594631155.621,
        "createdBy": "ckcka7ucn0001glpvjku7747i",
        "modified": 1594631155.621,
        "modifiedBy": "ckcka7ucn0001glpvjku7747i"
      }
    }
  ]
}
</code></pre></div><div class="tab-pane sockets"><pre><code>socket.emit('callBatch', [{"method":"streams.create","params":{"id":"health","name":"Health"}},{"method":"streams.create","params":{"id":"heart","name":"Heart","parentId":"health"}},{"method":"events.create","params":{"streamIds":["heart"],"type":"frequency/bpm","content":90}}], callback);</code></pre><div class="step-marker">⬇</div><pre><code>{
  "results": [
    {
      "error": {
        "id": "item-already-exists",
        "message": "A stream with id \"health\" already exists",
        "data": {
          "id": "health"
        }
      }
    },
    {
      "stream": {
        "id": "heart",
        "name": "Heart",
        "parentId": "health",
        "children": [],
        "created": 1594631155.621,
        "createdBy": "ckcka7ucn0001glpvjku7747i",
        "modified": 1594631155.621,
        "modifiedBy": "ckcka7ucn0001glpvjku7747i"
      }
    },
    {
      "event": {
        "id": "ckcka7ued000tglpvw6ls4rza",
        "time": 1385046854.282,
        "streamIds": [
          "heart"
        ],
        "streamId": "heart",
        "tags": [],
        "type": "frequency/bpm",
        "content": 90,
        "created": 1594631155.621,
        "createdBy": "ckcka7ucn0001glpvjku7747i",
        "modified": 1594631155.621,
        "modifiedBy": "ckcka7ucn0001glpvjku7747i"
      }
    }
  ]
}</code></pre></div><div class="tab-pane batch"><p>Yes it works! Calling a method <code>callBatch</code> within a <strong>call batch</strong> would make no sense. Look at Rest or Socket.io calls.</p>
<pre><code>{
  "method": "callBatch",
  "params": [
    {
      "method": "streams.create",
      "params": {
        "id": "health",
        "name": "Health"
      }
    },
    {
      "method": "streams.create",
      "params": {
        "id": "heart",
        "name": "Heart",
        "parentId": "health"
      }
    },
    {
      "method": "events.create",
      "params": {
        "streamIds": [
          "heart"
        ],
        "type": "frequency/bpm",
        "content": 90
      }
    }
  ]
}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "results": [
    {
      "error": {
        "id": "item-already-exists",
        "message": "A stream with id \"health\" already exists",
        "data": {
          "id": "health"
        }
      }
    },
    {
      "stream": {
        "id": "heart",
        "name": "Heart",
        "parentId": "health",
        "children": [],
        "created": 1594631155.621,
        "createdBy": "ckcka7ucn0001glpvjku7747i",
        "modified": 1594631155.621,
        "modifiedBy": "ckcka7ucn0001glpvjku7747i"
      }
    },
    {
      "event": {
        "id": "ckcka7ued000tglpvw6ls4rza",
        "time": 1385046854.282,
        "streamIds": [
          "heart"
        ],
        "streamId": "heart",
        "tags": [],
        "type": "frequency/bpm",
        "content": 90,
        "created": 1594631155.621,
        "createdBy": "ckcka7ucn0001glpvjku7747i",
        "modified": 1594631155.621,
        "modifiedBy": "ckcka7ucn0001glpvjku7747i"
      }
    }
  ]
}</code></pre></div><div class="tab-pane httpAuth"><pre><code>curl -i -X POST -H 'Content-Type: application/json' -d '[{"method":"streams.create","params":{"id":"health","name":"Health"}},{"method":"streams.create","params":{"id":"heart","name":"Heart","parentId":"health"}},{"method":"events.create","params":{"streamIds":["heart"],"type":"frequency/bpm","content":90}}]' "https://<span class="api-curl">${username}.pryv.me</span>/?auth=${token}"</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 1.5.18

{
  "results": [
    {
      "error": {
        "id": "item-already-exists",
        "message": "A stream with id \"health\" already exists",
        "data": {
          "id": "health"
        }
      }
    },
    {
      "stream": {
        "id": "heart",
        "name": "Heart",
        "parentId": "health",
        "children": [],
        "created": 1594631155.621,
        "createdBy": "ckcka7ucn0001glpvjku7747i",
        "modified": 1594631155.621,
        "modifiedBy": "ckcka7ucn0001glpvjku7747i"
      }
    },
    {
      "event": {
        "id": "ckcka7ued000tglpvw6ls4rza",
        "time": 1385046854.282,
        "streamIds": [
          "heart"
        ],
        "streamId": "heart",
        "tags": [],
        "type": "frequency/bpm",
        "content": 90,
        "created": 1594631155.621,
        "createdBy": "ckcka7ucn0001glpvjku7747i",
        "modified": 1594631155.621,
        "modifiedBy": "ckcka7ucn0001glpvjku7747i"
      }
    }
  ]
}

</code></pre></div></div></div></aside></section><!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="methods-events"><h2 id="events">Events</h2>
<div class="content"><div class="meta"></div><div class="intro"><p>Methods to retrieve and manipulate <a href="#data-structure-event">events</a>.</p>
</div></div><!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="methods-events-events-get" class="method"> <h3 id="get-events">Get events</h3>
<div class="content"><div class="meta"><span class="method-id"><span class="label">id</span><span class="label-value"><code>events.get</code></span></span><span class="http"><span class="label">HTTP</span><span class="label-value"><code>GET /events</code></span></span></div><div class="intro"><p>Queries accessible events.</p>
</div><h4 id="parameters">Parameters</h4>
<table class="definitions"><tr><th><code>fromTime</code></th><td><div class="header"><span class="type"><a href="#data-structure-timestamp">timestamp</a></span><span class="label label-default optional">optional</span></div><div class="description"><p>The start time of the timeframe you want to retrieve events for. Default is 24 hours before <code>toTime</code> if the latter is set; otherwise it is not taken into account.</p>
</div></td></tr><tr><th><code>toTime</code></th><td><div class="header"><span class="type"><a href="#data-structure-timestamp">timestamp</a></span><span class="label label-default optional">optional</span></div><div class="description"><p>The end time of the timeframe you want to retrieve events for. Default is the current time if <code>fromTime</code> is set. We recommend to set both <code>fromTime</code> and <code>toTime</code> (for example by choosing a very small number for <code>fromTime</code> or a large one for <code>toTime</code> if you want to retrieve all events). Note: events are considered to be within a given timeframe based on their <code>time</code> only (<code>duration</code> is not considered).</p>
</div></td></tr><tr><th><code>streams</code></th><td><div class="header"><span class="type">array of <a href="#data-structure-identifier">identifier</a></span><span class="label label-default optional">optional</span></div><div class="description"><p>If set, only events assigned to the specified streams and their sub-streams will be returned. By default, all accessible events are returned regardless of their stream.</p>
</div></td></tr><tr><th><code>tags</code></th><td><div class="header"><span class="type">array of strings</span><span class="label label-default optional">optional</span></div><div class="description"><p><strong>(DEPRECATED)</strong>
Please use streamIds instead.</p>
<p>If set, only events assigned to any of the listed tags will be returned.</p>
</div></td></tr><tr><th><code>types</code></th><td><div class="header"><span class="type">array of strings</span><span class="label label-default optional">optional</span></div><div class="description"><p>If set, only events of any of the listed types will be returned.</p>
</div></td></tr><tr><th><code>running</code></th><td><div class="header"><span class="type">boolean</span><span class="label label-default optional">optional</span></div><div class="description"><p>If <code>true</code>, only running period events will be returned.</p>
</div></td></tr><tr><th><code>sortAscending</code></th><td><div class="header"><span class="type"><code>true</code>|<code>false</code></span><span class="label label-default optional">optional</span></div><div class="description"><p>If <code>true</code>, events will be sorted from oldest to newest. Default: false (sort descending).</p>
</div></td></tr><tr><th><code>skip</code></th><td><div class="header"><span class="type">number</span><span class="label label-default optional">optional</span></div><div class="description"><p>The number of items to skip in the results.</p>
</div></td></tr><tr><th><code>limit</code></th><td><div class="header"><span class="type">number</span><span class="label label-default optional">optional</span></div><div class="description"><p>The number of items to return in the results. A default value of 20 items is used if no other range limiting parameter is specified (<code>fromTime</code>, <code>toTime</code>).</p>
</div></td></tr><tr><th><code>state</code></th><td><div class="header"><span class="type"><code>default</code>|<code>trashed</code>|<code>all</code></span><span class="label label-default optional">optional</span></div><div class="description"><p>Indicates what items to return depending on their state. By default, only items that are not in the trash are returned; <code>trashed</code> returns only items in the trash, while <code>all</code> return all items regardless of their state.</p>
</div></td></tr><tr><th><code>modifiedSince</code></th><td><div class="header"><span class="type"><a href="#data-structure-timestamp">timestamp</a></span><span class="label label-default optional">optional</span></div><div class="description"><p>If specified, only events modified since that time will be returned.</p>
</div></td></tr><tr><th><code>includeDeletions</code></th><td><div class="header"><span class="type">boolean</span><span class="label label-default optional">optional</span></div><div class="description"><p>Whether to include event deletions since <code>modifiedSince</code> for sync purposes (only applies when <code>modifiedSince</code> is set). Defaults to <code>false</code>.</p>
</div></td></tr></table><h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>200 OK</code></span></span><table class="definitions"><tr><th><code>events</code></th><td><div class="header"><span class="type">array of <a href="#data-structure-event">events</a></span></div><div class="description"><p>The accessible events ordered by time (see <code>sortAscending</code> above).</p>
</div></td></tr><tr><th><code>eventDeletions</code></th><td><div class="header"><span class="type">array of <a href="#data-structure-item-deletion">item deletions</a></span><span class="label label-default optional">optional</span></div><div class="description"><p>If requested by <code>includeDeletions</code>, the event deletions since <code>modifiedSince</code>, ordered by deletion time.</p>
</div></td></tr></table></div><aside><div class="example"><p>Fetching the last 20 events (default call)</p>
<div class="tab-content"><div class="tab-pane json active"><pre><code>{}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "events": [
    {
      "id": "ckcka7ued000zglpv910am5nt",
      "time": 1594627555.621,
      "streamIds": [
        "diary"
      ],
      "streamId": "diary",
      "tags": [],
      "type": "picture/attached",
      "content": null,
      "attachments": [
        {
          "id": "ckcka7ued0010glpv8a38srmd",
          "fileName": "photo.jpg",
          "type": "image/jpeg",
          "size": 2561,
          "readToken": "ckcka7ued0011glpv6b34og3k-Uily436YhdJQzX2zCIiu9hsZ6RK"
        }
      ],
      "created": 1594627555.621,
      "createdBy": "ckcka7ucn0004glpv0yn54hxz",
      "modified": 1594627555.621,
      "modifiedBy": "ckcka7ucn0004glpv0yn54hxz"
    },
    {
      "id": "ckcka7ued000oglpvu2gfwlq6",
      "time": 1594631155.621,
      "streamIds": [
        "jogging"
      ],
      "streamId": "jogging",
      "tags": [],
      "type": "activity/pryv",
      "content": null,
      "created": 1594631155.621,
      "createdBy": "ckcka7ucn0001glpvjku7747i",
      "modified": 1594631155.621,
      "modifiedBy": "ckcka7ucn0001glpvjku7747i"
    },
    {
      "id": "ckcka7ued0012glpvfods46ep",
      "time": 1350373077.359,
      "streamIds": [
        "diary"
      ],
      "streamId": "diary",
      "tags": [],
      "type": "position/wgs84",
      "content": {
        "latitude": 40.714728,
        "longitude": -73.998672
      },
      "created": 1594623955.621,
      "createdBy": "ckcka7ucm0000glpvlbfb25cq",
      "modified": 1594623955.621,
      "modifiedBy": "ckcka7ucm0000glpvlbfb25cq"
    }
  ]
}</code></pre></div><div class="tab-pane http"><pre><code>curl -i "https://${token}@<span class="api-curl">${username}.pryv.me</span>/events"</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 1.5.18

{
  "events": [
    {
      "id": "ckcka7ued000zglpv910am5nt",
      "time": 1594627555.621,
      "streamIds": [
        "diary"
      ],
      "streamId": "diary",
      "tags": [],
      "type": "picture/attached",
      "content": null,
      "attachments": [
        {
          "id": "ckcka7ued0010glpv8a38srmd",
          "fileName": "photo.jpg",
          "type": "image/jpeg",
          "size": 2561,
          "readToken": "ckcka7ued0011glpv6b34og3k-Uily436YhdJQzX2zCIiu9hsZ6RK"
        }
      ],
      "created": 1594627555.621,
      "createdBy": "ckcka7ucn0004glpv0yn54hxz",
      "modified": 1594627555.621,
      "modifiedBy": "ckcka7ucn0004glpv0yn54hxz"
    },
    {
      "id": "ckcka7ued000oglpvu2gfwlq6",
      "time": 1594631155.621,
      "streamIds": [
        "jogging"
      ],
      "streamId": "jogging",
      "tags": [],
      "type": "activity/pryv",
      "content": null,
      "created": 1594631155.621,
      "createdBy": "ckcka7ucn0001glpvjku7747i",
      "modified": 1594631155.621,
      "modifiedBy": "ckcka7ucn0001glpvjku7747i"
    },
    {
      "id": "ckcka7ued0012glpvfods46ep",
      "time": 1350373077.359,
      "streamIds": [
        "diary"
      ],
      "streamId": "diary",
      "tags": [],
      "type": "position/wgs84",
      "content": {
        "latitude": 40.714728,
        "longitude": -73.998672
      },
      "created": 1594623955.621,
      "createdBy": "ckcka7ucm0000glpvlbfb25cq",
      "modified": 1594623955.621,
      "modifiedBy": "ckcka7ucm0000glpvlbfb25cq"
    }
  ]
}
</code></pre></div><div class="tab-pane sockets"><pre><code>socket.emit('events.get', {}, callback);</code></pre><div class="step-marker">⬇</div><pre><code>{
  "events": [
    {
      "id": "ckcka7ued000zglpv910am5nt",
      "time": 1594627555.621,
      "streamIds": [
        "diary"
      ],
      "streamId": "diary",
      "tags": [],
      "type": "picture/attached",
      "content": null,
      "attachments": [
        {
          "id": "ckcka7ued0010glpv8a38srmd",
          "fileName": "photo.jpg",
          "type": "image/jpeg",
          "size": 2561,
          "readToken": "ckcka7ued0011glpv6b34og3k-Uily436YhdJQzX2zCIiu9hsZ6RK"
        }
      ],
      "created": 1594627555.621,
      "createdBy": "ckcka7ucn0004glpv0yn54hxz",
      "modified": 1594627555.621,
      "modifiedBy": "ckcka7ucn0004glpv0yn54hxz"
    },
    {
      "id": "ckcka7ued000oglpvu2gfwlq6",
      "time": 1594631155.621,
      "streamIds": [
        "jogging"
      ],
      "streamId": "jogging",
      "tags": [],
      "type": "activity/pryv",
      "content": null,
      "created": 1594631155.621,
      "createdBy": "ckcka7ucn0001glpvjku7747i",
      "modified": 1594631155.621,
      "modifiedBy": "ckcka7ucn0001glpvjku7747i"
    },
    {
      "id": "ckcka7ued0012glpvfods46ep",
      "time": 1350373077.359,
      "streamIds": [
        "diary"
      ],
      "streamId": "diary",
      "tags": [],
      "type": "position/wgs84",
      "content": {
        "latitude": 40.714728,
        "longitude": -73.998672
      },
      "created": 1594623955.621,
      "createdBy": "ckcka7ucm0000glpvlbfb25cq",
      "modified": 1594623955.621,
      "modifiedBy": "ckcka7ucm0000glpvlbfb25cq"
    }
  ]
}</code></pre></div><div class="tab-pane batch"><pre><code>{
  "method": "events.get",
  "params": {}
}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "events": [
    {
      "id": "ckcka7ued000zglpv910am5nt",
      "time": 1594627555.621,
      "streamIds": [
        "diary"
      ],
      "streamId": "diary",
      "tags": [],
      "type": "picture/attached",
      "content": null,
      "attachments": [
        {
          "id": "ckcka7ued0010glpv8a38srmd",
          "fileName": "photo.jpg",
          "type": "image/jpeg",
          "size": 2561,
          "readToken": "ckcka7ued0011glpv6b34og3k-Uily436YhdJQzX2zCIiu9hsZ6RK"
        }
      ],
      "created": 1594627555.621,
      "createdBy": "ckcka7ucn0004glpv0yn54hxz",
      "modified": 1594627555.621,
      "modifiedBy": "ckcka7ucn0004glpv0yn54hxz"
    },
    {
      "id": "ckcka7ued000oglpvu2gfwlq6",
      "time": 1594631155.621,
      "streamIds": [
        "jogging"
      ],
      "streamId": "jogging",
      "tags": [],
      "type": "activity/pryv",
      "content": null,
      "created": 1594631155.621,
      "createdBy": "ckcka7ucn0001glpvjku7747i",
      "modified": 1594631155.621,
      "modifiedBy": "ckcka7ucn0001glpvjku7747i"
    },
    {
      "id": "ckcka7ued0012glpvfods46ep",
      "time": 1350373077.359,
      "streamIds": [
        "diary"
      ],
      "streamId": "diary",
      "tags": [],
      "type": "position/wgs84",
      "content": {
        "latitude": 40.714728,
        "longitude": -73.998672
      },
      "created": 1594623955.621,
      "createdBy": "ckcka7ucm0000glpvlbfb25cq",
      "modified": 1594623955.621,
      "modifiedBy": "ckcka7ucm0000glpvlbfb25cq"
    }
  ]
}</code></pre></div><div class="tab-pane httpAuth"><pre><code>curl -i "https://<span class="api-curl">${username}.pryv.me</span>/events?auth=${token}"</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 1.5.18

{
  "events": [
    {
      "id": "ckcka7ued000zglpv910am5nt",
      "time": 1594627555.621,
      "streamIds": [
        "diary"
      ],
      "streamId": "diary",
      "tags": [],
      "type": "picture/attached",
      "content": null,
      "attachments": [
        {
          "id": "ckcka7ued0010glpv8a38srmd",
          "fileName": "photo.jpg",
          "type": "image/jpeg",
          "size": 2561,
          "readToken": "ckcka7ued0011glpv6b34og3k-Uily436YhdJQzX2zCIiu9hsZ6RK"
        }
      ],
      "created": 1594627555.621,
      "createdBy": "ckcka7ucn0004glpv0yn54hxz",
      "modified": 1594627555.621,
      "modifiedBy": "ckcka7ucn0004glpv0yn54hxz"
    },
    {
      "id": "ckcka7ued000oglpvu2gfwlq6",
      "time": 1594631155.621,
      "streamIds": [
        "jogging"
      ],
      "streamId": "jogging",
      "tags": [],
      "type": "activity/pryv",
      "content": null,
      "created": 1594631155.621,
      "createdBy": "ckcka7ucn0001glpvjku7747i",
      "modified": 1594631155.621,
      "modifiedBy": "ckcka7ucn0001glpvjku7747i"
    },
    {
      "id": "ckcka7ued0012glpvfods46ep",
      "time": 1350373077.359,
      "streamIds": [
        "diary"
      ],
      "streamId": "diary",
      "tags": [],
      "type": "position/wgs84",
      "content": {
        "latitude": 40.714728,
        "longitude": -73.998672
      },
      "created": 1594623955.621,
      "createdBy": "ckcka7ucm0000glpvlbfb25cq",
      "modified": 1594623955.621,
      "modifiedBy": "ckcka7ucm0000glpvlbfb25cq"
    }
  ]
}

</code></pre></div></div></div><div class="example"><p>cURL for multiple streams</p>
<pre><code class="lang-bash">curl -i &quot;https://${token}@${username}.pryv.me/events?streams[]=diary&amp;streams[]=weight&quot;
</code></pre>
<div class="step-marker">⬇</div><pre><code>{
  "events": [
    {
      "id": "ckcka7ued000zglpv910am5nt",
      "time": 1594627555.621,
      "streamIds": [
        "diary"
      ],
      "streamId": "diary",
      "tags": [],
      "type": "picture/attached",
      "content": null,
      "attachments": [
        {
          "id": "ckcka7ued0010glpv8a38srmd",
          "fileName": "photo.jpg",
          "type": "image/jpeg",
          "size": 2561,
          "readToken": "ckcka7ued0011glpv6b34og3k-Uily436YhdJQzX2zCIiu9hsZ6RK"
        }
      ],
      "created": 1594627555.621,
      "createdBy": "ckcka7ucn0004glpv0yn54hxz",
      "modified": 1594627555.621,
      "modifiedBy": "ckcka7ucn0004glpv0yn54hxz"
    },
    {
      "id": "ckcka7ued000vglpv158erttw",
      "time": 1594627555.621,
      "streamIds": [
        "diary"
      ],
      "streamId": "diary",
      "tags": [],
      "type": "note/text",
      "content": "道可道非常道。。。",
      "created": 1594627555.621,
      "createdBy": "ckcka7ucn0001glpvjku7747i",
      "modified": 1594667155.621,
      "modifiedBy": "ckcka7ucn0001glpvjku7747i"
    },
    {
      "id": "ckcka7ued0012glpvfods46ep",
      "time": 1350373077.359,
      "streamIds": [
        "diary"
      ],
      "streamId": "diary",
      "tags": [],
      "type": "position/wgs84",
      "content": {
        "latitude": 40.714728,
        "longitude": -73.998672
      },
      "created": 1594623955.621,
      "createdBy": "ckcka7ucm0000glpvlbfb25cq",
      "modified": 1594623955.621,
      "modifiedBy": "ckcka7ucm0000glpvlbfb25cq"
    },
    {
      "id": "ckcka7ued000uglpv8s121ydx",
      "time": 1594631155.621,
      "streamIds": [
        "weight"
      ],
      "streamId": "weight",
      "tags": [],
      "type": "mass/kg",
      "content": 90,
      "created": 1594631155.621,
      "createdBy": "ckcka7ucn0001glpvjku7747i",
      "modified": 1594631155.621,
      "modifiedBy": "ckcka7ucn0001glpvjku7747i"
    }
  ]
}</code></pre></div><div class="example"><p>cURL with deletions</p>
<pre><code class="lang-bash">curl -i &quot;https://${token}@${username}.pryv.me/events?includeDeletions=true&amp;modifiedSince=1594544755.851&quot;&quot;
</code></pre>
<div class="step-marker">⬇</div><pre><code>{
  "events": [
    {
      "id": "ckcka7ued000uglpv8s121ydx",
      "time": 1594631155.621,
      "streamIds": [
        "weight"
      ],
      "streamId": "weight",
      "tags": [],
      "type": "mass/kg",
      "content": 90,
      "created": 1594631155.621,
      "createdBy": "ckcka7ucn0001glpvjku7747i",
      "modified": 1594631155.621,
      "modifiedBy": "ckcka7ucn0001glpvjku7747i"
    }
  ],
  "eventDeletions": [
    {
      "id": "ckcka7uep001aglpvau7g7jhy",
      "deleted": 1594627555.633
    },
    {
      "id": "ckcka7uep001bglpvngbcw57d",
      "deleted": 1594595155.633
    },
    {
      "id": "ckcka7uep001cglpv6tt70x30",
      "deleted": 1594559155.633
    }
  ]
}</code></pre></div></aside></section><!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="methods-events-events-getOne" class="method"> <h3 id="get-one-event">Get one event</h3>
<div class="content"><div class="meta"><span class="method-id"><span class="label">id</span><span class="label-value"><code>events.getOne</code></span></span><span class="http"><span class="label">HTTP</span><span class="label-value"><code>GET /events/{id}</code></span></span></div><div class="intro"><p>Fetches a specific event. This request is mostly used to fetch an event&#39;s version history, allowing to review all the modifications to an event&#39;s data.</p>
</div><h4 id="parameters">Parameters</h4>
<table class="definitions"><tr><th><code>includeHistory</code></th><td><div class="header"><span class="type">boolean</span><span class="label label-default optional">optional</span></div><div class="description"><p>If <code>true</code>, the event&#39;s history will be added to the response. Default: false (don&#39;t include the history).</p>
</div></td></tr></table><h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>200 OK</code></span></span><table class="definitions"><tr><th><code>event</code></th><td><div class="header"><span class="type"><a href="#data-structure-event">event</a></span></div><div class="description"><p>The event.</p>
</div></td></tr><tr><th><code>history</code></th><td><div class="header"><span class="type">array of <a href="#data-structure-event">events</a></span><span class="label label-default optional">optional</span></div><div class="description"><p>If requested by <code>includeHistory</code>, the history of the event as an array of events, ordered by modification time.</p>
</div></td></tr></table></div><aside><div class="example"><p>Fetching an event&#39;s version history</p>
<div class="tab-content"><div class="tab-pane json active"><pre><code>{
  "includeHistory": true
}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "event": {
    "id": "ckcka7ued000wglpvkmli1slz",
    "time": 1594627555.621,
    "streamIds": [
      "diary"
    ],
    "streamId": "diary",
    "tags": [],
    "type": "note/text",
    "content": "Hi, I am the latest version of this event",
    "created": 1594627555.621,
    "createdBy": "ckcka7ucn0001glpvjku7747i",
    "modified": 1594638355.621,
    "modifiedBy": "ckcka7ucn0001glpvjku7747i"
  },
  "history": [
    {
      "id": "ckcka7ued000xglpvtlfwthtu",
      "time": 1594627555.621,
      "streamIds": [
        "diary"
      ],
      "streamId": "diary",
      "tags": [],
      "type": "note/text",
      "content": "Hi, I am the first modification",
      "created": 1594627555.621,
      "createdBy": "ckcka7ucn0001glpvjku7747i",
      "modified": 1594634755.621,
      "modifiedBy": "ckcka7ucn0001glpvjku7747i"
    },
    {
      "id": "ckcka7ued000yglpvwrgj01wo",
      "time": 1594627555.621,
      "streamIds": [
        "diary"
      ],
      "streamId": "diary",
      "tags": [],
      "type": "note/text",
      "content": "Hi, I was the initial event",
      "created": 1594627555.621,
      "createdBy": "ckcka7ucn0001glpvjku7747i",
      "modified": 1594631155.621,
      "modifiedBy": "ckcka7ucn0001glpvjku7747i"
    }
  ]
}</code></pre></div><div class="tab-pane http"><pre><code>curl -i "https://${token}@<span class="api-curl">${username}.pryv.me</span>/events/${id}&includeHistory=true"</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 1.5.18

{
  "event": {
    "id": "ckcka7ued000wglpvkmli1slz",
    "time": 1594627555.621,
    "streamIds": [
      "diary"
    ],
    "streamId": "diary",
    "tags": [],
    "type": "note/text",
    "content": "Hi, I am the latest version of this event",
    "created": 1594627555.621,
    "createdBy": "ckcka7ucn0001glpvjku7747i",
    "modified": 1594638355.621,
    "modifiedBy": "ckcka7ucn0001glpvjku7747i"
  },
  "history": [
    {
      "id": "ckcka7ued000xglpvtlfwthtu",
      "time": 1594627555.621,
      "streamIds": [
        "diary"
      ],
      "streamId": "diary",
      "tags": [],
      "type": "note/text",
      "content": "Hi, I am the first modification",
      "created": 1594627555.621,
      "createdBy": "ckcka7ucn0001glpvjku7747i",
      "modified": 1594634755.621,
      "modifiedBy": "ckcka7ucn0001glpvjku7747i"
    },
    {
      "id": "ckcka7ued000yglpvwrgj01wo",
      "time": 1594627555.621,
      "streamIds": [
        "diary"
      ],
      "streamId": "diary",
      "tags": [],
      "type": "note/text",
      "content": "Hi, I was the initial event",
      "created": 1594627555.621,
      "createdBy": "ckcka7ucn0001glpvjku7747i",
      "modified": 1594631155.621,
      "modifiedBy": "ckcka7ucn0001glpvjku7747i"
    }
  ]
}
</code></pre></div><div class="tab-pane sockets"><pre><code>socket.emit('events.getOne', {"includeHistory":true}, callback);</code></pre><div class="step-marker">⬇</div><pre><code>{
  "event": {
    "id": "ckcka7ued000wglpvkmli1slz",
    "time": 1594627555.621,
    "streamIds": [
      "diary"
    ],
    "streamId": "diary",
    "tags": [],
    "type": "note/text",
    "content": "Hi, I am the latest version of this event",
    "created": 1594627555.621,
    "createdBy": "ckcka7ucn0001glpvjku7747i",
    "modified": 1594638355.621,
    "modifiedBy": "ckcka7ucn0001glpvjku7747i"
  },
  "history": [
    {
      "id": "ckcka7ued000xglpvtlfwthtu",
      "time": 1594627555.621,
      "streamIds": [
        "diary"
      ],
      "streamId": "diary",
      "tags": [],
      "type": "note/text",
      "content": "Hi, I am the first modification",
      "created": 1594627555.621,
      "createdBy": "ckcka7ucn0001glpvjku7747i",
      "modified": 1594634755.621,
      "modifiedBy": "ckcka7ucn0001glpvjku7747i"
    },
    {
      "id": "ckcka7ued000yglpvwrgj01wo",
      "time": 1594627555.621,
      "streamIds": [
        "diary"
      ],
      "streamId": "diary",
      "tags": [],
      "type": "note/text",
      "content": "Hi, I was the initial event",
      "created": 1594627555.621,
      "createdBy": "ckcka7ucn0001glpvjku7747i",
      "modified": 1594631155.621,
      "modifiedBy": "ckcka7ucn0001glpvjku7747i"
    }
  ]
}</code></pre></div><div class="tab-pane batch"><pre><code>{
  "method": "events.getOne",
  "params": {
    "includeHistory": true
  }
}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "event": {
    "id": "ckcka7ued000wglpvkmli1slz",
    "time": 1594627555.621,
    "streamIds": [
      "diary"
    ],
    "streamId": "diary",
    "tags": [],
    "type": "note/text",
    "content": "Hi, I am the latest version of this event",
    "created": 1594627555.621,
    "createdBy": "ckcka7ucn0001glpvjku7747i",
    "modified": 1594638355.621,
    "modifiedBy": "ckcka7ucn0001glpvjku7747i"
  },
  "history": [
    {
      "id": "ckcka7ued000xglpvtlfwthtu",
      "time": 1594627555.621,
      "streamIds": [
        "diary"
      ],
      "streamId": "diary",
      "tags": [],
      "type": "note/text",
      "content": "Hi, I am the first modification",
      "created": 1594627555.621,
      "createdBy": "ckcka7ucn0001glpvjku7747i",
      "modified": 1594634755.621,
      "modifiedBy": "ckcka7ucn0001glpvjku7747i"
    },
    {
      "id": "ckcka7ued000yglpvwrgj01wo",
      "time": 1594627555.621,
      "streamIds": [
        "diary"
      ],
      "streamId": "diary",
      "tags": [],
      "type": "note/text",
      "content": "Hi, I was the initial event",
      "created": 1594627555.621,
      "createdBy": "ckcka7ucn0001glpvjku7747i",
      "modified": 1594631155.621,
      "modifiedBy": "ckcka7ucn0001glpvjku7747i"
    }
  ]
}</code></pre></div><div class="tab-pane httpAuth"><pre><code>curl -i "https://<span class="api-curl">${username}.pryv.me</span>/events/${id}?auth=${token}&includeHistory=true"</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 1.5.18

{
  "event": {
    "id": "ckcka7ued000wglpvkmli1slz",
    "time": 1594627555.621,
    "streamIds": [
      "diary"
    ],
    "streamId": "diary",
    "tags": [],
    "type": "note/text",
    "content": "Hi, I am the latest version of this event",
    "created": 1594627555.621,
    "createdBy": "ckcka7ucn0001glpvjku7747i",
    "modified": 1594638355.621,
    "modifiedBy": "ckcka7ucn0001glpvjku7747i"
  },
  "history": [
    {
      "id": "ckcka7ued000xglpvtlfwthtu",
      "time": 1594627555.621,
      "streamIds": [
        "diary"
      ],
      "streamId": "diary",
      "tags": [],
      "type": "note/text",
      "content": "Hi, I am the first modification",
      "created": 1594627555.621,
      "createdBy": "ckcka7ucn0001glpvjku7747i",
      "modified": 1594634755.621,
      "modifiedBy": "ckcka7ucn0001glpvjku7747i"
    },
    {
      "id": "ckcka7ued000yglpvwrgj01wo",
      "time": 1594627555.621,
      "streamIds": [
        "diary"
      ],
      "streamId": "diary",
      "tags": [],
      "type": "note/text",
      "content": "Hi, I was the initial event",
      "created": 1594627555.621,
      "createdBy": "ckcka7ucn0001glpvjku7747i",
      "modified": 1594631155.621,
      "modifiedBy": "ckcka7ucn0001glpvjku7747i"
    }
  ]
}

</code></pre></div></div></div></aside></section><!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="methods-events-events-create" class="method"> <h3 id="create-event">Create event</h3>
<div class="content"><div class="meta"><span class="method-id"><span class="label">id</span><span class="label-value"><code>events.create</code></span></span><span class="http"><span class="label">HTTP</span><span class="label-value"><code>POST /events</code></span></span></div><div class="intro"><p>Records a new event, in addition to JSON, this request accepts standard multipart/form-data content to support the creation of event with attached files in a single request. When sending a multipart request, one content part must hold the JSON for the new event and all other content parts must be the attached files.</p>
</div><h4 id="parameters">Parameters</h4>
<p>The new event&#39;s data: see <a href="#data-structure-event">Event</a>.</p>
<h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>201 Created</code></span></span><table class="definitions"><tr><th><code>event</code></th><td><div class="header"><span class="type"><a href="#data-structure-event">event</a></span></div><div class="description"><p>The created event.</p>
</div></td></tr></table><h4 id="specific-errors">Specific errors</h4>
<table class="definitions"><tr><th><code>invalid-operation</code></th><td><div class="header"><span class="http"><span class="label">HTTP</span><span class="label-value"><code>400</code></span></span></div><div class="description"><p>The referenced stream is in the trash, and we prevent the recording of new events into trashed streams.</p>
</div></td></tr></table></div><aside><div class="example"><p>Capturing a simple number value</p>
<div class="tab-content"><div class="tab-pane json active"><pre><code>{
  "streamIds": [
    "weight"
  ],
  "type": "mass/kg",
  "content": 90
}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "event": {
    "id": "ckcka7ued000uglpv8s121ydx",
    "time": 1594631155.621,
    "streamIds": [
      "weight"
    ],
    "streamId": "weight",
    "tags": [],
    "type": "mass/kg",
    "content": 90,
    "created": 1594631155.621,
    "createdBy": "ckcka7ucn0001glpvjku7747i",
    "modified": 1594631155.621,
    "modifiedBy": "ckcka7ucn0001glpvjku7747i"
  }
}</code></pre></div><div class="tab-pane http"><pre><code>curl -i -X POST -H 'Content-Type: application/json' -d '{"streamIds":["weight"],"type":"mass/kg","content":90}' "https://${token}@<span class="api-curl">${username}.pryv.me</span>/events"</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 201 Created
Content-Type: application/json; charset=utf-8
API-Version: 1.5.18

{
  "event": {
    "id": "ckcka7ued000uglpv8s121ydx",
    "time": 1594631155.621,
    "streamIds": [
      "weight"
    ],
    "streamId": "weight",
    "tags": [],
    "type": "mass/kg",
    "content": 90,
    "created": 1594631155.621,
    "createdBy": "ckcka7ucn0001glpvjku7747i",
    "modified": 1594631155.621,
    "modifiedBy": "ckcka7ucn0001glpvjku7747i"
  }
}
</code></pre></div><div class="tab-pane sockets"><pre><code>socket.emit('events.create', {"streamIds":["weight"],"type":"mass/kg","content":90}, callback);</code></pre><div class="step-marker">⬇</div><pre><code>{
  "event": {
    "id": "ckcka7ued000uglpv8s121ydx",
    "time": 1594631155.621,
    "streamIds": [
      "weight"
    ],
    "streamId": "weight",
    "tags": [],
    "type": "mass/kg",
    "content": 90,
    "created": 1594631155.621,
    "createdBy": "ckcka7ucn0001glpvjku7747i",
    "modified": 1594631155.621,
    "modifiedBy": "ckcka7ucn0001glpvjku7747i"
  }
}</code></pre></div><div class="tab-pane batch"><pre><code>{
  "method": "events.create",
  "params": {
    "streamIds": [
      "weight"
    ],
    "type": "mass/kg",
    "content": 90
  }
}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "event": {
    "id": "ckcka7ued000uglpv8s121ydx",
    "time": 1594631155.621,
    "streamIds": [
      "weight"
    ],
    "streamId": "weight",
    "tags": [],
    "type": "mass/kg",
    "content": 90,
    "created": 1594631155.621,
    "createdBy": "ckcka7ucn0001glpvjku7747i",
    "modified": 1594631155.621,
    "modifiedBy": "ckcka7ucn0001glpvjku7747i"
  }
}</code></pre></div><div class="tab-pane httpAuth"><pre><code>curl -i -X POST -H 'Content-Type: application/json' -d '{"streamIds":["weight"],"type":"mass/kg","content":90}' "https://<span class="api-curl">${username}.pryv.me</span>/events?auth=${token}"</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 201 Created
Content-Type: application/json; charset=utf-8
API-Version: 1.5.18

{
  "event": {
    "id": "ckcka7ued000uglpv8s121ydx",
    "time": 1594631155.621,
    "streamIds": [
      "weight"
    ],
    "streamId": "weight",
    "tags": [],
    "type": "mass/kg",
    "content": 90,
    "created": 1594631155.621,
    "createdBy": "ckcka7ucn0001glpvjku7747i",
    "modified": 1594631155.621,
    "modifiedBy": "ckcka7ucn0001glpvjku7747i"
  }
}

</code></pre></div></div></div><div class="example"><p>cURL with attachment</p>
<pre><code class="lang-bash">curl -i -F &#39;event={&quot;streamIds&quot;:[&quot;diary&quot;],&quot;type&quot;:&quot;picture/attached&quot;}&#39;  -F &quot;file=@photo.jpg&quot; &quot;https://${token}@${username}.pryv.me/events&quot;
</code></pre>
<div class="step-marker">⬇</div><pre><code>{
  "event": {
    "id": "ckcka7ued000zglpv910am5nt",
    "time": 1594627555.621,
    "streamIds": [
      "diary"
    ],
    "streamId": "diary",
    "tags": [],
    "type": "picture/attached",
    "content": null,
    "attachments": [
      {
        "id": "ckcka7ued0010glpv8a38srmd",
        "fileName": "photo.jpg",
        "type": "image/jpeg",
        "size": 2561,
        "readToken": "ckcka7ued0011glpv6b34og3k-Uily436YhdJQzX2zCIiu9hsZ6RK"
      }
    ],
    "created": 1594627555.621,
    "createdBy": "ckcka7ucn0004glpv0yn54hxz",
    "modified": 1594627555.621,
    "modifiedBy": "ckcka7ucn0004glpv0yn54hxz"
  }
}</code></pre></div></aside></section><!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="methods-events-events-update" class="method"> <h3 id="update-event">Update event</h3>
<div class="content"><div class="meta"><span class="method-id"><span class="label">id</span><span class="label-value"><code>events.update</code></span></span><span class="http"><span class="label">HTTP</span><span class="label-value"><code>PUT /events/{id}</code></span></span></div><div class="intro"><p>Modifies the event.</p>
</div><h4 id="parameters">Parameters</h4>
<table class="definitions"><tr><th><code>id</code></th><td><div class="header"><span class="type"><a href="#data-structure-identifier">identifier</a></span><span class="http"><span class="label">HTTP</span><span class="label-value"><span>set in request path</span></span></span></div><div class="description"><p>The id of the event.</p>
</div></td></tr><tr><th><code>update</code></th><td><div class="header"><span class="type">object</span><span class="http"><span class="label">HTTP</span><span class="label-value"><span>request body</span></span></span></div><div class="description"><p>New values for the event&#39;s fields: see <a href="#data-structure-event">event</a>. All fields are optional, and only modified values must be included.</p>
</div></td></tr></table><h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>200 OK</code></span></span><table class="definitions"><tr><th><code>event</code></th><td><div class="header"><span class="type"><a href="#data-structure-event">event</a></span></div><div class="description"><p>The updated event.</p>
</div></td></tr></table><h4 id="specific-errors">Specific errors</h4>
<table class="definitions"></table></div><aside><div class="example"><p>Changing streams</p>
<div class="tab-content"><div class="tab-pane json active"><pre><code>{
  "streamIds": [
    "position"
  ]
}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "event": {
    "id": "ckbs54rfh0014ik0sabqobcsb",
    "streamIds": [
      "position"
    ],
    "streamId": "position",
    "modified": 1594631155.851,
    "modifiedBy": "ckcka7ucn0001glpvjku7747i",
    "time": 1350373077.359,
    "tags": [],
    "type": "position/wgs84",
    "content": {
      "latitude": 40.714728,
      "longitude": -73.998672
    },
    "created": 1594623955.621,
    "createdBy": "ckcka7ucm0000glpvlbfb25cq"
  }
}</code></pre></div><div class="tab-pane http"><pre><code>curl -i -X PUT -H 'Content-Type: application/json' -d '{"streamIds":["position"]}' "https://${token}@<span class="api-curl">${username}.pryv.me</span>/events/ckbs54rfh0014ik0sabqobcsb"</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 1.5.18

{
  "event": {
    "id": "ckbs54rfh0014ik0sabqobcsb",
    "streamIds": [
      "position"
    ],
    "streamId": "position",
    "modified": 1594631155.851,
    "modifiedBy": "ckcka7ucn0001glpvjku7747i",
    "time": 1350373077.359,
    "tags": [],
    "type": "position/wgs84",
    "content": {
      "latitude": 40.714728,
      "longitude": -73.998672
    },
    "created": 1594623955.621,
    "createdBy": "ckcka7ucm0000glpvlbfb25cq"
  }
}
</code></pre></div><div class="tab-pane sockets"><pre><code>socket.emit('events.update', {"id":"ckbs54rfh0014ik0sabqobcsb","update":{"streamIds":["position"]}}, callback);</code></pre><div class="step-marker">⬇</div><pre><code>{
  "event": {
    "id": "ckbs54rfh0014ik0sabqobcsb",
    "streamIds": [
      "position"
    ],
    "streamId": "position",
    "modified": 1594631155.851,
    "modifiedBy": "ckcka7ucn0001glpvjku7747i",
    "time": 1350373077.359,
    "tags": [],
    "type": "position/wgs84",
    "content": {
      "latitude": 40.714728,
      "longitude": -73.998672
    },
    "created": 1594623955.621,
    "createdBy": "ckcka7ucm0000glpvlbfb25cq"
  }
}</code></pre></div><div class="tab-pane batch"><pre><code>{
  "method": "events.update",
  "params": {
    "id": "ckbs54rfh0014ik0sabqobcsb",
    "update": {
      "streamIds": [
        "position"
      ]
    }
  }
}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "event": {
    "id": "ckbs54rfh0014ik0sabqobcsb",
    "streamIds": [
      "position"
    ],
    "streamId": "position",
    "modified": 1594631155.851,
    "modifiedBy": "ckcka7ucn0001glpvjku7747i",
    "time": 1350373077.359,
    "tags": [],
    "type": "position/wgs84",
    "content": {
      "latitude": 40.714728,
      "longitude": -73.998672
    },
    "created": 1594623955.621,
    "createdBy": "ckcka7ucm0000glpvlbfb25cq"
  }
}</code></pre></div><div class="tab-pane httpAuth"><pre><code>curl -i -X PUT -H 'Content-Type: application/json' -d '{"streamIds":["position"]}' "https://<span class="api-curl">${username}.pryv.me</span>/events/ckbs54rfh0014ik0sabqobcsb?auth=${token}"</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 1.5.18

{
  "event": {
    "id": "ckbs54rfh0014ik0sabqobcsb",
    "streamIds": [
      "position"
    ],
    "streamId": "position",
    "modified": 1594631155.851,
    "modifiedBy": "ckcka7ucn0001glpvjku7747i",
    "time": 1350373077.359,
    "tags": [],
    "type": "position/wgs84",
    "content": {
      "latitude": 40.714728,
      "longitude": -73.998672
    },
    "created": 1594623955.621,
    "createdBy": "ckcka7ucm0000glpvlbfb25cq"
  }
}

</code></pre></div></div></div></aside></section><!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="methods-events-events-addAttachment" class="method"> <h3 id="add-attachment-s-">Add attachment(s)</h3>
<div class="content"><div class="meta"><span class="http"><span class="label">HTTP-only</span><span class="label-value"><code>POST /events/{id}</code></span></span></div><div class="intro"><p>Adds one or more file attachments to the event. This request expects standard multipart/form-data content, with all content parts being the attached files.</p>
</div><h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>200 OK</code></span></span><table class="definitions"><tr><th><code>event</code></th><td><div class="header"><span class="type"><a href="#data-structure-event">event</a></span></div><div class="description"><p>The updated event.</p>
</div></td></tr></table></div><aside><div class="example"><p>cURL</p>
<pre><code class="lang-bash">curl -i -F &quot;file=@travel-expense.jpg&quot; &quot;https://${token}@${username}.pryv.me/events/ckcka7ued000qglpvba0wtirr&quot;&quot;
</code></pre>
<div class="step-marker">⬇</div><pre><code>{
  "event": {
    "id": "ckcka7ued000qglpvba0wtirr",
    "time": 1594631155.621,
    "duration": null,
    "streamIds": [
      "ckcka7uec000eglpvv9bn365g"
    ],
    "streamId": "ckcka7uec000eglpvv9bn365g",
    "tags": [],
    "type": "activity/pryv",
    "content": null,
    "attachments": [
      {
        "id": "ckcka7ued000rglpvo9ilzn7s",
        "fileName": "travel-expense.jpg",
        "type": "image/jpeg",
        "size": 1111,
        "readToken": "ckcka7ued000sglpvvwzg2jhv-JldHpRZIrC6IopbL08a4Q1574q2"
      }
    ],
    "created": 1594631155.621,
    "createdBy": "ckcka7ucn0001glpvjku7747i",
    "modified": 1594631155.621,
    "modifiedBy": "ckcka7ucn0001glpvjku7747i"
  }
}</code></pre></div></aside></section><!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="methods-events-events-getAttachment" class="method"> <h3 id="get-attachment">Get attachment</h3>
<div class="content"><div class="meta"><span class="http"><span class="label">HTTP-only</span><span class="label-value"><code>GET /events/{id}/{fileId}[/{fileName}]</code></span></span></div><div class="intro"><p>Gets the attached file. Accepts an arbitrary filename path suffix (ignored) for easier link readability.
For this function using the <code>auth</code> query parameter is not accepted. You can either use the <a href="#data-structure-access">access token</a> in the <code>Authorization</code> header or provide the <code>readToken</code> as query parameter.</p>
</div><h4 id="parameters">Parameters</h4>
<table class="definitions"><tr><th><code>readToken</code></th><td><div class="header"><span class="type">string</span><span class="http"><span class="label">HTTP</span><span class="label-value"><span>set in request path</span></span></span></div><div class="description"><p>Required if not using the <code>Authorization</code> HTTP header. The file read token to authentify the request. See <a href="#data-structure-event"><code>event.attachments[].readToken</code></a> for more info.</p>
</div></td></tr></table><h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>200 OK</code></span></span><p>The file&#39;s content.</p>
</div></section><!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="methods-events-events-deleteAttachment" class="method"> <h3 id="delete-attachment">Delete attachment</h3>
<div class="content"><div class="meta"><span class="method-id"><span class="label">id</span><span class="label-value"><code>events.deleteAttachment</code></span></span><span class="http"><span class="label">HTTP</span><span class="label-value"><code>DELETE /events/{id}/{fileId}</code></span></span></div><div class="intro"><p>Irreversibly deletes the attached file.</p>
</div><h4 id="parameters">Parameters</h4>
<table class="definitions"><tr><th><code>id</code></th><td><div class="header"><span class="type"><a href="#data-structure-identifier">identifier</a></span><span class="http"><span class="label">HTTP</span><span class="label-value"><span>set in request path</span></span></span></div><div class="description"><p>The id of the event.</p>
</div></td></tr><tr><th><code>fileId</code></th><td><div class="header"><span class="type"><a href="#data-structure-identifier">identifier</a></span><span class="http"><span class="label">HTTP</span><span class="label-value"><span>set in request path</span></span></span></div><div class="description"><p>The id of the attached file.</p>
</div></td></tr></table><h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>200 OK</code></span></span><table class="definitions"><tr><th><code>event</code></th><td><div class="header"><span class="type"><a href="#data-structure-event">event</a></span></div><div class="description"><p>The updated event.</p>
</div></td></tr></table></div><aside><div class="example"><div class="tab-content"><div class="tab-pane json active"><pre><code>{
  "fileId": "ckcka7ued000rglpvo9ilzn7s"
}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "event": {
    "id": "ckcka7ued000qglpvba0wtirr",
    "time": 1594631155.621,
    "duration": null,
    "streamIds": [
      "ckcka7uec000eglpvv9bn365g"
    ],
    "streamId": "ckcka7uec000eglpvv9bn365g",
    "tags": [],
    "type": "activity/pryv",
    "content": null,
    "created": 1594631155.621,
    "createdBy": "ckcka7ucn0001glpvjku7747i",
    "modified": 1594631155.621,
    "modifiedBy": "ckcka7ucn0001glpvjku7747i"
  }
}</code></pre></div><div class="tab-pane http"><pre><code>curl -i -X DELETE "https://${token}@<span class="api-curl">${username}.pryv.me</span>/events/ckcka7ued000qglpvba0wtirr/ckcka7ued000rglpvo9ilzn7s"</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 1.5.18

{
  "event": {
    "id": "ckcka7ued000qglpvba0wtirr",
    "time": 1594631155.621,
    "duration": null,
    "streamIds": [
      "ckcka7uec000eglpvv9bn365g"
    ],
    "streamId": "ckcka7uec000eglpvv9bn365g",
    "tags": [],
    "type": "activity/pryv",
    "content": null,
    "created": 1594631155.621,
    "createdBy": "ckcka7ucn0001glpvjku7747i",
    "modified": 1594631155.621,
    "modifiedBy": "ckcka7ucn0001glpvjku7747i"
  }
}
</code></pre></div><div class="tab-pane sockets"><pre><code>socket.emit('events.deleteAttachment', {"id":"ckcka7ued000qglpvba0wtirr","fileId":"ckcka7ued000rglpvo9ilzn7s"}, callback);</code></pre><div class="step-marker">⬇</div><pre><code>{
  "event": {
    "id": "ckcka7ued000qglpvba0wtirr",
    "time": 1594631155.621,
    "duration": null,
    "streamIds": [
      "ckcka7uec000eglpvv9bn365g"
    ],
    "streamId": "ckcka7uec000eglpvv9bn365g",
    "tags": [],
    "type": "activity/pryv",
    "content": null,
    "created": 1594631155.621,
    "createdBy": "ckcka7ucn0001glpvjku7747i",
    "modified": 1594631155.621,
    "modifiedBy": "ckcka7ucn0001glpvjku7747i"
  }
}</code></pre></div><div class="tab-pane batch"><pre><code>{
  "method": "events.deleteAttachment",
  "params": {
    "id": "ckcka7ued000qglpvba0wtirr",
    "fileId": "ckcka7ued000rglpvo9ilzn7s"
  }
}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "event": {
    "id": "ckcka7ued000qglpvba0wtirr",
    "time": 1594631155.621,
    "duration": null,
    "streamIds": [
      "ckcka7uec000eglpvv9bn365g"
    ],
    "streamId": "ckcka7uec000eglpvv9bn365g",
    "tags": [],
    "type": "activity/pryv",
    "content": null,
    "created": 1594631155.621,
    "createdBy": "ckcka7ucn0001glpvjku7747i",
    "modified": 1594631155.621,
    "modifiedBy": "ckcka7ucn0001glpvjku7747i"
  }
}</code></pre></div><div class="tab-pane httpAuth"><pre><code>curl -i -X DELETE "https://<span class="api-curl">${username}.pryv.me</span>/events/ckcka7ued000qglpvba0wtirr/ckcka7ued000rglpvo9ilzn7s?auth=${token}"</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 1.5.18

{
  "event": {
    "id": "ckcka7ued000qglpvba0wtirr",
    "time": 1594631155.621,
    "duration": null,
    "streamIds": [
      "ckcka7uec000eglpvv9bn365g"
    ],
    "streamId": "ckcka7uec000eglpvv9bn365g",
    "tags": [],
    "type": "activity/pryv",
    "content": null,
    "created": 1594631155.621,
    "createdBy": "ckcka7ucn0001glpvjku7747i",
    "modified": 1594631155.621,
    "modifiedBy": "ckcka7ucn0001glpvjku7747i"
  }
}

</code></pre></div></div></div></aside></section><!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="methods-events-events-delete" class="method"> <h3 id="delete-event">Delete event</h3>
<div class="content"><div class="meta"><span class="method-id"><span class="label">id</span><span class="label-value"><code>events.delete</code></span></span><span class="http"><span class="label">HTTP</span><span class="label-value"><code>DELETE /events/{id}</code></span></span></div><div class="intro"><p>Trashes or deletes the specified event, depending on its current state:</p>
<ul>
<li>If the event is not already in the trash, it will be moved to the trash (i.e. flagged as <code>trashed</code>)</li>
<li>If the event is already in the trash, it will be irreversibly deleted (including all its attached files, if any).</li>
</ul>
</div><h4 id="parameters">Parameters</h4>
<table class="definitions"><tr><th><code>id</code></th><td><div class="header"><span class="type"><a href="#data-structure-identifier">identifier</a></span><span class="http"><span class="label">HTTP</span><span class="label-value"><span>set in request path</span></span></span></div><div class="description"><p>The id of the event.</p>
</div></td></tr></table><h4 id="result-trashed">Result: trashed</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>200 OK</code></span></span><table class="definitions"><tr><th><code>event</code></th><td><div class="header"><span class="type"><a href="#data-structure-event">event</a></span></div><div class="description"><p>The trashed event.</p>
</div></td></tr></table><h4 id="result-deleted">Result: deleted</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>200 OK</code></span></span><table class="definitions"><tr><th><code>eventDeletion</code></th><td><div class="header"><span class="type"><a href="#data-structure-item-deletion">item deletion</a></span></div><div class="description"><p>The event deletion record.</p>
</div></td></tr></table></div><aside><div class="example"><p>Trashing</p>
<div class="tab-content"><div class="tab-pane json active"><pre><code>{}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "event": {
    "trashed": true,
    "modified": 1594631155.851,
    "modifiedBy": "ckcka7ucn0001glpvjku7747i",
    "id": "ckcka7ued000vglpv158erttw",
    "time": 1594627555.621,
    "streamIds": [
      "diary"
    ],
    "streamId": "diary",
    "tags": [],
    "type": "note/text",
    "content": "道可道非常道。。。",
    "created": 1594627555.621,
    "createdBy": "ckcka7ucn0001glpvjku7747i"
  }
}</code></pre></div><div class="tab-pane http"><pre><code>curl -i -X DELETE "https://${token}@<span class="api-curl">${username}.pryv.me</span>/events/ckcka7ued000vglpv158erttw"</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 1.5.18

{
  "event": {
    "trashed": true,
    "modified": 1594631155.851,
    "modifiedBy": "ckcka7ucn0001glpvjku7747i",
    "id": "ckcka7ued000vglpv158erttw",
    "time": 1594627555.621,
    "streamIds": [
      "diary"
    ],
    "streamId": "diary",
    "tags": [],
    "type": "note/text",
    "content": "道可道非常道。。。",
    "created": 1594627555.621,
    "createdBy": "ckcka7ucn0001glpvjku7747i"
  }
}
</code></pre></div><div class="tab-pane sockets"><pre><code>socket.emit('events.delete', {"id":"ckcka7ued000vglpv158erttw"}, callback);</code></pre><div class="step-marker">⬇</div><pre><code>{
  "event": {
    "trashed": true,
    "modified": 1594631155.851,
    "modifiedBy": "ckcka7ucn0001glpvjku7747i",
    "id": "ckcka7ued000vglpv158erttw",
    "time": 1594627555.621,
    "streamIds": [
      "diary"
    ],
    "streamId": "diary",
    "tags": [],
    "type": "note/text",
    "content": "道可道非常道。。。",
    "created": 1594627555.621,
    "createdBy": "ckcka7ucn0001glpvjku7747i"
  }
}</code></pre></div><div class="tab-pane batch"><pre><code>{
  "method": "events.delete",
  "params": {
    "id": "ckcka7ued000vglpv158erttw"
  }
}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "event": {
    "trashed": true,
    "modified": 1594631155.851,
    "modifiedBy": "ckcka7ucn0001glpvjku7747i",
    "id": "ckcka7ued000vglpv158erttw",
    "time": 1594627555.621,
    "streamIds": [
      "diary"
    ],
    "streamId": "diary",
    "tags": [],
    "type": "note/text",
    "content": "道可道非常道。。。",
    "created": 1594627555.621,
    "createdBy": "ckcka7ucn0001glpvjku7747i"
  }
}</code></pre></div><div class="tab-pane httpAuth"><pre><code>curl -i -X DELETE "https://<span class="api-curl">${username}.pryv.me</span>/events/ckcka7ued000vglpv158erttw?auth=${token}"</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 1.5.18

{
  "event": {
    "trashed": true,
    "modified": 1594631155.851,
    "modifiedBy": "ckcka7ucn0001glpvjku7747i",
    "id": "ckcka7ued000vglpv158erttw",
    "time": 1594627555.621,
    "streamIds": [
      "diary"
    ],
    "streamId": "diary",
    "tags": [],
    "type": "note/text",
    "content": "道可道非常道。。。",
    "created": 1594627555.621,
    "createdBy": "ckcka7ucn0001glpvjku7747i"
  }
}

</code></pre></div></div></div><div class="example"><p>Deleting</p>
<div class="tab-content"><div class="tab-pane json active"><pre><code>{}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "eventDeletion": {
    "id": "ckcka7ued000vglpv158erttw"
  }
}</code></pre></div><div class="tab-pane http"><pre><code>curl -i -X DELETE "https://${token}@<span class="api-curl">${username}.pryv.me</span>/events/ckcka7ued000vglpv158erttw"</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 1.5.18

{
  "eventDeletion": {
    "id": "ckcka7ued000vglpv158erttw"
  }
}
</code></pre></div><div class="tab-pane sockets"><pre><code>socket.emit('events.delete', {"id":"ckcka7ued000vglpv158erttw"}, callback);</code></pre><div class="step-marker">⬇</div><pre><code>{
  "eventDeletion": {
    "id": "ckcka7ued000vglpv158erttw"
  }
}</code></pre></div><div class="tab-pane batch"><pre><code>{
  "method": "events.delete",
  "params": {
    "id": "ckcka7ued000vglpv158erttw"
  }
}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "eventDeletion": {
    "id": "ckcka7ued000vglpv158erttw"
  }
}</code></pre></div><div class="tab-pane httpAuth"><pre><code>curl -i -X DELETE "https://<span class="api-curl">${username}.pryv.me</span>/events/ckcka7ued000vglpv158erttw?auth=${token}"</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 1.5.18

{
  "eventDeletion": {
    "id": "ckcka7ued000vglpv158erttw"
  }
}

</code></pre></div></div></div></aside></section></section><!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="methods-hfs"><h2 id="hf-events">HF events</h2>
<div class="content"><div class="meta"><span onclick="location='/concepts/#entreprise-license-open-source-license'" class="label entreprise-only">Entreprise license only</span><text>&nbsp;</text></div><div class="intro"><p>Methods to manipulate high-frequency data through HF events and <a href="#data-structure-high-frequency-series">HF series</a>.</p>
</div></div><!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="methods-hfs-hfs-create" class="method"> <h3 id="create-hf-event">Create HF event</h3>
<div class="content"><div class="meta"><span onclick="location='/concepts/#entreprise-license-open-source-license'" class="entreprise-tag"><span title="Entreprise License Only" class="label">Y</span></span><span class="method-id"><span class="label">id</span><span class="label-value"><code>hfs.create</code></span></span><span class="http"><span class="label">HTTP</span><span class="label-value"><code>POST /events</code></span></span></div><div class="intro"><p>Creates a new event that will be holding <a href="#data-structure-high-frequency-series">HF series</a>.</p>
</div><h4 id="parameters">Parameters</h4>
<p>The new event&#39;s data: see <a href="#data-structure-event">Event</a>.</p>
<p>The content of HF events is read-only, so you should not provide any content.
However, the event type should correspond to the type of the data points in the series, prefixed with <code>series:</code>.
For example, to store HF series of <code>mass/kg</code> data points, the type of the holder event should be <code>series:mass/kg</code>.</p>
<h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>201 Created</code></span></span><table class="definitions"><tr><th><code>event</code></th><td><div class="header"><span class="type"><a href="#data-structure-event">event</a></span></div><div class="description"><p>The created event.</p>
</div></td></tr></table><h4 id="specific-errors">Specific errors</h4>
<table class="definitions"><tr><th><code>invalid-operation</code></th><td><div class="header"><span class="http"><span class="label">HTTP</span><span class="label-value"><code>400</code></span></span></div><div class="description"><p>The referenced stream is in the trash, and we prevent the recording of new events into trashed streams.</p>
</div></td></tr><tr><th><code>invalid-parameters-format</code></th><td><div class="header"><span class="http"><span class="label">HTTP</span><span class="label-value"><code>400</code></span></span></div><div class="description"><p>The event content&#39;s format is invalid. Events of type High-frequency have a read-only content.</p>
</div></td></tr></table></div><aside><div class="example"><p>Creating a new HF event that will hold HF series</p>
<div class="tab-content"><div class="tab-pane json active"><pre><code>{
  "streamIds": [
    "position"
  ],
  "type": "series:position/wgs84"
}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "event": {
    "id": "ckcka7ued0013glpvgl9hs55k",
    "time": 1594631155.621,
    "streamIds": [
      "position"
    ],
    "streamId": "position",
    "tags": [],
    "type": "series:position/wgs84",
    "content": {
      "elementType": "position/wgs84",
      "fields": [
        "deltaTime",
        "latitude",
        "longitude",
        "altitude",
        "horizontalAccuracy",
        "verticalAccuracy",
        "speed",
        "bearing"
      ],
      "required": [
        "deltaTime",
        "latitude",
        "longitude"
      ]
    },
    "created": 1594631155.621,
    "createdBy": "ckcka7ucn0001glpvjku7747i",
    "modified": 1594631155.621,
    "modifiedBy": "ckcka7ucn0001glpvjku7747i"
  }
}</code></pre></div><div class="tab-pane http"><pre><code>curl -i -X POST -H 'Content-Type: application/json' -d '{"streamIds":["position"],"type":"series:position/wgs84"}' "https://${token}@<span class="api-curl">${username}.pryv.me</span>/events"</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 201 Created
Content-Type: application/json; charset=utf-8
API-Version: 1.5.18

{
  "event": {
    "id": "ckcka7ued0013glpvgl9hs55k",
    "time": 1594631155.621,
    "streamIds": [
      "position"
    ],
    "streamId": "position",
    "tags": [],
    "type": "series:position/wgs84",
    "content": {
      "elementType": "position/wgs84",
      "fields": [
        "deltaTime",
        "latitude",
        "longitude",
        "altitude",
        "horizontalAccuracy",
        "verticalAccuracy",
        "speed",
        "bearing"
      ],
      "required": [
        "deltaTime",
        "latitude",
        "longitude"
      ]
    },
    "created": 1594631155.621,
    "createdBy": "ckcka7ucn0001glpvjku7747i",
    "modified": 1594631155.621,
    "modifiedBy": "ckcka7ucn0001glpvjku7747i"
  }
}
</code></pre></div><div class="tab-pane sockets"><pre><code>socket.emit('hfs.create', {"streamIds":["position"],"type":"series:position/wgs84"}, callback);</code></pre><div class="step-marker">⬇</div><pre><code>{
  "event": {
    "id": "ckcka7ued0013glpvgl9hs55k",
    "time": 1594631155.621,
    "streamIds": [
      "position"
    ],
    "streamId": "position",
    "tags": [],
    "type": "series:position/wgs84",
    "content": {
      "elementType": "position/wgs84",
      "fields": [
        "deltaTime",
        "latitude",
        "longitude",
        "altitude",
        "horizontalAccuracy",
        "verticalAccuracy",
        "speed",
        "bearing"
      ],
      "required": [
        "deltaTime",
        "latitude",
        "longitude"
      ]
    },
    "created": 1594631155.621,
    "createdBy": "ckcka7ucn0001glpvjku7747i",
    "modified": 1594631155.621,
    "modifiedBy": "ckcka7ucn0001glpvjku7747i"
  }
}</code></pre></div><div class="tab-pane batch"><pre><code>{
  "method": "hfs.create",
  "params": {
    "streamIds": [
      "position"
    ],
    "type": "series:position/wgs84"
  }
}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "event": {
    "id": "ckcka7ued0013glpvgl9hs55k",
    "time": 1594631155.621,
    "streamIds": [
      "position"
    ],
    "streamId": "position",
    "tags": [],
    "type": "series:position/wgs84",
    "content": {
      "elementType": "position/wgs84",
      "fields": [
        "deltaTime",
        "latitude",
        "longitude",
        "altitude",
        "horizontalAccuracy",
        "verticalAccuracy",
        "speed",
        "bearing"
      ],
      "required": [
        "deltaTime",
        "latitude",
        "longitude"
      ]
    },
    "created": 1594631155.621,
    "createdBy": "ckcka7ucn0001glpvjku7747i",
    "modified": 1594631155.621,
    "modifiedBy": "ckcka7ucn0001glpvjku7747i"
  }
}</code></pre></div><div class="tab-pane httpAuth"><pre><code>curl -i -X POST -H 'Content-Type: application/json' -d '{"streamIds":["position"],"type":"series:position/wgs84"}' "https://<span class="api-curl">${username}.pryv.me</span>/events?auth=${token}"</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 201 Created
Content-Type: application/json; charset=utf-8
API-Version: 1.5.18

{
  "event": {
    "id": "ckcka7ued0013glpvgl9hs55k",
    "time": 1594631155.621,
    "streamIds": [
      "position"
    ],
    "streamId": "position",
    "tags": [],
    "type": "series:position/wgs84",
    "content": {
      "elementType": "position/wgs84",
      "fields": [
        "deltaTime",
        "latitude",
        "longitude",
        "altitude",
        "horizontalAccuracy",
        "verticalAccuracy",
        "speed",
        "bearing"
      ],
      "required": [
        "deltaTime",
        "latitude",
        "longitude"
      ]
    },
    "created": 1594631155.621,
    "createdBy": "ckcka7ucn0001glpvjku7747i",
    "modified": 1594631155.621,
    "modifiedBy": "ckcka7ucn0001glpvjku7747i"
  }
}

</code></pre></div></div></div></aside></section><!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="methods-hfs-hfs-get" class="method"> <h3 id="get-hf-series-data-points">Get HF series data points</h3>
<div class="content"><div class="meta"><span onclick="location='/concepts/#entreprise-license-open-source-license'" class="entreprise-tag"><span title="Entreprise License Only" class="label">Y</span></span><span class="http"><span class="label">HTTP-only</span><span class="label-value"><code>GET /events/{id}/series</code></span></span></div><div class="intro"><p>Retrieves HF series data points from a HF event.
Returns data in order of ascending deltaTime between &quot;fromTime&quot; and &quot;toTime&quot;.
Data is returned as input, no sampling or aggregation is performed.</p>
</div><h4 id="parameters">Parameters</h4>
<table class="definitions"><tr><th><code>fromDeltaTime</code></th><td><div class="header"><span class="type"><a href="#data-structure-timestamp">timestamp</a></span><span class="label label-default optional">optional</span></div><div class="description"><p>Only returns data points later than this deltaTime. If no value is given the query will return data starting at the earliest deltaTime in the series.</p>
</div></td></tr><tr><th><code>toDeltaTime</code></th><td><div class="header"><span class="type"><a href="#data-structure-timestamp">timestamp</a></span><span class="label label-default optional">optional</span></div><div class="description"><p>Only returns data points earlier than this deltaTime. If no value is given the server will return only data that is in the past.</p>
</div></td></tr></table><h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>200 OK</code></span></span><p>The <a href="#data-structure-high-frequency-series">HF series data points</a>.</p>
</div><aside><div class="example"><p>Retrieving HF series data points from a HF event</p>
<div class="tab-content"><div class="tab-pane json active"><pre><code>{}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "format": "flatJSON",
  "fields": [
    "deltaTime",
    "latitude",
    "longitude",
    "altitude"
  ],
  "points": [
    [
      0,
      10.2,
      11.2,
      500
    ],
    [
      1,
      10.2,
      11.2,
      510
    ],
    [
      2,
      10.2,
      11.2,
      520
    ]
  ]
}</code></pre></div><div class="tab-pane http"><pre><code>curl -i "https://${token}@<span class="api-curl">${username}.pryv.me</span>/events/${id}/series"</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 1.5.18

{
  "format": "flatJSON",
  "fields": [
    "deltaTime",
    "latitude",
    "longitude",
    "altitude"
  ],
  "points": [
    [
      0,
      10.2,
      11.2,
      500
    ],
    [
      1,
      10.2,
      11.2,
      510
    ],
    [
      2,
      10.2,
      11.2,
      520
    ]
  ]
}
</code></pre></div><div class="tab-pane sockets"><pre>Only available for HTTP REST</pre></div><div class="tab-pane batch"><pre>Only available for HTTP REST</pre></div><div class="tab-pane httpAuth"><pre><code>curl -i "https://<span class="api-curl">${username}.pryv.me</span>/events/${id}/series?auth=${token}"</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 1.5.18

{
  "format": "flatJSON",
  "fields": [
    "deltaTime",
    "latitude",
    "longitude",
    "altitude"
  ],
  "points": [
    [
      0,
      10.2,
      11.2,
      500
    ],
    [
      1,
      10.2,
      11.2,
      510
    ],
    [
      2,
      10.2,
      11.2,
      520
    ]
  ]
}

</code></pre></div></div></div></aside></section><!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="methods-hfs-hfs-add" class="method"> <h3 id="add-hf-series-data-points">Add HF series data points</h3>
<div class="content"><div class="meta"><span onclick="location='/concepts/#entreprise-license-open-source-license'" class="entreprise-tag"><span title="Entreprise License Only" class="label">Y</span></span><span class="http"><span class="label">HTTP-only</span><span class="label-value"><code>POST /events/{id}/series</code></span></span></div><div class="intro"><p>Adds new HF series data points to a HF event.</p>
<p>The HF series data will only store one set of values for any given deltaTime. This means you can update existing data points by &#39;adding&#39; new data with the original deltaTime.  </p>
</div><h4 id="parameters">Parameters</h4>
<p>The new HF series data point(s), see <a href="#data-structure-high-frequency-series">HF series</a>.</p>
<h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>200 OK</code></span></span><table class="definitions"><tr><th><code>status</code></th><td><div class="header"><span class="type">string</span></div><div class="description"><p>The string &quot;ok&quot;.</p>
</div></td></tr></table><h4 id="specific-errors">Specific errors</h4>
<table class="definitions"><tr><th><code>invalid-operation</code></th><td><div class="header"><span class="http"><span class="label">HTTP</span><span class="label-value"><code>400</code></span></span></div><div class="description"><p>The event is not a HF event.</p>
</div></td></tr><tr><th><code>invalid-operation</code></th><td><div class="header"><span class="http"><span class="label">HTTP</span><span class="label-value"><code>400</code></span></span></div><div class="description"><p>The referenced HF event is in the trash, and we prevent the recording of new data points into trashed events.</p>
</div></td></tr></table></div><aside><div class="example"><p>Adding new HF series data points to a HF event</p>
<div class="tab-content"><div class="tab-pane json active"><pre><code>{
  "format": "flatJSON",
  "fields": [
    "deltaTime",
    "latitude",
    "longitude",
    "altitude"
  ],
  "points": [
    [
      0,
      10.2,
      11.2,
      500
    ],
    [
      1,
      10.2,
      11.2,
      510
    ],
    [
      2,
      10.2,
      11.2,
      520
    ]
  ]
}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "status": "ok"
}</code></pre></div><div class="tab-pane http"><pre><code>curl -i -X POST -H 'Content-Type: application/json' -d '{"format":"flatJSON","fields":["deltaTime","latitude","longitude","altitude"],"points":[[0,10.2,11.2,500],[1,10.2,11.2,510],[2,10.2,11.2,520]]}' "https://${token}@<span class="api-curl">${username}.pryv.me</span>/events/${id}/series"</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 1.5.18

{
  "status": "ok"
}
</code></pre></div><div class="tab-pane sockets"><pre>Only available for HTTP REST</pre></div><div class="tab-pane batch"><pre>Only available for HTTP REST</pre></div><div class="tab-pane httpAuth"><pre><code>curl -i -X POST -H 'Content-Type: application/json' -d '{"format":"flatJSON","fields":["deltaTime","latitude","longitude","altitude"],"points":[[0,10.2,11.2,500],[1,10.2,11.2,510],[2,10.2,11.2,520]]}' "https://<span class="api-curl">${username}.pryv.me</span>/events/${id}/series?auth=${token}"</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 1.5.18

{
  "status": "ok"
}

</code></pre></div></div></div></aside></section><!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="methods-hfs-hfs-addBatch" class="method"> <h3 id="add-hf-series-batch">Add HF series batch</h3>
<div class="content"><div class="meta"><span onclick="location='/concepts/#entreprise-license-open-source-license'" class="entreprise-tag"><span title="Entreprise License Only" class="label">Y</span></span><span class="http"><span class="label">HTTP-only</span><span class="label-value"><code>POST /series/batch</code></span></span></div><div class="intro"><p>Adds data to multiple HF series (stored in multiple HF events) in a single atomic operation. This is the fastest way to append data to Pryv; it allows transferring many data points in a single request.</p>
<p>For this operation to be successful, all of the following conditions must be fulfilled:</p>
<ul>
<li>The access token needs write permissions to all series identified by &quot;eventId&quot;.</li>
<li>All events referred to must be HF events (type starts with the string &quot;series:&quot;).</li>
<li>Fields identified in each individual message must match those specified by the type of the HF event; there must be no duplicates.</li>
<li>All the values in every data point must conform to the type specification.</li>
</ul>
<p>If any part of the batch message is invalid, the entire batch is aborted and the returned result body identifies the error.</p>
</div><h4 id="parameters">Parameters</h4>
<table class="definitions"><tr><th><code>format</code></th><td><div class="header"><span class="type">string</span></div><div class="description"><p>The format string &quot;seriesBatch&quot;.</p>
</div></td></tr><tr><th><code>data</code></th><td><div class="header"><span class="type">array</span></div><div class="description"><p>Array of batch entries. Each batch entry is defined as follows:</p>
</div><table class="definitions"><tr><th><code>eventId</code></th><td><div class="header"><span class="type">string</span></div><div class="description"><p>The id of the HF event.</p>
</div></td></tr><tr><th><code>data</code></th><td><div class="header"><span class="type">object</span></div><div class="description"><p>HF series data to add to the HF event.</p>
</div></td></tr></table></td></tr></table><h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>201 Created</code></span></span><table class="definitions"><tr><th><code>status</code></th><td><div class="header"><span class="type">string</span></div><div class="description"><p>The string &quot;ok&quot;.</p>
</div></td></tr></table><h4 id="specific-errors">Specific errors</h4>
<table class="definitions"><tr><th><code>invalid-request-structure</code></th><td><div class="header"><span class="http"><span class="label">HTTP</span><span class="label-value"><code>400</code></span></span></div><div class="description"><p>The request was malformed and could not be executed. The entire operation was aborted.</p>
</div></td></tr></table></div><aside><div class="example"><p>Adding a batch of HF series data to multiple HF events</p>
<div class="tab-content"><div class="tab-pane json active"><pre><code>{
  "format": "seriesBatch",
  "data": [
    {
      "eventId": "ckcka7ued0014glpve37zkuer",
      "data": {
        "format": "flatJSON",
        "fields": [
          "deltaTime",
          "value"
        ],
        "points": [
          [
            0,
            70
          ],
          [
            1,
            71
          ],
          [
            2,
            72
          ]
        ]
      }
    },
    {
      "eventId": "ckcka7ued0015glpvbbjrcqlm",
      "data": {
        "format": "flatJSON",
        "fields": [
          "deltaTime",
          "latitude",
          "longitude",
          "altitude"
        ],
        "points": [
          [
            0,
            10.2,
            11.2,
            500
          ],
          [
            2,
            10.2,
            11.2,
            510
          ],
          [
            1,
            10.2,
            11.2,
            520
          ]
        ]
      }
    }
  ]
}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "status": "ok"
}</code></pre></div><div class="tab-pane http"><pre><code>curl -i -X POST -H 'Content-Type: application/json' -d '{"format":"seriesBatch","data":[{"eventId":"ckcka7ued0014glpve37zkuer","data":{"format":"flatJSON","fields":["deltaTime","value"],"points":[[0,70],[1,71],[2,72]]}},{"eventId":"ckcka7ued0015glpvbbjrcqlm","data":{"format":"flatJSON","fields":["deltaTime","latitude","longitude","altitude"],"points":[[0,10.2,11.2,500],[2,10.2,11.2,510],[1,10.2,11.2,520]]}}]}' "https://${token}@<span class="api-curl">${username}.pryv.me</span>/series/batch"</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 201 Created
Content-Type: application/json; charset=utf-8
API-Version: 1.5.18

{
  "status": "ok"
}
</code></pre></div><div class="tab-pane sockets"><pre>Only available for HTTP REST</pre></div><div class="tab-pane batch"><pre>Only available for HTTP REST</pre></div><div class="tab-pane httpAuth"><pre><code>curl -i -X POST -H 'Content-Type: application/json' -d '{"format":"seriesBatch","data":[{"eventId":"ckcka7ued0014glpve37zkuer","data":{"format":"flatJSON","fields":["deltaTime","value"],"points":[[0,70],[1,71],[2,72]]}},{"eventId":"ckcka7ued0015glpvbbjrcqlm","data":{"format":"flatJSON","fields":["deltaTime","latitude","longitude","altitude"],"points":[[0,10.2,11.2,500],[2,10.2,11.2,510],[1,10.2,11.2,520]]}}]}' "https://<span class="api-curl">${username}.pryv.me</span>/series/batch?auth=${token}"</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 201 Created
Content-Type: application/json; charset=utf-8
API-Version: 1.5.18

{
  "status": "ok"
}

</code></pre></div></div></div></aside></section><!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="methods-hfs-hfs-update" class="method"> <h3 id="update-hf-event">Update HF event</h3>
<div class="content"><div class="meta"><span onclick="location='/concepts/#entreprise-license-open-source-license'" class="entreprise-tag"><span title="Entreprise License Only" class="label">Y</span></span><span class="method-id"><span class="label">id</span><span class="label-value"><code>hfs.update</code></span></span><span class="http"><span class="label">HTTP</span><span class="label-value"><code>PUT /events/{id}</code></span></span></div><div class="intro"><p>Similar to the standard <a href="#methods-events-events-update">Update event</a> method.</p>
<p>You may update all non read-only fields, except <code>content</code> which is read-only for HF events.</p>
</div><h4 id="specific-errors">Specific errors</h4>
<table class="definitions"><tr><th><code>invalid-parameters-format</code></th><td><div class="header"><span class="http"><span class="label">HTTP</span><span class="label-value"><code>400</code></span></span></div><div class="description"><p>The event content&#39;s format is invalid. Events of type High-frequency have a read-only content.</p>
</div></td></tr></table></div></section><!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="methods-hfs-hfs-delete" class="method"> <h3 id="delete-hf-event">Delete HF event</h3>
<div class="content"><div class="meta"><span onclick="location='/concepts/#entreprise-license-open-source-license'" class="entreprise-tag"><span title="Entreprise License Only" class="label">Y</span></span><span class="method-id"><span class="label">id</span><span class="label-value"><code>hfs.delete</code></span></span><span class="http"><span class="label">HTTP</span><span class="label-value"><code>DELETE /events/{id}</code></span></span></div><div class="intro"><p>Similar to the standard <a href="#methods-events-events-delete">Delete event</a> method.</p>
</div></div></section></section><!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="methods-streams"><h2 id="streams">Streams</h2>
<div class="content"><div class="meta"></div><div class="intro"><p>Methods to retrieve and manipulate <a href="#data-structure-stream">streams</a>.</p>
</div></div><!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="methods-streams-streams-get" class="method"> <h3 id="get-streams">Get streams</h3>
<div class="content"><div class="meta"><span class="method-id"><span class="label">id</span><span class="label-value"><code>streams.get</code></span></span><span class="http"><span class="label">HTTP</span><span class="label-value"><code>GET /streams</code></span></span></div><div class="intro"><p>Gets the accessible streams hierarchy.</p>
</div><h4 id="parameters">Parameters</h4>
<table class="definitions"><tr><th><code>parentId</code></th><td><div class="header"><span class="type"><a href="#data-structure-identifier">identifier</a></span><span class="label label-default optional">optional</span></div><div class="description"><p>The id of the parent stream from which to retrieve streams. Default: <code>null</code> (returns all accessible streams from the root level).</p>
</div></td></tr><tr><th><code>state</code></th><td><div class="header"><span class="type"><code>default</code>|<code>all</code></span><span class="label label-default optional">optional</span></div><div class="description"><p>By default, only items that are not in the trash are returned; <code>all</code> return all items regardless of their state.</p>
</div></td></tr><tr><th><code>includeDeletionsSince</code></th><td><div class="header"><span class="type"><a href="#data-structure-timestamp">timestamp</a></span><span class="label label-default optional">optional</span></div><div class="description"><p>Whether to include stream deletions since that time for sync purposes.</p>
</div></td></tr></table><h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>200 OK</code></span></span><table class="definitions"><tr><th><code>streams</code></th><td><div class="header"><span class="type">array of <a href="#data-structure-stream">streams</a></span></div><div class="description"><p>The tree of the accessible streams, sorted by name.</p>
</div></td></tr><tr><th><code>streamDeletions</code></th><td><div class="header"><span class="type">array of <a href="#data-structure-item-deletion">item deletions</a></span><span class="label label-default optional">optional</span></div><div class="description"><p>If requested by <code>includeDeletionsSince</code>, the stream deletions since then, ordered by deletion time.</p>
</div></td></tr></table></div><aside><div class="example"><p>Retrieving streams for work activities</p>
<div class="tab-content"><div class="tab-pane json active"><pre><code>{
  "parentId": "work"
}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "streams": [
    {
      "id": "ckcka7uec000dglpviyhg4q4k",
      "name": "Noble Works Co.",
      "parentId": "work",
      "children": [
        {
          "id": "ckcka7uec000fglpvnppbgrjc",
          "name": "Last Be First",
          "parentId": "ckcka7uec000dglpviyhg4q4k",
          "children": [],
          "created": 1531517278.3606942,
          "createdBy": "ckcka7ucm0000glpvlbfb25cq",
          "modified": 1531517602.3408291,
          "modifiedBy": "ckcka7ucm0000glpvlbfb25cq"
        },
        {
          "id": "ckcka7uec000gglpv3z0kxsds",
          "name": "Big Tree",
          "parentId": "ckcka7uec000dglpviyhg4q4k",
          "children": [],
          "created": 1531517278.3606942,
          "createdBy": "ckcka7ucm0000glpvlbfb25cq",
          "modified": 1531517626.6119955,
          "modifiedBy": "ckcka7ucm0000glpvlbfb25cq"
        },
        {
          "id": "ckcka7uec000hglpvbtih812c",
          "name": "Inner Light",
          "parentId": "ckcka7uec000dglpviyhg4q4k",
          "children": [],
          "created": 1531517278.3606942,
          "createdBy": "ckcka7ucm0000glpvlbfb25cq",
          "modified": 1531517321.6621404,
          "modifiedBy": "ckcka7ucm0000glpvlbfb25cq"
        }
      ],
      "created": 1531517251.662731,
      "createdBy": "ckcka7ucm0000glpvlbfb25cq",
      "modified": 1531517418.970824,
      "modifiedBy": "ckcka7ucm0000glpvlbfb25cq"
    },
    {
      "id": "ckcka7uec000eglpvv9bn365g",
      "name": "Freelancing",
      "parentId": "work",
      "children": [
        {
          "id": "ckcka7uec000iglpv4cya9jf0",
          "name": "Funky Veggies",
          "parentId": "ckcka7uec000eglpvv9bn365g",
          "children": [],
          "created": 1531517256.6116288,
          "createdBy": "ckcka7ucm0000glpvlbfb25cq",
          "modified": 1531517573.670404,
          "modifiedBy": "ckcka7ucm0000glpvlbfb25cq"
        },
        {
          "id": "ckcka7uec000jglpv8crm7uwn",
          "name": "Jojo Lapin & sons",
          "parentId": "ckcka7uec000eglpvv9bn365g",
          "children": [],
          "created": 1531517256.6116288,
          "createdBy": "ckcka7ucm0000glpvlbfb25cq",
          "modified": 1531517271.9234285,
          "modifiedBy": "ckcka7ucm0000glpvlbfb25cq"
        }
      ],
      "created": 1531517251.662731,
      "createdBy": "ckcka7ucm0000glpvlbfb25cq",
      "modified": 1531517458.2126117,
      "modifiedBy": "ckcka7ucm0000glpvlbfb25cq"
    }
  ]
}</code></pre></div><div class="tab-pane http"><pre><code>curl -i "https://${token}@<span class="api-curl">${username}.pryv.me</span>/streams&parentId=work"</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 1.5.18

{
  "streams": [
    {
      "id": "ckcka7uec000dglpviyhg4q4k",
      "name": "Noble Works Co.",
      "parentId": "work",
      "children": [
        {
          "id": "ckcka7uec000fglpvnppbgrjc",
          "name": "Last Be First",
          "parentId": "ckcka7uec000dglpviyhg4q4k",
          "children": [],
          "created": 1531517278.3606942,
          "createdBy": "ckcka7ucm0000glpvlbfb25cq",
          "modified": 1531517602.3408291,
          "modifiedBy": "ckcka7ucm0000glpvlbfb25cq"
        },
        {
          "id": "ckcka7uec000gglpv3z0kxsds",
          "name": "Big Tree",
          "parentId": "ckcka7uec000dglpviyhg4q4k",
          "children": [],
          "created": 1531517278.3606942,
          "createdBy": "ckcka7ucm0000glpvlbfb25cq",
          "modified": 1531517626.6119955,
          "modifiedBy": "ckcka7ucm0000glpvlbfb25cq"
        },
        {
          "id": "ckcka7uec000hglpvbtih812c",
          "name": "Inner Light",
          "parentId": "ckcka7uec000dglpviyhg4q4k",
          "children": [],
          "created": 1531517278.3606942,
          "createdBy": "ckcka7ucm0000glpvlbfb25cq",
          "modified": 1531517321.6621404,
          "modifiedBy": "ckcka7ucm0000glpvlbfb25cq"
        }
      ],
      "created": 1531517251.662731,
      "createdBy": "ckcka7ucm0000glpvlbfb25cq",
      "modified": 1531517418.970824,
      "modifiedBy": "ckcka7ucm0000glpvlbfb25cq"
    },
    {
      "id": "ckcka7uec000eglpvv9bn365g",
      "name": "Freelancing",
      "parentId": "work",
      "children": [
        {
          "id": "ckcka7uec000iglpv4cya9jf0",
          "name": "Funky Veggies",
          "parentId": "ckcka7uec000eglpvv9bn365g",
          "children": [],
          "created": 1531517256.6116288,
          "createdBy": "ckcka7ucm0000glpvlbfb25cq",
          "modified": 1531517573.670404,
          "modifiedBy": "ckcka7ucm0000glpvlbfb25cq"
        },
        {
          "id": "ckcka7uec000jglpv8crm7uwn",
          "name": "Jojo Lapin & sons",
          "parentId": "ckcka7uec000eglpvv9bn365g",
          "children": [],
          "created": 1531517256.6116288,
          "createdBy": "ckcka7ucm0000glpvlbfb25cq",
          "modified": 1531517271.9234285,
          "modifiedBy": "ckcka7ucm0000glpvlbfb25cq"
        }
      ],
      "created": 1531517251.662731,
      "createdBy": "ckcka7ucm0000glpvlbfb25cq",
      "modified": 1531517458.2126117,
      "modifiedBy": "ckcka7ucm0000glpvlbfb25cq"
    }
  ]
}
</code></pre></div><div class="tab-pane sockets"><pre><code>socket.emit('streams.get', {"parentId":"work"}, callback);</code></pre><div class="step-marker">⬇</div><pre><code>{
  "streams": [
    {
      "id": "ckcka7uec000dglpviyhg4q4k",
      "name": "Noble Works Co.",
      "parentId": "work",
      "children": [
        {
          "id": "ckcka7uec000fglpvnppbgrjc",
          "name": "Last Be First",
          "parentId": "ckcka7uec000dglpviyhg4q4k",
          "children": [],
          "created": 1531517278.3606942,
          "createdBy": "ckcka7ucm0000glpvlbfb25cq",
          "modified": 1531517602.3408291,
          "modifiedBy": "ckcka7ucm0000glpvlbfb25cq"
        },
        {
          "id": "ckcka7uec000gglpv3z0kxsds",
          "name": "Big Tree",
          "parentId": "ckcka7uec000dglpviyhg4q4k",
          "children": [],
          "created": 1531517278.3606942,
          "createdBy": "ckcka7ucm0000glpvlbfb25cq",
          "modified": 1531517626.6119955,
          "modifiedBy": "ckcka7ucm0000glpvlbfb25cq"
        },
        {
          "id": "ckcka7uec000hglpvbtih812c",
          "name": "Inner Light",
          "parentId": "ckcka7uec000dglpviyhg4q4k",
          "children": [],
          "created": 1531517278.3606942,
          "createdBy": "ckcka7ucm0000glpvlbfb25cq",
          "modified": 1531517321.6621404,
          "modifiedBy": "ckcka7ucm0000glpvlbfb25cq"
        }
      ],
      "created": 1531517251.662731,
      "createdBy": "ckcka7ucm0000glpvlbfb25cq",
      "modified": 1531517418.970824,
      "modifiedBy": "ckcka7ucm0000glpvlbfb25cq"
    },
    {
      "id": "ckcka7uec000eglpvv9bn365g",
      "name": "Freelancing",
      "parentId": "work",
      "children": [
        {
          "id": "ckcka7uec000iglpv4cya9jf0",
          "name": "Funky Veggies",
          "parentId": "ckcka7uec000eglpvv9bn365g",
          "children": [],
          "created": 1531517256.6116288,
          "createdBy": "ckcka7ucm0000glpvlbfb25cq",
          "modified": 1531517573.670404,
          "modifiedBy": "ckcka7ucm0000glpvlbfb25cq"
        },
        {
          "id": "ckcka7uec000jglpv8crm7uwn",
          "name": "Jojo Lapin & sons",
          "parentId": "ckcka7uec000eglpvv9bn365g",
          "children": [],
          "created": 1531517256.6116288,
          "createdBy": "ckcka7ucm0000glpvlbfb25cq",
          "modified": 1531517271.9234285,
          "modifiedBy": "ckcka7ucm0000glpvlbfb25cq"
        }
      ],
      "created": 1531517251.662731,
      "createdBy": "ckcka7ucm0000glpvlbfb25cq",
      "modified": 1531517458.2126117,
      "modifiedBy": "ckcka7ucm0000glpvlbfb25cq"
    }
  ]
}</code></pre></div><div class="tab-pane batch"><pre><code>{
  "method": "streams.get",
  "params": {
    "parentId": "work"
  }
}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "streams": [
    {
      "id": "ckcka7uec000dglpviyhg4q4k",
      "name": "Noble Works Co.",
      "parentId": "work",
      "children": [
        {
          "id": "ckcka7uec000fglpvnppbgrjc",
          "name": "Last Be First",
          "parentId": "ckcka7uec000dglpviyhg4q4k",
          "children": [],
          "created": 1531517278.3606942,
          "createdBy": "ckcka7ucm0000glpvlbfb25cq",
          "modified": 1531517602.3408291,
          "modifiedBy": "ckcka7ucm0000glpvlbfb25cq"
        },
        {
          "id": "ckcka7uec000gglpv3z0kxsds",
          "name": "Big Tree",
          "parentId": "ckcka7uec000dglpviyhg4q4k",
          "children": [],
          "created": 1531517278.3606942,
          "createdBy": "ckcka7ucm0000glpvlbfb25cq",
          "modified": 1531517626.6119955,
          "modifiedBy": "ckcka7ucm0000glpvlbfb25cq"
        },
        {
          "id": "ckcka7uec000hglpvbtih812c",
          "name": "Inner Light",
          "parentId": "ckcka7uec000dglpviyhg4q4k",
          "children": [],
          "created": 1531517278.3606942,
          "createdBy": "ckcka7ucm0000glpvlbfb25cq",
          "modified": 1531517321.6621404,
          "modifiedBy": "ckcka7ucm0000glpvlbfb25cq"
        }
      ],
      "created": 1531517251.662731,
      "createdBy": "ckcka7ucm0000glpvlbfb25cq",
      "modified": 1531517418.970824,
      "modifiedBy": "ckcka7ucm0000glpvlbfb25cq"
    },
    {
      "id": "ckcka7uec000eglpvv9bn365g",
      "name": "Freelancing",
      "parentId": "work",
      "children": [
        {
          "id": "ckcka7uec000iglpv4cya9jf0",
          "name": "Funky Veggies",
          "parentId": "ckcka7uec000eglpvv9bn365g",
          "children": [],
          "created": 1531517256.6116288,
          "createdBy": "ckcka7ucm0000glpvlbfb25cq",
          "modified": 1531517573.670404,
          "modifiedBy": "ckcka7ucm0000glpvlbfb25cq"
        },
        {
          "id": "ckcka7uec000jglpv8crm7uwn",
          "name": "Jojo Lapin & sons",
          "parentId": "ckcka7uec000eglpvv9bn365g",
          "children": [],
          "created": 1531517256.6116288,
          "createdBy": "ckcka7ucm0000glpvlbfb25cq",
          "modified": 1531517271.9234285,
          "modifiedBy": "ckcka7ucm0000glpvlbfb25cq"
        }
      ],
      "created": 1531517251.662731,
      "createdBy": "ckcka7ucm0000glpvlbfb25cq",
      "modified": 1531517458.2126117,
      "modifiedBy": "ckcka7ucm0000glpvlbfb25cq"
    }
  ]
}</code></pre></div><div class="tab-pane httpAuth"><pre><code>curl -i "https://<span class="api-curl">${username}.pryv.me</span>/streams?auth=${token}&parentId=work"</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 1.5.18

{
  "streams": [
    {
      "id": "ckcka7uec000dglpviyhg4q4k",
      "name": "Noble Works Co.",
      "parentId": "work",
      "children": [
        {
          "id": "ckcka7uec000fglpvnppbgrjc",
          "name": "Last Be First",
          "parentId": "ckcka7uec000dglpviyhg4q4k",
          "children": [],
          "created": 1531517278.3606942,
          "createdBy": "ckcka7ucm0000glpvlbfb25cq",
          "modified": 1531517602.3408291,
          "modifiedBy": "ckcka7ucm0000glpvlbfb25cq"
        },
        {
          "id": "ckcka7uec000gglpv3z0kxsds",
          "name": "Big Tree",
          "parentId": "ckcka7uec000dglpviyhg4q4k",
          "children": [],
          "created": 1531517278.3606942,
          "createdBy": "ckcka7ucm0000glpvlbfb25cq",
          "modified": 1531517626.6119955,
          "modifiedBy": "ckcka7ucm0000glpvlbfb25cq"
        },
        {
          "id": "ckcka7uec000hglpvbtih812c",
          "name": "Inner Light",
          "parentId": "ckcka7uec000dglpviyhg4q4k",
          "children": [],
          "created": 1531517278.3606942,
          "createdBy": "ckcka7ucm0000glpvlbfb25cq",
          "modified": 1531517321.6621404,
          "modifiedBy": "ckcka7ucm0000glpvlbfb25cq"
        }
      ],
      "created": 1531517251.662731,
      "createdBy": "ckcka7ucm0000glpvlbfb25cq",
      "modified": 1531517418.970824,
      "modifiedBy": "ckcka7ucm0000glpvlbfb25cq"
    },
    {
      "id": "ckcka7uec000eglpvv9bn365g",
      "name": "Freelancing",
      "parentId": "work",
      "children": [
        {
          "id": "ckcka7uec000iglpv4cya9jf0",
          "name": "Funky Veggies",
          "parentId": "ckcka7uec000eglpvv9bn365g",
          "children": [],
          "created": 1531517256.6116288,
          "createdBy": "ckcka7ucm0000glpvlbfb25cq",
          "modified": 1531517573.670404,
          "modifiedBy": "ckcka7ucm0000glpvlbfb25cq"
        },
        {
          "id": "ckcka7uec000jglpv8crm7uwn",
          "name": "Jojo Lapin & sons",
          "parentId": "ckcka7uec000eglpvv9bn365g",
          "children": [],
          "created": 1531517256.6116288,
          "createdBy": "ckcka7ucm0000glpvlbfb25cq",
          "modified": 1531517271.9234285,
          "modifiedBy": "ckcka7ucm0000glpvlbfb25cq"
        }
      ],
      "created": 1531517251.662731,
      "createdBy": "ckcka7ucm0000glpvlbfb25cq",
      "modified": 1531517458.2126117,
      "modifiedBy": "ckcka7ucm0000glpvlbfb25cq"
    }
  ]
}

</code></pre></div></div></div></aside></section><!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="methods-streams-streams-create" class="method"> <h3 id="create-stream">Create stream</h3>
<div class="content"><div class="meta"><span class="method-id"><span class="label">id</span><span class="label-value"><code>streams.create</code></span></span><span class="http"><span class="label">HTTP</span><span class="label-value"><code>POST /streams</code></span></span></div><div class="intro"><p>Creates a new stream.</p>
</div><h4 id="parameters">Parameters</h4>
<p>The new stream&#39;s data: see <a href="#data-structure-stream">stream</a>.</p>
<h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>201 Created</code></span></span><table class="definitions"><tr><th><code>stream</code></th><td><div class="header"><span class="type"><a href="#data-structure-stream">stream</a></span></div><div class="description"><p>The created stream.</p>
</div></td></tr></table><h4 id="specific-errors">Specific errors</h4>
<table class="definitions"><tr><th><code>item-already-exists</code></th><td><div class="header"><span class="http"><span class="label">HTTP</span><span class="label-value"><code>400</code></span></span></div><div class="description"><p>A similar stream already exists. The error&#39;s <code>data</code> contains the conflicting properties.</p>
</div></td></tr><tr><th><code>invalid-item-id</code></th><td><div class="header"><span class="http"><span class="label">HTTP</span><span class="label-value"><code>400</code></span></span></div><div class="description"><p>The specified id is invalid (e.g. it&#39;s a reserved word such as <code>null</code>).</p>
</div></td></tr></table></div><aside><div class="example"><p>Create sub-stream &#39;white-cells&#39; of &#39;blood&#39;</p>
<div class="tab-content"><div class="tab-pane json active"><pre><code>{
  "name": "White cells",
  "parentId": "blood"
}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "stream": {
    "id": "white-cells",
    "name": "White cells",
    "parentId": "blood",
    "children": [],
    "created": 1594631155.621,
    "createdBy": "ckcka7ucn0001glpvjku7747i",
    "modified": 1594631155.621,
    "modifiedBy": "ckcka7ucn0001glpvjku7747i"
  }
}</code></pre></div><div class="tab-pane http"><pre><code>curl -i -X POST -H 'Content-Type: application/json' -d '{"id":"white-cells","name":"White cells","parentId":"blood"}' "https://${token}@<span class="api-curl">${username}.pryv.me</span>/streams"</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 201 Created
Content-Type: application/json; charset=utf-8
API-Version: 1.5.18

{
  "stream": {
    "id": "white-cells",
    "name": "White cells",
    "parentId": "blood",
    "children": [],
    "created": 1594631155.621,
    "createdBy": "ckcka7ucn0001glpvjku7747i",
    "modified": 1594631155.621,
    "modifiedBy": "ckcka7ucn0001glpvjku7747i"
  }
}
</code></pre></div><div class="tab-pane sockets"><pre><code>socket.emit('streams.create', {"id":"white-cells","name":"White cells","parentId":"blood"}, callback);</code></pre><div class="step-marker">⬇</div><pre><code>{
  "stream": {
    "id": "white-cells",
    "name": "White cells",
    "parentId": "blood",
    "children": [],
    "created": 1594631155.621,
    "createdBy": "ckcka7ucn0001glpvjku7747i",
    "modified": 1594631155.621,
    "modifiedBy": "ckcka7ucn0001glpvjku7747i"
  }
}</code></pre></div><div class="tab-pane batch"><pre><code>{
  "method": "streams.create",
  "params": {
    "id": "white-cells",
    "name": "White cells",
    "parentId": "blood"
  }
}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "stream": {
    "id": "white-cells",
    "name": "White cells",
    "parentId": "blood",
    "children": [],
    "created": 1594631155.621,
    "createdBy": "ckcka7ucn0001glpvjku7747i",
    "modified": 1594631155.621,
    "modifiedBy": "ckcka7ucn0001glpvjku7747i"
  }
}</code></pre></div><div class="tab-pane httpAuth"><pre><code>curl -i -X POST -H 'Content-Type: application/json' -d '{"id":"white-cells","name":"White cells","parentId":"blood"}' "https://<span class="api-curl">${username}.pryv.me</span>/streams?auth=${token}"</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 201 Created
Content-Type: application/json; charset=utf-8
API-Version: 1.5.18

{
  "stream": {
    "id": "white-cells",
    "name": "White cells",
    "parentId": "blood",
    "children": [],
    "created": 1594631155.621,
    "createdBy": "ckcka7ucn0001glpvjku7747i",
    "modified": 1594631155.621,
    "modifiedBy": "ckcka7ucn0001glpvjku7747i"
  }
}

</code></pre></div></div></div></aside></section><!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="methods-streams-streams-update" class="method"> <h3 id="update-stream">Update stream</h3>
<div class="content"><div class="meta"><span class="method-id"><span class="label">id</span><span class="label-value"><code>streams.update</code></span></span><span class="http"><span class="label">HTTP</span><span class="label-value"><code>PUT /streams/{id}</code></span></span></div><div class="intro"><p>Modifies the stream.</p>
</div><h4 id="parameters">Parameters</h4>
<table class="definitions"><tr><th><code>id</code></th><td><div class="header"><span class="type"><a href="#data-structure-identifier">identifier</a></span><span class="http"><span class="label">HTTP</span><span class="label-value"><span>set in request path</span></span></span></div><div class="description"><p>The id of the stream.</p>
</div></td></tr><tr><th><code>update</code></th><td><div class="header"><span class="type">object</span><span class="http"><span class="label">HTTP</span><span class="label-value"><span>request body</span></span></span></div><div class="description"><p>New values for the stream&#39;s fields: see <a href="#data-structure-stream">stream</a>. All fields are optional, and only modified values must be included.</p>
</div></td></tr></table><h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>200 OK</code></span></span><table class="definitions"><tr><th><code>stream</code></th><td><div class="header"><span class="type"><a href="#data-structure-stream">stream</a></span></div><div class="description"><p>The updated stream (without child streams).</p>
</div></td></tr></table><h4 id="specific-errors">Specific errors</h4>
<table class="definitions"><tr><th><code>item-already-exists</code></th><td><div class="header"><span class="http"><span class="label">HTTP</span><span class="label-value"><code>400</code></span></span></div><div class="description"><p>A similar stream already exists. The error&#39;s <code>data</code> contains the conflicting properties.</p>
</div></td></tr></table></div><aside><div class="example"><p>Renaming a stream</p>
<div class="tab-content"><div class="tab-pane json active"><pre><code>{
  "name": "Slothing"
}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "stream": {
    "name": "Slothing",
    "modified": 1594631155.852,
    "modifiedBy": "ckcka7ucn0001glpvjku7747i",
    "id": "sport",
    "parentId": null,
    "created": 1531517251.621,
    "createdBy": "ckcka7ucm0000glpvlbfb25cq"
  }
}</code></pre></div><div class="tab-pane http"><pre><code>curl -i -X PUT -H 'Content-Type: application/json' -d '{"name":"Slothing"}' "https://${token}@<span class="api-curl">${username}.pryv.me</span>/streams/sport"</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 1.5.18

{
  "stream": {
    "name": "Slothing",
    "modified": 1594631155.852,
    "modifiedBy": "ckcka7ucn0001glpvjku7747i",
    "id": "sport",
    "parentId": null,
    "created": 1531517251.621,
    "createdBy": "ckcka7ucm0000glpvlbfb25cq"
  }
}
</code></pre></div><div class="tab-pane sockets"><pre><code>socket.emit('streams.update', {"id":"sport","update":{"name":"Slothing"}}, callback);</code></pre><div class="step-marker">⬇</div><pre><code>{
  "stream": {
    "name": "Slothing",
    "modified": 1594631155.852,
    "modifiedBy": "ckcka7ucn0001glpvjku7747i",
    "id": "sport",
    "parentId": null,
    "created": 1531517251.621,
    "createdBy": "ckcka7ucm0000glpvlbfb25cq"
  }
}</code></pre></div><div class="tab-pane batch"><pre><code>{
  "method": "streams.update",
  "params": {
    "id": "sport",
    "update": {
      "name": "Slothing"
    }
  }
}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "stream": {
    "name": "Slothing",
    "modified": 1594631155.852,
    "modifiedBy": "ckcka7ucn0001glpvjku7747i",
    "id": "sport",
    "parentId": null,
    "created": 1531517251.621,
    "createdBy": "ckcka7ucm0000glpvlbfb25cq"
  }
}</code></pre></div><div class="tab-pane httpAuth"><pre><code>curl -i -X PUT -H 'Content-Type: application/json' -d '{"name":"Slothing"}' "https://<span class="api-curl">${username}.pryv.me</span>/streams/sport?auth=${token}"</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 1.5.18

{
  "stream": {
    "name": "Slothing",
    "modified": 1594631155.852,
    "modifiedBy": "ckcka7ucn0001glpvjku7747i",
    "id": "sport",
    "parentId": null,
    "created": 1531517251.621,
    "createdBy": "ckcka7ucm0000glpvlbfb25cq"
  }
}

</code></pre></div></div></div></aside></section><!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="methods-streams-streams-delete" class="method"> <h3 id="delete-stream">Delete stream</h3>
<div class="content"><div class="meta"><span class="method-id"><span class="label">id</span><span class="label-value"><code>streams.delete</code></span></span><span class="http"><span class="label">HTTP</span><span class="label-value"><code>DELETE /streams/{id}</code></span></span></div><div class="intro"><p>Trashes or deletes the specified stream, depending on its current state:</p>
<ul>
<li>If the stream is not already in the trash, it will be moved to the trash (i.e. flagged as <code>trashed</code>)</li>
<li>If the stream is already in the trash, it will be irreversibly deleted with its descendants (if any). If events exist that refer to the deleted item(s), you must indicate how to handle them with the parameter <code>mergeEventsWithParent</code>.</li>
</ul>
</div><h4 id="parameters">Parameters</h4>
<table class="definitions"><tr><th><code>id</code></th><td><div class="header"><span class="type"><a href="#data-structure-identifier">identifier</a></span><span class="http"><span class="label">HTTP</span><span class="label-value"><span>set in request path</span></span></span></div><div class="description"><p>The id of the stream.</p>
</div></td></tr><tr><th><code>mergeEventsWithParent</code></th><td><div class="header"><span class="type"><code>true</code>|<code>false</code></span></div><div class="description"><p>Required if actually deleting the item and if it (or any of its descendants) has linked events, ignored otherwise. If <code>true</code>, the linked events will be assigned to the parent of the deleted item; if <code>false</code>, the linked events will be deleted.</p>
</div></td></tr></table><h4 id="result-trashed">Result: trashed</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>200 OK</code></span></span><table class="definitions"><tr><th><code>stream</code></th><td><div class="header"><span class="type"><a href="#data-structure-stream">stream</a></span></div><div class="description"><p>The trashed stream.</p>
</div></td></tr></table><h4 id="result-deleted">Result: deleted</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>200 OK</code></span></span><table class="definitions"><tr><th><code>streamDeletion</code></th><td><div class="header"><span class="type"><a href="#data-structure-item-deletion">item deletion</a></span></div><div class="description"><p>The stream deletion record.</p>
</div></td></tr></table></div><aside><div class="example"><p>Trashing</p>
<div class="tab-content"><div class="tab-pane json active"><pre><code>{}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "stream": {
    "trashed": true,
    "modified": 1594631155.852,
    "modifiedBy": "ckcka7ucn0001glpvjku7747i",
    "id": "weight",
    "name": "Weight",
    "parentId": "health",
    "children": [],
    "created": 1531517273.6876838,
    "createdBy": "ckcka7ucm0000glpvlbfb25cq"
  }
}</code></pre></div><div class="tab-pane http"><pre><code>curl -i -X DELETE "https://${token}@<span class="api-curl">${username}.pryv.me</span>/streams/weight"</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 1.5.18

{
  "stream": {
    "trashed": true,
    "modified": 1594631155.852,
    "modifiedBy": "ckcka7ucn0001glpvjku7747i",
    "id": "weight",
    "name": "Weight",
    "parentId": "health",
    "children": [],
    "created": 1531517273.6876838,
    "createdBy": "ckcka7ucm0000glpvlbfb25cq"
  }
}
</code></pre></div><div class="tab-pane sockets"><pre><code>socket.emit('streams.delete', {"id":"weight"}, callback);</code></pre><div class="step-marker">⬇</div><pre><code>{
  "stream": {
    "trashed": true,
    "modified": 1594631155.852,
    "modifiedBy": "ckcka7ucn0001glpvjku7747i",
    "id": "weight",
    "name": "Weight",
    "parentId": "health",
    "children": [],
    "created": 1531517273.6876838,
    "createdBy": "ckcka7ucm0000glpvlbfb25cq"
  }
}</code></pre></div><div class="tab-pane batch"><pre><code>{
  "method": "streams.delete",
  "params": {
    "id": "weight"
  }
}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "stream": {
    "trashed": true,
    "modified": 1594631155.852,
    "modifiedBy": "ckcka7ucn0001glpvjku7747i",
    "id": "weight",
    "name": "Weight",
    "parentId": "health",
    "children": [],
    "created": 1531517273.6876838,
    "createdBy": "ckcka7ucm0000glpvlbfb25cq"
  }
}</code></pre></div><div class="tab-pane httpAuth"><pre><code>curl -i -X DELETE "https://<span class="api-curl">${username}.pryv.me</span>/streams/weight?auth=${token}"</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 1.5.18

{
  "stream": {
    "trashed": true,
    "modified": 1594631155.852,
    "modifiedBy": "ckcka7ucn0001glpvjku7747i",
    "id": "weight",
    "name": "Weight",
    "parentId": "health",
    "children": [],
    "created": 1531517273.6876838,
    "createdBy": "ckcka7ucm0000glpvlbfb25cq"
  }
}

</code></pre></div></div></div><div class="example"><p>Deleting</p>
<div class="tab-content"><div class="tab-pane json active"><pre><code>{}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "streamDeletion": {
    "id": "weight"
  }
}</code></pre></div><div class="tab-pane http"><pre><code>curl -i -X DELETE "https://${token}@<span class="api-curl">${username}.pryv.me</span>/streams/weight"</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 1.5.18

{
  "streamDeletion": {
    "id": "weight"
  }
}
</code></pre></div><div class="tab-pane sockets"><pre><code>socket.emit('streams.delete', {"id":"weight"}, callback);</code></pre><div class="step-marker">⬇</div><pre><code>{
  "streamDeletion": {
    "id": "weight"
  }
}</code></pre></div><div class="tab-pane batch"><pre><code>{
  "method": "streams.delete",
  "params": {
    "id": "weight"
  }
}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "streamDeletion": {
    "id": "weight"
  }
}</code></pre></div><div class="tab-pane httpAuth"><pre><code>curl -i -X DELETE "https://<span class="api-curl">${username}.pryv.me</span>/streams/weight?auth=${token}"</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 1.5.18

{
  "streamDeletion": {
    "id": "weight"
  }
}

</code></pre></div></div></div></aside></section></section><!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="methods-accesses"><h2 id="accesses">Accesses</h2>
<div class="content"><div class="meta"></div><div class="intro"><p>Methods to retrieve and manipulate <a href="#data-structure-access">accesses</a>, e.g. for sharing.
Any app can manage shared accesses whose permissions are a subset of its own. (Full access management is available to trusted apps.)</p>
</div></div><!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="methods-accesses-accesses-get" class="method"> <h3 id="get-accesses">Get accesses</h3>
<div class="content"><div class="meta"><span class="method-id"><span class="label">id</span><span class="label-value"><code>accesses.get</code></span></span><span class="http"><span class="label">HTTP</span><span class="label-value"><code>GET /accesses</code></span></span></div><div class="intro"><p>Gets manageable accesses. Only returns accesses that can
be managed by the requesting access and that are active when
making the request. To include accesses that have expired, use
the <code>includeExpired</code> parameter.</p>
</div><h4 id="parameters">Parameters</h4>
<table class="definitions"><tr><th><code>includeExpired</code></th><td><div class="header"><span class="type">boolean</span><span class="label label-default optional">optional</span></div><div class="description"><p>If <code>true</code>, also includes expired accesses. Defaults to <code>false</code>.</p>
</div></td></tr><tr><th><code>includeDeletions</code></th><td><div class="header"><span class="type">boolean</span><span class="label label-default optional">optional</span></div><div class="description"><p>If <code>true</code>, also includes deleted accesses. Defaults to <code>false</code>.</p>
</div></td></tr></table><h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>200 OK</code></span></span><table class="definitions"><tr><th><code>accesses</code></th><td><div class="header"><span class="type">array of <a href="#data-structure-access">accesses</a></span></div><div class="description"><p>All manageable accesses in the user&#39;s account, ordered by name.</p>
</div></td></tr><tr><th><code>accessDeletions</code></th><td><div class="header"><span class="type">array of deleted <a href="#data-structure-access">accesses</a></span></div><div class="description"><p>If requested by <code>includeDeletions</code>, the access deletions, ordered by deletion time.</p>
</div></td></tr></table></div><aside><div class="example"><div class="tab-content"><div class="tab-pane json active"><pre><code>{}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "accesses": [
    {
      "id": "ckcka7ucn0004glpv0yn54hxz",
      "token": "ckcka7ucn0005glpvpf2l704w",
      "type": "shared",
      "name": "Arthur",
      "permissions": [
        {
          "streamId": "family",
          "level": "contribute"
        }
      ],
      "created": 1594587955.559,
      "createdBy": "ckcka7ucn0001glpvjku7747i",
      "modified": 1594587955.559,
      "modifiedBy": "ckcka7ucn0001glpvjku7747i"
    }
  ]
}</code></pre></div><div class="tab-pane http"><pre><code>curl -i "https://${token}@<span class="api-curl">${username}.pryv.me</span>/accesses"</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 1.5.18

{
  "accesses": [
    {
      "id": "ckcka7ucn0004glpv0yn54hxz",
      "token": "ckcka7ucn0005glpvpf2l704w",
      "type": "shared",
      "name": "Arthur",
      "permissions": [
        {
          "streamId": "family",
          "level": "contribute"
        }
      ],
      "created": 1594587955.559,
      "createdBy": "ckcka7ucn0001glpvjku7747i",
      "modified": 1594587955.559,
      "modifiedBy": "ckcka7ucn0001glpvjku7747i"
    }
  ]
}
</code></pre></div><div class="tab-pane sockets"><pre><code>socket.emit('accesses.get', {}, callback);</code></pre><div class="step-marker">⬇</div><pre><code>{
  "accesses": [
    {
      "id": "ckcka7ucn0004glpv0yn54hxz",
      "token": "ckcka7ucn0005glpvpf2l704w",
      "type": "shared",
      "name": "Arthur",
      "permissions": [
        {
          "streamId": "family",
          "level": "contribute"
        }
      ],
      "created": 1594587955.559,
      "createdBy": "ckcka7ucn0001glpvjku7747i",
      "modified": 1594587955.559,
      "modifiedBy": "ckcka7ucn0001glpvjku7747i"
    }
  ]
}</code></pre></div><div class="tab-pane batch"><pre><code>{
  "method": "accesses.get",
  "params": {}
}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "accesses": [
    {
      "id": "ckcka7ucn0004glpv0yn54hxz",
      "token": "ckcka7ucn0005glpvpf2l704w",
      "type": "shared",
      "name": "Arthur",
      "permissions": [
        {
          "streamId": "family",
          "level": "contribute"
        }
      ],
      "created": 1594587955.559,
      "createdBy": "ckcka7ucn0001glpvjku7747i",
      "modified": 1594587955.559,
      "modifiedBy": "ckcka7ucn0001glpvjku7747i"
    }
  ]
}</code></pre></div><div class="tab-pane httpAuth"><pre><code>curl -i "https://<span class="api-curl">${username}.pryv.me</span>/accesses?auth=${token}"</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 1.5.18

{
  "accesses": [
    {
      "id": "ckcka7ucn0004glpv0yn54hxz",
      "token": "ckcka7ucn0005glpvpf2l704w",
      "type": "shared",
      "name": "Arthur",
      "permissions": [
        {
          "streamId": "family",
          "level": "contribute"
        }
      ],
      "created": 1594587955.559,
      "createdBy": "ckcka7ucn0001glpvjku7747i",
      "modified": 1594587955.559,
      "modifiedBy": "ckcka7ucn0001glpvjku7747i"
    }
  ]
}

</code></pre></div></div></div><div class="example"><p>cURL with deletions</p>
<pre><code class="lang-bash">curl -i &quot;https://${token}@${username}.pryv.me/accesses?includeDeletions=true
</code></pre>
<div class="step-marker">⬇</div><pre><code>{
  "accesses": [
    {
      "id": "ckcka7ucn0004glpv0yn54hxz",
      "token": "ckcka7ucn0005glpvpf2l704w",
      "type": "shared",
      "name": "Arthur",
      "permissions": [
        {
          "streamId": "family",
          "level": "contribute"
        }
      ],
      "created": 1594587955.559,
      "createdBy": "ckcka7ucn0001glpvjku7747i",
      "modified": 1594587955.559,
      "modifiedBy": "ckcka7ucn0001glpvjku7747i"
    }
  ],
  "accessDeletions": [
    {
      "id": "ckcka7ucn0008glpvjwno467r",
      "token": "ckcka7ucn0009glpv2irm22b6",
      "type": "shared",
      "name": "Health parameters survey",
      "permissions": [
        {
          "streamId": "health",
          "level": "read"
        }
      ],
      "created": 1594631035.559,
      "createdBy": "ckcka7ucn0001glpvjku7747i",
      "modified": 1594631035.559,
      "modifiedBy": "ckcka7ucn0001glpvjku7747i",
      "deleted": 1594631095.559
    }
  ]
}</code></pre></div></aside></section><!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="methods-accesses-accesses-create" class="method"> <h3 id="create-access">Create access</h3>
<div class="content"><div class="meta"><span class="method-id"><span class="label">id</span><span class="label-value"><code>accesses.create</code></span></span><span class="http"><span class="label">HTTP</span><span class="label-value"><code>POST /accesses</code></span></span></div><div class="intro"><p>Creates a new access. You can only create accesses whose permissions are a subset of those granted to your own access token.</p>
</div><h4 id="parameters">Parameters</h4>
<p>An object with the new access&#39;s data: see <a href="#data-structure-access">access</a>.</p>
<h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>201 Created</code></span></span><table class="definitions"><tr><th><code>access</code></th><td><div class="header"><span class="type"><a href="#data-structure-access">access</a></span></div><div class="description"><p>The created access.</p>
</div></td></tr></table><h4 id="specific-errors">Specific errors</h4>
<table class="definitions"><tr><th><code>invalid-item-id</code></th><td><div class="header"><span class="http"><span class="label">HTTP</span><span class="label-value"><code>400</code></span></span></div><div class="description"><p>The specified token is invalid (e.g. it&#39;s a reserved word such as <code>null</code>).</p>
</div></td></tr></table></div><aside><div class="example"><div class="tab-content"><div class="tab-pane json active"><pre><code>{
  "name": "For colleagues",
  "permissions": [
    {
      "streamId": "work",
      "level": "read"
    }
  ]
}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "access": {
    "id": "ckcka7ucn0006glpv7n8ycwyb",
    "token": "ckcka7ucn0007glpvlk5e7t74",
    "type": "shared",
    "name": "For colleagues",
    "permissions": [
      {
        "streamId": "work",
        "level": "read"
      }
    ],
    "created": 1594631155.559,
    "createdBy": "ckcka7ucn0001glpvjku7747i",
    "modified": 1594631155.559,
    "modifiedBy": "ckcka7ucn0001glpvjku7747i"
  }
}</code></pre></div><div class="tab-pane http"><pre><code>curl -i -X POST -H 'Content-Type: application/json' -d '{"name":"For colleagues","permissions":[{"streamId":"work","level":"read"}]}' "https://${token}@<span class="api-curl">${username}.pryv.me</span>/accesses"</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 201 Created
Content-Type: application/json; charset=utf-8
API-Version: 1.5.18

{
  "access": {
    "id": "ckcka7ucn0006glpv7n8ycwyb",
    "token": "ckcka7ucn0007glpvlk5e7t74",
    "type": "shared",
    "name": "For colleagues",
    "permissions": [
      {
        "streamId": "work",
        "level": "read"
      }
    ],
    "created": 1594631155.559,
    "createdBy": "ckcka7ucn0001glpvjku7747i",
    "modified": 1594631155.559,
    "modifiedBy": "ckcka7ucn0001glpvjku7747i"
  }
}
</code></pre></div><div class="tab-pane sockets"><pre><code>socket.emit('accesses.create', {"name":"For colleagues","permissions":[{"streamId":"work","level":"read"}]}, callback);</code></pre><div class="step-marker">⬇</div><pre><code>{
  "access": {
    "id": "ckcka7ucn0006glpv7n8ycwyb",
    "token": "ckcka7ucn0007glpvlk5e7t74",
    "type": "shared",
    "name": "For colleagues",
    "permissions": [
      {
        "streamId": "work",
        "level": "read"
      }
    ],
    "created": 1594631155.559,
    "createdBy": "ckcka7ucn0001glpvjku7747i",
    "modified": 1594631155.559,
    "modifiedBy": "ckcka7ucn0001glpvjku7747i"
  }
}</code></pre></div><div class="tab-pane batch"><pre><code>{
  "method": "accesses.create",
  "params": {
    "name": "For colleagues",
    "permissions": [
      {
        "streamId": "work",
        "level": "read"
      }
    ]
  }
}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "access": {
    "id": "ckcka7ucn0006glpv7n8ycwyb",
    "token": "ckcka7ucn0007glpvlk5e7t74",
    "type": "shared",
    "name": "For colleagues",
    "permissions": [
      {
        "streamId": "work",
        "level": "read"
      }
    ],
    "created": 1594631155.559,
    "createdBy": "ckcka7ucn0001glpvjku7747i",
    "modified": 1594631155.559,
    "modifiedBy": "ckcka7ucn0001glpvjku7747i"
  }
}</code></pre></div><div class="tab-pane httpAuth"><pre><code>curl -i -X POST -H 'Content-Type: application/json' -d '{"name":"For colleagues","permissions":[{"streamId":"work","level":"read"}]}' "https://<span class="api-curl">${username}.pryv.me</span>/accesses?auth=${token}"</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 201 Created
Content-Type: application/json; charset=utf-8
API-Version: 1.5.18

{
  "access": {
    "id": "ckcka7ucn0006glpv7n8ycwyb",
    "token": "ckcka7ucn0007glpvlk5e7t74",
    "type": "shared",
    "name": "For colleagues",
    "permissions": [
      {
        "streamId": "work",
        "level": "read"
      }
    ],
    "created": 1594631155.559,
    "createdBy": "ckcka7ucn0001glpvjku7747i",
    "modified": 1594631155.559,
    "modifiedBy": "ckcka7ucn0001glpvjku7747i"
  }
}

</code></pre></div></div></div></aside></section><!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="methods-accesses-accesses-delete" class="method"> <h3 id="delete-access">Delete access</h3>
<div class="content"><div class="meta"><span class="method-id"><span class="label">id</span><span class="label-value"><code>accesses.delete</code></span></span><span class="http"><span class="label">HTTP</span><span class="label-value"><code>DELETE /accesses/{id}</code></span></span></div><div class="intro"><p>Deletes the specified access. Personal accesses can delete any access. App accesses can delete shared accesses they created. All accesses can also perform a self-delete unless a forbidden <code>selfRevoke</code> permission has been set.</p>
</div><h4 id="parameters">Parameters</h4>
<table class="definitions"><tr><th><code>id</code></th><td><div class="header"><span class="type"><a href="#data-structure-identifier">identifier</a></span><span class="http"><span class="label">HTTP</span><span class="label-value"><span>set in request path</span></span></span></div><div class="description"><p>The id of the access.</p>
</div></td></tr></table><h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>200 OK</code></span></span><table class="definitions"><tr><th><code>accessDeletion</code></th><td><div class="header"><span class="type"><a href="#data-structure-item-deletion">item deletion</a></span></div><div class="description"><p>The deletion record.</p>
</div></td></tr></table></div><aside><div class="example"><div class="tab-content"><div class="tab-pane json active"><pre><code>{}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "accessDeletion": {
    "id": "ckcka7ucn0004glpv0yn54hxz"
  }
}</code></pre></div><div class="tab-pane http"><pre><code>curl -i -X DELETE "https://${token}@<span class="api-curl">${username}.pryv.me</span>/accesses/ckcka7ucn0004glpv0yn54hxz"</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 1.5.18

{
  "accessDeletion": {
    "id": "ckcka7ucn0004glpv0yn54hxz"
  }
}
</code></pre></div><div class="tab-pane sockets"><pre><code>socket.emit('accesses.delete', {"id":"ckcka7ucn0004glpv0yn54hxz"}, callback);</code></pre><div class="step-marker">⬇</div><pre><code>{
  "accessDeletion": {
    "id": "ckcka7ucn0004glpv0yn54hxz"
  }
}</code></pre></div><div class="tab-pane batch"><pre><code>{
  "method": "accesses.delete",
  "params": {
    "id": "ckcka7ucn0004glpv0yn54hxz"
  }
}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "accessDeletion": {
    "id": "ckcka7ucn0004glpv0yn54hxz"
  }
}</code></pre></div><div class="tab-pane httpAuth"><pre><code>curl -i -X DELETE "https://<span class="api-curl">${username}.pryv.me</span>/accesses/ckcka7ucn0004glpv0yn54hxz?auth=${token}"</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 1.5.18

{
  "accessDeletion": {
    "id": "ckcka7ucn0004glpv0yn54hxz"
  }
}

</code></pre></div></div></div></aside></section><!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="methods-accesses-accesses-checkApp" class="method"> <h3 id="check-app-authorization">Check app authorization</h3>
<div class="content"><div class="meta"><span class="method-id"><span class="label">id</span><span class="label-value"><code>accesses.checkApp</code></span></span><span class="http"><span class="label">HTTP</span><span class="label-value"><code>POST /accesses/check-app</code></span></span><span onclick="location='/reference/#trusted-apps-verification'" class="label trusted-only">Trusted apps only</span><text>&nbsp;</text></div><div class="intro"><p>For the app authorization process. Checks if the app requesting authorization already has access with the same permissions (and on the same device, if applicable), and returns details of the requested permissions&#39; streams (for display) if not.</p>
</div><h4 id="parameters">Parameters</h4>
<table class="definitions"><tr><th><code>requestingAppId</code></th><td><div class="header"><span class="type">string</span></div><div class="description"><p>The id of the app requesting authorization.</p>
</div></td></tr><tr><th><code>deviceName</code></th><td><div class="header"><span class="type">string</span><span class="label label-default optional">optional</span></div><div class="description"><p>The name of the device running the app requesting authorization, if applicable.</p>
</div></td></tr><tr><th><code>requestedPermissions</code></th><td><div class="header"><span class="type">array of permission request objects</span></div><div class="description"><p>An array of permission request objects, which are identical to stream permission objects of <a href="#data-structure-access">accesses</a> except that each stream permission object must have a <code>defaultName</code> property specifying the name the stream should be created with later if missing.</p>
</div></td></tr></table><h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>200 OK</code></span></span><table class="definitions"><tr><th><code>checkedPermissions</code></th><td><div class="header"><span class="type">array of permission request objects</span></div><div class="description"><p>Set if no matching access already exists.
A updated copy of the <code>requestedPermissions</code> parameter, with the <code>defaultName</code> property of stream permissions replaced by <code>name</code> for each existing stream (set to the actual name of the item). (For missing streams the <code>defaultName</code> property is left untouched.) If streams already exist with the same name but a different <code>id</code>, <code>defaultName</code> is updated with a valid alternative proposal (in such cases the result also has an <code>error</code> property to signal the issue).</p>
</div></td></tr><tr><th><code>mismatchingAccess</code></th><td><div class="header"><span class="type"><a href="#data-structure-access">access</a></span></div><div class="description"><p>Set if an access already exists for the requesting app, but with different permissions than those requested.</p>
</div></td></tr><tr><th><code>matchingAccess</code></th><td><div class="header"><span class="type"><a href="#data-structure-access">access</a></span></div><div class="description"><p>Set if an access already exists for the requesting app with matching permissions. The existing <a href="#data-structure-access">access</a>.</p>
</div></td></tr></table></div><aside></aside></section></section><!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="methods-getAccessInfo" class="method"><h2 id="access-info">Access Info</h2>
<div class="content"><div class="meta"><span class="method-id"><span class="label">id</span><span class="label-value"><code>getAccessInfo</code></span></span><span class="http"><span class="label">HTTP</span><span class="label-value"><code>GET /access-info</code></span></span></div><div class="intro"><p>Retrieves information about the access in use.</p>
</div><h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>200 OK</code></span></span><p>The current <a href="#data-structure-access">Access properties</a>, as well as:</p>
<table class="definitions"><tr><th><code>calls</code></th><td><div class="header"><span class="type"><a href="#methods-key-value-">key-value</a></span></div><div class="description"><p>A map of API methods and the number of time each of them was called using the current access.</p>
</div></td></tr><tr><th><code>user</code></th><td><div class="header"><span class="type"><a href="#methods-key-value-">key-value</a></span></div><div class="description"><p>A map of user account properties.</p>
</div></td></tr></table></div><aside><div class="example"><div class="tab-content"><div class="tab-pane json active"><pre><code>{}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "id": "ckcka7ucn000aglpvfd1fl6dr",
  "token": "ckcka7ucn000bglpvlu2lvni6",
  "type": "app",
  "name": "Current access",
  "deviceName": "My awesome device",
  "permissions": [
    {
      "streamId": "health",
      "level": "read"
    }
  ],
  "user": {
    "username": "jackslater"
  },
  "lastUsed": 1594630855.559,
  "expires": 1594631035.559,
  "deleted": 1594631095.559,
  "clientData": {
    "consent": "My custom consent message."
  },
  "created": 1594631035.559,
  "createdBy": "ckcka7ucn0001glpvjku7747i",
  "modified": 1594631035.559,
  "modifiedBy": "ckcka7ucn0001glpvjku7747i",
  "calls": {
    "getAccessInfo": 12,
    "profile:get": 5,
    "events:get": 12,
    "streams:get": 11,
    "accesses:get": 6
  }
}</code></pre></div><div class="tab-pane http"><pre><code>curl -i "https://${token}@<span class="api-curl">${username}.pryv.me</span>/access-info"</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 1.5.18

{
  "id": "ckcka7ucn000aglpvfd1fl6dr",
  "token": "ckcka7ucn000bglpvlu2lvni6",
  "type": "app",
  "name": "Current access",
  "deviceName": "My awesome device",
  "permissions": [
    {
      "streamId": "health",
      "level": "read"
    }
  ],
  "user": {
    "username": "jackslater"
  },
  "lastUsed": 1594630855.559,
  "expires": 1594631035.559,
  "deleted": 1594631095.559,
  "clientData": {
    "consent": "My custom consent message."
  },
  "created": 1594631035.559,
  "createdBy": "ckcka7ucn0001glpvjku7747i",
  "modified": 1594631035.559,
  "modifiedBy": "ckcka7ucn0001glpvjku7747i",
  "calls": {
    "getAccessInfo": 12,
    "profile:get": 5,
    "events:get": 12,
    "streams:get": 11,
    "accesses:get": 6
  }
}
</code></pre></div><div class="tab-pane sockets"><pre><code>socket.emit('getAccessInfo', {}, callback);</code></pre><div class="step-marker">⬇</div><pre><code>{
  "id": "ckcka7ucn000aglpvfd1fl6dr",
  "token": "ckcka7ucn000bglpvlu2lvni6",
  "type": "app",
  "name": "Current access",
  "deviceName": "My awesome device",
  "permissions": [
    {
      "streamId": "health",
      "level": "read"
    }
  ],
  "user": {
    "username": "jackslater"
  },
  "lastUsed": 1594630855.559,
  "expires": 1594631035.559,
  "deleted": 1594631095.559,
  "clientData": {
    "consent": "My custom consent message."
  },
  "created": 1594631035.559,
  "createdBy": "ckcka7ucn0001glpvjku7747i",
  "modified": 1594631035.559,
  "modifiedBy": "ckcka7ucn0001glpvjku7747i",
  "calls": {
    "getAccessInfo": 12,
    "profile:get": 5,
    "events:get": 12,
    "streams:get": 11,
    "accesses:get": 6
  }
}</code></pre></div><div class="tab-pane batch"><pre><code>{
  "method": "getAccessInfo",
  "params": {}
}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "id": "ckcka7ucn000aglpvfd1fl6dr",
  "token": "ckcka7ucn000bglpvlu2lvni6",
  "type": "app",
  "name": "Current access",
  "deviceName": "My awesome device",
  "permissions": [
    {
      "streamId": "health",
      "level": "read"
    }
  ],
  "user": {
    "username": "jackslater"
  },
  "lastUsed": 1594630855.559,
  "expires": 1594631035.559,
  "deleted": 1594631095.559,
  "clientData": {
    "consent": "My custom consent message."
  },
  "created": 1594631035.559,
  "createdBy": "ckcka7ucn0001glpvjku7747i",
  "modified": 1594631035.559,
  "modifiedBy": "ckcka7ucn0001glpvjku7747i",
  "calls": {
    "getAccessInfo": 12,
    "profile:get": 5,
    "events:get": 12,
    "streams:get": 11,
    "accesses:get": 6
  }
}</code></pre></div><div class="tab-pane httpAuth"><pre><code>curl -i "https://<span class="api-curl">${username}.pryv.me</span>/access-info?auth=${token}"</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 1.5.18

{
  "id": "ckcka7ucn000aglpvfd1fl6dr",
  "token": "ckcka7ucn000bglpvlu2lvni6",
  "type": "app",
  "name": "Current access",
  "deviceName": "My awesome device",
  "permissions": [
    {
      "streamId": "health",
      "level": "read"
    }
  ],
  "user": {
    "username": "jackslater"
  },
  "lastUsed": 1594630855.559,
  "expires": 1594631035.559,
  "deleted": 1594631095.559,
  "clientData": {
    "consent": "My custom consent message."
  },
  "created": 1594631035.559,
  "createdBy": "ckcka7ucn0001glpvjku7747i",
  "modified": 1594631035.559,
  "modifiedBy": "ckcka7ucn0001glpvjku7747i",
  "calls": {
    "getAccessInfo": 12,
    "profile:get": 5,
    "events:get": 12,
    "streams:get": 11,
    "accesses:get": 6
  }
}

</code></pre></div></div></div></aside></section><!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="methods-audit"><h2 id="audit">Audit</h2>
<div class="content"><div class="meta"><span onclick="location='/concepts/#entreprise-license-open-source-license'" class="label entreprise-only">Entreprise license only</span><text>&nbsp;</text></div><div class="intro"><p>Methods to retrieve <a href="#data-structure-audit-log">Audit logs</a>.</p>
</div></div><!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="methods-audit-audit-get" class="method"> <h3 id="get-audit-logs">Get audit logs</h3>
<div class="content"><div class="meta"><span onclick="location='/concepts/#entreprise-license-open-source-license'" class="entreprise-tag"><span title="Entreprise License Only" class="label">Y</span></span><span class="method-id"><span class="label">id</span><span class="label-value"><code>audit.get</code></span></span><span class="http"><span class="label">HTTP</span><span class="label-value"><code>GET /audit/logs</code></span></span></div><div class="intro"><p>Fetches accessible audit logs.
By default, only returns logs that involve the access corresponding to the provided authorization token (self-auditing).</p>
</div><h4 id="parameters">Parameters</h4>
<table class="definitions"><tr><th><code>accessId</code></th><td><div class="header"><span class="type"><a href="#data-structure-identifier">identifier</a></span><span class="label label-default optional">optional</span></div><div class="description"><p>The id of a specific access to audit.
When specified, it fetches the audit logs that involve the matching access instead of the one used to authorize this call.
It has to correspond to a sub-access (expired and deleted included) in regards to the provided authorization token.</p>
</div></td></tr><tr><th><code>fromTime</code></th><td><div class="header"><span class="type"><a href="#data-structure-timestamp">timestamp</a></span><span class="label label-default optional">optional</span></div><div class="description"><p>The start time of the timeframe you want to retrieve audit logs for.
Timestamps are considered with a day precision.</p>
</div></td></tr><tr><th><code>toTime</code></th><td><div class="header"><span class="type"><a href="#data-structure-timestamp">timestamp</a></span><span class="label label-default optional">optional</span></div><div class="description"><p>The end time of the timeframe you want to retrieve audit logs for.
Timestamps are considered with a day precision.</p>
</div></td></tr><tr><th><code>status</code></th><td><div class="header"><span class="type">number</span><span class="label label-default optional">optional</span></div><div class="description"><p>Filters audit logs by HTTP response status, a 3-digits number.
It is possible to provide only the first digit,
in which case the two unspecified digits will be wildcarded.
For example, <code>status=4</code> will return all logs with status between 400 and 499.</p>
</div></td></tr><tr><th><code>ip</code></th><td><div class="header"><span class="type">string</span><span class="label label-default optional">optional</span></div><div class="description"><p>Filters audit logs by client IP address present in the <code>forwardedFor</code> property.</p>
</div></td></tr><tr><th><code>httpVerb</code></th><td><div class="header"><span class="type">string</span><span class="label label-default optional">optional</span></div><div class="description"><p>Filters audit logs by HTTP verb present in the <code>action</code> property.</p>
</div></td></tr><tr><th><code>resource</code></th><td><div class="header"><span class="type">string</span><span class="label label-default optional">optional</span></div><div class="description"><p>Filters audit logs by API resource present in the <code>action</code> property.</p>
</div></td></tr><tr><th><code>errorId</code></th><td><div class="header"><span class="type">string</span><span class="label label-default optional">optional</span></div><div class="description"><p>Filters audit logs by error id.</p>
</div></td></tr></table><h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>200 OK</code></span></span><table class="definitions"><tr><th><code>auditLogs</code></th><td><div class="header"><span class="type">array of <a href="#data-structure-audit-log">Audit logs</a></span></div><div class="description"><p>The accessible audit logs.</p>
</div></td></tr></table><h4 id="specific-errors">Specific errors</h4>
<table class="definitions"><tr><th><code>forbidden</code></th><td><div class="header"><span class="http"><span class="label">HTTP</span><span class="label-value"><code>403</code></span></span></div><div class="description"><p>Authorization token is not authorized to audit the given access.</p>
<p>When providing a specific access id, if the result of <a href="#methods-accesses-accesses-get">Get Accesses</a>
using the provided Authorization token does not contain the given access, then it is not auditable.</p>
</div></td></tr></table></div><aside><div class="example"><div class="tab-content"><div class="tab-pane json active"><pre><code>{
  "auth": "ckcka7uf4001lglpv7hkp69so",
  "accessId": "ckcka7uf4001kglpveyskn5ni",
  "fromTime": 1561000000,
  "toTime": 1562000000,
  "status": 403,
  "ip": "172.18.0.7",
  "httpVerb": "GET",
  "resource": "/events",
  "errorId": "forbidden"
}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "auditLogs": [
    {
      "id": "ckcka7uf4001mglpv0z34g5ns",
      "type": "audit/core",
      "time": 1561988300,
      "forwardedFor": "172.18.0.7",
      "action": "GET /events",
      "query": "streamId=diary",
      "accessId": "ckcka7uf4001kglpveyskn5ni",
      "status": 403,
      "errorMessage": "Access session has expired.",
      "errorId": "forbidden"
    },
    {
      "id": "ckcka7uf4001nglpvc18e08a5",
      "type": "audit/core",
      "time": 1561988900,
      "forwardedFor": "172.18.0.7",
      "action": "GET /events",
      "query": "streamId=diary",
      "accessId": "ckcka7uf4001kglpveyskn5ni",
      "status": 403,
      "errorMessage": "Access session has expired.",
      "errorId": "forbidden"
    },
    {
      "id": "ckcka7uf4001oglpvkmx4215x",
      "type": "audit/core",
      "time": 1561989200,
      "forwardedFor": "172.18.0.7",
      "action": "GET /events",
      "query": "streamId=work",
      "accessId": "ckcka7uf4001kglpveyskn5ni",
      "status": 403,
      "errorMessage": "Access session has expired.",
      "errorId": "forbidden"
    }
  ]
}</code></pre></div><div class="tab-pane http"><pre><code>curl -i "https://${token}@<span class="api-curl">${username}.pryv.me</span>/audit/logs&auth=ckcka7uf4001lglpv7hkp69so&accessId=ckcka7uf4001kglpveyskn5ni&fromTime=1561000000&toTime=1562000000&status=403&ip=172.18.0.7&httpVerb=GET&resource=/events&errorId=forbidden"</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 1.5.18

{
  "auditLogs": [
    {
      "id": "ckcka7uf4001mglpv0z34g5ns",
      "type": "audit/core",
      "time": 1561988300,
      "forwardedFor": "172.18.0.7",
      "action": "GET /events",
      "query": "streamId=diary",
      "accessId": "ckcka7uf4001kglpveyskn5ni",
      "status": 403,
      "errorMessage": "Access session has expired.",
      "errorId": "forbidden"
    },
    {
      "id": "ckcka7uf4001nglpvc18e08a5",
      "type": "audit/core",
      "time": 1561988900,
      "forwardedFor": "172.18.0.7",
      "action": "GET /events",
      "query": "streamId=diary",
      "accessId": "ckcka7uf4001kglpveyskn5ni",
      "status": 403,
      "errorMessage": "Access session has expired.",
      "errorId": "forbidden"
    },
    {
      "id": "ckcka7uf4001oglpvkmx4215x",
      "type": "audit/core",
      "time": 1561989200,
      "forwardedFor": "172.18.0.7",
      "action": "GET /events",
      "query": "streamId=work",
      "accessId": "ckcka7uf4001kglpveyskn5ni",
      "status": 403,
      "errorMessage": "Access session has expired.",
      "errorId": "forbidden"
    }
  ]
}
</code></pre></div><div class="tab-pane sockets"><pre><code>socket.emit('audit.get', {"auth":"ckcka7uf4001lglpv7hkp69so","accessId":"ckcka7uf4001kglpveyskn5ni","fromTime":1561000000,"toTime":1562000000,"status":403,"ip":"172.18.0.7","httpVerb":"GET","resource":"/events","errorId":"forbidden"}, callback);</code></pre><div class="step-marker">⬇</div><pre><code>{
  "auditLogs": [
    {
      "id": "ckcka7uf4001mglpv0z34g5ns",
      "type": "audit/core",
      "time": 1561988300,
      "forwardedFor": "172.18.0.7",
      "action": "GET /events",
      "query": "streamId=diary",
      "accessId": "ckcka7uf4001kglpveyskn5ni",
      "status": 403,
      "errorMessage": "Access session has expired.",
      "errorId": "forbidden"
    },
    {
      "id": "ckcka7uf4001nglpvc18e08a5",
      "type": "audit/core",
      "time": 1561988900,
      "forwardedFor": "172.18.0.7",
      "action": "GET /events",
      "query": "streamId=diary",
      "accessId": "ckcka7uf4001kglpveyskn5ni",
      "status": 403,
      "errorMessage": "Access session has expired.",
      "errorId": "forbidden"
    },
    {
      "id": "ckcka7uf4001oglpvkmx4215x",
      "type": "audit/core",
      "time": 1561989200,
      "forwardedFor": "172.18.0.7",
      "action": "GET /events",
      "query": "streamId=work",
      "accessId": "ckcka7uf4001kglpveyskn5ni",
      "status": 403,
      "errorMessage": "Access session has expired.",
      "errorId": "forbidden"
    }
  ]
}</code></pre></div><div class="tab-pane batch"><pre><code>{
  "method": "audit.get",
  "params": {
    "auth": "ckcka7uf4001lglpv7hkp69so",
    "accessId": "ckcka7uf4001kglpveyskn5ni",
    "fromTime": 1561000000,
    "toTime": 1562000000,
    "status": 403,
    "ip": "172.18.0.7",
    "httpVerb": "GET",
    "resource": "/events",
    "errorId": "forbidden"
  }
}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "auditLogs": [
    {
      "id": "ckcka7uf4001mglpv0z34g5ns",
      "type": "audit/core",
      "time": 1561988300,
      "forwardedFor": "172.18.0.7",
      "action": "GET /events",
      "query": "streamId=diary",
      "accessId": "ckcka7uf4001kglpveyskn5ni",
      "status": 403,
      "errorMessage": "Access session has expired.",
      "errorId": "forbidden"
    },
    {
      "id": "ckcka7uf4001nglpvc18e08a5",
      "type": "audit/core",
      "time": 1561988900,
      "forwardedFor": "172.18.0.7",
      "action": "GET /events",
      "query": "streamId=diary",
      "accessId": "ckcka7uf4001kglpveyskn5ni",
      "status": 403,
      "errorMessage": "Access session has expired.",
      "errorId": "forbidden"
    },
    {
      "id": "ckcka7uf4001oglpvkmx4215x",
      "type": "audit/core",
      "time": 1561989200,
      "forwardedFor": "172.18.0.7",
      "action": "GET /events",
      "query": "streamId=work",
      "accessId": "ckcka7uf4001kglpveyskn5ni",
      "status": 403,
      "errorMessage": "Access session has expired.",
      "errorId": "forbidden"
    }
  ]
}</code></pre></div><div class="tab-pane httpAuth"><pre><code>curl -i "https://<span class="api-curl">${username}.pryv.me</span>/audit/logs?auth=${token}&auth=ckcka7uf4001lglpv7hkp69so&accessId=ckcka7uf4001kglpveyskn5ni&fromTime=1561000000&toTime=1562000000&status=403&ip=172.18.0.7&httpVerb=GET&resource=/events&errorId=forbidden"</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 1.5.18

{
  "auditLogs": [
    {
      "id": "ckcka7uf4001mglpv0z34g5ns",
      "type": "audit/core",
      "time": 1561988300,
      "forwardedFor": "172.18.0.7",
      "action": "GET /events",
      "query": "streamId=diary",
      "accessId": "ckcka7uf4001kglpveyskn5ni",
      "status": 403,
      "errorMessage": "Access session has expired.",
      "errorId": "forbidden"
    },
    {
      "id": "ckcka7uf4001nglpvc18e08a5",
      "type": "audit/core",
      "time": 1561988900,
      "forwardedFor": "172.18.0.7",
      "action": "GET /events",
      "query": "streamId=diary",
      "accessId": "ckcka7uf4001kglpveyskn5ni",
      "status": 403,
      "errorMessage": "Access session has expired.",
      "errorId": "forbidden"
    },
    {
      "id": "ckcka7uf4001oglpvkmx4215x",
      "type": "audit/core",
      "time": 1561989200,
      "forwardedFor": "172.18.0.7",
      "action": "GET /events",
      "query": "streamId=work",
      "accessId": "ckcka7uf4001kglpveyskn5ni",
      "status": 403,
      "errorMessage": "Access session has expired.",
      "errorId": "forbidden"
    }
  ]
}

</code></pre></div></div></div></aside></section></section><!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="methods-webhooks"><h2 id="webhooks">Webhooks</h2>
<div class="content"><div class="meta"><span onclick="location='/concepts/#entreprise-license-open-source-license'" class="label entreprise-only">Entreprise license only</span><text>&nbsp;</text></div><div class="intro"><p>Methods to retrieve and manipulate <a href="#data-structure-webhook">webhooks</a>. These methods are only allowed for app and personal accesses.</p>
</div></div><!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="methods-webhooks-webhooks-get" class="method"> <h3 id="get-webhooks">Get webhooks</h3>
<div class="content"><div class="meta"><span onclick="location='/concepts/#entreprise-license-open-source-license'" class="entreprise-tag"><span title="Entreprise License Only" class="label">Y</span></span><span class="method-id"><span class="label">id</span><span class="label-value"><code>webhooks.get</code></span></span><span class="http"><span class="label">HTTP</span><span class="label-value"><code>GET /webhooks</code></span></span></div><div class="intro"><p>Gets manageable webhooks. Only returns webhooks that were created by the access, unless you are using a personal access which returns all existing webhooks in the user&#39;s account.</p>
</div><h4 id="parameters">Parameters</h4>
<table class="definitions"></table><h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>200 OK</code></span></span><table class="definitions"><tr><th><code>webhooks</code></th><td><div class="header"><span class="type">array of <a href="#data-structure-webhook">webhooks</a></span></div><div class="description"><p>All manageable webhooks by the given access, ordered by modified date.</p>
</div></td></tr></table></div><aside><div class="example"><div class="tab-content"><div class="tab-pane json active"><pre><code>{}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "webhooks": [
    {
      "id": "ckcka7uf1001fglpv0a4hqm7c",
      "accessId": "ckcka7uf1001dglpv9dhpznkz",
      "url": "https://notifications.service.com/pryv",
      "minIntervalMs": 5000,
      "maxRetries": 5,
      "currentRetries": 0,
      "state": "active",
      "runCount": 2,
      "failCount": 0,
      "lastRun": {
        "status": 200,
        "timestamp": 1594627555.645
      },
      "runs": [
        {
          "status": 200,
          "timestamp": 1594627555.645
        },
        {
          "status": 200,
          "timestamp": 1594623955.645
        }
      ],
      "created": 1594544755.645,
      "createdBy": "ckcka7uf1001dglpv9dhpznkz",
      "modified": 1594544755.645,
      "modifiedBy": "ckcka7uf1001dglpv9dhpznkz"
    },
    {
      "id": "ckcka7uf1001hglpvme4kxnit",
      "accessId": "ckcka7uf1001dglpv9dhpznkz",
      "url": "https://notifications.pryv.me/webhooks",
      "minIntervalMs": 5000,
      "maxRetries": 5,
      "currentRetries": 2,
      "state": "active",
      "runCount": 8,
      "failCount": 2,
      "lastRun": {
        "status": 200,
        "timestamp": 1594631150.645
      },
      "runs": [
        {
          "status": 500,
          "timestamp": 1594631150.645
        },
        {
          "status": 500,
          "timestamp": 1594631145.645
        },
        {
          "status": 200,
          "timestamp": 1594630555.645
        },
        {
          "status": 200,
          "timestamp": 1594629955.645
        },
        {
          "status": 200,
          "timestamp": 1594629355.645
        },
        {
          "status": 200,
          "timestamp": 1594628755.645
        },
        {
          "status": 200,
          "timestamp": 1594628155.645
        },
        {
          "status": 200,
          "timestamp": 1594627555.645
        }
      ],
      "created": 1594458355.645,
      "createdBy": "ckcka7uf1001dglpv9dhpznkz",
      "modified": 1594458355.645,
      "modifiedBy": "ckcka7uf1001dglpv9dhpznkz"
    }
  ]
}</code></pre></div><div class="tab-pane http"><pre><code>curl -i "https://${token}@<span class="api-curl">${username}.pryv.me</span>/webhooks"</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 1.5.18

{
  "webhooks": [
    {
      "id": "ckcka7uf1001fglpv0a4hqm7c",
      "accessId": "ckcka7uf1001dglpv9dhpznkz",
      "url": "https://notifications.service.com/pryv",
      "minIntervalMs": 5000,
      "maxRetries": 5,
      "currentRetries": 0,
      "state": "active",
      "runCount": 2,
      "failCount": 0,
      "lastRun": {
        "status": 200,
        "timestamp": 1594627555.645
      },
      "runs": [
        {
          "status": 200,
          "timestamp": 1594627555.645
        },
        {
          "status": 200,
          "timestamp": 1594623955.645
        }
      ],
      "created": 1594544755.645,
      "createdBy": "ckcka7uf1001dglpv9dhpznkz",
      "modified": 1594544755.645,
      "modifiedBy": "ckcka7uf1001dglpv9dhpznkz"
    },
    {
      "id": "ckcka7uf1001hglpvme4kxnit",
      "accessId": "ckcka7uf1001dglpv9dhpznkz",
      "url": "https://notifications.pryv.me/webhooks",
      "minIntervalMs": 5000,
      "maxRetries": 5,
      "currentRetries": 2,
      "state": "active",
      "runCount": 8,
      "failCount": 2,
      "lastRun": {
        "status": 200,
        "timestamp": 1594631150.645
      },
      "runs": [
        {
          "status": 500,
          "timestamp": 1594631150.645
        },
        {
          "status": 500,
          "timestamp": 1594631145.645
        },
        {
          "status": 200,
          "timestamp": 1594630555.645
        },
        {
          "status": 200,
          "timestamp": 1594629955.645
        },
        {
          "status": 200,
          "timestamp": 1594629355.645
        },
        {
          "status": 200,
          "timestamp": 1594628755.645
        },
        {
          "status": 200,
          "timestamp": 1594628155.645
        },
        {
          "status": 200,
          "timestamp": 1594627555.645
        }
      ],
      "created": 1594458355.645,
      "createdBy": "ckcka7uf1001dglpv9dhpznkz",
      "modified": 1594458355.645,
      "modifiedBy": "ckcka7uf1001dglpv9dhpznkz"
    }
  ]
}
</code></pre></div><div class="tab-pane sockets"><pre><code>socket.emit('webhooks.get', {}, callback);</code></pre><div class="step-marker">⬇</div><pre><code>{
  "webhooks": [
    {
      "id": "ckcka7uf1001fglpv0a4hqm7c",
      "accessId": "ckcka7uf1001dglpv9dhpznkz",
      "url": "https://notifications.service.com/pryv",
      "minIntervalMs": 5000,
      "maxRetries": 5,
      "currentRetries": 0,
      "state": "active",
      "runCount": 2,
      "failCount": 0,
      "lastRun": {
        "status": 200,
        "timestamp": 1594627555.645
      },
      "runs": [
        {
          "status": 200,
          "timestamp": 1594627555.645
        },
        {
          "status": 200,
          "timestamp": 1594623955.645
        }
      ],
      "created": 1594544755.645,
      "createdBy": "ckcka7uf1001dglpv9dhpznkz",
      "modified": 1594544755.645,
      "modifiedBy": "ckcka7uf1001dglpv9dhpznkz"
    },
    {
      "id": "ckcka7uf1001hglpvme4kxnit",
      "accessId": "ckcka7uf1001dglpv9dhpznkz",
      "url": "https://notifications.pryv.me/webhooks",
      "minIntervalMs": 5000,
      "maxRetries": 5,
      "currentRetries": 2,
      "state": "active",
      "runCount": 8,
      "failCount": 2,
      "lastRun": {
        "status": 200,
        "timestamp": 1594631150.645
      },
      "runs": [
        {
          "status": 500,
          "timestamp": 1594631150.645
        },
        {
          "status": 500,
          "timestamp": 1594631145.645
        },
        {
          "status": 200,
          "timestamp": 1594630555.645
        },
        {
          "status": 200,
          "timestamp": 1594629955.645
        },
        {
          "status": 200,
          "timestamp": 1594629355.645
        },
        {
          "status": 200,
          "timestamp": 1594628755.645
        },
        {
          "status": 200,
          "timestamp": 1594628155.645
        },
        {
          "status": 200,
          "timestamp": 1594627555.645
        }
      ],
      "created": 1594458355.645,
      "createdBy": "ckcka7uf1001dglpv9dhpznkz",
      "modified": 1594458355.645,
      "modifiedBy": "ckcka7uf1001dglpv9dhpznkz"
    }
  ]
}</code></pre></div><div class="tab-pane batch"><pre><code>{
  "method": "webhooks.get",
  "params": {}
}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "webhooks": [
    {
      "id": "ckcka7uf1001fglpv0a4hqm7c",
      "accessId": "ckcka7uf1001dglpv9dhpznkz",
      "url": "https://notifications.service.com/pryv",
      "minIntervalMs": 5000,
      "maxRetries": 5,
      "currentRetries": 0,
      "state": "active",
      "runCount": 2,
      "failCount": 0,
      "lastRun": {
        "status": 200,
        "timestamp": 1594627555.645
      },
      "runs": [
        {
          "status": 200,
          "timestamp": 1594627555.645
        },
        {
          "status": 200,
          "timestamp": 1594623955.645
        }
      ],
      "created": 1594544755.645,
      "createdBy": "ckcka7uf1001dglpv9dhpznkz",
      "modified": 1594544755.645,
      "modifiedBy": "ckcka7uf1001dglpv9dhpznkz"
    },
    {
      "id": "ckcka7uf1001hglpvme4kxnit",
      "accessId": "ckcka7uf1001dglpv9dhpznkz",
      "url": "https://notifications.pryv.me/webhooks",
      "minIntervalMs": 5000,
      "maxRetries": 5,
      "currentRetries": 2,
      "state": "active",
      "runCount": 8,
      "failCount": 2,
      "lastRun": {
        "status": 200,
        "timestamp": 1594631150.645
      },
      "runs": [
        {
          "status": 500,
          "timestamp": 1594631150.645
        },
        {
          "status": 500,
          "timestamp": 1594631145.645
        },
        {
          "status": 200,
          "timestamp": 1594630555.645
        },
        {
          "status": 200,
          "timestamp": 1594629955.645
        },
        {
          "status": 200,
          "timestamp": 1594629355.645
        },
        {
          "status": 200,
          "timestamp": 1594628755.645
        },
        {
          "status": 200,
          "timestamp": 1594628155.645
        },
        {
          "status": 200,
          "timestamp": 1594627555.645
        }
      ],
      "created": 1594458355.645,
      "createdBy": "ckcka7uf1001dglpv9dhpznkz",
      "modified": 1594458355.645,
      "modifiedBy": "ckcka7uf1001dglpv9dhpznkz"
    }
  ]
}</code></pre></div><div class="tab-pane httpAuth"><pre><code>curl -i "https://<span class="api-curl">${username}.pryv.me</span>/webhooks?auth=${token}"</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 1.5.18

{
  "webhooks": [
    {
      "id": "ckcka7uf1001fglpv0a4hqm7c",
      "accessId": "ckcka7uf1001dglpv9dhpznkz",
      "url": "https://notifications.service.com/pryv",
      "minIntervalMs": 5000,
      "maxRetries": 5,
      "currentRetries": 0,
      "state": "active",
      "runCount": 2,
      "failCount": 0,
      "lastRun": {
        "status": 200,
        "timestamp": 1594627555.645
      },
      "runs": [
        {
          "status": 200,
          "timestamp": 1594627555.645
        },
        {
          "status": 200,
          "timestamp": 1594623955.645
        }
      ],
      "created": 1594544755.645,
      "createdBy": "ckcka7uf1001dglpv9dhpznkz",
      "modified": 1594544755.645,
      "modifiedBy": "ckcka7uf1001dglpv9dhpznkz"
    },
    {
      "id": "ckcka7uf1001hglpvme4kxnit",
      "accessId": "ckcka7uf1001dglpv9dhpznkz",
      "url": "https://notifications.pryv.me/webhooks",
      "minIntervalMs": 5000,
      "maxRetries": 5,
      "currentRetries": 2,
      "state": "active",
      "runCount": 8,
      "failCount": 2,
      "lastRun": {
        "status": 200,
        "timestamp": 1594631150.645
      },
      "runs": [
        {
          "status": 500,
          "timestamp": 1594631150.645
        },
        {
          "status": 500,
          "timestamp": 1594631145.645
        },
        {
          "status": 200,
          "timestamp": 1594630555.645
        },
        {
          "status": 200,
          "timestamp": 1594629955.645
        },
        {
          "status": 200,
          "timestamp": 1594629355.645
        },
        {
          "status": 200,
          "timestamp": 1594628755.645
        },
        {
          "status": 200,
          "timestamp": 1594628155.645
        },
        {
          "status": 200,
          "timestamp": 1594627555.645
        }
      ],
      "created": 1594458355.645,
      "createdBy": "ckcka7uf1001dglpv9dhpznkz",
      "modified": 1594458355.645,
      "modifiedBy": "ckcka7uf1001dglpv9dhpznkz"
    }
  ]
}

</code></pre></div></div></div></aside></section><!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="methods-webhooks-webhooks-getOne" class="method"> <h3 id="get-one-webhook">Get one webhook</h3>
<div class="content"><div class="meta"><span onclick="location='/concepts/#entreprise-license-open-source-license'" class="entreprise-tag"><span title="Entreprise License Only" class="label">Y</span></span><span class="method-id"><span class="label">id</span><span class="label-value"><code>webhooks.getOne</code></span></span><span class="http"><span class="label">HTTP</span><span class="label-value"><code>GET /webhooks/{id}</code></span></span></div><div class="intro"><p>Fetches a specific webhook. Only returns a webhook if it was created by the access, unless you are using a personal access which is allowed to fetch any existing webhook in the user&#39;s account.</p>
</div><h4 id="parameters">Parameters</h4>
<table class="definitions"><tr><th><code>id</code></th><td><div class="header"><span class="type"><a href="#data-structure-identifier">identifier</a></span><span class="http"><span class="label">HTTP</span><span class="label-value"><span>set in request path</span></span></span></div><div class="description"><p>The id of the webhook.</p>
</div></td></tr></table><h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>200 OK</code></span></span><table class="definitions"><tr><th><code>webhook</code></th><td><div class="header"><span class="type"><a href="#data-structure-webhook">webhook</a></span></div><div class="description"><p>The webhook.</p>
</div></td></tr></table></div><aside><div class="example"><div class="tab-content"><div class="tab-pane json active"><pre><code>{}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "webhook": {
    "id": "ckcka7uf1001fglpv0a4hqm7c",
    "accessId": "ckcka7uf1001dglpv9dhpznkz",
    "url": "https://notifications.service.com/pryv",
    "minIntervalMs": 5000,
    "maxRetries": 5,
    "currentRetries": 0,
    "state": "active",
    "runCount": 2,
    "failCount": 0,
    "lastRun": {
      "status": 200,
      "timestamp": 1594627555.645
    },
    "runs": [
      {
        "status": 200,
        "timestamp": 1594627555.645
      },
      {
        "status": 200,
        "timestamp": 1594623955.645
      }
    ],
    "created": 1594544755.645,
    "createdBy": "ckcka7uf1001dglpv9dhpznkz",
    "modified": 1594544755.645,
    "modifiedBy": "ckcka7uf1001dglpv9dhpznkz"
  }
}</code></pre></div><div class="tab-pane http"><pre><code>curl -i "https://${token}@<span class="api-curl">${username}.pryv.me</span>/webhooks/${id}"</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 1.5.18

{
  "webhook": {
    "id": "ckcka7uf1001fglpv0a4hqm7c",
    "accessId": "ckcka7uf1001dglpv9dhpznkz",
    "url": "https://notifications.service.com/pryv",
    "minIntervalMs": 5000,
    "maxRetries": 5,
    "currentRetries": 0,
    "state": "active",
    "runCount": 2,
    "failCount": 0,
    "lastRun": {
      "status": 200,
      "timestamp": 1594627555.645
    },
    "runs": [
      {
        "status": 200,
        "timestamp": 1594627555.645
      },
      {
        "status": 200,
        "timestamp": 1594623955.645
      }
    ],
    "created": 1594544755.645,
    "createdBy": "ckcka7uf1001dglpv9dhpznkz",
    "modified": 1594544755.645,
    "modifiedBy": "ckcka7uf1001dglpv9dhpznkz"
  }
}
</code></pre></div><div class="tab-pane sockets"><pre><code>socket.emit('webhooks.getOne', {}, callback);</code></pre><div class="step-marker">⬇</div><pre><code>{
  "webhook": {
    "id": "ckcka7uf1001fglpv0a4hqm7c",
    "accessId": "ckcka7uf1001dglpv9dhpznkz",
    "url": "https://notifications.service.com/pryv",
    "minIntervalMs": 5000,
    "maxRetries": 5,
    "currentRetries": 0,
    "state": "active",
    "runCount": 2,
    "failCount": 0,
    "lastRun": {
      "status": 200,
      "timestamp": 1594627555.645
    },
    "runs": [
      {
        "status": 200,
        "timestamp": 1594627555.645
      },
      {
        "status": 200,
        "timestamp": 1594623955.645
      }
    ],
    "created": 1594544755.645,
    "createdBy": "ckcka7uf1001dglpv9dhpznkz",
    "modified": 1594544755.645,
    "modifiedBy": "ckcka7uf1001dglpv9dhpznkz"
  }
}</code></pre></div><div class="tab-pane batch"><pre><code>{
  "method": "webhooks.getOne",
  "params": {}
}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "webhook": {
    "id": "ckcka7uf1001fglpv0a4hqm7c",
    "accessId": "ckcka7uf1001dglpv9dhpznkz",
    "url": "https://notifications.service.com/pryv",
    "minIntervalMs": 5000,
    "maxRetries": 5,
    "currentRetries": 0,
    "state": "active",
    "runCount": 2,
    "failCount": 0,
    "lastRun": {
      "status": 200,
      "timestamp": 1594627555.645
    },
    "runs": [
      {
        "status": 200,
        "timestamp": 1594627555.645
      },
      {
        "status": 200,
        "timestamp": 1594623955.645
      }
    ],
    "created": 1594544755.645,
    "createdBy": "ckcka7uf1001dglpv9dhpznkz",
    "modified": 1594544755.645,
    "modifiedBy": "ckcka7uf1001dglpv9dhpznkz"
  }
}</code></pre></div><div class="tab-pane httpAuth"><pre><code>curl -i "https://<span class="api-curl">${username}.pryv.me</span>/webhooks/${id}?auth=${token}"</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 1.5.18

{
  "webhook": {
    "id": "ckcka7uf1001fglpv0a4hqm7c",
    "accessId": "ckcka7uf1001dglpv9dhpznkz",
    "url": "https://notifications.service.com/pryv",
    "minIntervalMs": 5000,
    "maxRetries": 5,
    "currentRetries": 0,
    "state": "active",
    "runCount": 2,
    "failCount": 0,
    "lastRun": {
      "status": 200,
      "timestamp": 1594627555.645
    },
    "runs": [
      {
        "status": 200,
        "timestamp": 1594627555.645
      },
      {
        "status": 200,
        "timestamp": 1594623955.645
      }
    ],
    "created": 1594544755.645,
    "createdBy": "ckcka7uf1001dglpv9dhpznkz",
    "modified": 1594544755.645,
    "modifiedBy": "ckcka7uf1001dglpv9dhpznkz"
  }
}

</code></pre></div></div></div></aside></section><!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="methods-webhooks-webhooks-create" class="method"> <h3 id="create-webhook">Create webhook</h3>
<div class="content"><div class="meta"><span onclick="location='/concepts/#entreprise-license-open-source-license'" class="entreprise-tag"><span title="Entreprise License Only" class="label">Y</span></span><span class="method-id"><span class="label">id</span><span class="label-value"><code>webhooks.create</code></span></span><span class="http"><span class="label">HTTP</span><span class="label-value"><code>POST /webhooks</code></span></span></div><div class="intro"><p>Creates a new webhook. You can only create webhooks with <code>app</code> and <code>shared</code> accesses.</p>
</div><h4 id="parameters">Parameters</h4>
<p>An object with the new webhook&#39;s data: see <a href="#data-structure-webhook">webhook</a>.</p>
<h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>201 Created</code></span></span><table class="definitions"><tr><th><code>webhook</code></th><td><div class="header"><span class="type"><a href="#data-structure-webhook">webhook</a></span></div><div class="description"><p>The created webhook.</p>
</div></td></tr></table><h4 id="specific-errors">Specific errors</h4>
<table class="definitions"></table></div><aside><div class="example"><div class="tab-content"><div class="tab-pane json active"><pre><code>{
  "url": "https://sievey.io/webhooks"
}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "webhook": {
    "id": "ckcka7uf1001iglpvzid61oyh",
    "accessId": "ckcka7uf1001eglpvc0wda3sc",
    "url": "https://sievey.io/webhooks",
    "minIntervalMs": 5000,
    "maxRetries": 5,
    "currentRetries": 0,
    "state": "active",
    "runCount": 0,
    "failCount": 0,
    "lastRun": {},
    "runs": [],
    "created": 1594631150.645,
    "createdBy": "ckcka7uf1001eglpvc0wda3sc",
    "modified": 1594631150.645,
    "modifiedBy": "ckcka7uf1001eglpvc0wda3sc"
  }
}</code></pre></div><div class="tab-pane http"><pre><code>curl -i -X POST -H 'Content-Type: application/json' -d '{"url":"https://sievey.io/webhooks"}' "https://${token}@<span class="api-curl">${username}.pryv.me</span>/webhooks"</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 201 Created
Content-Type: application/json; charset=utf-8
API-Version: 1.5.18

{
  "webhook": {
    "id": "ckcka7uf1001iglpvzid61oyh",
    "accessId": "ckcka7uf1001eglpvc0wda3sc",
    "url": "https://sievey.io/webhooks",
    "minIntervalMs": 5000,
    "maxRetries": 5,
    "currentRetries": 0,
    "state": "active",
    "runCount": 0,
    "failCount": 0,
    "lastRun": {},
    "runs": [],
    "created": 1594631150.645,
    "createdBy": "ckcka7uf1001eglpvc0wda3sc",
    "modified": 1594631150.645,
    "modifiedBy": "ckcka7uf1001eglpvc0wda3sc"
  }
}
</code></pre></div><div class="tab-pane sockets"><pre><code>socket.emit('webhooks.create', {"url":"https://sievey.io/webhooks"}, callback);</code></pre><div class="step-marker">⬇</div><pre><code>{
  "webhook": {
    "id": "ckcka7uf1001iglpvzid61oyh",
    "accessId": "ckcka7uf1001eglpvc0wda3sc",
    "url": "https://sievey.io/webhooks",
    "minIntervalMs": 5000,
    "maxRetries": 5,
    "currentRetries": 0,
    "state": "active",
    "runCount": 0,
    "failCount": 0,
    "lastRun": {},
    "runs": [],
    "created": 1594631150.645,
    "createdBy": "ckcka7uf1001eglpvc0wda3sc",
    "modified": 1594631150.645,
    "modifiedBy": "ckcka7uf1001eglpvc0wda3sc"
  }
}</code></pre></div><div class="tab-pane batch"><pre><code>{
  "method": "webhooks.create",
  "params": {
    "url": "https://sievey.io/webhooks"
  }
}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "webhook": {
    "id": "ckcka7uf1001iglpvzid61oyh",
    "accessId": "ckcka7uf1001eglpvc0wda3sc",
    "url": "https://sievey.io/webhooks",
    "minIntervalMs": 5000,
    "maxRetries": 5,
    "currentRetries": 0,
    "state": "active",
    "runCount": 0,
    "failCount": 0,
    "lastRun": {},
    "runs": [],
    "created": 1594631150.645,
    "createdBy": "ckcka7uf1001eglpvc0wda3sc",
    "modified": 1594631150.645,
    "modifiedBy": "ckcka7uf1001eglpvc0wda3sc"
  }
}</code></pre></div><div class="tab-pane httpAuth"><pre><code>curl -i -X POST -H 'Content-Type: application/json' -d '{"url":"https://sievey.io/webhooks"}' "https://<span class="api-curl">${username}.pryv.me</span>/webhooks?auth=${token}"</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 201 Created
Content-Type: application/json; charset=utf-8
API-Version: 1.5.18

{
  "webhook": {
    "id": "ckcka7uf1001iglpvzid61oyh",
    "accessId": "ckcka7uf1001eglpvc0wda3sc",
    "url": "https://sievey.io/webhooks",
    "minIntervalMs": 5000,
    "maxRetries": 5,
    "currentRetries": 0,
    "state": "active",
    "runCount": 0,
    "failCount": 0,
    "lastRun": {},
    "runs": [],
    "created": 1594631150.645,
    "createdBy": "ckcka7uf1001eglpvc0wda3sc",
    "modified": 1594631150.645,
    "modifiedBy": "ckcka7uf1001eglpvc0wda3sc"
  }
}

</code></pre></div></div></div></aside></section><!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="methods-webhooks-webhooks-update" class="method"> <h3 id="update-webhook">Update webhook</h3>
<div class="content"><div class="meta"><span onclick="location='/concepts/#entreprise-license-open-source-license'" class="entreprise-tag"><span title="Entreprise License Only" class="label">Y</span></span><span class="method-id"><span class="label">id</span><span class="label-value"><code>webhooks.update</code></span></span><span class="http"><span class="label">HTTP</span><span class="label-value"><code>PUT /webhooks/{id}</code></span></span></div><div class="intro"><p>Modifies the webhook. You can only modify webhooks with the access that was used to create them, unless you are using a personal token.<br>Updating the <code>state</code> to <code>active</code> resets the <code>currentRetries</code> counter.</p>
</div><h4 id="parameters">Parameters</h4>
<table class="definitions"><tr><th><code>id</code></th><td><div class="header"><span class="type"><a href="#data-structure-identifier">identifier</a></span><span class="http"><span class="label">HTTP</span><span class="label-value"><span>set in request path</span></span></span></div><div class="description"><p>The id of the webhook.</p>
</div></td></tr><tr><th><code>update</code></th><td><div class="header"><span class="type">object</span><span class="http"><span class="label">HTTP</span><span class="label-value"><span>request body</span></span></span></div><div class="description"><p>New values for the webhook&#39;s fields: see <a href="#data-structure-webhook">webhook</a>. All fields are optional, and only modified values must be included.  </p>
</div></td></tr></table><h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>200 OK</code></span></span><table class="definitions"><tr><th><code>webhook</code></th><td><div class="header"><span class="type"><a href="#data-structure-webhook">webhook</a></span></div><div class="description"><p>The updated webhook.</p>
</div></td></tr></table><h4 id="specific-errors">Specific errors</h4>
<table class="definitions"><tr><th><code>item-already-exists</code></th><td><div class="header"><span class="http"><span class="label">HTTP</span><span class="label-value"><code>400</code></span></span></div><div class="description"><p>There is already a webhook for this URL created by the given access.</p>
</div></td></tr></table></div><aside><div class="example"><p>Reactivating a webhook</p>
<div class="tab-content"><div class="tab-pane json active"><pre><code>{
  "state": "active"
}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "webhook": {
    "id": "ckcka7uf1001gglpvtaznl5dz",
    "accessId": "ckcka7uf1001dglpv9dhpznkz",
    "url": "https://notifications.pryv.me/myusername/ui3HDAw43",
    "minIntervalMs": 5000,
    "maxRetries": 5,
    "state": "active",
    "currentRetries": 0,
    "runCount": 5,
    "failCount": 5,
    "lastRun": {
      "status": 404,
      "timestamp": 1594631140.645
    },
    "runs": [
      {
        "status": 404,
        "timestamp": 1594631140.645
      },
      {
        "status": 404,
        "timestamp": 1594631100.645
      },
      {
        "status": 404,
        "timestamp": 1594631080.645
      },
      {
        "status": 404,
        "timestamp": 1594631070.645
      },
      {
        "status": 404,
        "timestamp": 1594631065.645
      }
    ]
  }
}</code></pre></div><div class="tab-pane http"><pre><code>curl -i -X PUT -H 'Content-Type: application/json' -d '{"state":"active"}' "https://${token}@<span class="api-curl">${username}.pryv.me</span>/webhooks/${id}"</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 1.5.18

{
  "webhook": {
    "id": "ckcka7uf1001gglpvtaznl5dz",
    "accessId": "ckcka7uf1001dglpv9dhpznkz",
    "url": "https://notifications.pryv.me/myusername/ui3HDAw43",
    "minIntervalMs": 5000,
    "maxRetries": 5,
    "state": "active",
    "currentRetries": 0,
    "runCount": 5,
    "failCount": 5,
    "lastRun": {
      "status": 404,
      "timestamp": 1594631140.645
    },
    "runs": [
      {
        "status": 404,
        "timestamp": 1594631140.645
      },
      {
        "status": 404,
        "timestamp": 1594631100.645
      },
      {
        "status": 404,
        "timestamp": 1594631080.645
      },
      {
        "status": 404,
        "timestamp": 1594631070.645
      },
      {
        "status": 404,
        "timestamp": 1594631065.645
      }
    ]
  }
}
</code></pre></div><div class="tab-pane sockets"><pre><code>socket.emit('webhooks.update', {"state":"active"}, callback);</code></pre><div class="step-marker">⬇</div><pre><code>{
  "webhook": {
    "id": "ckcka7uf1001gglpvtaznl5dz",
    "accessId": "ckcka7uf1001dglpv9dhpznkz",
    "url": "https://notifications.pryv.me/myusername/ui3HDAw43",
    "minIntervalMs": 5000,
    "maxRetries": 5,
    "state": "active",
    "currentRetries": 0,
    "runCount": 5,
    "failCount": 5,
    "lastRun": {
      "status": 404,
      "timestamp": 1594631140.645
    },
    "runs": [
      {
        "status": 404,
        "timestamp": 1594631140.645
      },
      {
        "status": 404,
        "timestamp": 1594631100.645
      },
      {
        "status": 404,
        "timestamp": 1594631080.645
      },
      {
        "status": 404,
        "timestamp": 1594631070.645
      },
      {
        "status": 404,
        "timestamp": 1594631065.645
      }
    ]
  }
}</code></pre></div><div class="tab-pane batch"><pre><code>{
  "method": "webhooks.update",
  "params": {
    "state": "active"
  }
}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "webhook": {
    "id": "ckcka7uf1001gglpvtaznl5dz",
    "accessId": "ckcka7uf1001dglpv9dhpznkz",
    "url": "https://notifications.pryv.me/myusername/ui3HDAw43",
    "minIntervalMs": 5000,
    "maxRetries": 5,
    "state": "active",
    "currentRetries": 0,
    "runCount": 5,
    "failCount": 5,
    "lastRun": {
      "status": 404,
      "timestamp": 1594631140.645
    },
    "runs": [
      {
        "status": 404,
        "timestamp": 1594631140.645
      },
      {
        "status": 404,
        "timestamp": 1594631100.645
      },
      {
        "status": 404,
        "timestamp": 1594631080.645
      },
      {
        "status": 404,
        "timestamp": 1594631070.645
      },
      {
        "status": 404,
        "timestamp": 1594631065.645
      }
    ]
  }
}</code></pre></div><div class="tab-pane httpAuth"><pre><code>curl -i -X PUT -H 'Content-Type: application/json' -d '{"state":"active"}' "https://<span class="api-curl">${username}.pryv.me</span>/webhooks/${id}?auth=${token}"</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 1.5.18

{
  "webhook": {
    "id": "ckcka7uf1001gglpvtaznl5dz",
    "accessId": "ckcka7uf1001dglpv9dhpznkz",
    "url": "https://notifications.pryv.me/myusername/ui3HDAw43",
    "minIntervalMs": 5000,
    "maxRetries": 5,
    "state": "active",
    "currentRetries": 0,
    "runCount": 5,
    "failCount": 5,
    "lastRun": {
      "status": 404,
      "timestamp": 1594631140.645
    },
    "runs": [
      {
        "status": 404,
        "timestamp": 1594631140.645
      },
      {
        "status": 404,
        "timestamp": 1594631100.645
      },
      {
        "status": 404,
        "timestamp": 1594631080.645
      },
      {
        "status": 404,
        "timestamp": 1594631070.645
      },
      {
        "status": 404,
        "timestamp": 1594631065.645
      }
    ]
  }
}

</code></pre></div></div></div></aside></section><!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="methods-webhooks-webhooks-delete" class="method"> <h3 id="delete-webhook">Delete webhook</h3>
<div class="content"><div class="meta"><span onclick="location='/concepts/#entreprise-license-open-source-license'" class="entreprise-tag"><span title="Entreprise License Only" class="label">Y</span></span><span class="method-id"><span class="label">id</span><span class="label-value"><code>webhooks.delete</code></span></span><span class="http"><span class="label">HTTP</span><span class="label-value"><code>DELETE /webhooks/{id}</code></span></span></div><div class="intro"><p>Deletes the specified webhook. You can only delete webhooks with the access that was used to create them, unless you are using a personal token.</p>
</div><h4 id="parameters">Parameters</h4>
<table class="definitions"><tr><th><code>id</code></th><td><div class="header"><span class="type"><a href="#data-structure-identifier">identifier</a></span><span class="http"><span class="label">HTTP</span><span class="label-value"><span>set in request path</span></span></span></div><div class="description"><p>The id of the webhook.</p>
</div></td></tr></table><h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>200 OK</code></span></span><table class="definitions"><tr><th><code>webhookDeletion</code></th><td><div class="header"><span class="type"><a href="#data-structure-item-deletion">item deletion</a></span></div><div class="description"><p>The deletion record.</p>
</div></td></tr></table></div><aside><div class="example"><div class="tab-content"><div class="tab-pane json active"><pre><code>{}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "webhookDeletion": {
    "id": "ckcka7uf1001iglpvzid61oyh"
  }
}</code></pre></div><div class="tab-pane http"><pre><code>curl -i -X DELETE "https://${token}@<span class="api-curl">${username}.pryv.me</span>/webhooks/ckcka7uf1001iglpvzid61oyh"</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 1.5.18

{
  "webhookDeletion": {
    "id": "ckcka7uf1001iglpvzid61oyh"
  }
}
</code></pre></div><div class="tab-pane sockets"><pre><code>socket.emit('webhooks.delete', {"id":"ckcka7uf1001iglpvzid61oyh"}, callback);</code></pre><div class="step-marker">⬇</div><pre><code>{
  "webhookDeletion": {
    "id": "ckcka7uf1001iglpvzid61oyh"
  }
}</code></pre></div><div class="tab-pane batch"><pre><code>{
  "method": "webhooks.delete",
  "params": {
    "id": "ckcka7uf1001iglpvzid61oyh"
  }
}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "webhookDeletion": {
    "id": "ckcka7uf1001iglpvzid61oyh"
  }
}</code></pre></div><div class="tab-pane httpAuth"><pre><code>curl -i -X DELETE "https://<span class="api-curl">${username}.pryv.me</span>/webhooks/ckcka7uf1001iglpvzid61oyh?auth=${token}"</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 1.5.18

{
  "webhookDeletion": {
    "id": "ckcka7uf1001iglpvzid61oyh"
  }
}

</code></pre></div></div></div></aside></section><!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="methods-webhooks-webhooks-test" class="method"> <h3 id="test-webhook">Test webhook</h3>
<div class="content"><div class="meta"><span onclick="location='/concepts/#entreprise-license-open-source-license'" class="entreprise-tag"><span title="Entreprise License Only" class="label">Y</span></span><span class="method-id"><span class="label">id</span><span class="label-value"><code>webhooks.test</code></span></span><span class="http"><span class="label">HTTP</span><span class="label-value"><code>POST /webhooks/{id}/test</code></span></span></div><div class="intro"><p>Sends a post request containing a message called <code>test</code> to the URL of the specified webhook&#39;s <code>url</code>. You can only test webhooks with the access that was used to create them, unless you are using a personal token.</p>
</div><h4 id="parameters">Parameters</h4>
<table class="definitions"><tr><th><code>id</code></th><td><div class="header"><span class="type"><a href="#data-structure-identifier">identifier</a></span><span class="http"><span class="label">HTTP</span><span class="label-value"><span>set in request path</span></span></span></div><div class="description"><p>The id of the webhook.</p>
</div></td></tr></table><h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>200 OK</code></span></span><table class="definitions"><tr><th><code>webhook</code></th><td><div class="header"><span class="type"><a href="#data-structure-webhook">webhook</a></span></div><div class="description"><p>The webhook.</p>
</div></td></tr></table><h4 id="specific-errors">Specific errors</h4>
<table class="definitions"><tr><th><code>unknown-referenced-resource</code></th><td><div class="header"><span class="http"><span class="label">HTTP</span><span class="label-value"><code>400</code></span></span></div><div class="description"><p>The webhook&#39;s <code>url</code> is either unreachable or responds with a 4xx/5xx status.</p>
</div></td></tr></table></div><aside><div class="example"><div class="tab-content"><div class="tab-pane json active"><pre><code>{}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "webhook": {
    "id": "ckcka7uf1001iglpvzid61oyh",
    "accessId": "ckcka7uf1001eglpvc0wda3sc",
    "url": "https://sievey.io/webhooks",
    "minIntervalMs": 5000,
    "maxRetries": 5,
    "currentRetries": 0,
    "state": "active",
    "runCount": 0,
    "failCount": 0,
    "lastRun": {},
    "runs": [],
    "created": 1594631150.645,
    "createdBy": "ckcka7uf1001eglpvc0wda3sc",
    "modified": 1594631150.645,
    "modifiedBy": "ckcka7uf1001eglpvc0wda3sc"
  }
}</code></pre></div><div class="tab-pane http"><pre><code>curl -i -X POST -H 'Content-Type: application/json' -d '{}' "https://${token}@<span class="api-curl">${username}.pryv.me</span>/webhooks/${id}/test"</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 1.5.18

{
  "webhook": {
    "id": "ckcka7uf1001iglpvzid61oyh",
    "accessId": "ckcka7uf1001eglpvc0wda3sc",
    "url": "https://sievey.io/webhooks",
    "minIntervalMs": 5000,
    "maxRetries": 5,
    "currentRetries": 0,
    "state": "active",
    "runCount": 0,
    "failCount": 0,
    "lastRun": {},
    "runs": [],
    "created": 1594631150.645,
    "createdBy": "ckcka7uf1001eglpvc0wda3sc",
    "modified": 1594631150.645,
    "modifiedBy": "ckcka7uf1001eglpvc0wda3sc"
  }
}
</code></pre></div><div class="tab-pane sockets"><pre><code>socket.emit('webhooks.test', {}, callback);</code></pre><div class="step-marker">⬇</div><pre><code>{
  "webhook": {
    "id": "ckcka7uf1001iglpvzid61oyh",
    "accessId": "ckcka7uf1001eglpvc0wda3sc",
    "url": "https://sievey.io/webhooks",
    "minIntervalMs": 5000,
    "maxRetries": 5,
    "currentRetries": 0,
    "state": "active",
    "runCount": 0,
    "failCount": 0,
    "lastRun": {},
    "runs": [],
    "created": 1594631150.645,
    "createdBy": "ckcka7uf1001eglpvc0wda3sc",
    "modified": 1594631150.645,
    "modifiedBy": "ckcka7uf1001eglpvc0wda3sc"
  }
}</code></pre></div><div class="tab-pane batch"><pre><code>{
  "method": "webhooks.test",
  "params": {}
}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "webhook": {
    "id": "ckcka7uf1001iglpvzid61oyh",
    "accessId": "ckcka7uf1001eglpvc0wda3sc",
    "url": "https://sievey.io/webhooks",
    "minIntervalMs": 5000,
    "maxRetries": 5,
    "currentRetries": 0,
    "state": "active",
    "runCount": 0,
    "failCount": 0,
    "lastRun": {},
    "runs": [],
    "created": 1594631150.645,
    "createdBy": "ckcka7uf1001eglpvc0wda3sc",
    "modified": 1594631150.645,
    "modifiedBy": "ckcka7uf1001eglpvc0wda3sc"
  }
}</code></pre></div><div class="tab-pane httpAuth"><pre><code>curl -i -X POST -H 'Content-Type: application/json' -d '{}' "https://<span class="api-curl">${username}.pryv.me</span>/webhooks/${id}/test?auth=${token}"</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 1.5.18

{
  "webhook": {
    "id": "ckcka7uf1001iglpvzid61oyh",
    "accessId": "ckcka7uf1001eglpvc0wda3sc",
    "url": "https://sievey.io/webhooks",
    "minIntervalMs": 5000,
    "maxRetries": 5,
    "currentRetries": 0,
    "state": "active",
    "runCount": 0,
    "failCount": 0,
    "lastRun": {},
    "runs": [],
    "created": 1594631150.645,
    "createdBy": "ckcka7uf1001eglpvc0wda3sc",
    "modified": 1594631150.645,
    "modifiedBy": "ckcka7uf1001eglpvc0wda3sc"
  }
}

</code></pre></div></div></div></aside></section></section><!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="methods-followed-slices"><h2 id="followed-slices">Followed slices</h2>
<div class="content"><div class="meta"><span onclick="location='/reference/#trusted-apps-verification'" class="label trusted-only">Trusted apps only</span><text>&nbsp;</text></div><div class="intro"><p>Methods to retrieve and manipulate <a href="#data-structure-followed-slice">followed slices</a>.</p>
</div></div><!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="methods-followed-slices-followedSlices-get" class="method"> <h3 id="get-followed-slices">Get followed slices</h3>
<div class="content"><div class="meta"><span onclick="location='/reference/#trusted-apps-verification'" class="trusted-tag"><span title="Trusted Apps Only" class="label">T</span></span><span class="method-id"><span class="label">id</span><span class="label-value"><code>followedSlices.get</code></span></span><span class="http"><span class="label">HTTP</span><span class="label-value"><code>GET /followed-slices</code></span></span></div><div class="intro"><p>Gets followed slices.</p>
</div><h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>200 OK</code></span></span><table class="definitions"><tr><th><code>followedSlices</code></th><td><div class="header"><span class="type">array of <a href="#data-structure-followed-slice">followed slices</a></span></div><div class="description"><p>All followed slices in the user&#39;s account, ordered by name.</p>
</div></td></tr></table></div><aside></aside></section><!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="methods-followed-slices-followedSlices-create" class="method"> <h3 id="create-followed-slice">Create followed slice</h3>
<div class="content"><div class="meta"><span onclick="location='/reference/#trusted-apps-verification'" class="trusted-tag"><span title="Trusted Apps Only" class="label">T</span></span><span class="method-id"><span class="label">id</span><span class="label-value"><code>followedSlices.create</code></span></span><span class="http"><span class="label">HTTP</span><span class="label-value"><code>POST /followed-slices</code></span></span></div><div class="intro"><p>Creates a new followed slice.</p>
</div><h4 id="parameters">Parameters</h4>
<p>An object with the new followed slice&#39;s data: see <a href="#data-structure-followed-slice">followed slice</a>.</p>
<h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>201 Created</code></span></span><table class="definitions"><tr><th><code>followedSlice</code></th><td><div class="header"><span class="type"><a href="#data-structure-followed-slice">followed slice</a></span></div><div class="description"><p>The created followed slice.</p>
</div></td></tr></table></div><aside></aside></section><!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="methods-followed-slices-followedSlices-update" class="method"> <h3 id="update-followed-slice">Update followed slice</h3>
<div class="content"><div class="meta"><span onclick="location='/reference/#trusted-apps-verification'" class="trusted-tag"><span title="Trusted Apps Only" class="label">T</span></span><span class="method-id"><span class="label">id</span><span class="label-value"><code>followedSlices.update</code></span></span><span class="http"><span class="label">HTTP</span><span class="label-value"><code>PUT /followed-slices/{id}</code></span></span></div><div class="intro"><p>Modifies the specified followed slice.</p>
</div><h4 id="parameters">Parameters</h4>
<table class="definitions"><tr><th><code>id</code></th><td><div class="header"><span class="type"><a href="#data-structure-identifier">identifier</a></span><span class="http"><span class="label">HTTP</span><span class="label-value"><span>set in request path</span></span></span></div><div class="description"><p>The id of the followed slice.</p>
</div></td></tr><tr><th><code>update</code></th><td><div class="header"><span class="type">object</span><span class="http"><span class="label">HTTP</span><span class="label-value"><span>request body</span></span></span></div><div class="description"><p>New values for the followed slice&#39;s fields: see <a href="#data-structure-followed-slice">followed slice</a>. All fields are optional, and only modified values must be included.</p>
</div></td></tr></table><h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>200 OK</code></span></span><table class="definitions"><tr><th><code>followedSlice</code></th><td><div class="header"><span class="type"><a href="#data-structure-followed-slice">followed slice</a></span></div><div class="description"><p>The updated followed slice.</p>
</div></td></tr></table></div><aside></aside></section><!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="methods-followed-slices-followedSlices-delete" class="method"> <h3 id="delete-followed-slice">Delete followed slice</h3>
<div class="content"><div class="meta"><span onclick="location='/reference/#trusted-apps-verification'" class="trusted-tag"><span title="Trusted Apps Only" class="label">T</span></span><span class="method-id"><span class="label">id</span><span class="label-value"><code>followedSlices.delete</code></span></span><span class="http"><span class="label">HTTP</span><span class="label-value"><code>DELETE /followed-slices/{id}</code></span></span></div><div class="intro"><p>Deletes the specified followed slice.</p>
</div><h4 id="parameters">Parameters</h4>
<table class="definitions"><tr><th><code>id</code></th><td><div class="header"><span class="type"><a href="#data-structure-identifier">identifier</a></span><span class="http"><span class="label">HTTP</span><span class="label-value"><span>set in request path</span></span></span></div><div class="description"><p>The id of the followed slice.</p>
</div></td></tr></table><h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>200 OK</code></span></span><table class="definitions"><tr><th><code>followedSliceDeletion</code></th><td><div class="header"><span class="type"><a href="#data-structure-item-deletion">item deletion</a></span></div><div class="description"><p>The deletion record.</p>
</div></td></tr></table></div><aside></aside></section></section><!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="methods-profile"><h2 id="profile-sets">Profile sets</h2>
<div class="content"><div class="meta"></div><div class="intro"><p>Methods to read and write profile sets. Profile sets are plain key-value stores of user-level settings.</p>
</div></div><!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="methods-profile-profile-getApp" class="method"> <h3 id="get-app-profile">Get app profile</h3>
<div class="content"><div class="meta"><span class="method-id"><span class="label">id</span><span class="label-value"><code>profile.getApp</code></span></span><span class="http"><span class="label">HTTP</span><span class="label-value"><code>GET /profile/app</code></span></span></div><div class="intro"><p>Gets the app&#39;s dedicated profile set, which contains app-level settings for the user. Available to app accesses.</p>
</div><h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>200 OK</code></span></span><table class="definitions"><tr><th><code>profile</code></th><td><div class="header"><span class="type">object</span></div><div class="description"><p>The app profile set. (Empty if the app never defined any setting.)</p>
</div></td></tr></table></div><aside><div class="example"><div class="tab-content"><div class="tab-pane json active"><pre><code>{}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "profile": {
    "setting1": "value",
    "setting2": true,
    "setting3": 123
  }
}</code></pre></div><div class="tab-pane http"><pre><code>curl -i "https://${token}@<span class="api-curl">${username}.pryv.me</span>/profile/app"</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 1.5.18

{
  "profile": {
    "setting1": "value",
    "setting2": true,
    "setting3": 123
  }
}
</code></pre></div><div class="tab-pane sockets"><pre><code>socket.emit('profile.getApp', {}, callback);</code></pre><div class="step-marker">⬇</div><pre><code>{
  "profile": {
    "setting1": "value",
    "setting2": true,
    "setting3": 123
  }
}</code></pre></div><div class="tab-pane batch"><pre><code>{
  "method": "profile.getApp",
  "params": {}
}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "profile": {
    "setting1": "value",
    "setting2": true,
    "setting3": 123
  }
}</code></pre></div><div class="tab-pane httpAuth"><pre><code>curl -i "https://<span class="api-curl">${username}.pryv.me</span>/profile/app?auth=${token}"</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 1.5.18

{
  "profile": {
    "setting1": "value",
    "setting2": true,
    "setting3": 123
  }
}

</code></pre></div></div></div></aside></section><!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="methods-profile-profile-updateApp" class="method"> <h3 id="update-app-profile">Update app profile</h3>
<div class="content"><div class="meta"><span class="method-id"><span class="label">id</span><span class="label-value"><code>profile.updateApp</code></span></span><span class="http"><span class="label">HTTP</span><span class="label-value"><code>PUT /profile/app</code></span></span></div><div class="intro"><p>Adds, updates or delete app profile keys. Available to app accesses.</p>
<ul>
<li>To add or update a key, just set its value</li>
<li>To delete a key, set its value to <code>null</code></li>
</ul>
<p>Existing keys not included in the update are left untouched.</p>
</div><h4 id="parameters">Parameters</h4>
<table class="definitions"><tr><th><code>update</code></th><td><div class="header"><span class="type">object</span><span class="http"><span class="label">HTTP</span><span class="label-value"><span>request body</span></span></span></div><div class="description"><p>An object with the desired key changes (see above).</p>
</div></td></tr></table><h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>200 OK</code></span></span><table class="definitions"><tr><th><code>profile</code></th><td><div class="header"><span class="type">object</span></div><div class="description"><p>The updated app profile set.</p>
</div></td></tr></table></div><aside><div class="example"><div class="tab-content"><div class="tab-pane json active"><pre><code>{
  "setting1": "new value",
  "setting2": null
}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "profile": {
    "setting1": "new value",
    "setting3": 123
  }
}</code></pre></div><div class="tab-pane http"><pre><code>curl -i -X PUT -H 'Content-Type: application/json' -d '{"setting1":"new value","setting2":null}' "https://${token}@<span class="api-curl">${username}.pryv.me</span>/profile/app"</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 1.5.18

{
  "profile": {
    "setting1": "new value",
    "setting3": 123
  }
}
</code></pre></div><div class="tab-pane sockets"><pre><code>socket.emit('profile.updateApp', {"setting1":"new value","setting2":null}, callback);</code></pre><div class="step-marker">⬇</div><pre><code>{
  "profile": {
    "setting1": "new value",
    "setting3": 123
  }
}</code></pre></div><div class="tab-pane batch"><pre><code>{
  "method": "profile.updateApp",
  "params": {
    "setting1": "new value",
    "setting2": null
  }
}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "profile": {
    "setting1": "new value",
    "setting3": 123
  }
}</code></pre></div><div class="tab-pane httpAuth"><pre><code>curl -i -X PUT -H 'Content-Type: application/json' -d '{"setting1":"new value","setting2":null}' "https://<span class="api-curl">${username}.pryv.me</span>/profile/app?auth=${token}"</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 1.5.18

{
  "profile": {
    "setting1": "new value",
    "setting3": 123
  }
}

</code></pre></div></div></div></aside></section><!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="methods-profile-profile-getPublic" class="method"> <h3 id="get-public-profile">Get public profile</h3>
<div class="content"><div class="meta"><span class="method-id"><span class="label">id</span><span class="label-value"><code>profile.getPublic</code></span></span><span class="http"><span class="label">HTTP</span><span class="label-value"><code>GET /profile/public</code></span></span></div><div class="intro"><p>Gets the public profile set, which contains the information the user makes publicly available (e.g. avatar image). Available to all accesses.</p>
</div><h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>200 OK</code></span></span><table class="definitions"><tr><th><code>profile</code></th><td><div class="header"><span class="type">object</span></div><div class="description"><p>The public profile set.</p>
</div></td></tr></table></div><aside><div class="example"><div class="tab-content"><div class="tab-pane json active"><pre><code>{}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "profile": {
    "avatarURL": "http://www.gravatar.com/avatar/1beb9d80bf842c1d90ebdab356908538"
  }
}</code></pre></div><div class="tab-pane http"><pre><code>curl -i "https://${token}@<span class="api-curl">${username}.pryv.me</span>/profile/public"</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 1.5.18

{
  "profile": {
    "avatarURL": "http://www.gravatar.com/avatar/1beb9d80bf842c1d90ebdab356908538"
  }
}
</code></pre></div><div class="tab-pane sockets"><pre><code>socket.emit('profile.getPublic', {}, callback);</code></pre><div class="step-marker">⬇</div><pre><code>{
  "profile": {
    "avatarURL": "http://www.gravatar.com/avatar/1beb9d80bf842c1d90ebdab356908538"
  }
}</code></pre></div><div class="tab-pane batch"><pre><code>{
  "method": "profile.getPublic",
  "params": {}
}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "profile": {
    "avatarURL": "http://www.gravatar.com/avatar/1beb9d80bf842c1d90ebdab356908538"
  }
}</code></pre></div><div class="tab-pane httpAuth"><pre><code>curl -i "https://<span class="api-curl">${username}.pryv.me</span>/profile/public?auth=${token}"</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 1.5.18

{
  "profile": {
    "avatarURL": "http://www.gravatar.com/avatar/1beb9d80bf842c1d90ebdab356908538"
  }
}

</code></pre></div></div></div></aside></section><!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="methods-profile-profile-updatePublic" class="method"> <h3 id="update-public-profile">Update public profile</h3>
<div class="content"><div class="meta"><span class="method-id"><span class="label">id</span><span class="label-value"><code>profile.updatePublic</code></span></span><span class="http"><span class="label">HTTP</span><span class="label-value"><code>PUT /profile/public</code></span></span></div><div class="intro"><p>Adds, updates or delete public profile keys. Available to personal accesses.</p>
<ul>
<li>To add or update a key, just set its value</li>
<li>To delete a key, set its value to <code>null</code></li>
</ul>
<p>Existing keys not included in the update are left untouched.</p>
</div><h4 id="parameters">Parameters</h4>
<table class="definitions"><tr><th><code>update</code></th><td><div class="header"><span class="type">object</span><span class="http"><span class="label">HTTP</span><span class="label-value"><span>request body</span></span></span></div><div class="description"><p>An object with the desired key changes (see above).</p>
</div></td></tr></table><h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>200 OK</code></span></span><table class="definitions"><tr><th><code>profile</code></th><td><div class="header"><span class="type">object</span></div><div class="description"><p>The updated public profile set.</p>
</div></td></tr></table></div><aside></aside></section><!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="methods-profile-profile-getPrivate" class="method"> <h3 id="get-private-profile">Get private profile</h3>
<div class="content"><div class="meta"><span class="method-id"><span class="label">id</span><span class="label-value"><code>profile.getPrivate</code></span></span><span class="http"><span class="label">HTTP</span><span class="label-value"><code>GET /profile/private</code></span></span></div><div class="intro"><p>Gets the private profile set. Available to personal accesses.</p>
</div><h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>200 OK</code></span></span><table class="definitions"><tr><th><code>profile</code></th><td><div class="header"><span class="type">object</span></div><div class="description"><p>The private profile set.</p>
</div></td></tr></table></div><aside></aside></section><!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="methods-profile-profile-updatePrivate" class="method"> <h3 id="update-private-profile">Update private profile</h3>
<div class="content"><div class="meta"><span class="method-id"><span class="label">id</span><span class="label-value"><code>profile.updatePrivate</code></span></span><span class="http"><span class="label">HTTP</span><span class="label-value"><code>PUT /profile/private</code></span></span></div><div class="intro"><p>Adds, updates or delete private profile keys. Available to personal accesses.</p>
<ul>
<li>To add or update a key, just set its value</li>
<li>To delete a key, set its value to <code>null</code></li>
</ul>
<p>Existing keys not included in the update are left untouched.</p>
</div><h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>200 OK</code></span></span><table class="definitions"><tr><th><code>profile</code></th><td><div class="header"><span class="type">object</span></div><div class="description"><p>The updated private profile set.</p>
</div></td></tr></table></div><aside></aside></section></section><!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="methods-account"><h2 id="account-management">Account management</h2>
<div class="content"><div class="meta"><span onclick="location='/reference/#trusted-apps-verification'" class="label trusted-only">Trusted apps only</span><text>&nbsp;</text></div><div class="intro"><p>Methods to manage the user&#39;s account.</p>
</div></div><!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="methods-account-account-get" class="method"> <h3 id="get-account-information">Get account information</h3>
<div class="content"><div class="meta"><span onclick="location='/reference/#trusted-apps-verification'" class="trusted-tag"><span title="Trusted Apps Only" class="label">T</span></span><span class="method-id"><span class="label">id</span><span class="label-value"><code>account.get</code></span></span><span class="http"><span class="label">HTTP</span><span class="label-value"><code>GET /account</code></span></span></div><div class="intro"><p>Retrieves the user&#39;s account information.</p>
</div><h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>200 OK</code></span></span><table class="definitions"><tr><th><code>account</code></th><td><div class="header"><span class="type"><a href="#data-structure-account">account information</a></span></div><div class="description"><p>The user&#39;s account information.</p>
</div></td></tr></table></div><aside><div class="example"><div class="tab-content"><div class="tab-pane json active"><pre><code>{}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "account": {
    "username": "chuangzi",
    "email": "chuangzi@dao.info",
    "language": "zh",
    "storageUsed": {
      "dbDocuments": 34831,
      "attachedFiles": 12
    }
  }
}</code></pre></div><div class="tab-pane http"><pre><code>curl -i "https://${token}@<span class="api-curl">${username}.pryv.me</span>/account"</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 1.5.18

{
  "account": {
    "username": "chuangzi",
    "email": "chuangzi@dao.info",
    "language": "zh",
    "storageUsed": {
      "dbDocuments": 34831,
      "attachedFiles": 12
    }
  }
}
</code></pre></div><div class="tab-pane sockets"><pre><code>socket.emit('account.get', {}, callback);</code></pre><div class="step-marker">⬇</div><pre><code>{
  "account": {
    "username": "chuangzi",
    "email": "chuangzi@dao.info",
    "language": "zh",
    "storageUsed": {
      "dbDocuments": 34831,
      "attachedFiles": 12
    }
  }
}</code></pre></div><div class="tab-pane batch"><pre><code>{
  "method": "account.get",
  "params": {}
}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "account": {
    "username": "chuangzi",
    "email": "chuangzi@dao.info",
    "language": "zh",
    "storageUsed": {
      "dbDocuments": 34831,
      "attachedFiles": 12
    }
  }
}</code></pre></div><div class="tab-pane httpAuth"><pre><code>curl -i "https://<span class="api-curl">${username}.pryv.me</span>/account?auth=${token}"</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 1.5.18

{
  "account": {
    "username": "chuangzi",
    "email": "chuangzi@dao.info",
    "language": "zh",
    "storageUsed": {
      "dbDocuments": 34831,
      "attachedFiles": 12
    }
  }
}

</code></pre></div></div></div></aside></section><!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="methods-account-account-update" class="method"> <h3 id="update-account-information">Update account information</h3>
<div class="content"><div class="meta"><span onclick="location='/reference/#trusted-apps-verification'" class="trusted-tag"><span title="Trusted Apps Only" class="label">T</span></span><span class="method-id"><span class="label">id</span><span class="label-value"><code>account.update</code></span></span><span class="http"><span class="label">HTTP</span><span class="label-value"><code>PUT /account</code></span></span></div><div class="intro"><p>Modifies the user&#39;s account information.</p>
</div><h4 id="parameters">Parameters</h4>
<table class="definitions"><tr><th><code>update</code></th><td><div class="header"><span class="type">object</span><span class="http"><span class="label">HTTP</span><span class="label-value"><span>request body</span></span></span></div><div class="description"><p>New values for the account information&#39;s fields: see <a href="#data-structure-account">account information</a>. All fields are optional, and only modified values must be included.</p>
</div></td></tr></table><h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>200 OK</code></span></span><table class="definitions"><tr><th><code>account</code></th><td><div class="header"><span class="type"><a href="#data-structure-account">account information</a></span></div><div class="description"><p>The updated account information.</p>
</div></td></tr></table></div><aside><div class="example"><div class="tab-content"><div class="tab-pane json active"><pre><code>{
  "email": "joseph-brenner@pryv.me"
}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "account": {
    "username": "user-123-abc",
    "email": "joseph-brenner@pryv.me",
    "language": "en",
    "storageUsed": {
      "dbDocuments": 355501,
      "attachedFiles": 1570208
    }
  }
}</code></pre></div><div class="tab-pane http"><pre><code>curl -i -X PUT -H 'Content-Type: application/json' -d '{"email":"joseph-brenner@pryv.me"}' "https://${token}@<span class="api-curl">${username}.pryv.me</span>/account"</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 1.5.18

{
  "account": {
    "username": "user-123-abc",
    "email": "joseph-brenner@pryv.me",
    "language": "en",
    "storageUsed": {
      "dbDocuments": 355501,
      "attachedFiles": 1570208
    }
  }
}
</code></pre></div><div class="tab-pane sockets"><pre><code>socket.emit('account.update', {"email":"joseph-brenner@pryv.me"}, callback);</code></pre><div class="step-marker">⬇</div><pre><code>{
  "account": {
    "username": "user-123-abc",
    "email": "joseph-brenner@pryv.me",
    "language": "en",
    "storageUsed": {
      "dbDocuments": 355501,
      "attachedFiles": 1570208
    }
  }
}</code></pre></div><div class="tab-pane batch"><pre><code>{
  "method": "account.update",
  "params": {
    "email": "joseph-brenner@pryv.me"
  }
}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "account": {
    "username": "user-123-abc",
    "email": "joseph-brenner@pryv.me",
    "language": "en",
    "storageUsed": {
      "dbDocuments": 355501,
      "attachedFiles": 1570208
    }
  }
}</code></pre></div><div class="tab-pane httpAuth"><pre><code>curl -i -X PUT -H 'Content-Type: application/json' -d '{"email":"joseph-brenner@pryv.me"}' "https://<span class="api-curl">${username}.pryv.me</span>/account?auth=${token}"</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 1.5.18

{
  "account": {
    "username": "user-123-abc",
    "email": "joseph-brenner@pryv.me",
    "language": "en",
    "storageUsed": {
      "dbDocuments": 355501,
      "attachedFiles": 1570208
    }
  }
}

</code></pre></div></div></div></aside></section><!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="methods-account-account-changePassword" class="method"> <h3 id="change-password">Change password</h3>
<div class="content"><div class="meta"><span onclick="location='/reference/#trusted-apps-verification'" class="trusted-tag"><span title="Trusted Apps Only" class="label">T</span></span><span class="method-id"><span class="label">id</span><span class="label-value"><code>account.changePassword</code></span></span><span class="http"><span class="label">HTTP</span><span class="label-value"><code>POST /account/change-password</code></span></span></div><div class="intro"><p>Modifies the user&#39;s password.</p>
</div><h4 id="parameters">Parameters</h4>
<table class="definitions"><tr><th><code>oldPassword</code></th><td><div class="header"><span class="type">string</span></div><div class="description"><p>The current password.</p>
</div></td></tr><tr><th><code>newPassword</code></th><td><div class="header"><span class="type">string</span></div><div class="description"><p>The new password.</p>
</div></td></tr></table><h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>200 OK</code></span></span><h4 id="specific-errors">Specific errors</h4>
<table class="definitions"><tr><th><code>invalid-operation</code></th><td><div class="header"><span class="http"><span class="label">HTTP</span><span class="label-value"><code>400</code></span></span></div><div class="description"><p>The given password does not match.</p>
</div></td></tr></table></div><aside><div class="example"><div class="tab-content"><div class="tab-pane json active"><pre><code>{
  "oldPassword": "B|_|tt3rfly!",
  "newPassword": "//\\_.:o0o:._//\\"
}</code></pre><div class="step-marker">⬇</div><pre><code>{}</code></pre></div><div class="tab-pane http"><pre><code>curl -i -X POST -H 'Content-Type: application/json' -d '{"oldPassword":"B|_|tt3rfly!","newPassword":"//\\_.:o0o:._//\\"}' "https://${token}@<span class="api-curl">${username}.pryv.me</span>/account/change-password"</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 1.5.18

{}
</code></pre></div><div class="tab-pane sockets"><pre><code>socket.emit('account.changePassword', {"oldPassword":"B|_|tt3rfly!","newPassword":"//\\_.:o0o:._//\\"}, callback);</code></pre><div class="step-marker">⬇</div><pre><code>{}</code></pre></div><div class="tab-pane batch"><pre><code>{
  "method": "account.changePassword",
  "params": {
    "oldPassword": "B|_|tt3rfly!",
    "newPassword": "//\\_.:o0o:._//\\"
  }
}</code></pre><div class="step-marker">⬇</div><pre><code>{}</code></pre></div><div class="tab-pane httpAuth"><pre><code>curl -i -X POST -H 'Content-Type: application/json' -d '{"oldPassword":"B|_|tt3rfly!","newPassword":"//\\_.:o0o:._//\\"}' "https://<span class="api-curl">${username}.pryv.me</span>/account/change-password?auth=${token}"</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 1.5.18

{}

</code></pre></div></div></div></aside></section><!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="methods-account-account-requestPasswordReset" class="method"> <h3 id="request-password-reset">Request password reset</h3>
<div class="content"><div class="meta"><span onclick="location='/reference/#trusted-apps-verification'" class="trusted-tag"><span title="Trusted Apps Only" class="label">T</span></span><span class="method-id"><span class="label">id</span><span class="label-value"><code>account.requestPasswordReset</code></span></span><span class="http"><span class="label">HTTP</span><span class="label-value"><code>POST /account/request-password-reset</code></span></span></div><div class="intro"><p>Requests the resetting of the user&#39;s password. An e-mail containing an expiring reset token (e.g. in a link) will be sent to the user.<br>This method requires that the <code>appId</code> and <code>Origin</code> (or <code>Referer</code>) header comply with the <a href="#basics-trusted-apps-verification">trusted app verification</a>.</p>
</div><h4 id="parameters">Parameters</h4>
<table class="definitions"><tr><th><code>appId</code></th><td><div class="header"><span class="type">string</span></div><div class="description"><p>Your app&#39;s unique identifier.</p>
</div></td></tr></table><h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>200 OK</code></span></span></div><aside><div class="example"><div class="tab-content"><div class="tab-pane json active"><pre><code>{
  "appId": "my-app-id"
}</code></pre><div class="step-marker">⬇</div><pre><code>{}</code></pre></div><div class="tab-pane http"><pre><code>curl -i -X POST -H 'Origin: https://sw.pryv.me' -H 'Content-Type: application/json' -d '{"appId":"my-app-id"}' "https://<span class="api-curl">${username}.pryv.me</span>/account/request-password-reset"</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 1.5.18

{}
</code></pre></div><div class="tab-pane sockets"><pre><code>socket.emit('account.requestPasswordReset', {"appId":"my-app-id"}, callback);</code></pre><div class="step-marker">⬇</div><pre><code>{}</code></pre></div><div class="tab-pane batch"><pre><code>{
  "method": "account.requestPasswordReset",
  "params": {
    "appId": "my-app-id"
  }
}</code></pre><div class="step-marker">⬇</div><pre><code>{}</code></pre></div><div class="tab-pane httpAuth"><pre><code>curl -i -X POST -H 'Origin: https://sw.pryv.me' -H 'Content-Type: application/json' -d '{"appId":"my-app-id"}' "https://<span class="api-curl">${username}.pryv.me</span>/account/request-password-reset"</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 1.5.18

{}

</code></pre></div></div></div></aside></section><!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="methods-account-account-resetPassword" class="method"> <h3 id="reset-password">Reset password</h3>
<div class="content"><div class="meta"><span onclick="location='/reference/#trusted-apps-verification'" class="trusted-tag"><span title="Trusted Apps Only" class="label">T</span></span><span class="method-id"><span class="label">id</span><span class="label-value"><code>account.resetPassword</code></span></span><span class="http"><span class="label">HTTP</span><span class="label-value"><code>POST /account/reset-password</code></span></span></div><div class="intro"><p>Resets the user&#39;s password, authorizing the request with the given reset token (see <a href="#methods-account-account-requestPasswordReset">request password reset</a> ).<br>This method requires that the <code>appId</code> and <code>Origin</code> (or <code>Referer</code>) header comply with the <a href="#basics-trusted-apps-verification">trusted app verification</a>.</p>
</div><h4 id="parameters">Parameters</h4>
<table class="definitions"><tr><th><code>resetToken</code></th><td><div class="header"><span class="type">string</span></div><div class="description"><p>The expiring reset token that was sent to the user after requesting the password reset.</p>
</div></td></tr><tr><th><code>newPassword</code></th><td><div class="header"><span class="type">string</span></div><div class="description"><p>The new password.</p>
</div></td></tr><tr><th><code>appId</code></th><td><div class="header"><span class="type">string</span></div><div class="description"><p>Your app&#39;s unique identifier.</p>
</div></td></tr></table><h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>200 OK</code></span></span></div><aside><div class="example"><div class="tab-content"><div class="tab-pane json active"><pre><code>{
  "resetToken": "chtplghfp0000hqjx814u6393",
  "newPassword": "Dr0ws$4p",
  "appId": "my-app-id"
}</code></pre><div class="step-marker">⬇</div><pre><code>{}</code></pre></div><div class="tab-pane http"><pre><code>curl -i -X POST -H 'Origin: https://sw.pryv.me' -H 'Content-Type: application/json' -d '{"resetToken":"chtplghfp0000hqjx814u6393","newPassword":"Dr0ws$4p","appId":"my-app-id"}' "https://<span class="api-curl">${username}.pryv.me</span>/account/reset-password"</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 1.5.18

{}
</code></pre></div><div class="tab-pane sockets"><pre><code>socket.emit('account.resetPassword', {"resetToken":"chtplghfp0000hqjx814u6393","newPassword":"Dr0ws$4p","appId":"my-app-id"}, callback);</code></pre><div class="step-marker">⬇</div><pre><code>{}</code></pre></div><div class="tab-pane batch"><pre><code>{
  "method": "account.resetPassword",
  "params": {
    "resetToken": "chtplghfp0000hqjx814u6393",
    "newPassword": "Dr0ws$4p",
    "appId": "my-app-id"
  }
}</code></pre><div class="step-marker">⬇</div><pre><code>{}</code></pre></div><div class="tab-pane httpAuth"><pre><code>curl -i -X POST -H 'Origin: https://sw.pryv.me' -H 'Content-Type: application/json' -d '{"resetToken":"chtplghfp0000hqjx814u6393","newPassword":"Dr0ws$4p","appId":"my-app-id"}' "https://<span class="api-curl">${username}.pryv.me</span>/account/reset-password"</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 1.5.18

{}

</code></pre></div></div></div></aside></section></section></section><section id="data-structure"><h1 id="data-structure">Data structure</h1>
<!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="data-structure-event"><h2 id="event">Event</h2>
<div class="content"><div class="meta"></div><div class="intro"><p>See also: <a href="/concepts/#events">core concepts</a>.</p>
</div><table class="definitions"><tr><th><code>id</code></th><td><div class="header"><span class="type"><a href="#data-structure-identifier">identifier</a></span><span class="label label-default unique">unique</span><span class="label label-default read-only">read-only (except at creation)</span></div><div class="description"><p>The identifier (<a href="https://usecuid.org/">collision-resistant cuid</a>) for the event. Automatically generated if not set when creating the event.</p>
</div></td></tr><tr><th><code>streamIds</code></th><td><div class="header"><span class="type">array of <a href="#data-structure-identifier">identifier</a></span></div><div class="description"><p>The ids of the belonging streams.</p>
</div></td></tr><tr><th><code>streamId</code></th><td><div class="header"><span class="type"><a href="#data-structure-identifier">identifier</a></span></div><div class="description"><p><strong>(DEPRECATED)</strong>
Please use streamIds instead.</p>
<p>The id of the first element of the streamIds array.</p>
</div></td></tr><tr><th><code>time</code></th><td><div class="header"><span class="type"><a href="#data-structure-timestamp">timestamp</a></span></div><div class="description"><p>The event&#39;s time. For period events, this is the time the event started. Automatically set to the server time if not provided when creating the event.</p>
</div></td></tr><tr><th><code>duration</code></th><td><div class="header"><span class="type"><a href="#data-structure-timestamp">timestamp</a></span><span class="label label-default optional">optional</span></div><div class="description"><p>If present and non-zero, indicates that the event is a period event. <strong>Running period events have a duration set to <code>null</code></strong>. <strong>A duration set to zero is equivalent to no duration</strong>.</p>
</div></td></tr><tr><th><code>type</code></th><td><div class="header"><span class="type">string</span></div><div class="description"><p>The type of the event. See the <a href="/event-types/#directory">event type directory</a> for a list of standard types.</p>
</div></td></tr><tr><th><code>content</code></th><td><div class="header"><span class="type">any type</span><span class="label label-default optional">optional</span></div><div class="description"><p>The <code>type</code>-specific content of the event, if any.</p>
</div></td></tr><tr><th><code>tags</code></th><td><div class="header"><span class="type">array of strings</span><span class="label label-default optional">optional (always present in read items)</span></div><div class="description"><p><strong>(DEPRECATED)</strong>
Please use streamIds instead.</p>
<p>The tags associated with the event.</p>
</div></td></tr><tr><th><code>description</code></th><td><div class="header"><span class="type">string</span><span class="label label-default optional">optional</span></div><div class="description"><p>User description or comment for the event.</p>
</div></td></tr><tr><th><code>attachments</code></th><td><div class="header"><span class="type">array of attachment objects</span><span class="label label-default optional">optional</span><span class="label label-default read-only">read-only</span></div><div class="description"><p>An array describing the files attached to the event. Each item has the following structure:</p>
</div><table class="definitions"><tr><th><code>id</code></th><td><div class="header"><span class="type"><a href="#data-structure-identifier">identifier</a></span></div><div class="description"><p>The file&#39;s id. The attached file&#39;s URL is obtained by appending this id to the event&#39;s resource URL.</p>
</div></td></tr><tr><th><code>fileName</code></th><td><div class="header"><span class="type">string</span></div><div class="description"><p>The file&#39;s name as uploaded.</p>
</div></td></tr><tr><th><code>type</code></th><td><div class="header"><span class="type">string</span></div><div class="description"><p>The MIME type of the file.</p>
</div></td></tr><tr><th><code>size</code></th><td><div class="header"><span class="type">number</span></div><div class="description"><p>The size of the file, in bytes.</p>
</div></td></tr><tr><th><code>readToken</code></th><td><div class="header"><span class="type">string</span></div><div class="description"><p>The auth token to pass in the query string when reading the file (instead of the regular <code>auth</code> parameter). The token is unique for the file and the access used to read it. This is a security measure in situations where it is impractical to use the <code>Authorization</code> HTTP header and/or where the file&#39;s URL is likely to be exposed. See also events method <a href="#methods-events-events-getAttachment">get attachment</a>.</p>
</div></td></tr></table></td></tr><tr><th><code>clientData</code></th><td><div class="header"><span class="type"><a href="#data-structure-key-value">key-value</a></span><span class="label label-default optional">optional</span></div><div class="description"><p>Additional client data for the event.</p>
</div></td></tr><tr><th><code>trashed</code></th><td><div class="header"><span class="type">boolean</span><span class="label label-default optional">optional</span></div><div class="description"><p><code>true</code> if the event is in the trash.</p>
</div></td></tr><tr><th><code>created</code></th><td><div class="header"><span class="type"><a href="#data-structure-timestamp">timestamp</a></span><span class="label label-default read-only">read-only</span></div><div class="description"><p>The time the event was created.</p>
</div></td></tr><tr><th><code>createdBy</code></th><td><div class="header"><span class="type"><a href="#data-structure-identifier">identifier</a></span><span class="label label-default read-only">read-only</span></div><div class="description"><p>The id of the access used to create the event.</p>
</div></td></tr><tr><th><code>modified</code></th><td><div class="header"><span class="type"><a href="#data-structure-timestamp">timestamp</a></span><span class="label label-default read-only">read-only</span></div><div class="description"><p>The time the event was last modified.</p>
</div></td></tr><tr><th><code>modifiedBy</code></th><td><div class="header"><span class="type"><a href="#data-structure-identifier">identifier</a></span><span class="label label-default read-only">read-only</span></div><div class="description"><p>The id of the last access used to modify the event.</p>
</div></td></tr></table></div><aside><div class="example"><p>A picture</p>
<pre><code>{
  "id": "ckcka7ued000zglpv910am5nt",
  "time": 1594627555.621,
  "streamIds": [
    "diary"
  ],
  "streamId": "diary",
  "tags": [],
  "type": "picture/attached",
  "content": null,
  "attachments": [
    {
      "id": "ckcka7ued0010glpv8a38srmd",
      "fileName": "photo.jpg",
      "type": "image/jpeg",
      "size": 2561,
      "readToken": "ckcka7ued0011glpv6b34og3k-Uily436YhdJQzX2zCIiu9hsZ6RK"
    }
  ],
  "created": 1594627555.621,
  "createdBy": "ckcka7ucn0004glpv0yn54hxz",
  "modified": 1594627555.621,
  "modifiedBy": "ckcka7ucn0004glpv0yn54hxz"
}</code></pre></div><div class="example"><p>An activity</p>
<pre><code>{
  "id": "ckcka7ued000oglpvu2gfwlq6",
  "time": 1594631155.621,
  "streamIds": [
    "jogging"
  ],
  "streamId": "jogging",
  "tags": [],
  "type": "activity/pryv",
  "content": null,
  "created": 1594631155.621,
  "createdBy": "ckcka7ucn0001glpvjku7747i",
  "modified": 1594631155.621,
  "modifiedBy": "ckcka7ucn0001glpvjku7747i"
}</code></pre></div><div class="example"><p>A position</p>
<pre><code>{
  "id": "ckcka7ued0012glpvfods46ep",
  "time": 1350373077.359,
  "streamIds": [
    "diary"
  ],
  "streamId": "diary",
  "tags": [],
  "type": "position/wgs84",
  "content": {
    "latitude": 40.714728,
    "longitude": -73.998672
  },
  "created": 1594623955.621,
  "createdBy": "ckcka7ucm0000glpvlbfb25cq",
  "modified": 1594623955.621,
  "modifiedBy": "ckcka7ucm0000glpvlbfb25cq"
}</code></pre></div></aside></section><!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="data-structure-stream"><h2 id="stream">Stream</h2>
<div class="content"><div class="meta"></div><div class="intro"><p>See also: <a href="/concepts/#streams">core concepts</a>.</p>
</div><table class="definitions"><tr><th><code>id</code></th><td><div class="header"><span class="type"><a href="#data-structure-identifier">identifier</a></span><span class="label label-default unique">unique</span><span class="label label-default read-only">read-only (except at creation)</span></div><div class="description"><p>The identifier for the stream. Automatically generated if not set when creating the stream; <strong>slugified if necessary</strong>.</p>
</div></td></tr><tr><th><code>name</code></th><td><div class="header"><span class="type">string</span><span class="label label-default unique">unique among siblings</span></div><div class="description"><p>A name identifying the stream for users. The name must be unique among the stream&#39;s siblings in the streams tree structure.</p>
</div></td></tr><tr><th><code>parentId</code></th><td><div class="header"><span class="type"><a href="#data-structure-identifier">identifier</a></span><span class="label label-default optional">optional</span></div><div class="description"><p>The identifier of the stream&#39;s parent, if any. A value of <code>null</code> indicates that the stream has no parent (i.e. root stream).</p>
</div></td></tr><tr><th><code>clientData</code></th><td><div class="header"><span class="type"><a href="#data-structure-key-value">key-value</a></span><span class="label label-default optional">optional</span></div><div class="description"><p>Additional client data for the stream.</p>
</div></td></tr><tr><th><code>children</code></th><td><div class="header"><span class="type">array of streams</span><span class="label label-default read-only">read-only</span></div><div class="description"><p>The stream&#39;s sub-streams, if any. This field cannot be set in requests creating a new streams: streams are created individually by design.</p>
</div></td></tr><tr><th><code>trashed</code></th><td><div class="header"><span class="type">boolean</span><span class="label label-default optional">optional</span></div><div class="description"><p><code>true</code> if the stream is in the trash.</p>
</div></td></tr><tr><th><code>created</code></th><td><div class="header"><span class="type"><a href="#data-structure-timestamp">timestamp</a></span><span class="label label-default read-only">read-only</span></div><div class="description"><p>The time the stream was created.</p>
</div></td></tr><tr><th><code>createdBy</code></th><td><div class="header"><span class="type"><a href="#data-structure-identifier">identifier</a></span><span class="label label-default read-only">read-only</span></div><div class="description"><p>The id of the access used to create the stream.</p>
</div></td></tr><tr><th><code>modified</code></th><td><div class="header"><span class="type"><a href="#data-structure-timestamp">timestamp</a></span><span class="label label-default read-only">read-only</span></div><div class="description"><p>The time the stream was last modified.</p>
</div></td></tr><tr><th><code>modifiedBy</code></th><td><div class="header"><span class="type"><a href="#data-structure-identifier">identifier</a></span><span class="label label-default read-only">read-only</span></div><div class="description"><p>The id of the last access used to modify the stream.</p>
</div></td></tr></table></div><aside><div class="example"><p>A structure for activities</p>
<pre><code>[
  {
    "id": "sport",
    "name": "Sport",
    "parentId": null,
    "children": [
      {
        "id": "jogging",
        "name": "Jogging",
        "parentId": "sport",
        "children": [],
        "created": 1531517261.9442966,
        "createdBy": "ckcka7ucm0000glpvlbfb25cq",
        "modified": 1531517314.9837832,
        "modifiedBy": "ckcka7ucm0000glpvlbfb25cq"
      },
      {
        "id": "bicycling",
        "name": "Bicycling",
        "parentId": "sport",
        "children": [],
        "created": 1531517261.9442966,
        "createdBy": "ckcka7ucm0000glpvlbfb25cq",
        "modified": 1531517398.702987,
        "modifiedBy": "ckcka7ucm0000glpvlbfb25cq"
      }
    ],
    "created": 1531517251.621,
    "createdBy": "ckcka7ucm0000glpvlbfb25cq",
    "modified": 1531517303.0357275,
    "modifiedBy": "ckcka7ucm0000glpvlbfb25cq"
  },
  {
    "id": "work",
    "name": "Work",
    "parentId": null,
    "children": [
      {
        "id": "ckcka7uec000dglpviyhg4q4k",
        "name": "Noble Works Co.",
        "parentId": "work",
        "children": [
          {
            "id": "ckcka7uec000fglpvnppbgrjc",
            "name": "Last Be First",
            "parentId": "ckcka7uec000dglpviyhg4q4k",
            "children": [],
            "created": 1531517278.3606942,
            "createdBy": "ckcka7ucm0000glpvlbfb25cq",
            "modified": 1531517602.3408291,
            "modifiedBy": "ckcka7ucm0000glpvlbfb25cq"
          },
          {
            "id": "ckcka7uec000gglpv3z0kxsds",
            "name": "Big Tree",
            "parentId": "ckcka7uec000dglpviyhg4q4k",
            "children": [],
            "created": 1531517278.3606942,
            "createdBy": "ckcka7ucm0000glpvlbfb25cq",
            "modified": 1531517626.6119955,
            "modifiedBy": "ckcka7ucm0000glpvlbfb25cq"
          },
          {
            "id": "ckcka7uec000hglpvbtih812c",
            "name": "Inner Light",
            "parentId": "ckcka7uec000dglpviyhg4q4k",
            "children": [],
            "created": 1531517278.3606942,
            "createdBy": "ckcka7ucm0000glpvlbfb25cq",
            "modified": 1531517321.6621404,
            "modifiedBy": "ckcka7ucm0000glpvlbfb25cq"
          }
        ],
        "created": 1531517251.662731,
        "createdBy": "ckcka7ucm0000glpvlbfb25cq",
        "modified": 1531517418.970824,
        "modifiedBy": "ckcka7ucm0000glpvlbfb25cq"
      },
      {
        "id": "ckcka7uec000eglpvv9bn365g",
        "name": "Freelancing",
        "parentId": "work",
        "children": [
          {
            "id": "ckcka7uec000iglpv4cya9jf0",
            "name": "Funky Veggies",
            "parentId": "ckcka7uec000eglpvv9bn365g",
            "children": [],
            "created": 1531517256.6116288,
            "createdBy": "ckcka7ucm0000glpvlbfb25cq",
            "modified": 1531517573.670404,
            "modifiedBy": "ckcka7ucm0000glpvlbfb25cq"
          },
          {
            "id": "ckcka7uec000jglpv8crm7uwn",
            "name": "Jojo Lapin & sons",
            "parentId": "ckcka7uec000eglpvv9bn365g",
            "children": [],
            "created": 1531517256.6116288,
            "createdBy": "ckcka7ucm0000glpvlbfb25cq",
            "modified": 1531517271.9234285,
            "modifiedBy": "ckcka7ucm0000glpvlbfb25cq"
          }
        ],
        "created": 1531517251.662731,
        "createdBy": "ckcka7ucm0000glpvlbfb25cq",
        "modified": 1531517458.2126117,
        "modifiedBy": "ckcka7ucm0000glpvlbfb25cq"
      }
    ],
    "created": 1531517251.621,
    "createdBy": "ckcka7ucm0000glpvlbfb25cq",
    "modified": 1531517350.2205775,
    "modifiedBy": "ckcka7ucm0000glpvlbfb25cq"
  }
]</code></pre></div></aside></section><!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="data-structure-access"><h2 id="access">Access</h2>
<div class="content"><div class="meta"></div><div class="intro"><p>See also: <a href="/concepts/#accesses">core concepts</a>.</p>
</div><table class="definitions"><tr><th><code>id</code></th><td><div class="header"><span class="type"><a href="#data-structure-identifier">identifier</a></span><span class="label label-default unique">unique</span><span class="label label-default read-only">read-only</span></div><div class="description"><p>The identifier for the access.</p>
</div></td></tr><tr><th><code>token</code></th><td><div class="header"><span class="type">string</span><span class="label label-default unique">unique</span><span class="label label-default read-only">read-only (except at creation)</span></div><div class="description"><p>The token identifying the access. Automatically generated if not set when creating the access; <strong>slugified if necessary</strong>.</p>
</div></td></tr><tr><th><code>type</code></th><td><div class="header"><span class="type"><code>personal</code>|<code>app</code>|<code>shared</code></span><span class="label label-default optional">optional</span><span class="label label-default read-only">read-only (except at creation)</span></div><div class="description"><p>The type — or usage — of the access. Default: <code>shared</code>.</p>
</div></td></tr><tr><th><code>name</code></th><td><div class="header"><span class="type">string</span><span class="label label-default unique">unique per type and device</span></div><div class="description"><p>The name identifying the access for the user. (For personal and app access, the name is used as a technical identifier and not shown as-is to the user.)</p>
</div></td></tr><tr><th><code>deviceName</code></th><td><div class="header"><span class="type">string</span><span class="label label-default unique">unique per type and name</span><span class="label label-default optional">optional</span></div><div class="description"><p>For app accesses only. The name of the client device running the app, if applicable.</p>
</div></td></tr><tr><th><code>permissions</code></th><td><div class="header"><span class="type">array of permission objects</span></div><div class="description"><p>Ignored for personal accesses. If permission levels conflict (e.g. stream set to &quot;manage&quot; and child stream set to &quot;contribute&quot;), only the highest level is considered. Each permission object has the following structure:</p>
</div><table class="definitions"><tr><th><code>streamId</code>|<code>tag</code></th><td><div class="header"><span class="type"><a href="#data-structure-identifier">identifier</a> | string</span></div><div class="description"><p>To be used with <code>level</code> property only.<br>The id of the stream or the tag the permission applies to, or <code>*</code> for all streams/tags. Stream permissions are recursively applied to child streams. </p>
</div></td></tr><tr><th><code>level</code></th><td><div class="header"><span class="type"><code>read</code>|<code>contribute</code>|<code>manage</code>|<code>create-only</code></span></div><div class="description"><p>Used only with <code>streamId</code> or <code>tag</code> permissions.<br>The level of access to the stream. With <code>contribute</code>, one can see and manipulate events for the stream/tag (and child streams for stream permissions); with <code>manage</code>, one can in addition create, modify and delete child streams.  </p>
<p>The <code>create-only</code> level - only available for stream-based permissions - allows to read the stream and create events on it and its children.</p>
</div></td></tr><tr><th><code>feature</code></th><td><div class="header"><span class="type"><code>selfRevoke</code></span></div><div class="description"><p>To be used only with <code>setting</code> property.<br>The only supported feature is <code>selfRevoke</code></p>
</div></td></tr><tr><th><code>setting</code></th><td><div class="header"><span class="type"><code>forbidden</code></span></div><div class="description"><p>To be used only with <code>feature</code> permission. 
If given in the permission list, this will forbid this access to call <code>accesses.delete {id}</code> and perform a self revocation.  </p>
</div></td></tr></table></td></tr><tr><th><code>lastUsed</code></th><td><div class="header"><span class="type"><a href="#data-structure-timestamp">timestamp</a></span><span class="label label-default optional">optional</span><span class="label label-default read-only">read-only</span></div><div class="description"><p>The time the access was last used.</p>
</div></td></tr><tr><th><code>expireAfter</code></th><td><div class="header"><span class="type">number</span><span class="label label-default optional">optional</span></div><div class="description"><p>(Only on create) If set, controls access expiry in seconds.
When given a number in this attribute (positive or zero),
the access will expire (and not be accessible any more) after this many
seconds.</p>
</div></td></tr><tr><th><code>expires</code></th><td><div class="header"><span class="type"><a href="#data-structure-timestamp">timestamp</a></span><span class="label label-default optional">optional</span><span class="label label-default read-only">read-only</span></div><div class="description"><p>If the access was set to expire: The timestamp after which the access
will be deactivated.</p>
</div></td></tr><tr><th><code>deleted</code></th><td><div class="header"><span class="type"><a href="#data-structure-timestamp">timestamp</a></span><span class="label label-default optional">optional</span><span class="label label-default read-only">read-only</span></div><div class="description"><p>If the access has been deleted: The timestamp of the deletion.</p>
</div></td></tr><tr><th><code>clientData</code></th><td><div class="header"><span class="type"><a href="#data-structure-key-value">key-value</a></span><span class="label label-default optional">optional</span></div><div class="description"><p>Additional client data for the access.</p>
</div></td></tr><tr><th><code>created</code></th><td><div class="header"><span class="type"><a href="#data-structure-timestamp">timestamp</a></span><span class="label label-default read-only">read-only</span></div><div class="description"><p>The time the access was created.</p>
</div></td></tr><tr><th><code>createdBy</code></th><td><div class="header"><span class="type"><a href="#data-structure-identifier">identifier</a></span><span class="label label-default read-only">read-only</span></div><div class="description"><p>The id of the access used to create the access.</p>
</div></td></tr><tr><th><code>modified</code></th><td><div class="header"><span class="type"><a href="#data-structure-timestamp">timestamp</a></span><span class="label label-default read-only">read-only</span></div><div class="description"><p>The time the access was last modified.</p>
</div></td></tr><tr><th><code>modifiedBy</code></th><td><div class="header"><span class="type"><a href="#data-structure-identifier">identifier</a></span><span class="label label-default read-only">read-only</span></div><div class="description"><p>The id of the last access used to modify the access.</p>
</div></td></tr></table></div><aside><div class="example"><p>An app access</p>
<pre><code>{
  "id": "ckcka7ucn0001glpvjku7747i",
  "token": "ckcka7ucn0003glpvs3j7daq2",
  "type": "app",
  "name": "my-app-id",
  "permissions": [
    {
      "streamId": "health",
      "level": "contribute"
    }
  ],
  "created": 1594544755.559,
  "createdBy": "ckcka7ucm0000glpvlbfb25cq",
  "modified": 1594544755.559,
  "modifiedBy": "ckcka7ucm0000glpvlbfb25cq"
}</code></pre></div><div class="example"><p>An app access with create-only and forbidden selfRevoke permissions</p>
<pre><code>{
  "id": "ckcka7ucn000cglpvne0uzqpk",
  "token": "mailbox",
  "type": "shared",
  "name": "publicly available token",
  "permissions": [
    {
      "streamId": "inbox",
      "level": "create-only"
    },
    {
      "feature": "selfRevoke",
      "setting": "forbidden"
    }
  ],
  "created": 1594544755.559,
  "createdBy": "ckcka7ucm0000glpvlbfb25cq",
  "modified": 1594544755.559,
  "modifiedBy": "ckcka7ucm0000glpvlbfb25cq"
}</code></pre></div></aside></section><!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="data-structure-followed-slice"><h2 id="followed-slice">Followed slice</h2>
<div class="content"><div class="meta"><span onclick="location='/reference/#trusted-apps-verification'" class="label trusted-only">Trusted apps only</span><text>&nbsp;</text></div><div class="intro"><p>See also: <a href="/concepts/#followed-slices">core concepts</a>.</p>
</div><table class="definitions"><tr><th><code>id</code></th><td><div class="header"><span class="type"><a href="#data-structure-identifier">identifier</a></span><span class="label label-default unique">unique</span><span class="label label-default read-only">read-only</span></div><div class="description"><p>The server-assigned identifier for the followed slice.</p>
</div></td></tr><tr><th><code>name</code></th><td><div class="header"><span class="type">string</span><span class="label label-default unique">unique</span></div><div class="description"><p>A name identifying the followed slice for the user.</p>
</div></td></tr><tr><th><code>url</code></th><td><div class="header"><span class="type">URL</span></div><div class="description"><p>The URL of the API endpoint of the account hosting the slice. Not modifiable after creation.</p>
</div></td></tr><tr><th><code>accessToken</code></th><td><div class="header"><span class="type">string</span></div><div class="description"><p>The token of the shared access itself. Not modifiable after creation.</p>
</div></td></tr></table></div><aside></aside></section><!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="data-structure-account"><h2 id="account-information">Account information</h2>
<div class="content"><div class="meta"><span onclick="location='/reference/#trusted-apps-verification'" class="label trusted-only">Trusted apps only</span><text>&nbsp;</text></div><div class="intro"><p>User account information.</p>
</div><table class="definitions"><tr><th><code>username</code></th><td><div class="header"><span class="type">string</span><span class="label label-default unique">unique</span><span class="label label-default read-only">read-only</span></div><div class="description"><p>The user&#39;s username.</p>
</div></td></tr><tr><th><code>email</code></th><td><div class="header"><span class="type">string</span><span class="label label-default unique">unique</span></div><div class="description"><p>The user&#39;s contact e-mail address.</p>
</div></td></tr><tr><th><code>language</code></th><td><div class="header"><span class="type">string</span></div><div class="description"><p>The user&#39;s preferred language as a 2-letter ISO language code.</p>
</div></td></tr><tr><th><code>storageUsed</code></th><td><div class="header"><span class="type">object</span></div><div class="description"><p>The current storage size used by the user account.</p>
</div><table class="definitions"><tr><th><code>dbDocuments</code></th><td><div class="header"><span class="type">number</span></div><div class="description"><p>Bytes used by documents (records) in the database.</p>
</div></td></tr><tr><th><code>attachedFiles</code></th><td><div class="header"><span class="type">number</span></div><div class="description"><p>Bytes used by attached files.</p>
</div></td></tr></table></td></tr></table></div><aside></aside></section><!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="data-structure-audit-log"><h2 id="audit-log">Audit log</h2>
<div class="content"><div class="meta"></div><div class="intro"><p>Audit logs keep track of details about the actions performed by clients against Pryv.io accounts through the Pryv.io API.
These logs can be fetched by presenting an authorization token, allowing to audit the actions that involved a given token.</p>
</div><table class="definitions"><tr><th><code>id</code></th><td><div class="header"><span class="type"><a href="#data-structure-identifier">identifier</a></span><span class="label label-default read-only">read-only</span></div><div class="description"><p>The identifier for the action that generated this log.</p>
</div></td></tr><tr><th><code>type</code></th><td><div class="header"><span class="type">string</span><span class="label label-default read-only">read-only</span></div><div class="description"><p>The type of log.</p>
</div></td></tr><tr><th><code>time</code></th><td><div class="header"><span class="type"><a href="#data-structure-timestamp">timestamp</a></span><span class="label label-default read-only">read-only</span></div><div class="description"><p>The time the API call was executed.</p>
</div></td></tr><tr><th><code>forwardedFor</code></th><td><div class="header"><span class="type">string</span><span class="label label-default read-only">read-only</span></div><div class="description"><p>The IP address of the client who performed the audited action.</p>
</div></td></tr><tr><th><code>action</code></th><td><div class="header"><span class="type">string</span><span class="label label-default read-only">read-only</span></div><div class="description"><p>The audited action, typically an API method call, composed by the HTTP verb and the API resource.</p>
</div></td></tr><tr><th><code>query</code></th><td><div class="header"><span class="type">string</span><span class="label label-default read-only">read-only</span></div><div class="description"><p>The query string that accompanied the audited action, if any.</p>
</div></td></tr><tr><th><code>accessId</code></th><td><div class="header"><span class="type">string</span><span class="label label-default read-only">read-only</span></div><div class="description"><p>The identifier for the access used to perform the audited action.</p>
</div></td></tr><tr><th><code>status</code></th><td><div class="header"><span class="type">number</span><span class="label label-default read-only">read-only</span></div><div class="description"><p>The HTTP response status resulting from the audited action.</p>
</div></td></tr><tr><th><code>errorMessage</code></th><td><div class="header"><span class="type">string</span><span class="label label-default optional">optional</span><span class="label label-default read-only">read-only</span></div><div class="description"><p>The error message resulting from the audited action, if any.</p>
</div></td></tr><tr><th><code>errorId</code></th><td><div class="header"><span class="type">string</span><span class="label label-default optional">optional</span><span class="label label-default read-only">read-only</span></div><div class="description"><p>The identifier for the error resulting from the audited action, if any.</p>
</div></td></tr></table></div><aside><div class="example"><p>A single audit log</p>
<pre><code>{
  "id": "ckcka7uf4001mglpv0z34g5ns",
  "type": "audit/core",
  "time": 1561988300,
  "forwardedFor": "172.18.0.7",
  "action": "GET /events",
  "query": "streamId=diary",
  "accessId": "ckcka7uf4001kglpveyskn5ni",
  "status": 403,
  "errorMessage": "Access session has expired.",
  "errorId": "forbidden"
}</code></pre></div></aside></section><!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="data-structure-high-frequency-series"><h2 id="hf-series">HF series</h2>
<div class="content"><div class="meta"></div><div class="intro"><p>High-frequency series are collections of homogenous data points. </p>
<p>To store a HF series in Pryv.io, you must first <a href="#create-hf-event">create a HF event</a>.</p>
<p>Series data is encoded in the &quot;flatJSON&quot; format:</p>
<ul>
<li>Each data point in a series has a <code>&quot;deltaTime&quot;</code> field that indicates its time difference, since the holder event&#39;s <a href="#data-structure-timestamp">timestamp</a>.
If a <code>&quot;timestamp&quot;</code> field is instead provided, the corresponding <code>&quot;deltaTime&quot;</code> will be automatically computed from the holder event&#39;s timestamp.</li>
<li>For <a href="/event-types/#directory">types</a> that store a single value (e.g. &quot;mass/kg&quot;), a single additional field named <code>&quot;value&quot;</code> is created.</li>
<li>Types that contain multiple properties (e.g. &quot;position/wgs84&quot;) will have many fields, whose names can be inferred from the <a href="/event-types/#position">type reference</a>.</li>
<li>Optional fields can either be provided or not; omitted values will be set as null.</li>
</ul>
</div><table class="definitions"><tr><th><code>format</code></th><td><div class="header"><span class="type">string</span></div><div class="description"><p>The data format (for now only &quot;flatJSON&quot; format is supported).</p>
</div></td></tr><tr><th><code>fields</code></th><td><div class="header"><span class="type">Array of fields</span></div><div class="description"><p>The &quot;fields&quot; array lists all the fields that you will be providing in the &quot;points&quot; array, including the &quot;deltaTime&quot; field in first position.
If the data type contains a single field (ex.: mass/kg), the second field is &quot;value&quot;, otherwise, it is the list of fields with the required ones first.</p>
</div></td></tr><tr><th><code>points</code></th><td><div class="header"><span class="type">Array of data points</span></div><div class="description"><p>The &quot;points&quot; array contains the data points, each data point is represented by a simple array.
This makes the bulk of the message (your data points) very space-efficient; values are encoded positionally.
The first value corresponds to the first field, and so on.</p>
</div></td></tr></table></div><aside><div class="example"><p>High-frequency series for the type &#39;mass/kg&#39;, encoded as flatJSON</p>
<pre><code>{
  "format": "flatJSON",
  "fields": [
    "deltaTime",
    "value"
  ],
  "points": [
    [
      0,
      70
    ],
    [
      1,
      71
    ],
    [
      2,
      72
    ]
  ]
}</code></pre></div><div class="example"><p>High-frequency series for the type &#39;position/wgs84&#39;, encoded as flatJSON</p>
<pre><code>{
  "format": "flatJSON",
  "fields": [
    "deltaTime",
    "latitude",
    "longitude",
    "altitude"
  ],
  "points": [
    [
      0,
      10.2,
      11.2,
      500
    ],
    [
      1,
      10.2,
      11.2,
      510
    ],
    [
      2,
      10.2,
      11.2,
      520
    ]
  ]
}</code></pre></div></aside></section><!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="data-structure-webhook"><h2 id="webhook">Webhook</h2>
<div class="content"><div class="meta"></div><div class="intro"><p>Webhooks provide push notifications to web servers using HTTP POST requests.  </p>
<p>Once created, they will run, executing a HTTP POST request to the provided URL for each <a href="#with-webhooks">data change</a> in the user account. </p>
<p>When the webhooks service is booted, it will send a <code>webhooksServiceBoot</code> message to all active webhooks. This allows to query the API for potentially missed notifications during its down time.</p>
<p>Only the app access used to create the webhook or a personal access can retrieve and modify it. This is meant to separate the responsibilities between the actor that sets the webhooks and the one(s) that consume the data following the webhook setup.</p>
</div><table class="definitions"><tr><th><code>id</code></th><td><div class="header"><span class="type"><a href="#data-structure-identifier">identifier</a></span><span class="label label-default read-only">read-only</span></div><div class="description"><p>The identifier of the Webhook.</p>
</div></td></tr><tr><th><code>accessId</code></th><td><div class="header"><span class="type"><a href="#data-structure-identifier">identifier</a></span><span class="label label-default read-only">read-only</span></div><div class="description"><p>The identifier of the access that was used to create the Webhook.</p>
</div></td></tr><tr><th><code>url</code></th><td><div class="header"><span class="type">string</span><span class="label label-default unique">unique per app access</span><span class="label label-default read-only">read-only (except at creation)</span></div><div class="description"><p>The URL where the HTTP POST requests will be made. To identify the source of the webhook on your notifications server, you can use the <code>url</code>&#39;s hostname, path or query parameters. For example: </p>
<pre><code class="lang-json">{
  &quot;url&quot;: &quot;https://${username}.my-notifications.com/${my-secret}/?param1=value1&amp;param2=value2&quot;
}
</code></pre>
</div></td></tr><tr><th><code>minIntervalMs</code></th><td><div class="header"><span class="type">number</span><span class="label label-default read-only">read-only</span></div><div class="description"><p>The webhooks run rate is throttled by a minimum interval between HTTP calls in milliseconds, sending an array of changes that occured during this period. Its value is set by the platform admin. </p>
</div></td></tr><tr><th><code>maxRetries</code></th><td><div class="header"><span class="type">number</span><span class="label label-default read-only">read-only</span></div><div class="description"><p>In case of failure to send a request, the webhook will retry <code>maxRetries</code> times at a growing interval of time before becoming <code>inactive</code> after too many successive failures. Its value is set by the platform admin.</p>
</div></td></tr><tr><th><code>currentRetries</code></th><td><div class="header"><span class="type">number</span><span class="label label-default read-only">read-only</span></div><div class="description"><p>The number of retries iterations since the last failed HTTP call. This number is 0 if the last HTTP call was successful.</p>
</div></td></tr><tr><th><code>state</code></th><td><div class="header"><span class="type"><code>active</code>|<code>inactive</code></span></div><div class="description"><p>The current state of the Webhook. An inactive Webhook will not make any HTTP call when changes occur. It must be activated using the <a href="#methods-webhooks-webhooks-update">update webhook</a> method.</p>
</div></td></tr><tr><th><code>runCount</code></th><td><div class="header"><span class="type">number</span><span class="label label-default read-only">read-only</span></div><div class="description"><p>The number of times the Webhook has been run, including failures.</p>
</div></td></tr><tr><th><code>failCount</code></th><td><div class="header"><span class="type">number</span><span class="label label-default read-only">read-only</span></div><div class="description"><p>The number of times the Webhook has failed HTTP calls. Failed runs are HTTP requests that received a response with a status outside of the 200-299 range or no response at all.</p>
</div></td></tr><tr><th><code>lastRun</code></th><td><div class="header"><span class="type">Run object</span><span class="label label-default read-only">read-only</span></div><div class="description"><p>Represents the last Webhook call, comprised of its HTTP response status and timestamp.</p>
</div><table class="definitions"><tr><th><code>status</code></th><td><div class="header"><span class="type">number</span></div><div class="description"><p>The HTTP response status of the call.</p>
</div></td></tr><tr><th><code>timestamp</code></th><td><div class="header"><span class="type"><a href="#data-structure-timestamp">timestamp</a></span></div><div class="description"><p>The time the call was started.</p>
</div></td></tr></table></td></tr><tr><th><code>runs</code></th><td><div class="header"><span class="type">array of Run objects</span><span class="label label-default read-only">read-only</span></div><div class="description"><p>Array of Run objects in inverse chronological order (newest first) which allows to monitor a webhook&#39;s health. Its length is set by the platform admin. </p>
</div></td></tr><tr><th><code>created</code></th><td><div class="header"><span class="type"><a href="#data-structure-timestamp">timestamp</a></span><span class="label label-default read-only">read-only</span></div><div class="description"><p>The time the webhook was created.</p>
</div></td></tr><tr><th><code>createdBy</code></th><td><div class="header"><span class="type"><a href="#data-structure-identifier">identifier</a></span><span class="label label-default read-only">read-only</span></div><div class="description"><p>The id of the access used to create the webhook.</p>
</div></td></tr><tr><th><code>modified</code></th><td><div class="header"><span class="type"><a href="#data-structure-timestamp">timestamp</a></span><span class="label label-default read-only">read-only</span></div><div class="description"><p>The time the webhook was last modified.</p>
</div></td></tr><tr><th><code>modifiedBy</code></th><td><div class="header"><span class="type"><a href="#data-structure-identifier">identifier</a></span><span class="label label-default read-only">read-only</span></div><div class="description"><p>The id of the last access used to modify the webhook.</p>
</div></td></tr></table></div><aside><div class="example"><p>A simple Webhook</p>
<pre><code>{
  "id": "ckcka7uf1001fglpv0a4hqm7c",
  "accessId": "ckcka7uf1001dglpv9dhpznkz",
  "url": "https://notifications.service.com/pryv",
  "minIntervalMs": 5000,
  "maxRetries": 5,
  "currentRetries": 0,
  "state": "active",
  "runCount": 2,
  "failCount": 0,
  "lastRun": {
    "status": 200,
    "timestamp": 1594627555.645
  },
  "runs": [
    {
      "status": 200,
      "timestamp": 1594627555.645
    },
    {
      "status": 200,
      "timestamp": 1594623955.645
    }
  ],
  "created": 1594544755.645,
  "createdBy": "ckcka7uf1001dglpv9dhpznkz",
  "modified": 1594544755.645,
  "modifiedBy": "ckcka7uf1001dglpv9dhpznkz"
}</code></pre></div></aside></section><!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="data-structure-item-deletion"><h2 id="item-deletion">Item deletion</h2>
<div class="content"><div class="meta"></div><div class="intro"><p>A record of a deleted item for sync purposes.</p>
</div><table class="definitions"><tr><th><code>id</code></th><td><div class="header"><span class="type"><a href="#data-structure-identifier">identifier</a></span></div><div class="description"><p>The identifier of the deleted item.</p>
</div></td></tr><tr><th><code>deleted</code></th><td><div class="header"><span class="type"><a href="#data-structure-timestamp">timestamp</a></span><span class="label label-default optional">optional</span></div><div class="description"><p>The time the item was deleted.</p>
</div></td></tr></table></div><aside></aside></section><!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="data-structure-key-value"><h2 id="key-value">Key-value</h2>
<div class="content"><div class="meta"></div><div class="intro"><p>An object (key-value map) for client apps to store additional data about the containing item (stream, event, etc.), such as a color, a reference to an associated icon, or other app-specific metadata.</p>
<h3 id="adding-updating-and-removing-client-data">Adding, updating and removing client data</h3>
<p>When the containing item is updated, additional data fields can be added, updated and removed as follows:</p>
<ul>
<li>To add or update a field, just set its value; for example: <code>{&quot;clientData&quot;: {&quot;keyToAddOrUpdate&quot;: &quot;value&quot;}}</code></li>
<li>To delete a field, set its value to <code>null</code>; for example: <code>{&quot;clientData&quot;: {&quot;keyToDelete&quot;: null}}</code></li>
</ul>
<p>Fields you don&#39;t specify in the update are left untouched.</p>
<h3 id="naming-convention">Naming convention</h3>
<p>The convention is that each app names the keys it uses with an <code>{app-id}:</code> prefix. For example, an app with id &quot;riki&quot; would store its data in fields such as <code>&quot;riki:key&quot;: &quot;some value&quot;</code>.</p>
</div></div><aside></aside></section><!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="data-structure-error"><h2 id="error">Error</h2>
<div class="content"><div class="meta"></div><table class="definitions"><tr><th><code>id</code></th><td><div class="header"><span class="type">string</span></div><div class="description"><p>Identifier for the error.</p>
</div></td></tr><tr><th><code>message</code></th><td><div class="header"><span class="type">string</span></div><div class="description"><p>A human-readable description of the error.</p>
</div></td></tr><tr><th><code>data</code></th><td><div class="header"><span class="type">any type</span><span class="label label-default optional">optional</span></div><div class="description"><p>Additional machine-readable details (specified for each error if relevant).</p>
</div></td></tr><tr><th><code>subErrors</code></th><td><div class="header"><span class="type">array of errors</span><span class="label label-default optional">optional</span></div><div class="description"><p>Lists the detailed causes of the main error, if any.</p>
</div></td></tr></table></div><aside></aside></section><!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="data-structure-identifier"><h2 id="item-identifier">Item identifier</h2>
<div class="content"><div class="meta"></div><div class="intro"><p>A string uniquely identifying an item for a given user. For some types of items (e.g. &quot;structural&quot; ones such as streams), the identifier can be optionally set by API clients; otherwise it is generated by the server. <strong>Event ids are always <a href="https://usecuid.org/">collision-resistant cuids</a>.</strong></p>
</div></div><aside></aside></section><!-- it's either:--><!-- !trusted & !preview--><!-- !preview & -full--><!-- -preview--><section id="data-structure-timestamp"><h2 id="timestamp">Timestamp</h2>
<div class="content"><div class="meta"></div><div class="intro"><p>A positive floating-point number representing a number of seconds since any reference date and time, <strong>independently from the time zone</strong>. Because date and time synchronization between server time and client time is done by the client simply comparing the current server timestamp with its own, the reference date and time does not actually matter (but we do use standard Unix epoch time).</p>
</div></div><aside><div class="example"><p>Getting a valid timestamp:</p>
<ul>
<li>JavaScript: <code>Date.now() / 1000</code></li>
<li>PHP (5+): <code>microtime(true)</code></li>
</ul>
</div></aside></section></section></div><nav id="toc"></nav></div><footer id="page-footer"><nav class="navbar navbar-default"><div class="container-fluid"><div id="footer-nav"><ul class="nav navbar-nav"><li><a href="mailto:developers@pryv.com">Send a message</a></li><li><a href="https://github.com/pryv">GitHub</a></li><li><a href="https://pryv.com">pryv.com</a></li></ul></div></div></nav></footer><script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script><script src="/assets/bootstrap.min.js"></script><script src="/assets/js/toc.min.js"></script><!-- TOC generation--><script>jQuery(document).ready(function($) {
  // Header is about 51 pixels. This equals to 'header + fuzz', fuzz was
  // determined experimentally.
  var offset = 90;

  // Display TOC on the left side of the page.
  $('#toc').toc({
    selector: '#main h1:not(.page-title),#main h2,#main h3',
    ulClass: 'nav'
  });

  // Synchronise scroll/click motion with TOC display.
  $(document).ready(function() {
    // NOTE This is done at onLoad since we need to wait for all CSS
    // to appear.
    $('body').scrollspy({
      target: '#toc',
      offset: offset
    });
    scrollBy(0, 1); // make it scroll to be sure scrollspy gets it
    
    // fix offset when navigating
    $('#toc li a, a.toc-anchor').click(function (e) {
      e.preventDefault();
      var target = $(this).attr('href');
      window.location.hash = target;
      
      $(target)[0].scrollIntoView();
      if ($(window).scrollTop() + $(window).height() !== $(document).height()) {
        //only adjust when not at bottom
        scrollBy(0, -offset + 40);
      }
      return true;
    });
  
  });
});
</script><!-- Code blocks highlighting--><script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();
</script><!-- Code examples format switch--><script>$(document).ready(function () {
  setExamplesFormat($('#examples-format').get(0).value);
  for (c of ['-user', '-host', '', '-curl']) {
     $("span").siblings('.api' + c).addClass('hljs-string'); // add source code class to all items
  }
  setExamplesAPI('pryv.me');
});
$('#examples-format').on('change', function () {
  setExamplesFormat(this.value);
});
$('#examples-api').on('change', function () {
  setExamplesAPI(this.value);
});
function setExamplesAPI(value) {
  switch (value) {
    case 'DNS-less':
      $("span").siblings( ".api-user").text('{username}');
      $("span").siblings( ".api-host").text('{hostname}');
      $("span").siblings( ".api-reg").text('{hostname}/reg');
      $("span").siblings( ".api-reg-curl").text('${hostname}/reg');
      $("span").siblings( ".api" ).text('{hostname}/{username}');
      $("span").siblings( ".api-curl" ).text('${hostname}/${username}');
    break;
    case 'Own':
      $("span").siblings( ".api-user").text('');
      $("span").siblings( ".api-host").text('{username}.{domain}');
      $("span").siblings( ".api-reg" ).text('reg.{domain}');
      $("span").siblings( ".api-reg-curl" ).text('reg.${domain}');
      $("span").siblings( ".api" ).text('{username}.{domain}');
      $("span").siblings( ".api-curl" ).text('${username}.${domain}');
    break;
    default: // pryv.me
      $("span").siblings( ".api-user").text('');
      $("span").siblings( ".api-host").text('{username}.pryv.me');
      $("span").siblings( ".api-reg" ).text('reg.pryv.me');
      $("span").siblings( ".api-reg-curl" ).text('reg.pryv.me');
      $("span").siblings( ".api" ).text('{username}.pryv.me');
      $("span").siblings( ".api-curl" ).text('${username}.pryv.me');
    break;
  }
  console.log('Switched to ' + value);
}
function setExamplesFormat(format) {
  var removeSelectors = [];
  ['json', 'http', 'sockets', 'httpAuth', 'batch'].forEach(function (f) {
    if (format !== f) {
      removeSelectors.push('.example .tab-pane.' + f + '.active');
    }
  });
  $(removeSelectors.join(',')).removeClass("active");
  $('.example .tab-pane.' + format).addClass("active");
}</script><!-- Google Analytics--><script>var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-36589447-2']);
_gaq.push(['_trackPageview']);
(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();</script></body></html>