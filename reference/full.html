<!DOCTYPE html><html lang="en" class="no-js"><head><meta charset="UTF-8"><meta name="description" content="TODO"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><title>Pryv API - Reference (full)</title><link rel="stylesheet" type="text/css" href="/assets/bootstrap/css/bootstrap.min.css"><!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
  <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]--><link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=PT+Sans"><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:400,300,500,700,400italic|Roboto+Condensed:400,300,700"><link rel="stylesheet" type="text/css" href="/assets/fonts/stylesheet.css"><link rel="stylesheet" type="text/css" href="/assets/style.css"><link rel="stylesheet" type="text/css" href="/assets/highlight/styles/zenburn.css"></head><body class="with-toc with-examples"><header id="page-header"><nav role="navigation" class="navbar navbar-default navbar-fixed-top"><div class="container-fluid"><div class="navbar-header"><a href="/" class="navbar-brand logo"><img src="/assets/images/LogoPrYvDigital-API.png" alt="Pryv"></a><button type="button" data-toggle="collapse" data-target="#main-nav" class="navbar-toggle"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button></div><div id="main-nav" class="collapse navbar-collapse"><ul class="nav navbar-nav"><li><a href="/about">About</a></li><li><a href="/concepts">Concepts</a></li><li><a href="/reference">Reference</a></li><li><a href="/event-types">Event types</a></li><li class="dropdown"><a href="#" data-toggle="dropdown" class="dropdown-toggle">More <b class="caret"></b></a><ul class="dropdown-menu"><li><a href="/change-log">API change log</a></li><li><a href="/apps-and-services">Pryv apps &amp; services</a></li><li><a href="/code-libraries">Code libraries</a></li><li><a href="/faq">FAQ</a></li></ul></li><!--li.dropdown<a href="#" data-toggle="dropdown" class="dropdown-toggle">Guides <b class="caret"></b></a><ul class="dropdown-menu"><li><a href="#">Getting started</a></li><li><a href="#">Data modeling</a></li></ul>--><!--li.dropdown<a href="#" data-toggle="dropdown" class="dropdown-toggle">Reference <b class="caret"></b></a><ul class="dropdown-menu"><li><a href="/reference">Reference</a></li><li><a href="/event-types">Event types</a></li><li><a href="/standard-structure">Standard data structure</a></li></ul>--><!--li<a href="#">Blog</a>--></ul><p class="navbar-text navbar-right version"><a href="/change-log" title="View change log">API version: <strong>0.7.29</strong></a></p><form class="navbar-form navbar-right"><div class="form-group"><label for="examples-format">Examples:&nbsp;</label><select id="examples-format" class="form-control"><option value="json" selected="selected">Raw JSON</option><option value="http">cURL</option><option value="sockets">Socket.IO</option></select></div></form></div></div></nav></header><div id="main-wrapper" class="container-fluid"><div id="main"><h1 class="page-title">API reference</h1><section id="basics"><h1 id="basics">Basics</h1>
<section id="basics-endpoint-url"><h2 id="root-endpoint-url">Root endpoint URL</h2>
<div class="content"><div class="intro"><pre><code>https://{username}.pryv.io
</code></pre><p>Each user account has a dedicated root API endpoint as it is potentially served from a different location.</p>
</div></div><aside><div class="example"><p>For instance, user &#39;chuangzi&#39; would be served from <code>https://chuangzi.pryv.io</code></p>
</div></aside></section><section id="basics-calling-with-http"><h2 id="calling-with-http">Calling with HTTP</h2>
<div class="content"><div class="intro"><p>The API serves regular REST-like HTTP requests, with the usual verbs for reading and manipulating data:</p>
<ul>
<li><strong>GET</strong> (parameters: query string)<br>
for reading resources</li>
<li><strong>POST</strong> (parameters: request body)<br>
for creating new resources and other methods modifying data</li>
<li><strong>PUT</strong> (parameters: request body)<br>
for modifying resources</li>
<li><strong>DELETE</strong> (parameters: query string)<br>
for removing resources; logical deletion (trashing) is supported for some resources such as events and streams</li>
</ul>
</div></div><aside><div class="example"><p>Example request</p>
<pre><code class="lang-http">GET /events HTTP/1.1
Host: {username}.pryv.io
Authorization: {token}
</code></pre>
</div></aside><section id="basics-calling-with-http-alternative-http-request-method"> <h3 id="alternative-http-request-method">Alternative HTTP request method</h3>
<div class="content"><div class="intro"><p>Because we could&#39;t fathom out the rationale behind <a href="https://developer.mozilla.org/en-US/docs/HTTP/Access_control_CORS">HTTP access control (CORS) rules</a>, the API allows web apps to fake POST, PUT and DELETE requests through <code>application/x-www-form-urlencoded</code> POST requests with the following fields (all optional):</p>
</div><table class="definitions"><tr><th><code>_method</code></th><td><div class="header"></div><div class="description"><p>The HTTP override method to use (usually <code>PUT</code> or <code>DELETE</code>; <code>POST</code> is used if not set).</p>
</div></td></tr><tr><th><code>_auth</code></th><td><div class="header"></div><div class="description"><p>The <code>Authorization</code> header value (alternative to sending the header itself).</p>
</div></td></tr><tr><th><code>_json</code></th><td><div class="header"></div><div class="description"><p>Considered as the JSON request body if set (overriding all other body content, if any).</p>
</div></td></tr></table></div></section></section><section id="basics-calling-with-websockets"><h2 id="calling-with-websockets">Calling with websockets</h2>
<div class="content"><div class="intro"><p>The API supports real-time interaction by accepting websocket connections via <a href="http://socket.io">Socket.IO</a>.</p>
</div></div><section id="basics-calling-with-websockets-connecting"> <h3 id="connecting">Connecting</h3>
<div class="content"><div class="intro"><p>First, load the right Socket.IO client library.</p>
<ul>
<li><p>For a web app, the Javascript lib is directly served by the API at:</p>
<pre><code>https://{username}.pryv.io/socket.io/socket.io.js</code></pre>
</li>
<li><p>For other platforms see the <a href="https://github.com/learnboost/socket.io/wiki#wiki-in-other-languages">Socket.IO wiki</a>.)</p>
</li>
</ul>
<p>Then initialize the connection with the URL:</p>
<pre><code>https://{username}.pryv.io:443/{username}?auth={accessToken}&amp;resource=/{username}
</code></pre></div></div><aside><div class="example"><p>In a web app</p>
<pre><code class="lang-html">&lt;script src=&quot;https://chuangzi.pryv.io/socket.io/socket.io.js&quot;&gt;&lt;/script&gt;
&lt;script&gt;
var socket = io.connect(&quot;https://chuangzi.pryv.io:443/chuangzi?auth=chx27xqj80003ix2um3l3hb8v&amp;resource=/chuangzi&quot;);
});
&lt;/script&gt;
</code></pre>
</div></aside></section><section id="basics-calling-with-websockets-calling-methods"> <h3 id="calling-methods">Calling methods</h3>
<div class="content"><div class="intro"><p>You call API methods by sending a corresponding Socket.IO <code>{method-id}</code> message, passing a parameters object and a callback:</p>
<pre><code class="lang-javascript">// javascript
socket.emit(&#39;{method-id}&#39;, {/*parameters*/}, function (error, result) {
  // handle result
});
</code></pre>
<p>See each method&#39;s doc for its id.</p>
</div></div><aside><div class="example"><p>Retrieving events (Javascript)</p>
<pre><code class="lang-javascript">socket.emit(&#39;events.get&#39;, {sortAscending: true}, function (error, result) {
  // ...
});
</code></pre>
</div></aside></section><section id="basics-calling-with-websockets-subscribing-to-changes"> <h3 id="subscribing-to-changes">Subscribing to changes</h3>
<div class="content"><div class="intro"><p>Get notified when data changes by subscribing to messages <code>eventsChanged</code> and <code>streamsChanged</code>.</p>
</div></div><aside><div class="example"><p>Subscribing to events changes (Javascript)</p>
<pre><code class="lang-javascript">socket.on(&#39;eventsChanged&#39;, function() {
  // retrieve latest changes and update
});
</code></pre>
</div></aside></section></section><section id="basics-data-format"><h2 id="data-format">Data format</h2>
<div class="content"><div class="intro"><p>The API exchanges data with clients in JSON (MIME type <code>application/json</code>), except when uploading/downloading attached files.</p>
</div></div><aside><div class="example"><p>Example event</p>
<pre><code>{
  "id": "chx27xqui000uix2u8euhm3rr",
  "time": 1350373077.359,
  "streamId": "diary",
  "tags": [],
  "type": "position/wgs84",
  "content": {
    "latitude": 40.714728,
    "longitude": -73.998672
  },
  "created": 1404151670.826,
  "createdBy": "chx27xqj60000ix2umlget6lh",
  "modified": 1404151670.826,
  "modifiedBy": "chx27xqj60000ix2umlget6lh"
}</code></pre></div></aside></section><section id="basics-authentication"><h2 id="authentication">Authentication</h2>
<div class="content"><div class="intro"><p>All requests for retrieving and manipulating activity data must carry a valid <a href="#data-structure-access">access token</a> in the HTTP <code>Authorization</code> header or, alternatively, in the query string&#39;s <code>auth</code> parameter. With Socket.IO the token is passed in the handshake.</p>
<p>(Access tokens are obtained via the <a href="#authorizing-your-app">app authorization</a> or from sharing.)</p>
</div></div><aside><div class="example"><p>HTTP <code>Authorization</code> header</p>
<pre><code class="lang-http">GET /events HTTP/1.1
Host: {username}.pryv.io
Authorization: {token}
</code></pre>
</div><div class="example"><p>HTTP <code>auth</code> query string parameter</p>
<pre><code class="lang-http">GET /events?auth={token} HTTP/1.1
Host: {username}.pryv.io
</code></pre>
</div></aside></section><section id="basics-authorizing-your-app"><h2 id="authorizing-your-app">Authorizing your app</h2>
<div class="content"><div class="intro"><p>To authenticate users in your app, and thus for users to grant your app access to their data, you must:</p>
<ol>
<li>Obtain an app identifier (for now: just <a href="mailto:developers@pryv.com">ask us</a>)</li>
<li>Send an auth request from your app</li>
<li>Open the auth page from the URL returned (e.g. as a popup); the auth page will prompt the user to sign in using her Pryv credentials (or to create an account if she doesn&#39;t have one)</li>
<li>Handle the result by either polling the appropriate URL or directly from the return URL you&#39;ll have defined</li>
</ol>
<p><strong>Note: this auth flow will very likely undergo some changes in the coming weeks.</strong></p>
</div></div><section id="basics-authorizing-your-app-auth-request" class="method"> <h3 id="auth-request">Auth request</h3>
<div class="content"><div class="meta"><span class="http"><span class="label">HTTP-only</span><span class="label-value"><span>POST to <code>https://reg.pryv.io/access</code></span></span></span></div><h4 id="parameters">Parameters</h4>
<table class="definitions"><tr><th><code>requestingAppId</code></th><td><div class="header"><span class="type">string</span></div><div class="description"><p>Your app&#39;s identifier.</p>
</div></td></tr><tr><th><code>requestedPermissions</code></th><td><div class="header"><span class="type">array of permission request objects</span></div><div class="description"><p>The requested permissions. Each permission request has properties:</p>
</div><table class="definitions"><tr><th><code>streamId</code></th><td><div class="header"><span class="type"><a href="data-structure-identity">identity</a></span></div><div class="description"><p>The id of the requested stream.</p>
</div></td></tr><tr><th><code>level</code></th><td><div class="header"><span class="type"><code>read</code>|<code>contribute</code>|<code>manage</code></span></div><div class="description"><p>The required permission level.</p>
</div></td></tr><tr><th><code>defaultName</code></th><td><div class="header"><span class="type">string</span></div><div class="description"><p>The name to create the stream if needed (in the language of the user).</p>
</div></td></tr></table></td></tr><tr><th><code>languageCode</code></th><td><div class="header"><span class="type">string</span><span class="label label-default optional">optional</span></div><div class="description"><p>The two-letter ISO (639-1) code of the language in which to display user instructions, if possible. Default: <code>en</code>.</p>
</div></td></tr><tr><th><code>returnURL</code></th><td><div class="header"><span class="type">string</span><span class="label label-default optional">optional</span></div><div class="description"><p>The URL to redirect the user to after auth completes. If not set, your app must use polling to retrieve the auth result (see response below). Responses to polling requests are the same as those from the auth request.</p>
</div></td></tr></table><h4 id="result-in-progress">Result: in progress</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>200</code></span></span><table class="definitions"><tr><th><code>status</code></th><td><div class="header"><span class="type"><code>NEED_SIGNIN</code></span></div><div class="description"><p>Auth in progress.</p>
</div></td></tr><tr><th><code>url</code></th><td><div class="header"><span class="type">string</span></div><div class="description"><p>The URL of the auth page to show the user (e.g. as a popup) from your app.</p>
</div></td></tr><tr><th><code>poll</code></th><td><div class="header"><span class="type">string</span></div><div class="description"><p>If using polling: the poll URL to use for retrieving the auth result via an HTTP GET request.</p>
</div></td></tr></table><h4 id="result-accepted">Result: accepted</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>200</code></span></span><table class="definitions"><tr><th><code>status</code></th><td><div class="header"><span class="type"><code>ACCEPTED</code></span></div><div class="description"><p>Auth successful.</p>
</div></td></tr><tr><th><code>username</code></th><td><div class="header"><span class="type">string</span></div><div class="description"><p>The authentified user&#39;s username.</p>
</div></td></tr><tr><th><code>token</code></th><td><div class="header"><span class="type">string</span></div><div class="description"><p>Your app&#39;s API access token.</p>
</div></td></tr></table><h4 id="result-refused">Result: refused</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>403</code></span></span><table class="definitions"><tr><th><code>status</code></th><td><div class="header"><span class="type"><code>REFUSED</code></span></div><div class="description"><p>Auth failed.</p>
</div></td></tr><tr><th><code>reasonID</code></th><td><div class="header"><span class="type">string</span></div><div class="description"><p>A code indicating the reason for the failure.</p>
</div></td></tr><tr><th><code>message</code></th><td><div class="header"><span class="type">string</span></div><div class="description"><p>A message indicating the reason for the failure.</p>
</div></td></tr></table></div><aside><div class="example"><p>Auth request</p>
<pre><code class="lang-http">POST /access HTTP/1.1
Host: reg.pryv.io

{
  &quot;requestingAppId&quot;: &quot;test-app-id&quot;,
  &quot;requestedPermissions&quot;: [
    {
      &quot;streamId&quot;: &quot;diary&quot;,
      &quot;level&quot;: &quot;read&quot;,
      &quot;defaultName&quot;: &quot;Journal&quot;
    },
    {
      &quot;streamId&quot;: &quot;position&quot;,
      &quot;level&quot;: &quot;contribute&quot;,
      &quot;defaultName&quot;: &quot;Position&quot;
    }
  ],
  &quot;languageCode&quot;: &quot;fr&quot;
}
</code></pre>
</div><div class="example"><p>&quot;In progress&quot; response</p>
<pre><code class="lang-json">{
  &quot;status&quot;: &quot;NEED_SIGNIN&quot;,
  &quot;url&quot;: &quot;https://sw.pryv.io:2443/access/v1/access.html?lang=fr&amp;key=dXRqBezem8v3mNxf&amp;requestingAppId=test-app-id&amp;returnURL=false&amp;domain=pryv.io&amp;registerURL=https%3A%2F%2Freg.pryv.io%3A443&amp;requestedPermissions=%5B%7B%22streamId%22%3A%22diary%22%2C%22defaultName%22%3A%22Journal%22%2C%22level%22%3A%22read%22%2C%22folderPermissions%22%3A%5B%7B%22streamId%22%3A%22notes%22%2C%22level%22%3A%22manage%22%2C%22defaultName%22%3A%22Notes%22%7D%5D%7D%2C%7B%22streamId%22%3A%22position%22%2C%22defaultName%22%3A%22Position%22%2C%22level%22%3A%22read%22%2C%22folderPermissions%22%3A%5B%7B%22streamId%22%3A%22iphone%22%2C%22level%22%3A%22manage%22%2C%22defaultName%22%3A%22iPhone%22%7D%5D%7D%5D&quot;,
  &quot;poll&quot;: &quot;https://reg.pryv.io/access/dXRqBezem8v3mNxf&quot;,
  &quot;poll_rate_ms&quot;: 1000
}
</code></pre>
</div></aside></section></section><section id="basics-common-metadata"><h2 id="common-metadata">Common metadata</h2>
<div class="content"><div class="intro"><p>General API and server information.</p>
</div></div><section id="basics-common-metadata-http"> <h3 id="in-http-headers">In HTTP headers</h3>
<div class="content"><div class="intro"><p>Every HTTP response has header:</p>
</div><table class="definitions"><tr><th><code>API-Version</code></th><td><div class="header"></div><div class="description"><p>The version of the API in the form <code>{major}.{minor}.{revision}</code>. Mirrored in method results as <code>meta.apiVersion</code>.</p>
</div></td></tr></table></div></section><section id="basics-common-metadata-method-results"> <h3 id="in-method-results">In method results</h3>
<div class="content"><div class="intro"><p>Every JSON method result has properties:</p>
</div><table class="definitions"><tr><th><code>meta.apiVersion</code></th><td><div class="header"></div><div class="description"><p>The version of the API in the form <code>{major}.{minor}.{revision}</code>. Mirrored in HTTP header <code>API-Version</code>.</p>
</div></td></tr><tr><th><code>meta.serverTime</code></th><td><div class="header"></div><div class="description"><p>The current server time as a <a href="data-structure-timestamp">timestamp</a>. Keeping track of server time is necessary to properly handle time in API calls.</p>
</div></td></tr></table></div></section></section><section id="basics-errors"><h2 id="errors">Errors</h2>
<div class="content"><div class="intro"><p>When an error occurs, the API returns a response with an <code>error</code> object (see <a href="data-structure-error">error</a> detailing the cause. (Over HTTP, the response status is set to 4xx or 5xx.) In this documentation, errors are identified by their <code>id</code>.</p>
</div></div><aside><div class="example"><pre><code>{
  "id": "invalid-access-token",
  "message": "Cannot find access with token 'bad-token'."
}</code></pre></div></aside><section id="basics-errors-usual-errors"> <h3 id="usual-errors">Usual errors</h3>
<div class="content"><div class="intro"><p>See also <a href="#data-structure-error">error data structure</a>.</p>
</div><table class="definitions"><tr><th><code>invalid-request-structure</code></th><td><div class="header"><span class="http"><span class="label">HTTP</span><span class="label-value"><code>400</code></span></span></div><div class="description"><p>The request&#39;s structure is not that expected; for example: invalid JSON syntax, unexpected multipart structure when uploading file attachments.</p>
</div></td></tr><tr><th><code>invalid-parameters-format</code></th><td><div class="header"><span class="http"><span class="label">HTTP</span><span class="label-value"><code>400</code></span></span></div><div class="description"><p>The request&#39;s parameters do not follow the expected format. The error&#39;s <code>data</code> contains an array of validation errors.</p>
</div></td></tr><tr><th><code>unknown-referenced-resource</code></th><td><div class="header"><span class="http"><span class="label">HTTP</span><span class="label-value"><code>400</code></span></span></div><div class="description"><p>One or more referenced resource(s) can&#39;t be found. The error&#39;s <code>data.{method-parameter-key}</code> (e.g. <code>data.streamId</code>) contains the unknown reference(s).</p>
</div></td></tr><tr><th><code>invalid-access-token</code></th><td><div class="header"><span class="http"><span class="label">HTTP</span><span class="label-value"><code>401</code></span></span></div><div class="description"><p>The access token is missing or invalid.</p>
</div></td></tr><tr><th><code>forbidden</code></th><td><div class="header"><span class="http"><span class="label">HTTP</span><span class="label-value"><code>403</code></span></span></div><div class="description"><p>The given access token does not grant permission for this operation. See <a href="#data-structure-access">accesses</a> for more details about accesses and permissions.</p>
</div></td></tr><tr><th><code>unknown-resource</code></th><td><div class="header"><span class="http"><span class="label">HTTP</span><span class="label-value"><code>404</code></span></span></div><div class="description"><p>The resource can&#39;t be found.</p>
</div></td></tr><tr><th><code>user-account-relocated</code></th><td><div class="header"><span class="http"><span class="label">HTTP</span><span class="label-value"><code>301</code></span></span></div><div class="description"><p>The user has relocated her account to another server. Both the <code>Location</code> header and the error&#39;s <code>data</code> contain the equivalent URL pointing to the physical server now hosting the user&#39;s account. This error can only occur between the moment the account is relocated and the moment your DNS is updated to point to the new server. So we&#39;re stretching the HTTP convention a little, in that the returned URL should not be used permanently (only until <code>{username}.pryv.io</code> points to the correct server again). It&#39;s up to you to decide whether to keep it for the duration of the session (if you use sessions), for a given time, etc.</p>
</div></td></tr><tr><th><code>user-intervention-required</code></th><td><div class="header"><span class="http"><span class="label">HTTP</span><span class="label-value"><code>402</code></span></span></div><div class="description"><p>The request cannot be served temporarily because the user&#39;s account has exceeded its limits. The user must log into her account and fix the issue.</p>
</div></td></tr></table></div></section></section></section><section id="methods"><h1 id="api-methods">API methods</h1>
<section id="methods-auth" class=" trusted-only"><h2 id="authentication">Authentication</h2>
<div class="content"><div class="intro"><p>Methods for trusted apps to login/logout users.</p>
</div></div><section id="methods-auth-auth-login" class="method"> <h3 id="login-user">Login user</h3>
<div class="content"><div class="meta"><span class="method-id"><span class="label">id</span><span class="label-value"><code>auth.login</code></span></span><span class="http"><span class="label">HTTP</span><span class="label-value"><code>POST /auth/login</code></span></span></div><div class="intro"><p>Authenticates the user against the provided credentials, opening a personal access session. This is one of the only API methods that do not expect an <a href="#basics-authentication">auth parameter</a>.</p>
</div><h4 id="parameters">Parameters</h4>
<table class="definitions"><tr><th><code>username</code></th><td><div class="header"><span class="type">string</span></div><div class="description"><p>The user&#39;s username.</p>
</div></td></tr><tr><th><code>password</code></th><td><div class="header"><span class="type">string</span></div><div class="description"><p>The user&#39;s password.</p>
</div></td></tr><tr><th><code>appId</code></th><td><div class="header"><span class="type">string</span></div><div class="description"><p>Your app&#39;s unique identifier.</p>
</div></td></tr></table><h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>200 OK</code></span></span><table class="definitions"><tr><th><code>token</code></th><td><div class="header"><span class="type">string</span></div><div class="description"><p>The personal access token to use for further API calls.</p>
</div></td></tr><tr><th><code>preferredLanguage</code></th><td><div class="header"><span class="type">string</span></div><div class="description"><p>The user&#39;s preferred language as a 2-letter ISO language code.</p>
</div></td></tr></table></div><aside><div class="example"><div class="tab-content"><div class="tab-pane json active"><pre><code>{
  "username": "chuangzi",
  "password": "B|_|tt3rfly!",
  "appId": "my-app-id"
}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "token": "chx27xqj80002ix2u7vun4qom",
  "preferredLanguage": "zh"
}</code></pre></div><div class="tab-pane http"><pre><code>curl -i -X POST -H 'Content-Type: application/json' -d '{"username":"chuangzi","password":"B|_|tt3rfly!","appId":"my-app-id"}' https://${username}.pryv.io/auth/login?auth=${token}</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 0.7.29

{
  "token": "chx27xqj80002ix2u7vun4qom",
  "preferredLanguage": "zh"
}</code></pre></div><div class="tab-pane sockets"><pre><code>socket.emit('auth.login', {
  "username": "chuangzi",
  "password": "B|_|tt3rfly!",
  "appId": "my-app-id"
}, callback);</code></pre><div class="step-marker">⬇</div><pre><code>{
  "token": "chx27xqj80002ix2u7vun4qom",
  "preferredLanguage": "zh"
}</code></pre></div></div></div></aside></section><section id="methods-auth-auth-logout" class="method"> <h3 id="logout-user">Logout user</h3>
<div class="content"><div class="meta"><span class="method-id"><span class="label">id</span><span class="label-value"><code>auth.logout</code></span></span><span class="http"><span class="label">HTTP</span><span class="label-value"><code>POST /auth/logout</code></span></span></div><div class="intro"><p>Terminates a personal access session by invalidating its access token (the user will have to login again).</p>
</div><h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>200 OK</code></span></span></div><aside></aside></section></section><section id="methods-events"><h2 id="events">Events</h2>
<div class="content"><div class="intro"><p>Methods to retrieve and manipulate <a href="#data-structure-event">events</a>.</p>
</div></div><section id="methods-events-events-get" class="method"> <h3 id="get-events">Get events</h3>
<div class="content"><div class="meta"><span class="method-id"><span class="label">id</span><span class="label-value"><code>events.get</code></span></span><span class="http"><span class="label">HTTP</span><span class="label-value"><code>GET /events</code></span></span></div><div class="intro"><p>Queries accessible events.</p>
</div><h4 id="parameters">Parameters</h4>
<table class="definitions"><tr><th><code>fromTime</code></th><td><div class="header"><span class="type"><a href="#data-structure-timestamp">timestamp</a></span><span class="label label-default optional">optional</span></div><div class="description"><p>The start time of the timeframe you want to retrieve events for. Default is 24 hours before <code>toTime</code> if the latter is set; otherwise it is not taken into account.</p>
</div></td></tr><tr><th><code>toTime</code></th><td><div class="header"><span class="type"><a href="#data-structure-timestamp">timestamp</a></span><span class="label label-default optional">optional</span></div><div class="description"><p>The end time of the timeframe you want to retrieve events for. Default is the current time. Note: events are considered to be within a given timeframe based on their <code>time</code> only (<code>duration</code> is not considered).</p>
</div></td></tr><tr><th><code>streams</code></th><td><div class="header"><span class="type">array of <a href="#data-structure-identity">identity</a></span><span class="label label-default optional">optional</span></div><div class="description"><p>If set, only events assigned to the specified streams and their sub-streams will be returned. By default, all accessible events are returned regardless of their stream.</p>
</div></td></tr><tr><th><code>tags</code></th><td><div class="header"><span class="type">array of strings</span><span class="label label-default optional">optional</span></div><div class="description"><p>If set, only events assigned to any of the listed tags will be returned.</p>
</div></td></tr><tr><th><code>types</code></th><td><div class="header"><span class="type">array of strings</span><span class="label label-default optional">optional</span></div><div class="description"><p>If set, only events of any of the listed types will be returned.</p>
</div></td></tr><tr><th><code>running</code></th><td><div class="header"><span class="type">boolean</span><span class="label label-default optional">optional</span></div><div class="description"><p>If <code>true</code>, only running period events will be returned.</p>
</div></td></tr><tr><th><code>sortAscending</code></th><td><div class="header"><span class="type"><code>true</code>|<code>false</code></span><span class="label label-default optional">optional</span></div><div class="description"><p>If <code>true</code>, events will be sorted from oldest to newest. Default: false (sort descending).</p>
</div></td></tr><tr><th><code>skip</code></th><td><div class="header"><span class="type">number</span><span class="label label-default optional">optional</span></div><div class="description"><p>The number of items to skip in the results.</p>
</div></td></tr><tr><th><code>limit</code></th><td><div class="header"><span class="type">number</span><span class="label label-default optional">optional</span></div><div class="description"><p>The number of items to return in the results. A default value of 20 items is used if no other range limiting parameter is specified (<code>fromTime</code>, <code>toTime</code>).</p>
</div></td></tr><tr><th><code>state</code></th><td><div class="header"><span class="type"><code>default</code>|<code>trashed</code>|<code>all</code></span><span class="label label-default optional">optional</span></div><div class="description"><p>Indicates what items to return depending on their state. By default, only items that are not in the trash are returned; <code>trashed</code> returns only items in the trash, while <code>all</code> return all items regardless of their state.</p>
</div></td></tr><tr><th><code>modifiedSince</code></th><td><div class="header"><span class="type"><a href="#data-structure-timestamp">timestamp</a></span><span class="label label-default optional">optional</span></div><div class="description"><p>If specified, only events modified since that time will be returned.</p>
</div></td></tr></table><h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>200 OK</code></span></span><table class="definitions"><tr><th><code>events</code></th><td><div class="header"><span class="type">array of <a href="#data-structure-event">events</a></span></div><div class="description"><p>The accessible events ordered by time (see <code>sortAscending</code> above).</p>
</div></td></tr></table></div><aside><div class="example"><div class="tab-content"><div class="tab-pane json active"><pre><code>{}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "events": [
    {
      "id": "chx27xqui000six2u64134ftz",
      "time": 1404155270.826,
      "streamId": "diary",
      "tags": [],
      "type": "picture/attached",
      "content": null,
      "attachments": [
        {
          "id": "chx27xqui000tix2uixjfxz3z",
          "fileName": "photo.jpg",
          "type": "image/jpeg",
          "size": 2561
        }
      ],
      "created": 1404155270.826,
      "createdBy": "chx27xqj80004ix2uwyfif5th",
      "modified": 1404155270.826,
      "modifiedBy": "chx27xqj80004ix2uwyfif5th"
    },
    {
      "id": "chx27xqui000jix2upt8mj0ik",
      "time": 1404158870.826,
      "streamId": "jogging",
      "tags": [],
      "type": "activity/pryv",
      "content": null,
      "created": 1404158870.826,
      "createdBy": "chx27xqj80001ix2uswe54bo3",
      "modified": 1404158870.826,
      "modifiedBy": "chx27xqj80001ix2uswe54bo3"
    },
    {
      "id": "chx27xqui000uix2u8euhm3rr",
      "time": 1350373077.359,
      "streamId": "diary",
      "tags": [],
      "type": "position/wgs84",
      "content": {
        "latitude": 40.714728,
        "longitude": -73.998672
      },
      "created": 1404151670.826,
      "createdBy": "chx27xqj60000ix2umlget6lh",
      "modified": 1404151670.826,
      "modifiedBy": "chx27xqj60000ix2umlget6lh"
    }
  ]
}</code></pre></div><div class="tab-pane http"><pre><code>curl -i https://${username}.pryv.io/events?auth=${token}</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 0.7.29

{
  "events": [
    {
      "id": "chx27xqui000six2u64134ftz",
      "time": 1404155270.826,
      "streamId": "diary",
      "tags": [],
      "type": "picture/attached",
      "content": null,
      "attachments": [
        {
          "id": "chx27xqui000tix2uixjfxz3z",
          "fileName": "photo.jpg",
          "type": "image/jpeg",
          "size": 2561
        }
      ],
      "created": 1404155270.826,
      "createdBy": "chx27xqj80004ix2uwyfif5th",
      "modified": 1404155270.826,
      "modifiedBy": "chx27xqj80004ix2uwyfif5th"
    },
    {
      "id": "chx27xqui000jix2upt8mj0ik",
      "time": 1404158870.826,
      "streamId": "jogging",
      "tags": [],
      "type": "activity/pryv",
      "content": null,
      "created": 1404158870.826,
      "createdBy": "chx27xqj80001ix2uswe54bo3",
      "modified": 1404158870.826,
      "modifiedBy": "chx27xqj80001ix2uswe54bo3"
    },
    {
      "id": "chx27xqui000uix2u8euhm3rr",
      "time": 1350373077.359,
      "streamId": "diary",
      "tags": [],
      "type": "position/wgs84",
      "content": {
        "latitude": 40.714728,
        "longitude": -73.998672
      },
      "created": 1404151670.826,
      "createdBy": "chx27xqj60000ix2umlget6lh",
      "modified": 1404151670.826,
      "modifiedBy": "chx27xqj60000ix2umlget6lh"
    }
  ]
}</code></pre></div><div class="tab-pane sockets"><pre><code>socket.emit('events.get', {}, callback);</code></pre><div class="step-marker">⬇</div><pre><code>{
  "events": [
    {
      "id": "chx27xqui000six2u64134ftz",
      "time": 1404155270.826,
      "streamId": "diary",
      "tags": [],
      "type": "picture/attached",
      "content": null,
      "attachments": [
        {
          "id": "chx27xqui000tix2uixjfxz3z",
          "fileName": "photo.jpg",
          "type": "image/jpeg",
          "size": 2561
        }
      ],
      "created": 1404155270.826,
      "createdBy": "chx27xqj80004ix2uwyfif5th",
      "modified": 1404155270.826,
      "modifiedBy": "chx27xqj80004ix2uwyfif5th"
    },
    {
      "id": "chx27xqui000jix2upt8mj0ik",
      "time": 1404158870.826,
      "streamId": "jogging",
      "tags": [],
      "type": "activity/pryv",
      "content": null,
      "created": 1404158870.826,
      "createdBy": "chx27xqj80001ix2uswe54bo3",
      "modified": 1404158870.826,
      "modifiedBy": "chx27xqj80001ix2uswe54bo3"
    },
    {
      "id": "chx27xqui000uix2u8euhm3rr",
      "time": 1350373077.359,
      "streamId": "diary",
      "tags": [],
      "type": "position/wgs84",
      "content": {
        "latitude": 40.714728,
        "longitude": -73.998672
      },
      "created": 1404151670.826,
      "createdBy": "chx27xqj60000ix2umlget6lh",
      "modified": 1404151670.826,
      "modifiedBy": "chx27xqj60000ix2umlget6lh"
    }
  ]
}</code></pre></div></div></div></aside></section><section id="methods-events-events-create" class="method"> <h3 id="create-event">Create event</h3>
<div class="content"><div class="meta"><span class="method-id"><span class="label">id</span><span class="label-value"><code>events.create</code></span></span><span class="http"><span class="label">HTTP</span><span class="label-value"><code>POST /events</code></span></span></div><div class="intro"><p>Records a new event. It is recommended that events recorded this way are completed events, i.e. either period events with a known duration or mark events. To start a running period event, use <a href="#methods-events-events-start">Start period</a> instead.</p>
<p>In addition to JSON, this request accepts standard multipart/form-data content to support the creation of event with attached files in a single request. When sending a multipart request, one content part must hold the JSON for the new event and all other content parts must be the attached files.</p>
</div><h4 id="parameters">Parameters</h4>
<p>The new event&#39;s data: see <a href="#data-structure-event">Event</a>.</p>
<h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>201 Created</code></span></span><table class="definitions"><tr><th><code>event</code></th><td><div class="header"><span class="type"><a href="#data-structure-event">event</a></span></div><div class="description"><p>The created event.</p>
</div></td></tr><tr><th><code>stoppedId</code></th><td><div class="header"><span class="type"><a href="#data-structure-identity">identity</a></span></div><div class="description"><p>Only in <code>singleActivity</code> streams. If set, indicates the id of the previously running period event that was stopped as a consequence of inserting the new event.</p>
</div></td></tr></table><h4 id="specific-errors">Specific errors</h4>
<table class="definitions"><tr><th><code>invalid-operation</code></th><td><div class="header"><span class="http"><span class="label">HTTP</span><span class="label-value"><code>400</code></span></span></div><div class="description"><p>The referenced stream is in the trash, and we prevent the recording of new events into trashed streams.</p>
</div></td></tr><tr><th><code>periods-overlap</code></th><td><div class="header"><span class="http"><span class="label">HTTP</span><span class="label-value"><code>400</code></span></span></div><div class="description"><p>Only in <code>singleActivity</code> streams: the new event overlaps existing period events. The overlapped events&#39; ids are listed as an array in the error&#39;s <code>data.overlappedIds</code>.</p>
</div></td></tr></table></div><aside><div class="example"><p>Capturing a simple number value</p>
<div class="tab-content"><div class="tab-pane json active"><pre><code>{
  "streamId": "weight",
  "type": "mass/kg",
  "content": 90
}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "event": {
    "id": "chx27xqui000qix2udg6a8maz",
    "time": 1404158870.826,
    "streamId": "weight",
    "tags": [],
    "type": "mass/kg",
    "content": 90,
    "created": 1404158870.826,
    "createdBy": "chx27xqj80001ix2uswe54bo3",
    "modified": 1404158870.826,
    "modifiedBy": "chx27xqj80001ix2uswe54bo3"
  }
}</code></pre></div><div class="tab-pane http"><pre><code>curl -i -X POST -H 'Content-Type: application/json' -d '{"streamId":"weight","type":"mass/kg","content":90}' https://${username}.pryv.io/events?auth=${token}</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 201 Created
Content-Type: application/json; charset=utf-8
API-Version: 0.7.29

{
  "event": {
    "id": "chx27xqui000qix2udg6a8maz",
    "time": 1404158870.826,
    "streamId": "weight",
    "tags": [],
    "type": "mass/kg",
    "content": 90,
    "created": 1404158870.826,
    "createdBy": "chx27xqj80001ix2uswe54bo3",
    "modified": 1404158870.826,
    "modifiedBy": "chx27xqj80001ix2uswe54bo3"
  }
}</code></pre></div><div class="tab-pane sockets"><pre><code>socket.emit('events.create', {
  "streamId": "weight",
  "type": "mass/kg",
  "content": 90
}, callback);</code></pre><div class="step-marker">⬇</div><pre><code>{
  "event": {
    "id": "chx27xqui000qix2udg6a8maz",
    "time": 1404158870.826,
    "streamId": "weight",
    "tags": [],
    "type": "mass/kg",
    "content": 90,
    "created": 1404158870.826,
    "createdBy": "chx27xqj80001ix2uswe54bo3",
    "modified": 1404158870.826,
    "modifiedBy": "chx27xqj80001ix2uswe54bo3"
  }
}</code></pre></div></div></div><div class="example"><p>cURL with attachment</p>
<pre><code class="lang-bash">curl -i -F &#39;event={&quot;streamId&quot;:&quot;diary&quot;,&quot;type&quot;:&quot;picture/attached&quot;}&#39;  -F &quot;file=@photo.jpg&quot; https://${username}.pryv.io/events?auth=${token}
</code></pre>
<div class="step-marker">⬇</div><pre><code>{
  "event": {
    "id": "chx27xqui000six2u64134ftz",
    "time": 1404155270.826,
    "streamId": "diary",
    "tags": [],
    "type": "picture/attached",
    "content": null,
    "attachments": [
      {
        "id": "chx27xqui000tix2uixjfxz3z",
        "fileName": "photo.jpg",
        "type": "image/jpeg",
        "size": 2561
      }
    ],
    "created": 1404155270.826,
    "createdBy": "chx27xqj80004ix2uwyfif5th",
    "modified": 1404155270.826,
    "modifiedBy": "chx27xqj80004ix2uwyfif5th"
  }
}</code></pre></div></aside></section><section id="methods-events-events-start" class="method"> <h3 id="start-period">Start period</h3>
<div class="content"><div class="meta"><span class="method-id"><span class="label">id</span><span class="label-value"><code>events.start</code></span></span><span class="http"><span class="label">HTTP</span><span class="label-value"><code>POST /events/start</code></span></span></div><div class="intro"><p>Starts a new period event. This is equivalent to starting an event with a null <code>duration</code>. In <code>singleActivity</code> streams, also stops the previously running period event if any.</p>
<p>See <a href="#methods-events-events-create">Create event</a> for details.</p>
</div></div><aside><div class="example"><p>Starting an activity</p>
<div class="tab-content"><div class="tab-pane json active"><pre><code>{
  "streamId": "bicycling",
  "type": "activity/pryv"
}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "event": {
    "id": "chx27xqui000kix2uu7fgviga",
    "time": 1404158870.826,
    "duration": null,
    "streamId": "bicycling",
    "tags": [],
    "type": "activity/pryv",
    "content": null,
    "created": 1404158870.826,
    "createdBy": "chx27xqj80001ix2uswe54bo3",
    "modified": 1404158870.826,
    "modifiedBy": "chx27xqj80001ix2uswe54bo3"
  }
}</code></pre></div><div class="tab-pane http"><pre><code>curl -i -X POST -H 'Content-Type: application/json' -d '{"streamId":"bicycling","type":"activity/pryv"}' https://${username}.pryv.io/events/start?auth=${token}</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 201 Created
Content-Type: application/json; charset=utf-8
API-Version: 0.7.29

{
  "event": {
    "id": "chx27xqui000kix2uu7fgviga",
    "time": 1404158870.826,
    "duration": null,
    "streamId": "bicycling",
    "tags": [],
    "type": "activity/pryv",
    "content": null,
    "created": 1404158870.826,
    "createdBy": "chx27xqj80001ix2uswe54bo3",
    "modified": 1404158870.826,
    "modifiedBy": "chx27xqj80001ix2uswe54bo3"
  }
}</code></pre></div><div class="tab-pane sockets"><pre><code>socket.emit('events.start', {
  "streamId": "bicycling",
  "type": "activity/pryv"
}, callback);</code></pre><div class="step-marker">⬇</div><pre><code>{
  "event": {
    "id": "chx27xqui000kix2uu7fgviga",
    "time": 1404158870.826,
    "duration": null,
    "streamId": "bicycling",
    "tags": [],
    "type": "activity/pryv",
    "content": null,
    "created": 1404158870.826,
    "createdBy": "chx27xqj80001ix2uswe54bo3",
    "modified": 1404158870.826,
    "modifiedBy": "chx27xqj80001ix2uswe54bo3"
  }
}</code></pre></div></div></div></aside></section><section id="methods-events-events-stop" class="method"> <h3 id="stop-period">Stop period</h3>
<div class="content"><div class="meta"><span class="method-id"><span class="label">id</span><span class="label-value"><code>events.stop</code></span></span><span class="http"><span class="label">HTTP</span><span class="label-value"><code>POST /events/stop</code></span></span></div><div class="intro"><p>Stops a running period event. In <code>singleActivity</code> streams, which guarantee that only one event is running at any given time, that event is automatically determined; for regular streams, the event to stop must be specified.</p>
</div><h4 id="parameters">Parameters</h4>
<table class="definitions"><tr><th><code>streamId</code></th><td><div class="header"><span class="type"><a href="#data-structure-identity">identity</a></span></div><div class="description"><p>The id of the <code>singleActivity</code> stream in which to stop the running event. Either this or <code>id</code> must be specified.</p>
</div></td></tr><tr><th><code>id</code></th><td><div class="header"><span class="type"><a href="#data-structure-identity">identity</a></span></div><div class="description"><p>The id of the event to stop. Either this or <code>streamId</code> must be specified.</p>
</div></td></tr><tr><th><code>time</code></th><td><div class="header"><span class="type"><a href="#data-structure-timestamp">timestamp</a></span><span class="label label-default optional">optional</span></div><div class="description"><p>The stop time. Default: now.</p>
</div></td></tr></table><h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>200 OK</code></span></span><table class="definitions"><tr><th><code>stoppedId</code></th><td><div class="header"><span class="type"><a href="#data-structure-identity">identity</a></span></div><div class="description"><p>The id of the event that was stopped or null if no running event was found.</p>
</div></td></tr></table><h4 id="specific-errors">Specific errors</h4>
<table class="definitions"><tr><th><code>invalid-operation</code></th><td><div class="header"><span class="http"><span class="label">HTTP</span><span class="label-value"><code>400</code></span></span></div><div class="description"><p>The specified event is not a running period event.</p>
</div></td></tr></table></div><aside><div class="example"><div class="tab-content"><div class="tab-pane json active"><pre><code>{
  "streamId": "bicycling",
  "time": 1404158871.102
}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "stoppedId": "chx27xqui000kix2uu7fgviga"
}</code></pre></div><div class="tab-pane http"><pre><code>curl -i -X POST -H 'Content-Type: application/json' -d '{"streamId":"bicycling","time":1404158871.102}' https://${username}.pryv.io/events/stop?auth=${token}</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 0.7.29

{
  "stoppedId": "chx27xqui000kix2uu7fgviga"
}</code></pre></div><div class="tab-pane sockets"><pre><code>socket.emit('events.stop', {
  "streamId": "bicycling",
  "time": 1404158871.102
}, callback);</code></pre><div class="step-marker">⬇</div><pre><code>{
  "stoppedId": "chx27xqui000kix2uu7fgviga"
}</code></pre></div></div></div></aside></section><section id="methods-events-events-update" class="method"> <h3 id="update-event">Update event</h3>
<div class="content"><div class="meta"><span class="method-id"><span class="label">id</span><span class="label-value"><code>events.update</code></span></span><span class="http"><span class="label">HTTP</span><span class="label-value"><code>PUT /events/{id}</code></span></span></div><div class="intro"><p>Modifies the event.</p>
</div><h4 id="parameters">Parameters</h4>
<table class="definitions"><tr><th><code>id</code></th><td><div class="header"><span class="type"><a href="#data-structure-identity">identity</a></span><span class="http"><span class="label">HTTP</span><span class="label-value"><span>set in request path</span></span></span></div><div class="description"><p>The id of the event.</p>
</div></td></tr><tr><th><code>update</code></th><td><div class="header"><span class="type">object</span><span class="http"><span class="label">HTTP</span><span class="label-value"><span>= request body</span></span></span></div><div class="description"><p>New values for the event&#39;s fields: see <a href="#data-structure-event">event</a>. All fields are optional, and only modified values must be included.</p>
</div></td></tr></table><h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>200 OK</code></span></span><table class="definitions"><tr><th><code>event</code></th><td><div class="header"><span class="type"><a href="#data-structure-event">event</a></span></div><div class="description"><p>The updated event.</p>
</div></td></tr><tr><th><code>stoppedId</code></th><td><div class="header"><span class="type"><a href="#data-structure-identity">identity</a></span></div><div class="description"><p>Only in <code>singleActivity</code> streams. If set, indicates the id of the previously running period event that was stopped as a consequence of modifying the event.</p>
</div></td></tr></table><h4 id="specific-errors">Specific errors</h4>
<table class="definitions"><tr><th><code>invalid-operation</code></th><td><div class="header"><span class="http"><span class="label">HTTP</span><span class="label-value"><code>400</code></span></span></div><div class="description"><p>Only in <code>singleActivity</code> streams. The duration of the period event cannot be set to <code>null</code> (i.e. still running) if one or more other period event(s) exist later in time. The error&#39;s <code>data.conflictingEventId</code> provides the id of the closest conflicting event.</p>
</div></td></tr><tr><th><code>periods-overlap</code></th><td><div class="header"><span class="http"><span class="label">HTTP</span><span class="label-value"><code>400</code></span></span></div><div class="description"><p>Only in <code>singleActivity</code> streams. The time and/or duration of the period event cannot be set to overlap with other period events. The overlapping events&#39; ids are listed as an array in the error&#39;s <code>data.overlappedIds</code>.</p>
</div></td></tr></table></div><aside><div class="example"><p>Adding a tag</p>
<div class="tab-content"><div class="tab-pane json active"><pre><code>{
  "id": "chx27xqui000uix2u8euhm3rr",
  "update": {
    "tags": [
      "home"
    ]
  }
}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "event": {
    "tags": [
      "home"
    ],
    "modified": 1404158871.102,
    "modifiedBy": "chx27xqj80001ix2uswe54bo3",
    "id": "chx27xqui000uix2u8euhm3rr",
    "time": 1350373077.359,
    "streamId": "diary",
    "type": "position/wgs84",
    "content": {
      "latitude": 40.714728,
      "longitude": -73.998672
    },
    "created": 1404151670.826,
    "createdBy": "chx27xqj60000ix2umlget6lh"
  }
}</code></pre></div><div class="tab-pane http"><pre><code>curl -i -X PUT -H 'Content-Type: application/json' -d '{"tags":["home"]}' https://${username}.pryv.io/events/chx27xqui000uix2u8euhm3rr?auth=${token}</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 0.7.29

{
  "event": {
    "tags": [
      "home"
    ],
    "modified": 1404158871.102,
    "modifiedBy": "chx27xqj80001ix2uswe54bo3",
    "id": "chx27xqui000uix2u8euhm3rr",
    "time": 1350373077.359,
    "streamId": "diary",
    "type": "position/wgs84",
    "content": {
      "latitude": 40.714728,
      "longitude": -73.998672
    },
    "created": 1404151670.826,
    "createdBy": "chx27xqj60000ix2umlget6lh"
  }
}</code></pre></div><div class="tab-pane sockets"><pre><code>socket.emit('events.update', {
  "id": "chx27xqui000uix2u8euhm3rr",
  "update": {
    "tags": [
      "home"
    ]
  }
}, callback);</code></pre><div class="step-marker">⬇</div><pre><code>{
  "event": {
    "tags": [
      "home"
    ],
    "modified": 1404158871.102,
    "modifiedBy": "chx27xqj80001ix2uswe54bo3",
    "id": "chx27xqui000uix2u8euhm3rr",
    "time": 1350373077.359,
    "streamId": "diary",
    "type": "position/wgs84",
    "content": {
      "latitude": 40.714728,
      "longitude": -73.998672
    },
    "created": 1404151670.826,
    "createdBy": "chx27xqj60000ix2umlget6lh"
  }
}</code></pre></div></div></div></aside></section><section id="methods-events-events-addAttachment" class="method"> <h3 id="add-attachment-s-">Add attachment(s)</h3>
<div class="content"><div class="meta"><span class="http"><span class="label">HTTP-only</span><span class="label-value"><code>POST /events/{id}</code></span></span></div><div class="intro"><p>Adds one or more file attachments to the event. This request expects standard multipart/form-data content, with all content parts being the attached files.</p>
</div><h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>200 OK</code></span></span><table class="definitions"><tr><th><code>event</code></th><td><div class="header"><span class="type"><a href="#data-structure-event">event</a></span></div><div class="description"><p>The updated event.</p>
</div></td></tr></table></div><aside><div class="example"><p>cURL</p>
<pre><code class="lang-bash">curl -i -F &quot;file=@{filename}&quot; https://${username}.pryv.io/events/chx27xqui000six2u64134ftz?auth=${token}
</code></pre>
</div></aside></section><section id="methods-events-events-getAttachment" class="method"> <h3 id="get-attachment">Get attachment</h3>
<div class="content"><div class="meta"><span class="http"><span class="label">HTTP-only</span><span class="label-value"><code>GET /events/{id}/{fileId}[/{fileName}]</code></span></span></div><div class="intro"><p>Gets the attached file. Accepts an arbitrary filename path suffix (ignored) for easier link creation.</p>
</div><h4 id="parameters">Parameters</h4>
<table class="definitions"><tr><th><code>readToken</code></th><td><div class="header"><span class="type">string</span></div><div class="description"><p>The file read token to authentify the request if not using the <code>Authorization</code> HTTP header. See <a href="#data-structure-event"><code>event.attachments[].readToken</code></a> for more info.</p>
</div></td></tr></table><h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>200 OK</code></span></span><p>The file&#39;s contents.</p>
</div><aside></aside></section><section id="methods-events-events-deleteAttachment" class="method"> <h3 id="delete-attachment">Delete attachment</h3>
<div class="content"><div class="meta"><span class="method-id"><span class="label">id</span><span class="label-value"><code>events.deleteAttachment</code></span></span><span class="http"><span class="label">HTTP</span><span class="label-value"><code>DELETE /events/{id}/{fileId}</code></span></span></div><div class="intro"><p>Irreversibly deletes the attached file.</p>
</div><h4 id="parameters">Parameters</h4>
<table class="definitions"><tr><th><code>id</code></th><td><div class="header"><span class="type"><a href="#data-structure-identity">identity</a></span><span class="http"><span class="label">HTTP</span><span class="label-value"><span>set in request path</span></span></span></div><div class="description"><p>The id of the event.</p>
</div></td></tr><tr><th><code>fileId</code></th><td><div class="header"><span class="type"><a href="#data-structure-identity">identity</a></span><span class="http"><span class="label">HTTP</span><span class="label-value"><span>set in request path</span></span></span></div><div class="description"><p>The id of the attached file.</p>
</div></td></tr></table><h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>200 OK</code></span></span><table class="definitions"><tr><th><code>event</code></th><td><div class="header"><span class="type"><a href="#data-structure-event">event</a></span></div><div class="description"><p>The updated event.</p>
</div></td></tr></table></div><aside><div class="example"><div class="tab-content"><div class="tab-pane json active"><pre><code>{
  "id": "chx27xqui000lix2u57ch4gzg",
  "fileId": "chx27xqui000mix2u6ffb2bqm"
}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "event": {
    "id": "chx27xqui000lix2u57ch4gzg",
    "time": 1404158870.826,
    "duration": null,
    "streamId": "chx27xquh0009ix2u1pakgk19",
    "tags": [],
    "type": "activity/pryv",
    "content": null,
    "created": 1404158870.826,
    "createdBy": "chx27xqj80001ix2uswe54bo3",
    "modified": 1404158870.826,
    "modifiedBy": "chx27xqj80001ix2uswe54bo3"
  }
}</code></pre></div><div class="tab-pane http"><pre><code>curl -i -X DELETE https://${username}.pryv.io/events/chx27xqui000lix2u57ch4gzg/chx27xqui000mix2u6ffb2bqm?auth=${token}</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 0.7.29

{
  "event": {
    "id": "chx27xqui000lix2u57ch4gzg",
    "time": 1404158870.826,
    "duration": null,
    "streamId": "chx27xquh0009ix2u1pakgk19",
    "tags": [],
    "type": "activity/pryv",
    "content": null,
    "created": 1404158870.826,
    "createdBy": "chx27xqj80001ix2uswe54bo3",
    "modified": 1404158870.826,
    "modifiedBy": "chx27xqj80001ix2uswe54bo3"
  }
}</code></pre></div><div class="tab-pane sockets"><pre><code>socket.emit('events.deleteAttachment', {
  "id": "chx27xqui000lix2u57ch4gzg",
  "fileId": "chx27xqui000mix2u6ffb2bqm"
}, callback);</code></pre><div class="step-marker">⬇</div><pre><code>{
  "event": {
    "id": "chx27xqui000lix2u57ch4gzg",
    "time": 1404158870.826,
    "duration": null,
    "streamId": "chx27xquh0009ix2u1pakgk19",
    "tags": [],
    "type": "activity/pryv",
    "content": null,
    "created": 1404158870.826,
    "createdBy": "chx27xqj80001ix2uswe54bo3",
    "modified": 1404158870.826,
    "modifiedBy": "chx27xqj80001ix2uswe54bo3"
  }
}</code></pre></div></div></div></aside></section><section id="methods-events-events-delete" class="method"> <h3 id="delete-event">Delete event</h3>
<div class="content"><div class="meta"><span class="method-id"><span class="label">id</span><span class="label-value"><code>events.delete</code></span></span><span class="http"><span class="label">HTTP</span><span class="label-value"><code>DELETE /events/{id}</code></span></span></div><div class="intro"><p>Trashes or deletes the specified event, depending on its current state:</p>
<ul>
<li>If the event is not already in the trash, it will be moved to the trash (i.e. flagged as <code>trashed</code>)</li>
<li>If the event is already in the trash, it will be irreversibly deleted (including all its attached files, if any).</li>
</ul>
</div><h4 id="parameters">Parameters</h4>
<table class="definitions"><tr><th><code>id</code></th><td><div class="header"><span class="type"><a href="#data-structure-identity">identity</a></span><span class="http"><span class="label">HTTP</span><span class="label-value"><span>set in request path</span></span></span></div><div class="description"><p>The id of the event.</p>
</div></td></tr></table><h4 id="result-trashed">Result: trashed</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>200 OK</code></span></span><table class="definitions"><tr><th><code>event</code></th><td><div class="header"><span class="type"><a href="#data-structure-event">event</a></span></div><div class="description"><p>The trashed event.</p>
</div></td></tr></table><h4 id="result-deleted">Result: deleted</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>204 No content</code></span></span></div><aside><div class="example"><p>Trashing</p>
<div class="tab-content"><div class="tab-pane json active"><pre><code>{
  "id": "chx27xqui000rix2u4ni9hueu"
}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "event": {
    "trashed": true,
    "modified": 1404158871.103,
    "modifiedBy": "chx27xqj80001ix2uswe54bo3",
    "id": "chx27xqui000rix2u4ni9hueu",
    "time": 1404155270.826,
    "streamId": "diary",
    "tags": [],
    "type": "note/text",
    "content": "道可道非常道。。。",
    "created": 1404155270.826,
    "createdBy": "chx27xqj80001ix2uswe54bo3"
  }
}</code></pre></div><div class="tab-pane http"><pre><code>curl -i -X DELETE https://${username}.pryv.io/events/chx27xqui000rix2u4ni9hueu?auth=${token}</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 0.7.29

{
  "event": {
    "trashed": true,
    "modified": 1404158871.103,
    "modifiedBy": "chx27xqj80001ix2uswe54bo3",
    "id": "chx27xqui000rix2u4ni9hueu",
    "time": 1404155270.826,
    "streamId": "diary",
    "tags": [],
    "type": "note/text",
    "content": "道可道非常道。。。",
    "created": 1404155270.826,
    "createdBy": "chx27xqj80001ix2uswe54bo3"
  }
}</code></pre></div><div class="tab-pane sockets"><pre><code>socket.emit('events.delete', {
  "id": "chx27xqui000rix2u4ni9hueu"
}, callback);</code></pre><div class="step-marker">⬇</div><pre><code>{
  "event": {
    "trashed": true,
    "modified": 1404158871.103,
    "modifiedBy": "chx27xqj80001ix2uswe54bo3",
    "id": "chx27xqui000rix2u4ni9hueu",
    "time": 1404155270.826,
    "streamId": "diary",
    "tags": [],
    "type": "note/text",
    "content": "道可道非常道。。。",
    "created": 1404155270.826,
    "createdBy": "chx27xqj80001ix2uswe54bo3"
  }
}</code></pre></div></div></div></aside></section></section><section id="methods-streams"><h2 id="streams">Streams</h2>
<div class="content"><div class="intro"><p>Methods to retrieve and manipulate <a href="#data-structure-stream">streams</a>.</p>
</div></div><section id="methods-streams-streams-get" class="method"> <h3 id="get-streams">Get streams</h3>
<div class="content"><div class="meta"><span class="method-id"><span class="label">id</span><span class="label-value"><code>streams.get</code></span></span><span class="http"><span class="label">HTTP</span><span class="label-value"><code>GET /streams</code></span></span></div><div class="intro"><p>Gets the accessible streams hierarchy.</p>
</div><h4 id="parameters">Parameters</h4>
<table class="definitions"><tr><th><code>parentId</code></th><td><div class="header"><span class="type"><a href="#data-structure-identity">identity</a></span><span class="label label-default optional">optional</span></div><div class="description"><p>The id of the parent stream from which to retrieve streams. Default: <code>null</code> (returns all accessible streams from the root level).</p>
</div></td></tr><tr><th><code>state</code></th><td><div class="header"><span class="type"><code>default</code>|<code>all</code></span><span class="label label-default optional">optional</span></div><div class="description"><p>By default, only items that are not in the trash are returned; <code>all</code> return all items regardless of their state.</p>
</div></td></tr></table><h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>200 OK</code></span></span><table class="definitions"><tr><th><code>streams</code></th><td><div class="header"><span class="type">array of <a href="#data-structure-stream">streams</a></span></div><div class="description"><p>The tree of the accessible streams, sorted by name.</p>
</div></td></tr></table></div><aside><div class="example"><p>Retrieving streams for work activities</p>
<div class="tab-content"><div class="tab-pane json active"><pre><code>{
  "parentId": "work"
}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "streams": [
    {
      "id": "chx27xquh0008ix2ufjvpjkef",
      "name": "Noble Works Co.",
      "parentId": "work",
      "children": [
        {
          "id": "chx27xquh000aix2ufzxbzubh",
          "name": "Last Be First",
          "parentId": "chx27xquh0008ix2ufjvpjkef",
          "children": [],
          "created": 1341045007.9391088,
          "createdBy": "chx27xqj60000ix2umlget6lh",
          "modified": 1341045206.0198078,
          "modifiedBy": "chx27xqj60000ix2umlget6lh"
        },
        {
          "id": "chx27xquh000bix2uijfevg4c",
          "name": "Big Tree",
          "parentId": "chx27xquh0008ix2ufjvpjkef",
          "children": [],
          "created": 1341045007.9391088,
          "createdBy": "chx27xqj60000ix2umlget6lh",
          "modified": 1341045121.383082,
          "modifiedBy": "chx27xqj60000ix2umlget6lh"
        },
        {
          "id": "chx27xquh000cix2unxvll105",
          "name": "Inner Light",
          "parentId": "chx27xquh0008ix2ufjvpjkef",
          "children": [],
          "created": 1341045007.9391088,
          "createdBy": "chx27xqj60000ix2umlget6lh",
          "modified": 1341045082.6782668,
          "modifiedBy": "chx27xqj60000ix2umlget6lh"
        }
      ],
      "created": 1341044983.1972063,
      "createdBy": "chx27xqj60000ix2umlget6lh",
      "modified": 1341045169.447918,
      "modifiedBy": "chx27xqj60000ix2umlget6lh"
    },
    {
      "id": "chx27xquh0009ix2u1pakgk19",
      "name": "Freelancing",
      "parentId": "work",
      "children": [
        {
          "id": "chx27xquh000dix2uuq1j4hpu",
          "name": "Funky Veggies",
          "parentId": "chx27xquh0009ix2u1pakgk19",
          "children": [],
          "created": 1341045003.8679636,
          "createdBy": "chx27xqj60000ix2umlget6lh",
          "modified": 1341045358.4960737,
          "modifiedBy": "chx27xqj60000ix2umlget6lh"
        },
        {
          "id": "chx27xquh000eix2uoxol6ozp",
          "name": "Jojo Lapin & sons",
          "parentId": "chx27xquh0009ix2u1pakgk19",
          "children": [],
          "created": 1341045003.8679636,
          "createdBy": "chx27xqj60000ix2umlget6lh",
          "modified": 1341045165.5951622,
          "modifiedBy": "chx27xqj60000ix2umlget6lh"
        }
      ],
      "created": 1341044983.1972063,
      "createdBy": "chx27xqj60000ix2umlget6lh",
      "modified": 1341045187.9247973,
      "modifiedBy": "chx27xqj60000ix2umlget6lh"
    }
  ]
}</code></pre></div><div class="tab-pane http"><pre><code>curl -i https://${username}.pryv.io/streams?auth=${token}&parentId=work</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 0.7.29

{
  "streams": [
    {
      "id": "chx27xquh0008ix2ufjvpjkef",
      "name": "Noble Works Co.",
      "parentId": "work",
      "children": [
        {
          "id": "chx27xquh000aix2ufzxbzubh",
          "name": "Last Be First",
          "parentId": "chx27xquh0008ix2ufjvpjkef",
          "children": [],
          "created": 1341045007.9391088,
          "createdBy": "chx27xqj60000ix2umlget6lh",
          "modified": 1341045206.0198078,
          "modifiedBy": "chx27xqj60000ix2umlget6lh"
        },
        {
          "id": "chx27xquh000bix2uijfevg4c",
          "name": "Big Tree",
          "parentId": "chx27xquh0008ix2ufjvpjkef",
          "children": [],
          "created": 1341045007.9391088,
          "createdBy": "chx27xqj60000ix2umlget6lh",
          "modified": 1341045121.383082,
          "modifiedBy": "chx27xqj60000ix2umlget6lh"
        },
        {
          "id": "chx27xquh000cix2unxvll105",
          "name": "Inner Light",
          "parentId": "chx27xquh0008ix2ufjvpjkef",
          "children": [],
          "created": 1341045007.9391088,
          "createdBy": "chx27xqj60000ix2umlget6lh",
          "modified": 1341045082.6782668,
          "modifiedBy": "chx27xqj60000ix2umlget6lh"
        }
      ],
      "created": 1341044983.1972063,
      "createdBy": "chx27xqj60000ix2umlget6lh",
      "modified": 1341045169.447918,
      "modifiedBy": "chx27xqj60000ix2umlget6lh"
    },
    {
      "id": "chx27xquh0009ix2u1pakgk19",
      "name": "Freelancing",
      "parentId": "work",
      "children": [
        {
          "id": "chx27xquh000dix2uuq1j4hpu",
          "name": "Funky Veggies",
          "parentId": "chx27xquh0009ix2u1pakgk19",
          "children": [],
          "created": 1341045003.8679636,
          "createdBy": "chx27xqj60000ix2umlget6lh",
          "modified": 1341045358.4960737,
          "modifiedBy": "chx27xqj60000ix2umlget6lh"
        },
        {
          "id": "chx27xquh000eix2uoxol6ozp",
          "name": "Jojo Lapin & sons",
          "parentId": "chx27xquh0009ix2u1pakgk19",
          "children": [],
          "created": 1341045003.8679636,
          "createdBy": "chx27xqj60000ix2umlget6lh",
          "modified": 1341045165.5951622,
          "modifiedBy": "chx27xqj60000ix2umlget6lh"
        }
      ],
      "created": 1341044983.1972063,
      "createdBy": "chx27xqj60000ix2umlget6lh",
      "modified": 1341045187.9247973,
      "modifiedBy": "chx27xqj60000ix2umlget6lh"
    }
  ]
}</code></pre></div><div class="tab-pane sockets"><pre><code>socket.emit('streams.get', {
  "parentId": "work"
}, callback);</code></pre><div class="step-marker">⬇</div><pre><code>{
  "streams": [
    {
      "id": "chx27xquh0008ix2ufjvpjkef",
      "name": "Noble Works Co.",
      "parentId": "work",
      "children": [
        {
          "id": "chx27xquh000aix2ufzxbzubh",
          "name": "Last Be First",
          "parentId": "chx27xquh0008ix2ufjvpjkef",
          "children": [],
          "created": 1341045007.9391088,
          "createdBy": "chx27xqj60000ix2umlget6lh",
          "modified": 1341045206.0198078,
          "modifiedBy": "chx27xqj60000ix2umlget6lh"
        },
        {
          "id": "chx27xquh000bix2uijfevg4c",
          "name": "Big Tree",
          "parentId": "chx27xquh0008ix2ufjvpjkef",
          "children": [],
          "created": 1341045007.9391088,
          "createdBy": "chx27xqj60000ix2umlget6lh",
          "modified": 1341045121.383082,
          "modifiedBy": "chx27xqj60000ix2umlget6lh"
        },
        {
          "id": "chx27xquh000cix2unxvll105",
          "name": "Inner Light",
          "parentId": "chx27xquh0008ix2ufjvpjkef",
          "children": [],
          "created": 1341045007.9391088,
          "createdBy": "chx27xqj60000ix2umlget6lh",
          "modified": 1341045082.6782668,
          "modifiedBy": "chx27xqj60000ix2umlget6lh"
        }
      ],
      "created": 1341044983.1972063,
      "createdBy": "chx27xqj60000ix2umlget6lh",
      "modified": 1341045169.447918,
      "modifiedBy": "chx27xqj60000ix2umlget6lh"
    },
    {
      "id": "chx27xquh0009ix2u1pakgk19",
      "name": "Freelancing",
      "parentId": "work",
      "children": [
        {
          "id": "chx27xquh000dix2uuq1j4hpu",
          "name": "Funky Veggies",
          "parentId": "chx27xquh0009ix2u1pakgk19",
          "children": [],
          "created": 1341045003.8679636,
          "createdBy": "chx27xqj60000ix2umlget6lh",
          "modified": 1341045358.4960737,
          "modifiedBy": "chx27xqj60000ix2umlget6lh"
        },
        {
          "id": "chx27xquh000eix2uoxol6ozp",
          "name": "Jojo Lapin & sons",
          "parentId": "chx27xquh0009ix2u1pakgk19",
          "children": [],
          "created": 1341045003.8679636,
          "createdBy": "chx27xqj60000ix2umlget6lh",
          "modified": 1341045165.5951622,
          "modifiedBy": "chx27xqj60000ix2umlget6lh"
        }
      ],
      "created": 1341044983.1972063,
      "createdBy": "chx27xqj60000ix2umlget6lh",
      "modified": 1341045187.9247973,
      "modifiedBy": "chx27xqj60000ix2umlget6lh"
    }
  ]
}</code></pre></div></div></div></aside></section><section id="methods-streams-streams-create" class="method"> <h3 id="create-stream">Create stream</h3>
<div class="content"><div class="meta"><span class="method-id"><span class="label">id</span><span class="label-value"><code>streams.create</code></span></span><span class="http"><span class="label">HTTP</span><span class="label-value"><code>POST /streams</code></span></span></div><div class="intro"><p>Creates a new stream.</p>
</div><h4 id="parameters">Parameters</h4>
<p>The new stream&#39;s data: see <a href="#data-structure-stream">stream</a>.</p>
<h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>201 Created</code></span></span><table class="definitions"><tr><th><code>stream</code></th><td><div class="header"><span class="type"><a href="#data-structure-stream">stream</a></span></div><div class="description"><p>The created stream.</p>
</div></td></tr></table><h4 id="specific-errors">Specific errors</h4>
<table class="definitions"><tr><th><code>item-already-exists</code></th><td><div class="header"><span class="http"><span class="label">HTTP</span><span class="label-value"><code>400</code></span></span></div><div class="description"><p>A similar stream already exists. The error&#39;s <code>data</code> contains the conflicting properties.</p>
</div></td></tr><tr><th><code>invalid-item-id</code></th><td><div class="header"><span class="http"><span class="label">HTTP</span><span class="label-value"><code>400</code></span></span></div><div class="description"><p>The specified id is invalid (e.g. it&#39;s a reserved word such as <code>null</code>).</p>
</div></td></tr></table></div><aside><div class="example"><p>Create sub-stream &#39;diastolic&#39; of &#39;heart&#39;</p>
<div class="tab-content"><div class="tab-pane json active"><pre><code>{
  "id": "diastolic",
  "name": "Diastolic pressure",
  "parentId": "heart"
}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "stream": {
    "id": "diastolic",
    "name": "Diastolic pressure",
    "parentId": "heart",
    "children": [],
    "created": 1404158870.825,
    "createdBy": "chx27xqj80001ix2uswe54bo3",
    "modified": 1404158870.825,
    "modifiedBy": "chx27xqj80001ix2uswe54bo3"
  }
}</code></pre></div><div class="tab-pane http"><pre><code>curl -i -X POST -H 'Content-Type: application/json' -d '{"id":"diastolic","name":"Diastolic pressure","parentId":"heart"}' https://${username}.pryv.io/streams?auth=${token}</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 201 Created
Content-Type: application/json; charset=utf-8
API-Version: 0.7.29

{
  "stream": {
    "id": "diastolic",
    "name": "Diastolic pressure",
    "parentId": "heart",
    "children": [],
    "created": 1404158870.825,
    "createdBy": "chx27xqj80001ix2uswe54bo3",
    "modified": 1404158870.825,
    "modifiedBy": "chx27xqj80001ix2uswe54bo3"
  }
}</code></pre></div><div class="tab-pane sockets"><pre><code>socket.emit('streams.create', {
  "id": "diastolic",
  "name": "Diastolic pressure",
  "parentId": "heart"
}, callback);</code></pre><div class="step-marker">⬇</div><pre><code>{
  "stream": {
    "id": "diastolic",
    "name": "Diastolic pressure",
    "parentId": "heart",
    "children": [],
    "created": 1404158870.825,
    "createdBy": "chx27xqj80001ix2uswe54bo3",
    "modified": 1404158870.825,
    "modifiedBy": "chx27xqj80001ix2uswe54bo3"
  }
}</code></pre></div></div></div></aside></section><section id="methods-streams-streams-update" class="method"> <h3 id="update-stream">Update stream</h3>
<div class="content"><div class="meta"><span class="method-id"><span class="label">id</span><span class="label-value"><code>streams.update</code></span></span><span class="http"><span class="label">HTTP</span><span class="label-value"><code>PUT /streams/{id}</code></span></span></div><div class="intro"><p>Modifies the stream.</p>
</div><h4 id="parameters">Parameters</h4>
<table class="definitions"><tr><th><code>id</code></th><td><div class="header"><span class="type"><a href="#data-structure-identity">identity</a></span><span class="http"><span class="label">HTTP</span><span class="label-value"><span>set in request path</span></span></span></div><div class="description"><p>The id of the stream.</p>
</div></td></tr><tr><th><code>update</code></th><td><div class="header"><span class="type">object</span><span class="http"><span class="label">HTTP</span><span class="label-value"><span>= request body</span></span></span></div><div class="description"><p>New values for the stream&#39;s fields: see <a href="#data-structure-stream">stream</a>. All fields are optional, and only modified values must be included.</p>
</div></td></tr></table><h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>200 OK</code></span></span><table class="definitions"><tr><th><code>stream</code></th><td><div class="header"><span class="type"><a href="#data-structure-stream">stream</a></span></div><div class="description"><p>The updated stream (without child streams).</p>
</div></td></tr></table><h4 id="specific-errors">Specific errors</h4>
<table class="definitions"><tr><th><code>item-already-exists</code></th><td><div class="header"><span class="http"><span class="label">HTTP</span><span class="label-value"><code>400</code></span></span></div><div class="description"><p>A similar stream already exists. The error&#39;s <code>data</code> contains the conflicting properties.</p>
</div></td></tr></table></div><aside><div class="example"><p>Renaming a stream</p>
<div class="tab-content"><div class="tab-pane json active"><pre><code>{
  "id": "sport",
  "update": {
    "name": "Slothing"
  }
}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "stream": {
    "name": "Slothing",
    "modified": 1404158871.103,
    "modifiedBy": "chx27xqj80001ix2uswe54bo3",
    "id": "sport",
    "parentId": null,
    "created": 1341044966.825,
    "createdBy": "chx27xqj60000ix2umlget6lh"
  }
}</code></pre></div><div class="tab-pane http"><pre><code>curl -i -X PUT -H 'Content-Type: application/json' -d '{"name":"Slothing"}' https://${username}.pryv.io/streams/sport?auth=${token}</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 0.7.29

{
  "stream": {
    "name": "Slothing",
    "modified": 1404158871.103,
    "modifiedBy": "chx27xqj80001ix2uswe54bo3",
    "id": "sport",
    "parentId": null,
    "created": 1341044966.825,
    "createdBy": "chx27xqj60000ix2umlget6lh"
  }
}</code></pre></div><div class="tab-pane sockets"><pre><code>socket.emit('streams.update', {
  "id": "sport",
  "update": {
    "name": "Slothing"
  }
}, callback);</code></pre><div class="step-marker">⬇</div><pre><code>{
  "stream": {
    "name": "Slothing",
    "modified": 1404158871.103,
    "modifiedBy": "chx27xqj80001ix2uswe54bo3",
    "id": "sport",
    "parentId": null,
    "created": 1341044966.825,
    "createdBy": "chx27xqj60000ix2umlget6lh"
  }
}</code></pre></div></div></div></aside></section><section id="methods-streams-streams-delete" class="method"> <h3 id="delete-stream">Delete stream</h3>
<div class="content"><div class="meta"><span class="method-id"><span class="label">id</span><span class="label-value"><code>streams.delete</code></span></span><span class="http"><span class="label">HTTP</span><span class="label-value"><code>DELETE /streams/{id}</code></span></span></div><div class="intro"><p>Trashes or deletes the specified stream, depending on its current state:</p>
<ul>
<li>If the stream is not already in the trash, it will be moved to the trash (i.e. flagged as <code>trashed</code>)</li>
<li>If the stream is already in the trash, it will be irreversibly deleted with its descendants (if any). If events exist that refer to the deleted item(s), you must indicate how to handle them with the parameter <code>mergeEventsWithParent</code>.</li>
</ul>
</div><h4 id="parameters">Parameters</h4>
<table class="definitions"><tr><th><code>id</code></th><td><div class="header"><span class="type"><a href="#data-structure-identity">identity</a></span><span class="http"><span class="label">HTTP</span><span class="label-value"><span>set in request path</span></span></span></div><div class="description"><p>The id of the stream.</p>
</div></td></tr><tr><th><code>mergeEventsWithParent</code></th><td><div class="header"><span class="type"><code>true</code>|<code>false</code></span></div><div class="description"><p>Required if actually deleting the item and if it (or any of its descendants) has linked events, ignored otherwise. If <code>true</code>, the linked events will be assigned to the parent of the deleted item; if <code>false</code>, the linked events will be deleted.</p>
</div></td></tr></table><h4 id="result-trashed">Result: trashed</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>200 OK</code></span></span><table class="definitions"><tr><th><code>stream</code></th><td><div class="header"><span class="type"><a href="#data-structure-stream">stream</a></span></div><div class="description"><p>The trashed stream.</p>
</div></td></tr></table><h4 id="result-deleted">Result: deleted</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>204 No content</code></span></span></div><aside><div class="example"><p>Trashing</p>
<div class="tab-content"><div class="tab-pane json active"><pre><code>{
  "id": "weight"
}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "event": {
    "trashed": true,
    "modified": 1404158871.103,
    "modifiedBy": "chx27xqj80001ix2uswe54bo3",
    "id": "weight",
    "name": "Weight",
    "parentId": "health",
    "children": [],
    "created": 1341044980.4430544,
    "createdBy": "chx27xqj60000ix2umlget6lh"
  }
}</code></pre></div><div class="tab-pane http"><pre><code>curl -i -X DELETE https://${username}.pryv.io/streams/weight?auth=${token}</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 0.7.29

{
  "event": {
    "trashed": true,
    "modified": 1404158871.103,
    "modifiedBy": "chx27xqj80001ix2uswe54bo3",
    "id": "weight",
    "name": "Weight",
    "parentId": "health",
    "children": [],
    "created": 1341044980.4430544,
    "createdBy": "chx27xqj60000ix2umlget6lh"
  }
}</code></pre></div><div class="tab-pane sockets"><pre><code>socket.emit('streams.delete', {
  "id": "weight"
}, callback);</code></pre><div class="step-marker">⬇</div><pre><code>{
  "event": {
    "trashed": true,
    "modified": 1404158871.103,
    "modifiedBy": "chx27xqj80001ix2uswe54bo3",
    "id": "weight",
    "name": "Weight",
    "parentId": "health",
    "children": [],
    "created": 1341044980.4430544,
    "createdBy": "chx27xqj60000ix2umlget6lh"
  }
}</code></pre></div></div></div></aside></section></section><section id="methods-accesses"><h2 id="accesses">Accesses</h2>
<div class="content"><div class="intro"><p>Methods to retrieve and manipulate <a href="#data-structure-access">accesses</a>, e.g. for sharing.
Any app can manage shared accesses whose permissions are a subset of its own. (Full access management is available to trusted apps.)</p>
</div></div><section id="methods-accesses-accesses-get" class="method"> <h3 id="get-accesses">Get accesses</h3>
<div class="content"><div class="meta"><span class="method-id"><span class="label">id</span><span class="label-value"><code>accesses.get</code></span></span><span class="http"><span class="label">HTTP</span><span class="label-value"><code>GET /accesses</code></span></span></div><div class="intro"><p>Gets manageable accesses.</p>
</div><h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>200 OK</code></span></span><table class="definitions"><tr><th><code>accesses</code></th><td><div class="header"><span class="type">array of <a href="#data-structure-access">accesses</a></span></div><div class="description"><p>All manageable accesses in the user&#39;s account, ordered by name.</p>
</div></td></tr></table></div><aside><div class="example"><div class="tab-content"><div class="tab-pane json active"><pre><code>{}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "accesses": [
    {
      "id": "chx27xqj80004ix2uwyfif5th",
      "token": "chx27xqj80005ix2uryr10e66",
      "type": "shared",
      "name": "Arthur",
      "permissions": [
        {
          "streamId": "family",
          "level": "contribute"
        }
      ],
      "created": 1404115670.42,
      "createdBy": "chx27xqj80001ix2uswe54bo3",
      "modified": 1404115670.42,
      "modifiedBy": "chx27xqj80001ix2uswe54bo3"
    }
  ]
}</code></pre></div><div class="tab-pane http"><pre><code>curl -i https://${username}.pryv.io/accesses?auth=${token}</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 0.7.29

{
  "accesses": [
    {
      "id": "chx27xqj80004ix2uwyfif5th",
      "token": "chx27xqj80005ix2uryr10e66",
      "type": "shared",
      "name": "Arthur",
      "permissions": [
        {
          "streamId": "family",
          "level": "contribute"
        }
      ],
      "created": 1404115670.42,
      "createdBy": "chx27xqj80001ix2uswe54bo3",
      "modified": 1404115670.42,
      "modifiedBy": "chx27xqj80001ix2uswe54bo3"
    }
  ]
}</code></pre></div><div class="tab-pane sockets"><pre><code>socket.emit('accesses.get', {}, callback);</code></pre><div class="step-marker">⬇</div><pre><code>{
  "accesses": [
    {
      "id": "chx27xqj80004ix2uwyfif5th",
      "token": "chx27xqj80005ix2uryr10e66",
      "type": "shared",
      "name": "Arthur",
      "permissions": [
        {
          "streamId": "family",
          "level": "contribute"
        }
      ],
      "created": 1404115670.42,
      "createdBy": "chx27xqj80001ix2uswe54bo3",
      "modified": 1404115670.42,
      "modifiedBy": "chx27xqj80001ix2uswe54bo3"
    }
  ]
}</code></pre></div></div></div></aside></section><section id="methods-accesses-accesses-create" class="method"> <h3 id="create-access">Create access</h3>
<div class="content"><div class="meta"><span class="method-id"><span class="label">id</span><span class="label-value"><code>accesses.create</code></span></span><span class="http"><span class="label">HTTP</span><span class="label-value"><code>POST /accesses</code></span></span></div><div class="intro"><p>Creates a new access. You can only create accesses whose permissions are a subset of those granted to your own access token.</p>
</div><h4 id="parameters">Parameters</h4>
<p>An object with the new access&#39;s data: see <a href="#data-structure-access">access</a>.</p>
<h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>201 Created</code></span></span><table class="definitions"><tr><th><code>access</code></th><td><div class="header"><span class="type"><a href="#data-structure-access">access</a></span></div><div class="description"><p>The created access.</p>
</div></td></tr></table><h4 id="specific-errors">Specific errors</h4>
<table class="definitions"><tr><th><code>invalid-item-id</code></th><td><div class="header"><span class="http"><span class="label">HTTP</span><span class="label-value"><code>400</code></span></span></div><div class="description"><p>The specified token is invalid (e.g. it&#39;s a reserved word such as <code>null</code>).</p>
</div></td></tr></table></div><aside><div class="example"><div class="tab-content"><div class="tab-pane json active"><pre><code>{
  "name": "For colleagues",
  "permissions": [
    {
      "streamId": "work",
      "level": "read"
    }
  ]
}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "access": {
    "id": "chx27xqj80006ix2un8eh2uhm",
    "token": "chx27xqj80007ix2url5w82im",
    "type": "shared",
    "name": "For colleagues",
    "permissions": [
      {
        "streamId": "work",
        "level": "read"
      }
    ],
    "created": 1404158870.42,
    "createdBy": "chx27xqj80001ix2uswe54bo3",
    "modified": 1404158870.42,
    "modifiedBy": "chx27xqj80001ix2uswe54bo3"
  }
}</code></pre></div><div class="tab-pane http"><pre><code>curl -i -X POST -H 'Content-Type: application/json' -d '{"name":"For colleagues","permissions":[{"streamId":"work","level":"read"}]}' https://${username}.pryv.io/accesses?auth=${token}</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 201 Created
Content-Type: application/json; charset=utf-8
API-Version: 0.7.29

{
  "access": {
    "id": "chx27xqj80006ix2un8eh2uhm",
    "token": "chx27xqj80007ix2url5w82im",
    "type": "shared",
    "name": "For colleagues",
    "permissions": [
      {
        "streamId": "work",
        "level": "read"
      }
    ],
    "created": 1404158870.42,
    "createdBy": "chx27xqj80001ix2uswe54bo3",
    "modified": 1404158870.42,
    "modifiedBy": "chx27xqj80001ix2uswe54bo3"
  }
}</code></pre></div><div class="tab-pane sockets"><pre><code>socket.emit('accesses.create', {
  "name": "For colleagues",
  "permissions": [
    {
      "streamId": "work",
      "level": "read"
    }
  ]
}, callback);</code></pre><div class="step-marker">⬇</div><pre><code>{
  "access": {
    "id": "chx27xqj80006ix2un8eh2uhm",
    "token": "chx27xqj80007ix2url5w82im",
    "type": "shared",
    "name": "For colleagues",
    "permissions": [
      {
        "streamId": "work",
        "level": "read"
      }
    ],
    "created": 1404158870.42,
    "createdBy": "chx27xqj80001ix2uswe54bo3",
    "modified": 1404158870.42,
    "modifiedBy": "chx27xqj80001ix2uswe54bo3"
  }
}</code></pre></div></div></div></aside></section><section id="methods-accesses-accesses-update" class="method"> <h3 id="update-access">Update access</h3>
<div class="content"><div class="meta"><span class="method-id"><span class="label">id</span><span class="label-value"><code>accesses.update</code></span></span><span class="http"><span class="label">HTTP</span><span class="label-value"><code>PUT /accesses/{id}</code></span></span></div><div class="intro"><p>Modifies the specified access. You can only modify accesses whose permissions are a subset of those granted to your own access token.</p>
</div><h4 id="parameters">Parameters</h4>
<table class="definitions"><tr><th><code>id</code></th><td><div class="header"><span class="type"><a href="#data-structure-identity">identity</a></span><span class="http"><span class="label">HTTP</span><span class="label-value"><span>set in request path</span></span></span></div><div class="description"><p>The id of the access.</p>
</div></td></tr><tr><th><code>update</code></th><td><div class="header"><span class="type">object</span><span class="http"><span class="label">HTTP</span><span class="label-value"><span>= request body</span></span></span></div><div class="description"><p>New values for the access&#39;s fields: see <a href="#data-structure-access">access</a>. All fields are optional, and only modified values must be included.</p>
</div></td></tr></table><h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>200 OK</code></span></span><table class="definitions"><tr><th><code>access</code></th><td><div class="header"><span class="type"><a href="#data-structure-access">access</a></span></div><div class="description"><p>The updated access.</p>
</div></td></tr></table></div><aside><div class="example"><p>Adjusting permission level</p>
<div class="tab-content"><div class="tab-pane json active"><pre><code>{
  "id": "chx27xqj80006ix2un8eh2uhm",
  "update": {
    "permissions": [
      {
        "level": "contribute",
        "streamId": "work"
      }
    ]
  }
}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "access": {
    "permissions": [
      {
        "level": "contribute",
        "streamId": "work"
      }
    ],
    "modified": 1404158871.103,
    "modifiedBy": "chx27xqj80001ix2uswe54bo3",
    "id": "chx27xqj80006ix2un8eh2uhm",
    "token": "chx27xqj80007ix2url5w82im",
    "type": "shared",
    "name": "For colleagues",
    "created": 1404158870.42,
    "createdBy": "chx27xqj80001ix2uswe54bo3"
  }
}</code></pre></div><div class="tab-pane http"><pre><code>curl -i -X PUT -H 'Content-Type: application/json' -d '{"permissions":[{"level":"contribute","streamId":"work"}]}' https://${username}.pryv.io/accesses/chx27xqj80006ix2un8eh2uhm?auth=${token}</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 0.7.29

{
  "access": {
    "permissions": [
      {
        "level": "contribute",
        "streamId": "work"
      }
    ],
    "modified": 1404158871.103,
    "modifiedBy": "chx27xqj80001ix2uswe54bo3",
    "id": "chx27xqj80006ix2un8eh2uhm",
    "token": "chx27xqj80007ix2url5w82im",
    "type": "shared",
    "name": "For colleagues",
    "created": 1404158870.42,
    "createdBy": "chx27xqj80001ix2uswe54bo3"
  }
}</code></pre></div><div class="tab-pane sockets"><pre><code>socket.emit('accesses.update', {
  "id": "chx27xqj80006ix2un8eh2uhm",
  "update": {
    "permissions": [
      {
        "level": "contribute",
        "streamId": "work"
      }
    ]
  }
}, callback);</code></pre><div class="step-marker">⬇</div><pre><code>{
  "access": {
    "permissions": [
      {
        "level": "contribute",
        "streamId": "work"
      }
    ],
    "modified": 1404158871.103,
    "modifiedBy": "chx27xqj80001ix2uswe54bo3",
    "id": "chx27xqj80006ix2un8eh2uhm",
    "token": "chx27xqj80007ix2url5w82im",
    "type": "shared",
    "name": "For colleagues",
    "created": 1404158870.42,
    "createdBy": "chx27xqj80001ix2uswe54bo3"
  }
}</code></pre></div></div></div></aside></section><section id="methods-accesses-accesses-delete" class="method"> <h3 id="delete-access">Delete access</h3>
<div class="content"><div class="meta"><span class="method-id"><span class="label">id</span><span class="label-value"><code>accesses.delete</code></span></span><span class="http"><span class="label">HTTP</span><span class="label-value"><code>DELETE /accesses/{id}</code></span></span></div><div class="intro"><p>Deletes the specified access. You can only delete accesses whose permissions are a subset of those granted to your own access token.</p>
</div><h4 id="parameters">Parameters</h4>
<table class="definitions"><tr><th><code>id</code></th><td><div class="header"><span class="type"><a href="#data-structure-identity">identity</a></span><span class="http"><span class="label">HTTP</span><span class="label-value"><span>set in request path</span></span></span></div><div class="description"><p>The id of the access.</p>
</div></td></tr></table><h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>204 No content</code></span></span></div><aside><div class="example"><div class="tab-content"><div class="tab-pane json active"><pre><code>{
  "id": "chx27xqj80004ix2uwyfif5th"
}</code></pre><div class="step-marker">⬇</div><pre><code>{}</code></pre></div><div class="tab-pane http"><pre><code>curl -i -X DELETE https://${username}.pryv.io/accesses/chx27xqj80004ix2uwyfif5th?auth=${token}</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 204 No content
Content-Type: application/json; charset=utf-8
API-Version: 0.7.29

{}</code></pre></div><div class="tab-pane sockets"><pre><code>socket.emit('accesses.delete', {
  "id": "chx27xqj80004ix2uwyfif5th"
}, callback);</code></pre><div class="step-marker">⬇</div><pre><code>{}</code></pre></div></div></div></aside></section><section id="methods-accesses-accesses-checkApp" class="method trusted-only"> <h3 id="check-app-authorization">Check app authorization</h3>
<div class="content"><div class="meta"><span class="method-id"><span class="label">id</span><span class="label-value"><code>accesses.checkApp</code></span></span><span class="http"><span class="label">HTTP</span><span class="label-value"><code>POST /accesses/check-app</code></span></span></div><div class="intro"><p>For the app authorization process. Checks if the app requesting authorization already has access with the same permissions (and on the same device, if applicable), and returns details of the requested permissions&#39; streams (for display) if not.</p>
</div><h4 id="parameters">Parameters</h4>
<table class="definitions"><tr><th><code>requestingAppId</code></th><td><div class="header"><span class="type">string</span></div><div class="description"><p>The id of the app requesting authorization.</p>
</div></td></tr><tr><th><code>deviceName</code></th><td><div class="header"><span class="type">string</span><span class="label label-default optional">optional</span></div><div class="description"><p>The name of the device running the app requesting authorization, if applicable.</p>
</div></td></tr><tr><th><code>requestedPermissions</code></th><td><div class="header"><span class="type">array of permission request objects</span></div><div class="description"><p>An array of permission request objects, which are identical to stream permission objects of <a href="#data-structure-access">accesses</a> except that each stream permission object must have a <code>defaultName</code> property specifying the name the stream should be created with later if missing.</p>
</div></td></tr></table><h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>200 OK</code></span></span><table class="definitions"><tr><th><code>checkedPermissions</code></th><td><div class="header"><span class="type">array of permission request objects</span></div><div class="description"><p>Set if no matching access already exists.
A updated copy of the <code>requestedPermissions</code> parameter, with the <code>defaultName</code> property of stream permissions replaced by <code>name</code> for each existing stream (set to the actual name of the item). (For missing streams the <code>defaultName</code> property is left untouched.) If streams already exist with the same name but a different <code>id</code>, <code>defaultName</code> is updated with a valid alternative proposal (in such cases the result also has an <code>error</code> property to signal the issue).</p>
</div></td></tr><tr><th><code>mismatchingAccess</code></th><td><div class="header"><span class="type"><a href="#data-structure-access">access</a></span></div><div class="description"><p>Set if an access already exists for the requesting app, but with different permissions than those requested.</p>
</div></td></tr><tr><th><code>matchingAccess</code></th><td><div class="header"><span class="type"><a href="#data-structure-access">access</a></span></div><div class="description"><p>Set if an access already exists for the requesting app with matching permissions. The existing <a href="#data-structure-access">access</a>.</p>
</div></td></tr></table></div><aside></aside></section></section><section id="methods-followed-slices" class=" trusted-only"><h2 id="followed-slices">Followed slices</h2>
<div class="content"><div class="intro"><p>Methods to retrieve and manipulate <a href="#data-structure-followed-slice">followed slices</a>.</p>
</div></div><section id="methods-followed-slices-followedSlices-get" class="method"> <h3 id="get-followed-slices">Get followed slices</h3>
<div class="content"><div class="meta"><span class="method-id"><span class="label">id</span><span class="label-value"><code>followedSlices.get</code></span></span><span class="http"><span class="label">HTTP</span><span class="label-value"><code>GET /followed-slices</code></span></span></div><div class="intro"><p>Gets followed slices.</p>
</div><h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>200 OK</code></span></span><table class="definitions"><tr><th><code>followedSlices</code></th><td><div class="header"><span class="type">array of <a href="#data-structure-followed-slice">followed slices</a></span></div><div class="description"><p>All followed slices in the user&#39;s account, ordered by name.</p>
</div></td></tr></table></div><aside></aside></section><section id="methods-followed-slices-followedSlices-create" class="method"> <h3 id="create-followed-slice">Create followed slice</h3>
<div class="content"><div class="meta"><span class="method-id"><span class="label">id</span><span class="label-value"><code>followedSlices.create</code></span></span><span class="http"><span class="label">HTTP</span><span class="label-value"><code>POST /followed-slices</code></span></span></div><div class="intro"><p>Creates a new followed slice.</p>
</div><h4 id="parameters">Parameters</h4>
<p>An object with the new followed slice&#39;s data: see <a href="#data-structure-followed-slice">followed slice</a>.</p>
<h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>201 Created</code></span></span><table class="definitions"><tr><th><code>followedSlice</code></th><td><div class="header"><span class="type"><a href="#data-structure-followed-slice">followed slice</a></span></div><div class="description"><p>The created followed slice.</p>
</div></td></tr></table></div><aside></aside></section><section id="methods-followed-slices-followedSlices-update" class="method"> <h3 id="update-followed-slice">Update followed slice</h3>
<div class="content"><div class="meta"><span class="method-id"><span class="label">id</span><span class="label-value"><code>followedSlices.update</code></span></span><span class="http"><span class="label">HTTP</span><span class="label-value"><code>PUT /followed-slices/{id}</code></span></span></div><div class="intro"><p>Modifies the specified followed slice.</p>
</div><h4 id="parameters">Parameters</h4>
<table class="definitions"><tr><th><code>id</code></th><td><div class="header"><span class="type"><a href="#data-structure-identity">identity</a></span><span class="http"><span class="label">HTTP</span><span class="label-value"><span>set in request path</span></span></span></div><div class="description"><p>The id of the followed slice.</p>
</div></td></tr><tr><th><code>update</code></th><td><div class="header"><span class="type">object</span><span class="http"><span class="label">HTTP</span><span class="label-value"><span>= request body</span></span></span></div><div class="description"><p>New values for the followed slice&#39;s fields: see <a href="#data-structure-followed-slice">followed slice</a>. All fields are optional, and only modified values must be included.</p>
</div></td></tr></table><h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>200 OK</code></span></span><table class="definitions"><tr><th><code>followedSlice</code></th><td><div class="header"><span class="type"><a href="#data-structure-followed-slice">followed slice</a></span></div><div class="description"><p>The updated followed slice.</p>
</div></td></tr></table></div><aside></aside></section><section id="methods-followed-slices-followedSlices-delete" class="method"> <h3 id="delete-followed-slice">Delete followed slice</h3>
<div class="content"><div class="meta"><span class="method-id"><span class="label">id</span><span class="label-value"><code>followedSlices.delete</code></span></span><span class="http"><span class="label">HTTP</span><span class="label-value"><code>DELETE /followed-slices/{id}</code></span></span></div><div class="intro"><p>Deletes the specified followed slice.</p>
</div><h4 id="parameters">Parameters</h4>
<table class="definitions"><tr><th><code>id</code></th><td><div class="header"><span class="type"><a href="#data-structure-identity">identity</a></span><span class="http"><span class="label">HTTP</span><span class="label-value"><span>set in request path</span></span></span></div><div class="description"><p>The id of the followed slice.</p>
</div></td></tr></table><h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>204 No content</code></span></span></div><aside></aside></section></section><section id="methods-profile"><h2 id="profile-sets">Profile sets</h2>
<div class="content"><div class="intro"><p>Methods to read and write profile sets. Profile sets are plain key-value stores of user-level settings.</p>
</div></div><section id="methods-profile-profile-getPublic" class="method"> <h3 id="get-public-user-profile">Get public user profile</h3>
<div class="content"><div class="meta"><span class="method-id"><span class="label">id</span><span class="label-value"><code>profile.getPublic</code></span></span><span class="http"><span class="label">HTTP</span><span class="label-value"><code>GET /profile/public</code></span></span></div><div class="intro"><p>Gets the user&#39;s public profile set, which contains the information the user makes publicly available (e.g. avatar image). Available to all accesses.</p>
</div><h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>200 OK</code></span></span><table class="definitions"><tr><th><code>profile</code></th><td><div class="header"><span class="type">object</span></div><div class="description"><p>The user&#39;s current public profile set.</p>
</div></td></tr></table></div><aside><div class="example"><div class="tab-content"><div class="tab-pane json active"><pre><code>{}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "profile": {
    "avatarURL": "http://www.gravatar.com/avatar/1beb9d80bf842c1d90ebdab356908538"
  }
}</code></pre></div><div class="tab-pane http"><pre><code>curl -i https://${username}.pryv.io/profile/public?auth=${token}</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 0.7.29

{
  "profile": {
    "avatarURL": "http://www.gravatar.com/avatar/1beb9d80bf842c1d90ebdab356908538"
  }
}</code></pre></div><div class="tab-pane sockets"><pre><code>socket.emit('profile.getPublic', {}, callback);</code></pre><div class="step-marker">⬇</div><pre><code>{
  "profile": {
    "avatarURL": "http://www.gravatar.com/avatar/1beb9d80bf842c1d90ebdab356908538"
  }
}</code></pre></div></div></div></aside></section><section id="methods-profile-profile-getApp" class="method"> <h3 id="get-app-profile">Get app profile</h3>
<div class="content"><div class="meta"><span class="method-id"><span class="label">id</span><span class="label-value"><code>profile.getApp</code></span></span><span class="http"><span class="label">HTTP</span><span class="label-value"><code>GET /profile/app</code></span></span></div><div class="intro"><p>Gets the app&#39;s dedicated user profile set, which contains app-level settings for the user. Available to app accesses.</p>
</div><h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>200 OK</code></span></span><table class="definitions"><tr><th><code>profile</code></th><td><div class="header"><span class="type">object</span></div><div class="description"><p>The app&#39;s current profile set. (Empty if the app never defined any setting.)</p>
</div></td></tr></table></div><aside><div class="example"><div class="tab-content"><div class="tab-pane json active"><pre><code>{}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "profile": {
    "setting1": "value",
    "setting2": true,
    "setting3": 123
  }
}</code></pre></div><div class="tab-pane http"><pre><code>curl -i https://${username}.pryv.io/profile/app?auth=${token}</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 0.7.29

{
  "profile": {
    "setting1": "value",
    "setting2": true,
    "setting3": 123
  }
}</code></pre></div><div class="tab-pane sockets"><pre><code>socket.emit('profile.getApp', {}, callback);</code></pre><div class="step-marker">⬇</div><pre><code>{
  "profile": {
    "setting1": "value",
    "setting2": true,
    "setting3": 123
  }
}</code></pre></div></div></div></aside></section><section id="methods-profile-profile-updateApp" class="method"> <h3 id="update-app-profile">Update app profile</h3>
<div class="content"><div class="meta"><span class="method-id"><span class="label">id</span><span class="label-value"><code>profile.updateApp</code></span></span><span class="http"><span class="label">HTTP</span><span class="label-value"><code>PUT /profile/app</code></span></span></div><div class="intro"><p>Adds, updates or delete app profile keys.</p>
<ul>
<li>To add or update a key, just set its value</li>
<li>To delete a key, set its value to <code>null</code></li>
</ul>
<p>Existing keys not included in the update are left untouched.</p>
</div><h4 id="parameters">Parameters</h4>
<table class="definitions"><tr><th><code>update</code></th><td><div class="header"><span class="type">object</span><span class="http"><span class="label">HTTP</span><span class="label-value"><span>= request body</span></span></span></div><div class="description"><p>An object with the desired key changes (see above).</p>
</div></td></tr></table><h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>200 OK</code></span></span><table class="definitions"><tr><th><code>profile</code></th><td><div class="header"><span class="type">object</span></div><div class="description"><p>The app&#39;s updated profile set.</p>
</div></td></tr></table></div><aside><div class="example"><div class="tab-content"><div class="tab-pane json active"><pre><code>{
  "setting1": "new value",
  "setting2": null
}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "profile": {
    "setting1": "new value",
    "setting3": 123
  }
}</code></pre></div><div class="tab-pane http"><pre><code>curl -i -X PUT -H 'Content-Type: application/json' -d '{"setting1":"new value","setting2":null}' https://${username}.pryv.io/profile/app?auth=${token}</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 0.7.29

{
  "profile": {
    "setting1": "new value",
    "setting3": 123
  }
}</code></pre></div><div class="tab-pane sockets"><pre><code>socket.emit('profile.updateApp', {
  "setting1": "new value",
  "setting2": null
}, callback);</code></pre><div class="step-marker">⬇</div><pre><code>{
  "profile": {
    "setting1": "new value",
    "setting3": 123
  }
}</code></pre></div></div></div></aside></section><section id="methods-profile-profile-get" class="method trusted-only"> <h3 id="get-profile">Get profile</h3>
<div class="content"><div class="meta"><span class="method-id"><span class="label">id</span><span class="label-value"><code>profile.get</code></span></span><span class="http"><span class="label">HTTP</span><span class="label-value"><code>GET /profile/{id}</code></span></span></div><div class="intro"><p>Gets the specified user profile set.</p>
</div><h4 id="parameters">Parameters</h4>
<table class="definitions"><tr><th><code>id</code></th><td><div class="header"><span class="type"><a href="#data-structure-identity">identity</a></span><span class="http"><span class="label">HTTP</span><span class="label-value"><span>set in request path</span></span></span></div><div class="description"><p>The id of the profile set.</p>
</div></td></tr></table><h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>200 OK</code></span></span><table class="definitions"><tr><th><code>profile</code></th><td><div class="header"><span class="type">object</span></div><div class="description"><p>The profile set.</p>
</div></td></tr></table></div><aside></aside></section><section id="methods-profile-profile-update" class="method trusted-only"> <h3 id="update-profile">Update profile</h3>
<div class="content"><div class="meta"><span class="method-id"><span class="label">id</span><span class="label-value"><code>profile.update</code></span></span><span class="http"><span class="label">HTTP</span><span class="label-value"><code>PUT /profile/{id}</code></span></span></div><div class="intro"><p>Adds, updates or delete profile keys.</p>
<ul>
<li>To add or update a key, just set its value</li>
<li>To delete a key, set its value to <code>null</code></li>
</ul>
<p>Existing keys not included in the update are left untouched.</p>
</div><h4 id="parameters">Parameters</h4>
<table class="definitions"><tr><th><code>id</code></th><td><div class="header"><span class="type"><a href="#data-structure-identity">identity</a></span><span class="http"><span class="label">HTTP</span><span class="label-value"><span>set in request path</span></span></span></div><div class="description"><p>The id of the profile set.</p>
</div></td></tr><tr><th><code>update</code></th><td><div class="header"><span class="type">object</span><span class="http"><span class="label">HTTP</span><span class="label-value"><span>= request body</span></span></span></div><div class="description"><p>An object with the desired key changes (see above).</p>
</div></td></tr></table><h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>200 OK</code></span></span><table class="definitions"><tr><th><code>profile</code></th><td><div class="header"><span class="type">object</span></div><div class="description"><p>The updated profile set.</p>
</div></td></tr></table></div><aside></aside></section></section><section id="methods-account" class=" trusted-only"><h2 id="account-management">Account management</h2>
<div class="content"><div class="intro"><p>Methods to manage the user&#39;s account.</p>
</div></div><section id="methods-account-account-get" class="method"> <h3 id="get-account-information">Get account information</h3>
<div class="content"><div class="meta"><span class="method-id"><span class="label">id</span><span class="label-value"><code>account.get</code></span></span><span class="http"><span class="label">HTTP</span><span class="label-value"><code>GET /account</code></span></span></div><div class="intro"><p>Retrieves the user&#39;s account information.</p>
</div><h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>200 OK</code></span></span><table class="definitions"><tr><th><code>account</code></th><td><div class="header"><span class="type"><a href="#data-structure-account">account information</a></span></div><div class="description"><p>The user&#39;s account information.</p>
</div></td></tr></table></div><aside><div class="example"><div class="tab-content"><div class="tab-pane json active"><pre><code>{}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "account": {
    "username": "chuangzi",
    "email": "chuangzi@dao.info",
    "language": "zh"
  }
}</code></pre></div><div class="tab-pane http"><pre><code>curl -i https://${username}.pryv.io/account?auth=${token}</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 0.7.29

{
  "account": {
    "username": "chuangzi",
    "email": "chuangzi@dao.info",
    "language": "zh"
  }
}</code></pre></div><div class="tab-pane sockets"><pre><code>socket.emit('account.get', {}, callback);</code></pre><div class="step-marker">⬇</div><pre><code>{
  "account": {
    "username": "chuangzi",
    "email": "chuangzi@dao.info",
    "language": "zh"
  }
}</code></pre></div></div></div></aside></section><section id="methods-account-account-update" class="method"> <h3 id="update-account-information">Update account information</h3>
<div class="content"><div class="meta"><span class="method-id"><span class="label">id</span><span class="label-value"><code>account.update</code></span></span><span class="http"><span class="label">HTTP</span><span class="label-value"><code>PUT /account</code></span></span></div><div class="intro"><p>Modifies the user&#39;s account information.</p>
</div><h4 id="parameters">Parameters</h4>
<table class="definitions"><tr><th><code>update</code></th><td><div class="header"><span class="type">object</span><span class="http"><span class="label">HTTP</span><span class="label-value"><span>= request body</span></span></span></div><div class="description"><p>New values for the account information&#39;s fields: see <a href="#data-structure-account">account information</a>. All fields are optional, and only modified values must be included.</p>
</div></td></tr></table><h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>200 OK</code></span></span><table class="definitions"><tr><th><code>account</code></th><td><div class="header"><span class="type"><a href="#data-structure-account">account information</a></span></div><div class="description"><p>The updated account information.</p>
</div></td></tr></table></div><aside></aside></section><section id="methods-account-account-changePassword" class="method"> <h3 id="change-password">Change password</h3>
<div class="content"><div class="meta"><span class="method-id"><span class="label">id</span><span class="label-value"><code>account.changePassword</code></span></span><span class="http"><span class="label">HTTP</span><span class="label-value"><code>POST /account/change-password</code></span></span></div><div class="intro"><p>Modifies the user&#39;s password.</p>
</div><h4 id="parameters">Parameters</h4>
<table class="definitions"><tr><th><code>oldPassword</code></th><td><div class="header"><span class="type">string</span></div><div class="description"><p>The current password.</p>
</div></td></tr><tr><th><code>newPassword</code></th><td><div class="header"><span class="type">string</span></div><div class="description"><p>The new password.</p>
</div></td></tr></table><h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>200 OK</code></span></span><h4 id="specific-errors">Specific errors</h4>
<table class="definitions"><tr><th><code>invalid-operation</code></th><td><div class="header"><span class="http"><span class="label">HTTP</span><span class="label-value"><code>400</code></span></span></div><div class="description"><p>The given password does not match.</p>
</div></td></tr></table></div><aside><div class="example"><div class="tab-content"><div class="tab-pane json active"><pre><code>{
  "oldPassword": "B|_|tt3rfly!",
  "newPassword": "//\\_.:o0o:._//\\"
}</code></pre><div class="step-marker">⬇</div><pre><code>{}</code></pre></div><div class="tab-pane http"><pre><code>curl -i -X POST -H 'Content-Type: application/json' -d '{"oldPassword":"B|_|tt3rfly!","newPassword":"//\\_.:o0o:._//\\"}' https://${username}.pryv.io/account/change-password?auth=${token}</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 0.7.29

{}</code></pre></div><div class="tab-pane sockets"><pre><code>socket.emit('account.changePassword', {
  "oldPassword": "B|_|tt3rfly!",
  "newPassword": "//\\_.:o0o:._//\\"
}, callback);</code></pre><div class="step-marker">⬇</div><pre><code>{}</code></pre></div></div></div></aside></section><section id="methods-account-account-requestPasswordReset" class="method"> <h3 id="request-password-reset">Request password reset</h3>
<div class="content"><div class="meta"><span class="method-id"><span class="label">id</span><span class="label-value"><code>account.requestPasswordReset</code></span></span><span class="http"><span class="label">HTTP</span><span class="label-value"><code>POST /account/request-password-reset</code></span></span></div><div class="intro"><p>Requests the resetting of the user&#39;s password. An e-mail containing an expiring reset token (e.g. in a link) will be sent to the user. This method does not expect an <a href="#basics-authentication">auth parameter</a>.</p>
</div><h4 id="parameters">Parameters</h4>
<table class="definitions"><tr><th><code>appId</code></th><td><div class="header"><span class="type">string</span></div><div class="description"><p>Your app&#39;s unique identifier.</p>
</div></td></tr></table><h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>200 OK</code></span></span></div><aside><div class="example"><div class="tab-content"><div class="tab-pane json active"><pre><code>{
  "appId": "my-app-id"
}</code></pre><div class="step-marker">⬇</div><pre><code>{}</code></pre></div><div class="tab-pane http"><pre><code>curl -i -X POST -H 'Content-Type: application/json' -d '{"appId":"my-app-id"}' https://${username}.pryv.io/account/request-password-reset?auth=${token}</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 0.7.29

{}</code></pre></div><div class="tab-pane sockets"><pre><code>socket.emit('account.requestPasswordReset', {
  "appId": "my-app-id"
}, callback);</code></pre><div class="step-marker">⬇</div><pre><code>{}</code></pre></div></div></div></aside></section><section id="methods-account-account-resetPassword" class="method"> <h3 id="reset-password">Reset password</h3>
<div class="content"><div class="meta"><span class="method-id"><span class="label">id</span><span class="label-value"><code>account.resetPassword</code></span></span><span class="http"><span class="label">HTTP</span><span class="label-value"><code>POST /account/reset-password</code></span></span></div><div class="intro"><p>Resets the user&#39;s password, authenticating the request with the given reset token (see &quot;request password reset&quot; above). This method does not expect an <a href="#basics-authentication">auth parameter</a>.</p>
</div><h4 id="parameters">Parameters</h4>
<table class="definitions"><tr><th><code>resetToken</code></th><td><div class="header"><span class="type">string</span></div><div class="description"><p>The expiring reset token that was sent to the user after requesting the password reset.</p>
</div></td></tr><tr><th><code>newPassword</code></th><td><div class="header"><span class="type">string</span></div><div class="description"><p>The new password.</p>
</div></td></tr><tr><th><code>appId</code></th><td><div class="header"><span class="type">string</span></div><div class="description"><p>Your app&#39;s unique identifier.</p>
</div></td></tr></table><h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>200 OK</code></span></span></div><aside><div class="example"><div class="tab-content"><div class="tab-pane json active"><pre><code>{
  "resetToken": "chtplghfp0000hqjx814u6393",
  "newPassword": "Dr0ws$4p",
  "appId": "my-app-id"
}</code></pre><div class="step-marker">⬇</div><pre><code>{}</code></pre></div><div class="tab-pane http"><pre><code>curl -i -X POST -H 'Content-Type: application/json' -d '{"resetToken":"chtplghfp0000hqjx814u6393","newPassword":"Dr0ws$4p","appId":"my-app-id"}' https://${username}.pryv.io/account/reset-password?auth=${token}</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 0.7.29

{}</code></pre></div><div class="tab-pane sockets"><pre><code>socket.emit('account.resetPassword', {
  "resetToken": "chtplghfp0000hqjx814u6393",
  "newPassword": "Dr0ws$4p",
  "appId": "my-app-id"
}, callback);</code></pre><div class="step-marker">⬇</div><pre><code>{}</code></pre></div></div></div></aside></section></section><section id="methods-utils"><h2 id="utils">Utils</h2>
<div class="content"><div class="intro"><p>Utility methods that don&#39;t pertain to a particular resource type.</p>
</div></div><section id="methods-utils-getAccessInfo" class="method"> <h3 id="get-current-access-info">Get current access info</h3>
<div class="content"><div class="meta"><span class="method-id"><span class="label">id</span><span class="label-value"><code>getAccessInfo</code></span></span><span class="http"><span class="label">HTTP</span><span class="label-value"><code>GET /access-info</code></span></span></div><div class="intro"><p>Retrieves the name, type and permissions of the access in use.</p>
</div><h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>200 OK</code></span></span><table class="definitions"><tr><th><code>name</code></th><td><div class="header"><span class="type">string</span></div><div class="description"><p>The access&#39; name.</p>
</div></td></tr><tr><th><code>type</code></th><td><div class="header"><span class="type"><a href="#data-structure-access">access</a>.type</span></div><div class="description"><p>The access&#39; type.</p>
</div></td></tr><tr><th><code>permissions</code></th><td><div class="header"><span class="type"><a href="#data-structure-access">access</a>.permissions</span></div><div class="description"><p>The access&#39; permissions.</p>
</div></td></tr></table></div><aside><div class="example"><div class="tab-content"><div class="tab-pane json active"><pre><code>{}</code></pre><div class="step-marker">⬇</div><pre><code>{
  "name": "my-app-id",
  "type": "app",
  "permissions": [
    {
      "streamId": "health",
      "level": "contribute"
    }
  ]
}</code></pre></div><div class="tab-pane http"><pre><code>curl -i https://${username}.pryv.io/access-info?auth=${token}</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 0.7.29

{
  "name": "my-app-id",
  "type": "app",
  "permissions": [
    {
      "streamId": "health",
      "level": "contribute"
    }
  ]
}</code></pre></div><div class="tab-pane sockets"><pre><code>socket.emit('getAccessInfo', {}, callback);</code></pre><div class="step-marker">⬇</div><pre><code>{
  "name": "my-app-id",
  "type": "app",
  "permissions": [
    {
      "streamId": "health",
      "level": "contribute"
    }
  ]
}</code></pre></div></div></div></aside></section><section id="methods-utils-callBatch" class="method"> <h3 id="call-batch">Call batch</h3>
<div class="content"><div class="meta"><span class="method-id"><span class="label">id</span><span class="label-value"><code>callBatch</code></span></span><span class="http"><span class="label">HTTP</span><span class="label-value"><code>POST /</code></span></span></div><div class="intro"><p>Sends a batch of API methods calls in one go (e.g. for to syncing offline changes when resuming connectivity).</p>
</div><h4 id="parameters">Parameters</h4>
<p>Array of method call objects, each defined as follows:</p>
<table class="definitions"><tr><th><code>method</code></th><td><div class="header"><span class="type">string</span></div><div class="description"><p>The method id.</p>
</div></td></tr><tr><th><code>params</code></th><td><div class="header"><span class="type">object or array</span></div><div class="description"><p>The call parameters as required by the method.</p>
</div></td></tr></table><h4 id="result">Result</h4>
<span class="http"><span class="label">HTTP</span><span class="label-value"><code>200 OK</code></span></span><table class="definitions"><tr><th><code>results</code></th><td><div class="header"><span class="type">array of call results</span></div><div class="description"><p>The results of each method call, in order.</p>
</div></td></tr></table></div><aside><div class="example"><p>Sync some health metrics</p>
<div class="tab-content"><div class="tab-pane json active"><pre><code>[
  {
    "method": "events.create",
    "params": {
      "time": 1385046854.282,
      "streamId": "heart",
      "type": "frequency/bpm",
      "content": 90
    }
  },
  {
    "method": "events.create",
    "params": {
      "time": 1385046854.282,
      "streamId": "systolic",
      "type": "pressure/mmhg",
      "content": 120
    }
  },
  {
    "method": "events.create",
    "params": {
      "time": 1385046854.282,
      "streamId": "diastolic",
      "type": "pressure/mmhg",
      "content": 80
    }
  }
]</code></pre><div class="step-marker">⬇</div><pre><code>{
  "results": [
    {
      "event": {
        "id": "chx27xqui000nix2u3o8eay0g",
        "time": 1385046854.282,
        "streamId": "heart",
        "tags": [],
        "type": "frequency/bpm",
        "content": 90,
        "created": 1404158870.826,
        "createdBy": "chx27xqj80001ix2uswe54bo3",
        "modified": 1404158870.826,
        "modifiedBy": "chx27xqj80001ix2uswe54bo3"
      }
    },
    {
      "event": {
        "id": "chx27xqui000oix2ukrrnzfqx",
        "time": 1385046854.282,
        "streamId": "systolic",
        "tags": [],
        "type": "pressure/mmhg",
        "content": 120,
        "created": 1404158870.826,
        "createdBy": "chx27xqj80001ix2uswe54bo3",
        "modified": 1404158870.826,
        "modifiedBy": "chx27xqj80001ix2uswe54bo3"
      }
    },
    {
      "event": {
        "id": "chx27xqui000pix2ux3ipntf2",
        "time": 1385046854.282,
        "streamId": "diastolic",
        "tags": [],
        "type": "pressure/mmhg",
        "content": 80,
        "created": 1404158870.826,
        "createdBy": "chx27xqj80001ix2uswe54bo3",
        "modified": 1404158870.826,
        "modifiedBy": "chx27xqj80001ix2uswe54bo3"
      }
    }
  ]
}</code></pre></div><div class="tab-pane http"><pre><code>curl -i -X POST -H 'Content-Type: application/json' -d '[{"method":"events.create","params":{"time":1385046854.282,"streamId":"heart","type":"frequency/bpm","content":90}},{"method":"events.create","params":{"time":1385046854.282,"streamId":"systolic","type":"pressure/mmhg","content":120}},{"method":"events.create","params":{"time":1385046854.282,"streamId":"diastolic","type":"pressure/mmhg","content":80}}]' https://${username}.pryv.io/?auth=${token}</code></pre><div class="step-marker">⬇</div><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
API-Version: 0.7.29

{
  "results": [
    {
      "event": {
        "id": "chx27xqui000nix2u3o8eay0g",
        "time": 1385046854.282,
        "streamId": "heart",
        "tags": [],
        "type": "frequency/bpm",
        "content": 90,
        "created": 1404158870.826,
        "createdBy": "chx27xqj80001ix2uswe54bo3",
        "modified": 1404158870.826,
        "modifiedBy": "chx27xqj80001ix2uswe54bo3"
      }
    },
    {
      "event": {
        "id": "chx27xqui000oix2ukrrnzfqx",
        "time": 1385046854.282,
        "streamId": "systolic",
        "tags": [],
        "type": "pressure/mmhg",
        "content": 120,
        "created": 1404158870.826,
        "createdBy": "chx27xqj80001ix2uswe54bo3",
        "modified": 1404158870.826,
        "modifiedBy": "chx27xqj80001ix2uswe54bo3"
      }
    },
    {
      "event": {
        "id": "chx27xqui000pix2ux3ipntf2",
        "time": 1385046854.282,
        "streamId": "diastolic",
        "tags": [],
        "type": "pressure/mmhg",
        "content": 80,
        "created": 1404158870.826,
        "createdBy": "chx27xqj80001ix2uswe54bo3",
        "modified": 1404158870.826,
        "modifiedBy": "chx27xqj80001ix2uswe54bo3"
      }
    }
  ]
}</code></pre></div><div class="tab-pane sockets"><pre><code>socket.emit('callBatch', [
  {
    "method": "events.create",
    "params": {
      "time": 1385046854.282,
      "streamId": "heart",
      "type": "frequency/bpm",
      "content": 90
    }
  },
  {
    "method": "events.create",
    "params": {
      "time": 1385046854.282,
      "streamId": "systolic",
      "type": "pressure/mmhg",
      "content": 120
    }
  },
  {
    "method": "events.create",
    "params": {
      "time": 1385046854.282,
      "streamId": "diastolic",
      "type": "pressure/mmhg",
      "content": 80
    }
  }
], callback);</code></pre><div class="step-marker">⬇</div><pre><code>{
  "results": [
    {
      "event": {
        "id": "chx27xqui000nix2u3o8eay0g",
        "time": 1385046854.282,
        "streamId": "heart",
        "tags": [],
        "type": "frequency/bpm",
        "content": 90,
        "created": 1404158870.826,
        "createdBy": "chx27xqj80001ix2uswe54bo3",
        "modified": 1404158870.826,
        "modifiedBy": "chx27xqj80001ix2uswe54bo3"
      }
    },
    {
      "event": {
        "id": "chx27xqui000oix2ukrrnzfqx",
        "time": 1385046854.282,
        "streamId": "systolic",
        "tags": [],
        "type": "pressure/mmhg",
        "content": 120,
        "created": 1404158870.826,
        "createdBy": "chx27xqj80001ix2uswe54bo3",
        "modified": 1404158870.826,
        "modifiedBy": "chx27xqj80001ix2uswe54bo3"
      }
    },
    {
      "event": {
        "id": "chx27xqui000pix2ux3ipntf2",
        "time": 1385046854.282,
        "streamId": "diastolic",
        "tags": [],
        "type": "pressure/mmhg",
        "content": 80,
        "created": 1404158870.826,
        "createdBy": "chx27xqj80001ix2uswe54bo3",
        "modified": 1404158870.826,
        "modifiedBy": "chx27xqj80001ix2uswe54bo3"
      }
    }
  ]
}</code></pre></div></div></div></aside></section></section></section><section id="data-structure"><h1 id="data-structure">Data structure</h1>
<div class="intro"><p>This section describes the structure of the different types of objects and values exchanged in the API.</p>
</div><section id="data-structure-event"><h2 id="event">Event</h2>
<div class="content"><div class="intro"><p>See also: <a href="/concepts#core-events">core concepts</a>.</p>
</div><table class="definitions"><tr><th><code>id</code></th><td><div class="header"><span class="type"><a href="#data-structure-identity">identity</a></span><span class="label label-default unique">unique</span><span class="label label-default read-only">read-only</span></div><div class="description"><p>The server-assigned identifier for the event.</p>
</div></td></tr><tr><th><code>streamId</code></th><td><div class="header"><span class="type"><a href="#data-structure-identity">identity</a></span></div><div class="description"><p>The id of the belonging stream.</p>
</div></td></tr><tr><th><code>time</code></th><td><div class="header"><span class="type"><a href="#data-structure-timestamp">timestamp</a></span></div><div class="description"><p>The event&#39;s time. For period events, this is the time the event started.</p>
</div></td></tr><tr><th><code>duration</code></th><td><div class="header"><span class="type"><a href="#data-structure-timestamp">timestamp</a></span><span class="label label-default optional">optional</span></div><div class="description"><p>If present, indicates that the event is a period event. <strong>Running period events have a duration set to <code>null</code></strong>. (We use a dedicated field for duration—instead of using the <code>content</code> field—as we do specific processing of event durations, intervals and overlapping.)</p>
</div></td></tr><tr><th><code>type</code></th><td><div class="header"><span class="type">string</span></div><div class="description"><p>The type of the event. See the <a href="/event-types#directory">event type directory</a> for a list of standard types.</p>
</div></td></tr><tr><th><code>content</code></th><td><div class="header"><span class="type">any type</span><span class="label label-default optional">optional</span></div><div class="description"><p>The <code>type</code>-specific content of the event, if any.</p>
</div></td></tr><tr><th><code>tags</code></th><td><div class="header"><span class="type">array of strings</span><span class="label label-default optional">optional (always present in read items)</span></div><div class="description"><p>The tags associated with the event.</p>
</div></td></tr><tr><th><code>references</code></th><td><div class="header"><span class="type">array of <a href="#data-structure-identity">identity</a></span><span class="label label-default optional">optional</span></div><div class="description"><p>Other events associated with the event. <em>Note: event references are coming in a future version of the API.</em></p>
</div></td></tr><tr><th><code>description</code></th><td><div class="header"><span class="type">string</span><span class="label label-default optional">optional</span></div><div class="description"><p>User description or comment for the event.</p>
</div></td></tr><tr><th><code>attachments</code></th><td><div class="header"><span class="type">array of attachment objects</span><span class="label label-default optional">optional</span><span class="label label-default read-only">read-only</span></div><div class="description"><p>An array describing the files attached to the event. Each item has the following structure:</p>
</div><table class="definitions"><tr><th><code>id</code></th><td><div class="header"><span class="type"><a href="#data-structure-identity">identity</a></span></div><div class="description"><p>The file&#39;s id. The attached file&#39;s URL is obtained by appending this id to the event&#39;s resource URL.</p>
</div></td></tr><tr><th><code>fileName</code></th><td><div class="header"><span class="type">string</span></div><div class="description"><p>The file&#39;s name as uploaded.</p>
</div></td></tr><tr><th><code>type</code></th><td><div class="header"><span class="type">string</span></div><div class="description"><p>The MIME type of the file.</p>
</div></td></tr><tr><th><code>size</code></th><td><div class="header"><span class="type">number</span></div><div class="description"><p>The size of the file, in bytes.</p>
</div></td></tr><tr><th><code>readToken</code></th><td><div class="header"><span class="type">string</span></div><div class="description"><p>The auth token to pass in the query string when reading the file (instead of the regular <code>auth</code> parameter). The token is unique for the file and the access used to read it. This is a security measure in situations where it is impractical to use the <code>Authorization</code> HTTP header and/or where the file&#39;s URL is likely to be exposed. See also events method <a href="#methods-events-events-getAttachment">get attachment</a>.</p>
</div></td></tr></table></td></tr><tr><th><code>clientData</code></th><td><div class="header"><span class="type"><a href="#data-structure-key-value">key-value</a></span><span class="label label-default optional">optional</span></div><div class="description"><p>Additional client data for the event.</p>
</div></td></tr><tr><th><code>trashed</code></th><td><div class="header"><span class="type">boolean</span><span class="label label-default optional">optional</span></div><div class="description"><p><code>true</code> if the event is in the trash.</p>
</div></td></tr><tr><th><code>created</code></th><td><div class="header"><span class="type"><a href="#data-structure-timestamp">timestamp</a></span><span class="label label-default read-only">read-only</span></div><div class="description"><p>The time the event was created.</p>
</div></td></tr><tr><th><code>createdBy</code></th><td><div class="header"><span class="type"><a href="#data-structure-identity">identity</a></span><span class="label label-default read-only">read-only</span></div><div class="description"><p>The id of the access used to create the event.</p>
</div></td></tr><tr><th><code>modified</code></th><td><div class="header"><span class="type"><a href="#data-structure-timestamp">timestamp</a></span><span class="label label-default read-only">read-only</span></div><div class="description"><p>The time the event was last modified.</p>
</div></td></tr><tr><th><code>modifiedBy</code></th><td><div class="header"><span class="type"><a href="#data-structure-identity">identity</a></span><span class="label label-default read-only">read-only</span></div><div class="description"><p>The id of the last access used to modify the event.</p>
</div></td></tr></table></div><aside><div class="example"><p>A picture</p>
<pre><code>{
  "id": "chx27xqui000six2u64134ftz",
  "time": 1404155270.826,
  "streamId": "diary",
  "tags": [],
  "type": "picture/attached",
  "content": null,
  "attachments": [
    {
      "id": "chx27xqui000tix2uixjfxz3z",
      "fileName": "photo.jpg",
      "type": "image/jpeg",
      "size": 2561
    }
  ],
  "created": 1404155270.826,
  "createdBy": "chx27xqj80004ix2uwyfif5th",
  "modified": 1404155270.826,
  "modifiedBy": "chx27xqj80004ix2uwyfif5th"
}</code></pre></div><div class="example"><p>An activity</p>
<pre><code>{
  "id": "chx27xqui000jix2upt8mj0ik",
  "time": 1404158870.826,
  "streamId": "jogging",
  "tags": [],
  "type": "activity/pryv",
  "content": null,
  "created": 1404158870.826,
  "createdBy": "chx27xqj80001ix2uswe54bo3",
  "modified": 1404158870.826,
  "modifiedBy": "chx27xqj80001ix2uswe54bo3"
}</code></pre></div><div class="example"><p>A position</p>
<pre><code>{
  "id": "chx27xqui000uix2u8euhm3rr",
  "time": 1350373077.359,
  "streamId": "diary",
  "tags": [],
  "type": "position/wgs84",
  "content": {
    "latitude": 40.714728,
    "longitude": -73.998672
  },
  "created": 1404151670.826,
  "createdBy": "chx27xqj60000ix2umlget6lh",
  "modified": 1404151670.826,
  "modifiedBy": "chx27xqj60000ix2umlget6lh"
}</code></pre></div></aside></section><section id="data-structure-stream"><h2 id="stream">Stream</h2>
<div class="content"><div class="intro"><p>See also: <a href="/concepts#core-streams">core concepts</a>.</p>
</div><table class="definitions"><tr><th><code>id</code></th><td><div class="header"><span class="type"><a href="#data-structure-identity">identity</a></span><span class="label label-default unique">unique</span><span class="label label-default read-only">read-only (except at creation)</span></div><div class="description"><p>The identifier for the stream. Automatically generated if not set when creating the stream; <strong>slugified if necessary</strong>.</p>
</div></td></tr><tr><th><code>name</code></th><td><div class="header"><span class="type">string</span><span class="label label-default unique">unique among siblings</span></div><div class="description"><p>A name identifying the stream for users. The name must be unique among the stream&#39;s siblings in the streams tree structure.</p>
</div></td></tr><tr><th><code>parentId</code></th><td><div class="header"><span class="type"><a href="#data-structure-identity">identity</a></span><span class="label label-default optional">optional</span></div><div class="description"><p>The identifier of the stream&#39;s parent, if any. A value of <code>null</code> indicates that the stream has no parent (i.e. root stream).</p>
</div></td></tr><tr><th><code>singleActivity</code></th><td><div class="header"><span class="type">boolean</span><span class="label label-default optional">optional</span></div><div class="description"><p>If specified and <code>true</code>, the system will ensure that period events in this stream and its children never overlap.</p>
</div></td></tr><tr><th><code>clientData</code></th><td><div class="header"><span class="type"><a href="#data-structure-key-value">key-value</a></span><span class="label label-default optional">optional</span></div><div class="description"><p>Additional client data for the stream.</p>
</div></td></tr><tr><th><code>children</code></th><td><div class="header"><span class="type">array of streams</span><span class="label label-default read-only">read-only</span></div><div class="description"><p>The stream&#39;s sub-streams, if any. This field cannot be set in requests creating a new streams: streams are created individually by design.</p>
</div></td></tr><tr><th><code>trashed</code></th><td><div class="header"><span class="type">boolean</span><span class="label label-default optional">optional</span></div><div class="description"><p><code>true</code> if the stream is in the trash.</p>
</div></td></tr><tr><th><code>created</code></th><td><div class="header"><span class="type"><a href="#data-structure-timestamp">timestamp</a></span><span class="label label-default read-only">read-only</span></div><div class="description"><p>The time the stream was created.</p>
</div></td></tr><tr><th><code>createdBy</code></th><td><div class="header"><span class="type"><a href="#data-structure-identity">identity</a></span><span class="label label-default read-only">read-only</span></div><div class="description"><p>The id of the access used to create the stream.</p>
</div></td></tr><tr><th><code>modified</code></th><td><div class="header"><span class="type"><a href="#data-structure-timestamp">timestamp</a></span><span class="label label-default read-only">read-only</span></div><div class="description"><p>The time the stream was last modified.</p>
</div></td></tr><tr><th><code>modifiedBy</code></th><td><div class="header"><span class="type"><a href="#data-structure-identity">identity</a></span><span class="label label-default read-only">read-only</span></div><div class="description"><p>The id of the last access used to modify the stream.</p>
</div></td></tr></table></div><aside><div class="example"><p>A structure for activities</p>
<pre><code>[
  {
    "id": "sport",
    "name": "Sport",
    "parentId": null,
    "children": [
      {
        "id": "jogging",
        "name": "Jogging",
        "parentId": "sport",
        "children": [],
        "created": 1341044977.1960058,
        "createdBy": "chx27xqj60000ix2umlget6lh",
        "modified": 1341045001.9608524,
        "modifiedBy": "chx27xqj60000ix2umlget6lh"
      },
      {
        "id": "bicycling",
        "name": "Bicycling",
        "parentId": "sport",
        "children": [],
        "created": 1341044977.1960058,
        "createdBy": "chx27xqj60000ix2umlget6lh",
        "modified": 1341045116.440953,
        "modifiedBy": "chx27xqj60000ix2umlget6lh"
      }
    ],
    "created": 1341044966.825,
    "createdBy": "chx27xqj60000ix2umlget6lh",
    "modified": 1341045307.8753986,
    "modifiedBy": "chx27xqj60000ix2umlget6lh"
  },
  {
    "id": "work",
    "name": "Work",
    "parentId": null,
    "singleActivity": true,
    "children": [
      {
        "id": "chx27xquh0008ix2ufjvpjkef",
        "name": "Noble Works Co.",
        "parentId": "work",
        "children": [
          {
            "id": "chx27xquh000aix2ufzxbzubh",
            "name": "Last Be First",
            "parentId": "chx27xquh0008ix2ufjvpjkef",
            "children": [],
            "created": 1341045007.9391088,
            "createdBy": "chx27xqj60000ix2umlget6lh",
            "modified": 1341045206.0198078,
            "modifiedBy": "chx27xqj60000ix2umlget6lh"
          },
          {
            "id": "chx27xquh000bix2uijfevg4c",
            "name": "Big Tree",
            "parentId": "chx27xquh0008ix2ufjvpjkef",
            "children": [],
            "created": 1341045007.9391088,
            "createdBy": "chx27xqj60000ix2umlget6lh",
            "modified": 1341045121.383082,
            "modifiedBy": "chx27xqj60000ix2umlget6lh"
          },
          {
            "id": "chx27xquh000cix2unxvll105",
            "name": "Inner Light",
            "parentId": "chx27xquh0008ix2ufjvpjkef",
            "children": [],
            "created": 1341045007.9391088,
            "createdBy": "chx27xqj60000ix2umlget6lh",
            "modified": 1341045082.6782668,
            "modifiedBy": "chx27xqj60000ix2umlget6lh"
          }
        ],
        "created": 1341044983.1972063,
        "createdBy": "chx27xqj60000ix2umlget6lh",
        "modified": 1341045169.447918,
        "modifiedBy": "chx27xqj60000ix2umlget6lh"
      },
      {
        "id": "chx27xquh0009ix2u1pakgk19",
        "name": "Freelancing",
        "parentId": "work",
        "children": [
          {
            "id": "chx27xquh000dix2uuq1j4hpu",
            "name": "Funky Veggies",
            "parentId": "chx27xquh0009ix2u1pakgk19",
            "children": [],
            "created": 1341045003.8679636,
            "createdBy": "chx27xqj60000ix2umlget6lh",
            "modified": 1341045358.4960737,
            "modifiedBy": "chx27xqj60000ix2umlget6lh"
          },
          {
            "id": "chx27xquh000eix2uoxol6ozp",
            "name": "Jojo Lapin & sons",
            "parentId": "chx27xquh0009ix2u1pakgk19",
            "children": [],
            "created": 1341045003.8679636,
            "createdBy": "chx27xqj60000ix2umlget6lh",
            "modified": 1341045165.5951622,
            "modifiedBy": "chx27xqj60000ix2umlget6lh"
          }
        ],
        "created": 1341044983.1972063,
        "createdBy": "chx27xqj60000ix2umlget6lh",
        "modified": 1341045187.9247973,
        "modifiedBy": "chx27xqj60000ix2umlget6lh"
      }
    ],
    "created": 1341044966.825,
    "createdBy": "chx27xqj60000ix2umlget6lh",
    "modified": 1341045259.6248,
    "modifiedBy": "chx27xqj60000ix2umlget6lh"
  }
]</code></pre></div></aside></section><section id="data-structure-tag"><h2 id="tag">Tag</h2>
<div class="content"><div class="intro"><p>Tags can be plain text or typed tags; this describes the latter. See also: <a href="/concepts#core-tags">core concepts</a>. <em>Note: typed tags are coming in a future version of the API.</em></p>
</div><table class="definitions"><tr><th><code>id</code></th><td><div class="header"><span class="type"><a href="#data-structure-identity">identity</a></span><span class="label label-default unique">unique</span><span class="label label-default read-only">read-only</span></div><div class="description"><p>The identifier for the tag.</p>
</div></td></tr><tr><th><code>type</code></th><td><div class="header"><span class="type">string</span></div><div class="description"><p>The type of the tag. See the <a href="#TODO">tag type directory</a> for a list of standard types.</p>
</div></td></tr><tr><th><code>content</code></th><td><div class="header"><span class="type">any type</span><span class="label label-default optional">optional</span></div><div class="description"><p>The <code>type</code>-specific content of the tag, if any.</p>
</div></td></tr><tr><th><code>clientData</code></th><td><div class="header"><span class="type"><a href="#data-structure-key-value">key-value</a></span><span class="label label-default optional">optional</span></div><div class="description"><p>Additional client data for the tag.</p>
</div></td></tr><tr><th><code>trashed</code></th><td><div class="header"><span class="type">boolean</span><span class="label label-default optional">optional</span></div><div class="description"><p><code>true</code> if the tag is in the trash.</p>
</div></td></tr><tr><th><code>created</code></th><td><div class="header"><span class="type"><a href="#data-structure-timestamp">timestamp</a></span><span class="label label-default read-only">read-only</span></div><div class="description"><p>The time the tag was created.</p>
</div></td></tr><tr><th><code>createdBy</code></th><td><div class="header"><span class="type"><a href="#data-structure-identity">identity</a></span><span class="label label-default read-only">read-only</span></div><div class="description"><p>The id of the access used to create the tag.</p>
</div></td></tr><tr><th><code>modified</code></th><td><div class="header"><span class="type"><a href="#data-structure-timestamp">timestamp</a></span><span class="label label-default read-only">read-only</span></div><div class="description"><p>The time the tag was last modified.</p>
</div></td></tr><tr><th><code>modifiedBy</code></th><td><div class="header"><span class="type"><a href="#data-structure-identity">identity</a></span><span class="label label-default read-only">read-only</span></div><div class="description"><p>The id of the last access used to modify the tag.</p>
</div></td></tr></table></div><aside></aside></section><section id="data-structure-access"><h2 id="access">Access</h2>
<div class="content"><div class="intro"><p>See also: <a href="/concepts#core-accesses">core concepts</a>.</p>
</div><table class="definitions"><tr><th><code>id</code></th><td><div class="header"><span class="type"><a href="#data-structure-identity">identity</a></span><span class="label label-default unique">unique</span><span class="label label-default read-only">read-only</span></div><div class="description"><p>The identifier for the access.</p>
</div></td></tr><tr><th><code>token</code></th><td><div class="header"><span class="type">string</span><span class="label label-default unique">unique</span><span class="label label-default read-only">read-only (except at creation)</span></div><div class="description"><p>The token identifying the access. Automatically generated if not set when creating the access; <strong>slugified if necessary</strong>.</p>
</div></td></tr><tr><th><code>type</code></th><td><div class="header"><span class="type"><code>personal</code>|<code>app</code>|<code>shared</code></span><span class="label label-default optional">optional</span><span class="label label-default read-only">read-only (except at creation)</span></div><div class="description"><p>The type — or usage — of the access. Default: <code>shared</code>.</p>
</div></td></tr><tr><th><code>name</code></th><td><div class="header"><span class="type">string</span><span class="label label-default unique">unique per type and device</span></div><div class="description"><p>The name identifying the access for the user. (For personal and app access, the name is used as a technical identifier and not shown as-is to the user.)</p>
</div></td></tr><tr><th><code>deviceName</code></th><td><div class="header"><span class="type">string</span><span class="label label-default unique">unique per type and name</span><span class="label label-default optional">optional</span></div><div class="description"><p>For app accesses only. The name of the client device running the app, if applicable.</p>
</div></td></tr><tr><th><code>permissions</code></th><td><div class="header"><span class="type">array of permission objects</span></div><div class="description"><p>Ignored for personal accesses. If permission levels conflict (e.g. stream set to &quot;manage&quot; and child stream set to &quot;contribute&quot;), only the highest level is considered. Each permission object has the following structure:</p>
</div><table class="definitions"><tr><th><code>streamId</code>|<code>tag</code></th><td><div class="header"><span class="type"><a href="#data-structure-identity">identity</a> | string</span></div><div class="description"><p>The id of the stream or the tag the permission applies to, or <code>*</code> for all streams/tags. Stream permissions are recursively applied to child streams.</p>
</div></td></tr><tr><th><code>level</code></th><td><div class="header"><span class="type"><code>read</code>|<code>contribute</code>|<code>manage</code></span></div><div class="description"><p>The level of access to the stream. With <code>contribute</code>, one can see and record events for the stream/tag (and child streams for stream permissions); with <code>manage</code>, one can in addition create, modify and delete child streams.</p>
</div></td></tr></table></td></tr><tr><th><code>lastUsed</code></th><td><div class="header"><span class="type"><a href="#data-structure-timestamp">timestamp</a></span><span class="label label-default optional">optional</span><span class="label label-default read-only">read-only</span></div><div class="description"><p>The time the access was last used.</p>
</div></td></tr><tr><th><code>created</code></th><td><div class="header"><span class="type"><a href="#data-structure-timestamp">timestamp</a></span><span class="label label-default read-only">read-only</span></div><div class="description"><p>The time the access was created.</p>
</div></td></tr><tr><th><code>createdBy</code></th><td><div class="header"><span class="type"><a href="#data-structure-identity">identity</a></span><span class="label label-default read-only">read-only</span></div><div class="description"><p>The id of the access used to create the access.</p>
</div></td></tr><tr><th><code>modified</code></th><td><div class="header"><span class="type"><a href="#data-structure-timestamp">timestamp</a></span><span class="label label-default read-only">read-only</span></div><div class="description"><p>The time the access was last modified.</p>
</div></td></tr><tr><th><code>modifiedBy</code></th><td><div class="header"><span class="type"><a href="#data-structure-identity">identity</a></span><span class="label label-default read-only">read-only</span></div><div class="description"><p>The id of the last access used to modify the access.</p>
</div></td></tr></table></div><aside><div class="example"><p>An app access</p>
<pre><code>{
  "id": "chx27xqj80001ix2uswe54bo3",
  "token": "chx27xqj80003ix2um3l3hb8v",
  "type": "app",
  "name": "my-app-id",
  "permissions": [
    {
      "streamId": "health",
      "level": "contribute"
    }
  ],
  "created": 1404072470.42,
  "createdBy": "chx27xqj60000ix2umlget6lh",
  "modified": 1404072470.42,
  "modifiedBy": "chx27xqj60000ix2umlget6lh"
}</code></pre></div></aside></section><section id="data-structure-followed-slice" class=" trusted-only"><h2 id="followed-slice">Followed slice</h2>
<div class="content"><div class="intro"><p>See also: <a href="/concepts#core-followed-slices">core concepts</a>.</p>
</div><table class="definitions"><tr><th><code>id</code></th><td><div class="header"><span class="type"><a href="#data-structure-identity">identity</a></span><span class="label label-default unique">unique</span><span class="label label-default read-only">read-only</span></div><div class="description"><p>The server-assigned identifier for the followed slice.</p>
</div></td></tr><tr><th><code>name</code></th><td><div class="header"><span class="type">string</span><span class="label label-default unique">unique</span></div><div class="description"><p>A name identifying the followed slice for the user.</p>
</div></td></tr><tr><th><code>url</code></th><td><div class="header"><span class="type">URL</span></div><div class="description"><p>The URL of the API endpoint of the account hosting the slice. Not modifiable after creation.</p>
</div></td></tr><tr><th><code>accessToken</code></th><td><div class="header"><span class="type">string</span></div><div class="description"><p>The token of the shared access itself. Not modifiable after creation.</p>
</div></td></tr></table></div><aside></aside></section><section id="data-structure-account" class=" trusted-only"><h2 id="account-information">Account information</h2>
<div class="content"><div class="intro"><p>User account information.</p>
</div><table class="definitions"><tr><th><code>username</code></th><td><div class="header"><span class="type">string</span><span class="label label-default unique">unique</span><span class="label label-default read-only">read-only</span></div><div class="description"><p>The user&#39;s username.</p>
</div></td></tr><tr><th><code>email</code></th><td><div class="header"><span class="type">string</span><span class="label label-default unique">unique</span></div><div class="description"><p>The user&#39;s contact e-mail address.</p>
</div></td></tr><tr><th><code>language</code></th><td><div class="header"><span class="type">string</span></div><div class="description"><p>The user&#39;s preferred language as a 2-letter ISO language code.</p>
</div></td></tr><tr><th><code>storageUsed</code></th><td><div class="header"><span class="type">object</span></div><div class="description"><p>The current storage size used by the user account.</p>
</div><table class="definitions"><tr><th><code>dbDocuments</code></th><td><div class="header"><span class="type">number</span></div><div class="description"><p>Bytes used by documents (records) in the database.</p>
</div></td></tr><tr><th><code>attachedFiles</code></th><td><div class="header"><span class="type">number</span></div><div class="description"><p>Bytes used by attached files.</p>
</div></td></tr></table></td></tr></table></div><aside></aside></section><section id="data-structure-key-value"><h2 id="key-value">Key-value</h2>
<div class="content"><div class="intro"><p>An object (key-value map) for client apps to store additional data about the containing item (stream, event, etc.), such as a color, a reference to an associated icon, or other app-specific metadata.</p>
<h3 id="adding-updating-and-removing-client-data">Adding, updating and removing client data</h3>
<p>When the containing item is updated, additional data fields can be added, updated and removed as follows:</p>
<ul>
<li>To add or update a field, just set its value; for example: <code>{&quot;clientData&quot;: {&quot;keyToAddOrUpdate&quot;: &quot;value&quot;}}</code></li>
<li>To delete a field, set its value to <code>null</code>; for example: <code>{&quot;clientData&quot;: {&quot;keyToDelete&quot;: null}}</code></li>
</ul>
<p>Fields you don&#39;t specify in the update are left untouched.</p>
<h3 id="naming-convention">Naming convention</h3>
<p>The convention is that each app names the keys it uses with an <code>{app-id}:</code> prefix. For example, an app with id &quot;riki&quot; would store its data in fields such as <code>&quot;riki:key&quot;: &quot;some value&quot;</code>.</p>
</div></div><aside></aside></section><section id="data-structure-error"><h2 id="error">Error</h2>
<div class="content"><table class="definitions"><tr><th><code>id</code></th><td><div class="header"><span class="type">string</span></div><div class="description"><p>Identifier for the error.</p>
</div></td></tr><tr><th><code>message</code></th><td><div class="header"><span class="type">string</span></div><div class="description"><p>A human-readable description of the error.</p>
</div></td></tr><tr><th><code>data</code></th><td><div class="header"><span class="type">any type</span><span class="label label-default optional">optional</span></div><div class="description"><p>Additional machine-readable details (specified for each error if relevant).</p>
</div></td></tr><tr><th><code>subErrors</code></th><td><div class="header"><span class="type">array of errors</span><span class="label label-default optional">optional</span></div><div class="description"><p>Lists the detailed causes of the main error, if any.</p>
</div></td></tr></table></div><aside></aside></section><section id="data-structure-identity"><h2 id="item-identity">Item identity</h2>
<div class="content"><div class="intro"><p>A string uniquely identifying an item for a given user. For some types of items (&quot;structural&quot; ones such as streams), it is allowed for the identity to be optionally set by API clients; otherwise the identity is generated by the server.</p>
</div></div><aside></aside></section><section id="data-structure-timestamp"><h2 id="timestamp">Timestamp</h2>
<div class="content"><div class="intro"><p>A positive floating-point number representing a number of seconds since any reference date and time, <strong>independently from the time zone</strong>. Because date and time synchronization between server time and client time is done by the client simply comparing the current server timestamp with its own, the reference date and time does not actually matter (but we do use standard Unix epoch time).</p>
</div></div><aside><div class="example"><p>Getting a valid timestamp:</p>
<ul>
<li>JavaScript: <code>Date.now() / 1000</code></li>
<li>PHP (5+): <code>microtime(true)</code></li>
<li>TODO: more</li>
</ul>
</div></aside></section></section></div><div id="toc"></div></div><footer id="page-footer"><nav class="navbar navbar-default"><div class="container-fluid"><div id="footer-nav"><ul class="nav navbar-nav"><li><a href="mailto:developers@pryv.com">Contact us</a></li><li><a href="http://github.com/pryv">GitHub</a></li></ul></div></div></nav></footer><script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script><script src="/assets/js/jquery.toc.min.js"></script><script src="/assets/bootstrap/js/bootstrap.min.js"></script><!-- TOC generation--><script>jQuery(document).ready(function($) {
  $('#toc').toc({
    'selectors': 'h1:not(.page-title),h2',
    'container': '#main',
    'smoothScrolling': false,
    'prefix': 'toc',
    'onHighlight': function(el) {},
    'highlightOnScroll': true,
    'highlightOffset': 100,
    'anchorName': function(i, heading, prefix) {
      var $heading = $(heading),
      sectionId = $heading.parents('section[id]').attr('id');
      return sectionId + ($heading.is('h1') ? '' : '-' + slugify($heading.text()));
    },
    'headerText': function(i, heading, $heading) {
      return $heading.text();
    }
  });
  function slugify(text) {
    return text.toLowerCase().replace(/[^\w- ]+/g,'').replace(/ +/g,'-');
  }
});
</script><!-- Code examples format switch--><script>$(document).ready(function () {
  setExamplesFormat($('#examples-format').get(0).value);
});
$('#examples-format').on('change', function () {
  setExamplesFormat(this.value);
});
function setExamplesFormat(format) {
  var removeSelectors = [];
  ['json', 'http', 'sockets'].forEach(function(f) {
    if (format !== f) {
      removeSelectors.push('.example .tab-pane.' + f + '.active');
    }
  });
  $(removeSelectors.join(',')).removeClass("active");
  $('.example .tab-pane.' + format).addClass("active");
}
</script><!-- Code blocks highlighting--><script src="/assets/highlight/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();
</script><!-- Google Analytics--><script>var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-36589447-2']);
_gaq.push(['_trackPageview']);
(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();</script></body></html>