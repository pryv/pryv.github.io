<!DOCTYPE html><html lang="en" class="no-js"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="description" property="og:description" content="Pryv API reference and resources for developers"><meta name="author" content="Pryv SA"><meta property="og:type" content="website"><meta name="image" property="og:image" content="/assets/images/logo-256.png"><meta name="viewport" content="width=device-width, initial-scale=1"><title>Get started with Pryv.io API | Pryv API</title><link rel="icon" href="/assets/images/favicon-black.ico" type="image/x-icon"><link rel="apple-touch-icon" sizes="120x120" href="/assets/images/apple-touch-icon-120x120-black.png"><link rel="apple-touch-icon" sizes="152x152" href="/assets/images/apple-touch-icon-152x152-black.png"><link rel="apple-touch-icon" sizes="180x180" href="/assets/images/apple-touch-icon-180x180-black.png"><!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
  <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]--><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:400,300,500,700,400italic|Roboto+Condensed:400,300,700"><link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/docco.min.css"><link rel="stylesheet" type="text/css" href="/assets/fonts/ss-gizmo.min.css"><link rel="stylesheet" type="text/css" href="/assets/style.css"></head><body class="getting-started with-toc"><header id="page-header"><nav role="navigation" class="navbar navbar-default navbar-fixed-top"><div class="container-fluid"><div class="navbar-header"><a href="https://pryv.com" title="Pryv home" class="navbar-brand logo pryv-home"><img src="/assets/images/icon-home.svg" alt="Pryv home" height="50"></a><a href="/" title="Developers home" class="navbar-brand logo"><img src="/assets/images/logo-256-black.png" alt="Developers home"></a><button type="button" data-toggle="collapse" data-target="#main-nav" class="navbar-toggle"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button></div><div id="main-nav" class="collapse navbar-collapse"><ul class="nav navbar-nav"><li class="dropdown"><a href="#" data-toggle="dropdown" class="dropdown-toggle">Guides <b class="caret"></b></a><ul class="dropdown-menu"><li class="active"><a href="/getting-started/">Getting started</a></li><li><a href="/concepts/">API concepts</a></li><li><a href="/external-resources/">External resources</a></li><!--+menuItem('data-modeling', 'Data modeling') â€”> into "Concepts"??--></ul></li><li class="dropdown"><a href="#" data-toggle="dropdown" class="dropdown-toggle">Reference <b class="caret"></b></a><ul class="dropdown-menu"><li><a href="/reference/">API reference</a></li><li><a href="/change-log/">API change log</a></li><li><a href="/event-types/">Event types</a></li><!--+menuItem('standardStructure')--></ul></li><li class="dropdown"><a href="#" data-toggle="dropdown" class="dropdown-toggle">FAQ <b class="caret"></b></a><ul class="dropdown-menu"><li><a href="/faq-api/">API</a></li><li><a href="/faq-infra/">Infrastructure</a></li></ul></li><!--lia(href='#') Blog--></ul><div class="navbar-right"><p class="navbar-text version"><a href="/change-log/" title="View change log">API version: <strong>1.3.41</strong></a></p></div></div></div></nav></header><div id="main-wrapper" class="container container-narrow"><div id="main"><h1 class="page-title">Get started with Pryv.io API</h1><p>In this tutorial, we will help you to try out and evaluate Pryv.io API for your
projects. Throughout these steps, we will use <strong>Pryv.me</strong>, our <a href="http://pryv.com/pryvlab/">Lab platform</a> for testing Pryv.io API.</p>
<p>We will guide you through:</p>
<ol>
<li><a href="#user-creation">Creating a Pryv.me User</a></li>
<li><a href="#data-modelling-tips">Data Modelling</a></li>
<li><a href="#authorize-your-application">Authorizing your Application</a></li>
<li><a href="#create-read-update-delete">Using CRUD operations: Create, Read, Update, Delete</a></li>
<li><a href="#access-management">Managing Access</a></li>
</ol>
<h1 id="create-a-pryv-me-user">Create a Pryv.me User</h1>
<p>By registering with <strong>Pryv.me</strong>, you will have access to a Pryv.io user and a fully-functional Pryv.io environment hosted in our laboratory infrastructure, perfect for your first tests.</p>
<ol>
<li>Go to the <a href="https://sw.pryv.me/access/register.html">registration page</a> (click the link).</li>
<li>Fill in the form, choose <a href="http://api.pryv.com/concepts/#servers">where you want to store your data</a> and click the &#39;<strong>Create</strong>&#39; button.</li>
</ol>
<p>That&#39;s it! You will receive a welcome email from Pryv.me with your account details.</p>
<p>/!\ Data in Pryv.io has a geographical location that doesn&#39;t change. This makes it easier to control what legislations apply.</p>
<h2 id="sign-in-to-pryv-me">Sign-in to Pryv.me</h2>
<p>Go to the following address to sign-in with your Pryv.io account:</p>
<p><code>&#39;https://${username}.pryv.me/#/SignIn&#39;</code></p>
<p>You have now access to your Pryv.me account through the Pryv.io demo dashboard. Alternatively, just click <a href="https://sw.pryv.me/access/signinhub.html">here</a>, enter your username and then your password in the second step.</p>
<p>As shown below, the streams for this account are listed, especially a default stream which is automatically created for you: &#39;Diary&#39;.</p>
<p><img src="/assets/images/getting-started/streams_dashboard.png" alt="Pryv.me Dashboard: Streams"></p>
<h1 id="data-modelling-tips">Data Modelling Tips</h1>
<p>The Pryv.io data model is composed mainly of two entities: <strong>events</strong> and <strong>streams</strong>.</p>
<p>Here&#39;s an example of two Pryv.io user accounts and their respective streams. Inside each stream, you can see timestamped events.</p>
<p><img src="/assets/images/getting-started/PryvIO.png" alt="Pryv.io Data Model"></p>
<h3 id="events">Events</h3>
<p>Events are the primary unit of content in Pryv.io. An event is a timestamped piece of typed data.</p>
<p>Here&#39;s an example of an event:</p>
<pre><code class="lang-json">{
  &quot;streamId&quot;: &quot;pulseOximeterApp&quot;,
  &quot;type&quot;: &quot;frequency/bpm&quot;,
  &quot;content&quot;: 90,
  &quot;time&quot;: 1528446260.693,
  &quot;tags&quot;: [],
  &quot;created&quot;: 1528446260.693,
  &quot;createdBy&quot;: &quot;cji5os3u11ntt0b40tg0xhfea&quot;,
  &quot;modified&quot;: 1528446260.693,
  &quot;modifiedBy&quot;: &quot;cji5os3u11ntt0b40tg0xhfea&quot;,
  &quot;id&quot;: &quot;cji5pfumt1nu90b40chlpetyp&quot;
}
</code></pre>
<p><a href="http://api.pryv.com/concepts/#events">Events</a> either have a type from the list of <a href="http://api.pryv.com/event-types/#directory">standard event types</a> or they have an application specific type. For more details, see the <a href="http://api.pryv.com/reference/#event">events API reference</a>.</p>
<h3 id="streams">Streams</h3>
<p>Streams are the main way of encoding context for events. Every event occurs in one stream. Streams follow a hierarchical structure. They can have sub-streams and usually match either user-specific, app-specific or organizational levels (e.g. life journal, work projects) or encode data sources (e.g. apps and/or devices).</p>
<p>Here an example of a stream with sub-streams (children):</p>
<pre><code class="lang-json">{
  &quot;name&quot;: &quot;Heart&quot;,
  &quot;parentId&quot;: null,
  &quot;created&quot;: 1528445539.785,
  &quot;createdBy&quot;: &quot;cji5os3u11ntt0b40tg0xhfea&quot;,
  &quot;modified&quot;: 1528445581.592,
  &quot;modifiedBy&quot;: &quot;cjhagb5up1b950b40xsbeh5yj&quot;,
  &quot;clientData&quot;: {
    &quot;pryv-browser:bgColor&quot;: &quot;#e81034&quot;
  },
  &quot;id&quot;: &quot;heart&quot;,
  &quot;children&quot;: [
    {
      &quot;name&quot;: &quot;Heart Rate&quot;,
      &quot;parentId&quot;: &quot;heart&quot;,
      &quot;created&quot;: 1528445684.508,
      &quot;createdBy&quot;: &quot;cji5os3u11ntt0b40tg0xhfea&quot;,
      &quot;modified&quot;: 1528445684.508,
      &quot;modifiedBy&quot;: &quot;cji5os3u11ntt0b40tg0xhfea&quot;,
      &quot;id&quot;: &quot;heartRate&quot;,
      &quot;children&quot;: [
        {
          &quot;name&quot;: &quot;Pulse Oximeter App&quot;,
          &quot;parentId&quot;: &quot;heartRate&quot;,
          &quot;created&quot;: 1528445704.807,
          &quot;createdBy&quot;: &quot;cji5os3u11ntt0b40tg0xhfea&quot;,
          &quot;modified&quot;: 1528445704.807,
          &quot;modifiedBy&quot;: &quot;cji5os3u11ntt0b40tg0xhfea&quot;,
          &quot;id&quot;: &quot;pulseOximeterApp&quot;,
          &quot;children&quot;: []
        }
      ]
    }
  ]
}
</code></pre>
<p>Imagine an athlete who uses four applications to store data on Pryv.io. All four applications store their data in a single account:</p>
<ul>
<li><strong>Nutrition Mobile App</strong>: Tracks the consumption of various types of food (&#39;calories ingested&#39;).</li>
<li><strong>Smartwatch A</strong>: Monitors performance during the training (&#39;calories burned&#39;, &#39;pulse rate&#39;).</li>
<li><strong>Smartwatch B</strong>: Linked to the same application but only used to monitor the &#39;calories burned&#39; outside of training.</li>
<li><strong>Pulse Oximeter</strong>: Used at home to check the health of the heart (&#39;pulse rate&#39;, &#39;blood oxygenation / SpO2&#39;)</li>
</ul>
<p>Here is a list of data generated by the applications and their corresponding Pryv types :</p>
<table>
<thead>
<tr>
<th>Data</th>
<th style="text-align:left">Type</th>
</tr>
</thead>
<tbody>
<tr>
<td>Heart rate</td>
<td style="text-align:left"><code>frequency/bpm</code></td>
</tr>
<tr>
<td>Blood oxygenation</td>
<td style="text-align:left"><code>oxygen-rate/spo2</code></td>
</tr>
<tr>
<td>Nutrition</td>
<td style="text-align:left"><code>energy/calories</code></td>
</tr>
<tr>
<td>Physical activity</td>
<td style="text-align:left"><code>energy/calories</code></td>
</tr>
</tbody>
</table>
<p>Given this situation, we would recommend a streams structure similar to the following:</p>
<p><img src="/assets/images/getting-started/example_streams.png" alt="Example Streams Structure"></p>
<p>This stream structure has multiple benefits:</p>
<ul>
<li>Provides enough context to the data and thus avoids ambiguities:<ul>
<li>between food consumption (&#39;calories ingested&#39;) and physical activity (&#39;calories burned&#39;)</li>
<li>between consumption of different food (&#39;foodA&#39;, &#39;foodB&#39;)</li>
</ul>
</li>
<li>Allows interoperability in the case of multiple devices that:<ul>
<li>measure the same type of data through different apps (&#39;heartRate from &#39;pulseOximeterApp&#39; and &#39;smartwatchA&#39;)</li>
<li>use the same app but measure different parameters (&#39;smartwatchA&#39; : &#39;heartRate&#39; and &#39;calories burned&#39;, &#39;smartwatchB&#39; : only &#39;calories burned&#39;)</li>
</ul>
</li>
</ul>
<h1 id="authorize-your-application">Authorize your application</h1>
<p>Continuing with our previous example we would like the pulse oximeter application to be able to provision our Pryv.me account with streams and events.</p>
<p>For this purpose the application first needs to request access to the Pryv.io account. We present below two methods to generate a new access for our application, which materializes in the form of an app token.</p>
<p>For more information about Pryv.io accesses <a href="#access-management">see below</a>.</p>
<h2 id="use-pryv-io-access-token-generator">Use Pryv.io Access Token Generator</h2>
<p>The easiest way to generate an app access token is to use the Pryv Access Token Generation page.</p>
<ol>
<li>Go to <a href="http://pryv.github.io/app-web-access">the Pryv Access Token Generator: http://pryv.github.io/app-web-access</a></li>
<li><p>Set up the required parameters</p>
<ol>
<li>Enter the Application ID (&#39;demopryv-access&#39;)</li>
<li><p>Setup the streams you want to grant access to in the permissions box
<img src="/assets/images/getting-started/permissions_box.png" alt="Permissions Box"></p>
<pre><code class="lang-json">[
  {
    &quot;streamId&quot;: &quot;heart&quot;,
    &quot;level&quot;: &quot;manage&quot;,
    &quot;defaultName&quot;: &quot;Heart&quot;
  }
]
</code></pre>
</li>
<li><p>Click on &#39;<strong>Request Access</strong>&#39; button</p>
</li>
</ol>
</li>
<li><p>Now click on &#39;<strong>Sign in</strong>&#39; button <img src="/assets/images/getting-started/sign_in_button.png" alt="sign_in_button"> - A new tab will open</p>
</li>
<li>Sign in with your Pryv account
<img src="/assets/images/getting-started/sign_in.png" alt="Sign In Dialog">
A popup will open to inform you about the access you are about to grant.</li>
<li><p>Click on &#39;<strong>Accept</strong>&#39; button</p>
<p>By accepting you consent that the &#39;demopryv-access&#39; application can access the stream &#39;heart&#39; with a &#39;manage&#39; access-level. Since this stream doesn&#39;t exist yet, it will be automatically created and carry the name we provided in the &#39;defaultName&#39; parameter above.</p>
<p>For now, you just have to understand that we are generating a token that gives enough permissions to interact with our Pryv.io account in the scope of our example. You will learn more about accesses in <a href="#access-management">Access Management</a>.</p>
<p><img src="/assets/images/getting-started/accept_button.png" alt="Accept Button"></p>
</li>
<li><p><strong>Your access token has been generated.</strong>
<img src="/assets/images/getting-started/access_token.png" alt="Access Token"></p>
</li>
</ol>
<h2 id="use-your-own-implementation">Use your own implementation</h2>
<p>Instead of using the token generator page, it is also possible to implement the authorization process in code and obtain an access token by following the steps below.</p>
<ol>
<li>Send an access request with a <code>POST</code> call to <code>https://access.${domain}/access</code>:</li>
</ol>
<pre><code class="lang-bash">curl -X POST https://reg.pryv.me/access -H &#39;Content-Type: application/json&#39; \
  -d &#39;{
  &quot;requestingAppId&quot;: &quot;demopryv-access&quot;,
  &quot;requestedPermissions&quot;: [
    {
      &quot;streamId&quot;: &quot;heart&quot;,
      &quot;level&quot;: &quot;manage&quot;,
      &quot;defaultName&quot;: &quot;Heart&quot;
    }
  ],
  &quot;languageCode&quot;: &quot;fr&quot;,
  &quot;returnURL&quot;: false
}&#39;
</code></pre>
<p>The server should respond with something similar to this:</p>
<pre><code class="lang-json">{
  &quot;status&quot;: &quot;NEED_SIGNIN&quot;,
  &quot;code&quot;: 201,
  &quot;key&quot;: &quot;Rp3NBpMBnkCOuuAo&quot;,
  &quot;requestingAppId&quot;: &quot;demopryv-access&quot;,
  &quot;requestedPermissions&quot;: [
    {
      &quot;streamId&quot;: &quot;heart&quot;,
      &quot;level&quot;: &quot;manage&quot;,
      &quot;defaultName&quot;: &quot;Heart&quot;
    }
  ],
  &quot;url&quot;: &quot;https://sw.pryv.me/access/access.html?lang=fr&amp;key=Rp3NBpMBnkCOuuAo&amp;requestingAppId=demopryv-access&amp;returnURL=false&amp;domain=pryv.io&amp;registerURL=https%3A%2F%2Freg.pryv.me%3A443&amp;requestedPermissions=%5B%7B%22streamId%22%3A%22heart%22%2C%22level%22%3A%22manage%22%2C%22defaultName%22%3A%22Heart%22%7D%5D&quot;,
  &quot;poll&quot;: &quot;https://reg.pryv.me:443/access/Rp3NBpMBnkCOuuAo&quot;,
  &quot;returnURL&quot;: false,
  &quot;poll_rate_ms&quot;: 1000
}
</code></pre>
<ol>
<li>Get the url parameter from the previous response and copy it into your web browser.</li>
</ol>
<pre><code class="lang-raw">https://sw.pryv.me/access/access.html?lang=fr&amp;key=Rp3NBpMBnkCOuuAo&amp;requestingAppId=demopryv-access&amp;returnURL=false&amp;domain=pryv.io&amp;registerURL=https%3A%2F%2Freg.pryv.me%3A443&amp;requestedPermissions=%5B%7B%22streamId%22%3A%22heart%22%2C%22level%22%3A%22manage%22%2C%22defaultName%22%3A%22Heart%22%7D%5D
</code></pre>
<ol>
<li><p>Sign in with your Pryv account:</p>
<p>A popup will open to inform you about the access are about to grant.</p>
</li>
<li><p>Click on &#39;<strong>Accept</strong>&#39; button</p>
</li>
<li>Retrieve the poll url from the previous response.</li>
</ol>
<pre><code class="lang-json">&quot;poll&quot;: &quot;https://reg.pryv.me:443/access/Rp3NBpMBnkCOuuAo&quot;
</code></pre>
<ol>
<li>Poll the access token with <code>GET</code> calls to the polling url:</li>
</ol>
<pre><code class="lang-bash">curl -i GET https://reg.pryv.me:443/access/Rp3NBpMBnkCOuuAo
</code></pre>
<p>Once the access is generated, you should get a response with status <em>Accepted</em> and containing the token :</p>
<pre><code class="lang-json">{
  &quot;status&quot;: &quot;ACCEPTED&quot;,
  &quot;username&quot;: &quot;demopryv&quot;,
  &quot;token&quot;: &quot;cjhj7i2821eq60b40dzcdx6gt&quot;,
  &quot;code&quot;: 200
}
</code></pre>
<p>This token represents the access your application has to a users account; it only expires when the user retracts his consent. You should store this token permanently and securely in your application.</p>
<h1 id="create-read-update-delete">Create, Read, Update, Delete</h1>
<p>Now that we&#39;ve generated an application token, we can use it against Pryv.io API to manipulate data of the Pryv.me account, still based on the example of our athlete.</p>
<h2 id="create-operations">Create Operations</h2>
<h3 id="streams">Streams</h3>
<p>Let&#39;s setup the context for the Pulse Oximeter measures by attaching child streams to the &#39;heart&#39; root stream.</p>
<p>We perform a &#39;POST&#39; call to the streams route, providing the &#39;id&#39; and &#39;name&#39; of the stream to create and a &#39;parentId&#39;, the id of the parent stream.</p>
<p>First, we create the &#39;heartRate&#39; stream :</p>
<pre><code class="lang-bash">curl -X POST \
  -H &quot;Content-Type: application/json&quot; \
  -H &quot;Authorization: ${token}&quot; \
  -d &#39;{
      &quot;id&quot;:&quot;heartRate&quot;,
      &quot;name&quot;:&quot;Heart Rate&quot;,
      &quot;parentId&quot;:&quot;heart&quot;
    }&#39; \
  &#39;https://${username}.${domain}/streams&#39;
</code></pre>
<p>Do the same for the &#39;pulseOximeterApp&#39; stream:</p>
<pre><code class="lang-bash">curl -X POST \
  -H &quot;Content-Type: application/json&quot; \
  -H &quot;Authorization: ${token}&quot; \
  -d &#39;{
      &quot;id&quot;:&quot;pulseOximeterApp&quot;,
      &quot;name&quot;:&quot;Pulse Oximeter App&quot;,
      &quot;parentId&quot;:&quot;heartRate&quot;
    }&#39; \
    &#39;https://${username}.${domain}/streams&#39;
</code></pre>
<h3 id="events">Events</h3>
<p>Once the streams have been created, we can collect the Pulse Oximeter measures as events.</p>
<p>Create an event of type &#39;frequency/bpm&#39; with a pulse rate (integer) as content in the Stream &#39;pulseOximeterApp&#39;.</p>
<pre><code class="lang-bash">curl -X POST \
    -H &quot;Content-Type: application/json&quot; \
    -H &quot;Authorization: ${token}&quot; \
  -d &#39;{
        &quot;streamId&quot;: &quot;pulseOximeterApp&quot;,
        &quot;type&quot;: &quot;frequency/bpm&quot;,
        &quot;content&quot;: 90
    }&#39; \
    &#39;https://${username}.${domain}/events&#39;
</code></pre>
<h2 id="read-operations">Read Operations</h2>
<h3 id="streams">Streams</h3>
<p>Use a &#39;GET&#39; call to retrieve the heart stream and its childrens.</p>
<pre><code class="lang-bash">curl -i -H &quot;Authorization: ${token}&quot; \
    https://${username}.${domain}/streams
</code></pre>
<p>Response:</p>
<pre><code class="lang-json">{
  &quot;streams&quot;: [
    {
      &quot;name&quot;: &quot;Heart&quot;,
      &quot;created&quot;: 1528445539.785,
      &quot;createdBy&quot;: &quot;cji5os3u11ntt0b40tg0xhfea&quot;,
      &quot;modified&quot;: 1528445581.592,
      &quot;modifiedBy&quot;: &quot;cjhagb5up1b950b40xsbeh5yj&quot;,
      &quot;clientData&quot;: {
        &quot;pryv-browser:bgColor&quot;: &quot;#e81034&quot;
      },
      &quot;id&quot;: &quot;heart&quot;,
      &quot;children&quot;: [
        {
          &quot;name&quot;: &quot;Heart Rate&quot;,
          &quot;parentId&quot;: &quot;heart&quot;,
          &quot;created&quot;: 1528445684.508,
          &quot;createdBy&quot;: &quot;cji5os3u11ntt0b40tg0xhfea&quot;,
          &quot;modified&quot;: 1528445684.508,
          &quot;modifiedBy&quot;: &quot;cji5os3u11ntt0b40tg0xhfea&quot;,
          &quot;id&quot;: &quot;heartRate&quot;,
          &quot;children&quot;: [
            {
              &quot;name&quot;: &quot;Pulse Oximeter App&quot;,
              &quot;parentId&quot;: &quot;heartRate&quot;,
              &quot;created&quot;: 1528445704.807,
              &quot;createdBy&quot;: &quot;cji5os3u11ntt0b40tg0xhfea&quot;,
              &quot;modified&quot;: 1528815172.551,
              &quot;modifiedBy&quot;: &quot;cji5os3u11ntt0b40tg0xhfea&quot;,
              &quot;id&quot;: &quot;pulseOximeterApp&quot;,
              &quot;children&quot;: []
            }
          ]
        }
      ]
    }
  ],
  &quot;meta&quot;: {
    &quot;apiVersion&quot;: &quot;1.2.18&quot;,
    &quot;serverTime&quot;: 1528815903.187
  }
}
</code></pre>
<h3 id="events">Events</h3>
<p>Similarly, retrieve all the Pulse Oximeter events.</p>
<pre><code class="lang-bash">curl     -H &quot;Authorization: ${token}&quot; \
    -i https://${username}.${domain}/events
</code></pre>
<p>Response :</p>
<pre><code class="lang-json">{
  &quot;events&quot;: [
    {
      &quot;streamId&quot;: &quot;pulseOximeterApp&quot;,
      &quot;type&quot;: &quot;frequency/bpm&quot;,
      &quot;content&quot;: 90,
      &quot;time&quot;: 1528447710.816,
      &quot;tags&quot;: [],
      &quot;created&quot;: 1528447710.816,
      &quot;createdBy&quot;: &quot;cji5os3u11ntt0b40tg0xhfea&quot;,
      &quot;modified&quot;: 1528447710.816,
      &quot;modifiedBy&quot;: &quot;cji5os3u11ntt0b40tg0xhfea&quot;,
      &quot;id&quot;: &quot;cji5qaxk01nui0b40ec370p94&quot;
    }
  ],
  &quot;meta&quot;: {
    &quot;apiVersion&quot;: &quot;1.2.18&quot;,
    &quot;serverTime&quot;: 1528467864.397
  }
}
</code></pre>
<h2 id="update-operations">Update Operations</h2>
<h3 id="events">Events</h3>
<p>Imagine we want to modify a pulse rate measure from the stream &#39;pulseOximeterApp&#39;:</p>
<p>First, retrieve the id of one event to update from the previous responses of our read operations.</p>
<pre><code class="lang-bash">${event_id} = cji5qaxk01nui0b40ec370p94
</code></pre>
<p>Then, use a &#39;PUT&#39; call to update the event with a new value.</p>
<pre><code class="lang-bash">curl -X PUT \
  -H &quot;Authorization: ${token}&quot; \
  -H &quot;Content-Type: application/json&quot; \
  -d &#39;{
        &quot;content&quot;: 80
    }&#39; \
    &#39;https://${username}.${domain}/events/${event_id}&#39;
</code></pre>
<h3 id="streams">Streams</h3>
<p>Similarly, if we want to update the stream &#39;pulseOximeterApp&#39; by changing its name, we first retrieve the id of the stream we want to update.</p>
<pre><code class="lang-bash">${streamId} = pulseOximeterApp
</code></pre>
<p>Then, use a <code>PUT</code> call to update the name <code>Pulse Oximeter App</code> to <code>Pulse Oximeter Application</code>.</p>
<pre><code class="lang-bash">curl -X PUT \
  -H &quot;Authorization: ${token}&quot; \
  -H &quot;Content-Type: application/json&quot; \
  -d &#39;{
        &quot;name&quot;: &quot;Pulse Oximeter Application&quot;
    }&#39; \
    &#39;https://${username}.${domain}/streams/${streamId}&#39;
</code></pre>
<h2 id="delete-operations">Delete Operations</h2>
<p>The delete operation has two phases:</p>
<ul>
<li>Trash - Event/Stream disappears, but can be restored.</li>
<li>Delete - Event/Stream disappears forever.</li>
</ul>
<p>When deleting an event or a stream, it is first flagged as trashed and irreversibly deleted only when repeating the delete operation a second time.</p>
<h3 id="events">Events</h3>
<p>For example, if we want to delete our Pulse Rate event, we use a &#39;DELETE&#39; call to trash it first and a second same call to delete it completely.</p>
<p>First we retrieve the id of the event to delete.</p>
<pre><code class="lang-bash">${event_id} = cji5qaxk01nui0b40ec370p94
</code></pre>
<p>Then we trash the event (trashed=true):</p>
<pre><code class="lang-bash">curl -X DELETE \
  -H &quot;Authorization: ${token}&quot; \
  &#39;https://${username}.${domain}/events/${event_id}&#39;
</code></pre>
<p>Response:</p>
<pre><code class="lang-json">{
  &quot;event&quot;: {
    &quot;streamId&quot;: &quot;pulseOximeterApp&quot;,
    &quot;type&quot;: &quot;frequency/bpm&quot;,
    &quot;content&quot;: 105,
    &quot;time&quot;: 1528878365.385,
    &quot;tags&quot;: [],
    &quot;created&quot;: 1528878365.385,
    &quot;createdBy&quot;: &quot;cji5os3u11ntt0b40tg0xhfea&quot;,
    &quot;modified&quot;: 1528895740.264,
    &quot;modifiedBy&quot;: &quot;cjicv106i1q580b40678kjb17&quot;,
    &quot;trashed&quot;: true,
    &quot;id&quot;: &quot;cjicupcqx1q530b40oao5ob02&quot;
  },
  &quot;meta&quot;: {
    &quot;apiVersion&quot;: &quot;1.2.18&quot;,
    &quot;serverTime&quot;: 1528895740.267
  }
}
</code></pre>
<p>Finally, we delete the event completely. The API returns a list of deletion ids.</p>
<pre><code class="lang-bash">curl -X DELETE \
  -H &quot;Authorization: ${token}&quot; \
  &#39;https://${username}.${domain}/events/${event_id}&#39;
</code></pre>
<p>Response:</p>
<pre><code class="lang-json">{
  &quot;eventDeletion&quot;: {
    &quot;id&quot;: &quot;cji5qaxk01nui0b40ec370p94&quot;
  },
  &quot;meta&quot;: {
    &quot;apiVersion&quot;: &quot;1.2.18&quot;,
    &quot;serverTime&quot;: 1528817673.092
  }
}
</code></pre>
<h3 id="streams">Streams</h3>
<p>Now, we will delete the stream &#39;pulseOximeterApp&#39;. The procedure looks like deleting an event:</p>
<pre><code class="lang-bash">${stream_id} = pulseOximeterApp
</code></pre>
<p>We repeat the following command two times, one for trashing the stream and another for deleting it :</p>
<pre><code class="lang-bash">curl -X DELETE \
  -H &quot;Authorization: ${token}&quot; \
  &#39;https://${username}.${domain}/streams/${stream_id}&#39;
</code></pre>
<p>When trying to delete the stream, you may encounter the following error message:</p>
<pre><code class="lang-json">{
  &quot;error&quot;: {
    &quot;id&quot;: &quot;invalid-parameters-format&quot;,
    &quot;message&quot;: &quot;There are events referring to the deleted items and the `mergeEventsWithParent` parameter is missing.&quot;
  },
  &quot;meta&quot;: {
    &quot;apiVersion&quot;: &quot;1.2.18&quot;,
    &quot;serverTime&quot;: 1528890640.148
  }
}
</code></pre>
<p>This means that the stream you are trying to delete still contains some events and Pryv.io needs to know what to do with them. You can add the &#39;mergeEventsWithParent&#39; boolean as query parameter of your delete call. Set it to <em>true</em> if you want to merge the events into the parent stream or to <em>false</em> if you want to delete them as well.</p>
<p>Here is the command for deleting the stream and merging the events in the parent stream:</p>
<pre><code class="lang-bash">curl -X DELETE \
  -H &quot;Authorization: ${token}&quot; \
  &#39;https://${username}.${domain}/streams/${streamId}?mergeEventsWithParent=true&#39;
</code></pre>
<p>Response:</p>
<pre><code class="lang-json">{
  &quot;streamDeletion&quot;: {
    &quot;id&quot;: &quot;pulseOximeterApp&quot;
  },
  &quot;meta&quot;: {
    &quot;apiVersion&quot;: &quot;1.2.18&quot;,
    &quot;serverTime&quot;: 1528890935.505
  }
}
</code></pre>
<h1 id="access-management">Access Management</h1>
<p>In our previous examples, we used an app token corresponding to a new access we generated at the end of the <a href="#authorize-your-application">Authorization flow</a>.</p>
<p>Each access is defined by a &#39;name&#39;, a &#39;type&#39; and a set of &#39;permissions&#39;.</p>
<p>Pryv.io distinguishes between these access types:</p>
<ul>
<li><em>Shared</em>: used for person-to-person sharing. They grant access to a specific set of data and/or with limited permission levels, depending on the sharing user&#39;s choice. You will not encounter this access type in your applications.</li>
<li><em>App</em>: used by applications which don&#39;t need full, unrestricted access to the user&#39;s data. They grant access to a specific set of data and/or with limited permission levels (e.g. read-only), according to the app&#39;s needs. This is the type of access we used for our Pulse Oximeter application.</li>
<li><em>Personal</em>: used by applications that need to access to the entirety of the user&#39;s data and/or manage account settings.</li>
</ul>
<p>Each permission specifies a &#39;streamId&#39;, the id of the stream to which we want to give access, and an access &#39;level&#39;, which can be one of the following:</p>
<ul>
<li><code>&#39;read&#39;</code>: Enable users to view the stream and its contents (sub-streams and events).</li>
<li><code>&#39;contribute&#39;</code>: Enable users to contribute to one or multiple events of the stream. Cannot create, update, delete and move streams.</li>
<li><code>&#39;manage&#39;</code>: Enable users to fully control the stream. Can create, update, delete and move the stream.</li>
</ul>
<p>Finally, note that an existing access can be used to create other accesses, but only if the new access has lower permissions (Shared &lt; App &lt; Personal and Read &lt; Contribute &lt; Manage). Also, an access can create other accesses only in the same scope, namely with permissions on the same streams and their childrens.</p>
<h1 id="what-next-">What Next?</h1>
<p>This concludes our first tour of Pryv.io and some basic things you can do with it. Where to go from here?</p>
<ul>
<li>Our <a href="/external-resources/">external resources</a> page presents some third party and unsupported libraries and sample applications.</li>
<li>The <a href="/reference/">API Reference</a> explains all calls you can make to Pryv.io and their parameters.</li>
<li>To obtain your own Pryv.io installation, please get in contact with our <a href="mailto:sales@pryv.com">Sales Team</a>.</li>
</ul>
</div><nav id="toc"></nav></div><footer id="page-footer"><nav class="navbar navbar-default"><div class="container-fluid"><div id="footer-nav"><ul class="nav navbar-nav"><li><a href="mailto:developers@pryv.com">Send a message</a></li><li><a href="https://github.com/pryv">GitHub</a></li><li><a href="https://pryv.com">pryv.com</a></li></ul></div></div></nav></footer><script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script><script src="/assets/bootstrap.min.js"></script><script src="/assets/js/toc.min.js"></script><!-- TOC generation--><script>jQuery(document).ready(function($) {
  // Header is about 51 pixels. This equals to 'header + fuzz', fuzz was
  // determined experimentally.
  var offset = 100;

  // Display TOC on the left side of the page.
  $('#toc').toc({
    selector: '#main h1:not(.page-title),#main h2,#main h3',
    ulClass: 'nav'
  });

  // Synchronise scroll/click motion with TOC display.
  $(document).ready(function() {
    // NOTE This is done at onLoad since we need to wait for all CSS
    // to appear.
    $('body').scrollspy({
      target: '#toc',
      offset: offset
    });
  });
});
</script><!-- Code blocks highlighting--><script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();
</script><!-- Google Analytics--><script>var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-36589447-2']);
_gaq.push(['_trackPageview']);
(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
</script><!-- Sales-Wings--><script type="text/javascript" id="SW-fd71dffa-76e8-479e-a37b-6e915b97b023"></script><script>!function(){function a(){var a=document.createElement("script");
a.type="text/javascript",a.async=1,a.src="//go.saleswingsapp.com/assets/javascripts/sw/fd71dffa-76e8-479e-a37b-6e915b97b023";
var b=document.getElementById("SW-fd71dffa-76e8-479e-a37b-6e915b97b023");
b.parentNode.insertBefore(a,b)}window.attachEvent?window.attachEvent("onload",a):window.addEventListener("load",a,0)}();</script></body></html>