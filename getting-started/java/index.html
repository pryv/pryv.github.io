<!DOCTYPE html><html lang="en" class="no-js"><head><meta charset="UTF-8"><meta name="description" content="TODO"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><title>Getting started: Java | Pryv API</title><link rel="icon" href="/assets/images/favicon-black.ico" type="image/x-icon"><link rel="apple-touch-icon" sizes="120x120" href="/assets/images/apple-touch-icon-120x120-black.png"><link rel="apple-touch-icon" sizes="152x152" href="/assets/images/apple-touch-icon-152x152-black.png"><link rel="apple-touch-icon" sizes="180x180" href="/assets/images/apple-touch-icon-180x180-black.png"><!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
  <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]--><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:400,300,500,700,400italic|Roboto+Condensed:400,300,700"><link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/docco.min.css"><link rel="stylesheet" type="text/css" href="/assets/fonts/ss-gizmo.min.css"><link rel="stylesheet" type="text/css" href="/assets/style.css"></head><body class="java with-toc"><header id="page-header"><nav role="navigation" class="navbar navbar-default navbar-fixed-top"><div class="container-fluid"><div class="navbar-header"><a href="https://pryv.com" title="Pryv home" class="navbar-brand logo pryv-home"><img src="/assets/images/icon-home.svg" alt="Pryv home" height="50"></a><a href="/" title="Developers home" class="navbar-brand logo"><img src="/assets/images/logo-256-black.png" alt="Developers home"></a><button type="button" data-toggle="collapse" data-target="#main-nav" class="navbar-toggle"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button></div><div id="main-nav" class="collapse navbar-collapse"><ul class="nav navbar-nav"><li class="dropdown"><a href="#" data-toggle="dropdown" class="dropdown-toggle">Guides <b class="caret"></b></a><ul class="dropdown-menu"><!--+menuItem('getting-started', 'Getting started (soon)', {disabled: true})--><li><a href="/getting-started/javascript/">Getting started: Javascript</a></li><li class="active"><a href="/getting-started/java/">Getting started: Java</a></li><li><a href="/concepts/">API concepts</a></li><!--+menuItem('data-modeling', 'Data modeling') â€”> into "Concepts"??--></ul></li><li class="dropdown"><a href="#" data-toggle="dropdown" class="dropdown-toggle">Reference <b class="caret"></b></a><ul class="dropdown-menu"><li><a href="/reference/">API reference</a></li><li><a href="/change-log/">API change log</a></li><li><a href="/event-types/">Event types</a></li><!--+menuItem('standardStructure')--></ul></li><li class="dropdown"><a href="#" data-toggle="dropdown" class="dropdown-toggle">Code <b class="caret"></b></a><ul class="dropdown-menu"><li><a href="/code-libraries/">Code libraries</a></li><li><a href="/apps-and-services/">Example apps</a></li></ul></li><!--lia(href='#') Blog--></ul><div class="navbar-right"><p class="navbar-text version"><a href="/change-log/" title="View change log">API version: <strong>1.2.11</strong></a></p></div></div></div></nav></header><div id="main-wrapper" class="container container-narrow"><div id="main"><h1 class="page-title">Getting started: Java</h1><p>A few initial pointers to get going with <a href="https://github.com/pryv/lib-java">our Java library</a>.<br>
<a href="http://github.com/pryv/dev-site/issues">Feedback and suggestions welcome</a>.</p>
<h3 id="examples">Examples</h3>
<ul>
<li><p><a href="https://github.com/pryv/app-java-examples/blob/master/BasicExample/src/main/java/BasicExample.java">Java Basic example: authenticate &amp; retrieve data</a><br></p>
</li>
<li><p><a href="https://github.com/pryv/app-java-examples/tree/master/JavaFxApp">Java App example: JavaFX app to view user data</a><br></p>
</li>
<li><p><a href="https://github.com/pryv/app-java-examples/tree/master/BackupApp">Java Backup app: backup one&#39;s Pryv data locally to CSV format</a><br></p>
</li>
<li><p><a href="https://github.com/pryv/app-android-example">Android App example: authenticate, create note Events and retrieve them, with integration guide</a><br></p>
</li>
</ul>
<h3 id="install-the-library">Install the library</h3>
<p>In order to import the library in your project, please follow <a href="https://github.com/pryv/lib-java/blob/master/README.md#import">these instructions</a>.</p>
<h3 id="authorize-your-app">Authorize your app</h3>
<p>First choose an app identifier (REQUESTING_APP_ID, min. length 6 chars), then in your client code:</p>
<pre><code class="lang-java">// Here we request full permissions on a custom stream;
// in practice, scope and permission level will vary depending on your needs
Permission permission = new Permission(&quot;example-app-id&quot;, Permission.Level.manage, &quot;Example App&quot;);
List&lt;Permission&gt; permissions = new ArrayList&lt;Permission&gt;();
permissions.add(permission);

AuthView view = new AuthView() {
    public void onAuthSuccess(String username, String token) {
      // provides username and valid token
      ...
    }

    public void onAuthError(String message) {
      // display error message
      ...
    }

    public void onAuthRefused(int reasonId, String message, String detail) {
        // display authentication refused message
        ...
    }

    public void displayLoginView(String loginURL) {
      // generate WebView to load URL to enter credentials
      ...
    }
};

AuthController authenticator = new AuthControllerImpl(REQUESTING_APP_ID, permissions, language, returnURL, view);
authenticator.signIn();
</code></pre>
<p>See also: <a href="/reference/#authorizing-your-app">app authorization in the API reference</a></p>
<h3 id="setup-connection">Setup connection</h3>
<pre><code class="lang-java">Connection connection = new Connection(userID, accessToken, domain, true, new DBinitCallback());

// Define the scope of the cached data
Filter scope = new Filter();
scope.addStream(myTrackedStream); // Omit this to cache all Pryv data (including data from other apps)
connection.setupCacheScope(scope);
</code></pre>
<h3 id="manage-events">Manage events</h3>
<h4 id="retrieve">Retrieve</h4>
<pre><code class="lang-java">Filter filter = new Filter(Double from, Double to, Set&lt;Stream&gt; streams, Set&lt;String&gt; tags,
    Set&lt;String&gt; types, Boolean running, Boolean sortAscending, Integer skip, Integer limit,
    State state, Double modifiedSince, String parentId, Boolean includeDeletions, Boolean includeDeletionsSince);

connection.events.get(filter, new GetEventsCallback() {
    @Override
    public void cacheCallback(List&lt;Event&gt; events, Map&lt;String, Double&gt; eventDeletions) {
        // do something            
    }

    @Override
    public void onCacheError(String errorMessage) {
        // do something
    }

    @Override
    public void apiCallback(List&lt;Event&gt; events, Map&lt;String, Double&gt; eventDeletions, Double serverTime) {
        // do something
    }

    @Override
    public void onApiError(String errorMessage, Double serverTime) {
        // do something
    }
});
</code></pre>
<h4 id="create">Create</h4>
<pre><code class="lang-java">Event newEvent = new Event()
newEvent.setStreamId(&quot;diary&quot;);
newEvent.setType(&quot;note/txt&quot;);
newEvent.setContent(&quot;I track, therefore I am.&quot;);
connection.events.create(newEvent, new EventsCallback() {
    @Override
    public void onApiSuccess(String successMessage, Event event, String stoppedId, Double serverTime) {
        // do something            
    }

    @Override
    public void onApiError(String errorMessage, Double serverTime) {
        // do something
    }

    @Override
    public void onCacheSuccess(String successMessage, Event event) {
        // do something
    }

    @Override
    public void onCacheError(String errorMessage) {
        // do something
    }
});
</code></pre>
<h4 id="update">Update</h4>
<pre><code class="lang-java">event.setContent = &quot;Updated content.&quot;;
connection.events.update(event, new EventsCallback() {
    @Override
    public void onApiSuccess(String successMessage, Event event, String stoppedId, Double serverTime) {
        // do something            
    }

    @Override
    public void onApiError(String errorMessage, Double serverTime) {
        // do something
    }

    @Override
    public void onCacheSuccess(String successMessage, Event event) {
        // do something
    }

    @Override
    public void onCacheError(String errorMessage) {
        // do something
    }
});
</code></pre>
<h4 id="delete">Delete</h4>
<pre><code class="lang-java">connection.events.delete(event, new EventsCallback() {
    @Override
    public void onApiSuccess(String successMessage, Event event, String stoppedId, Double serverTime) {
        // do something            
    }

    @Override
    public void onApiError(String errorMessage, Double serverTime) {
        // do something
    }

    @Override
    public void onCacheSuccess(String successMessage, Event event) {
        // do something
    }

    @Override
    public void onCacheError(String errorMessage) {
        // do something
    }
});
</code></pre>
<h3 id="manage-streams">Manage Streams</h3>
<h4 id="retrieve">Retrieve</h4>
<pre><code class="lang-java">Filter filter = new Filter(Double from, Double to, Set&lt;Stream&gt; streams, Set&lt;String&gt; tags,
    Set&lt;String&gt; types, Boolean running, Boolean sortAscending, Integer skip, Integer limit,
    State state, Double modifiedSince, String parentId, Boolean includeDeletions, Boolean includeDeletionsSince);

connection.streams.get(filter, new GetStreamsCallback() {
    @Override
    public void cacheCallback(Map&lt;String, Stream&gt; streams, Map&lt;String, Double&gt; streamDeletions) {
        // do something            
    }

    @Override
    public void onCacheError(String errorMessage) {
        // do something
    }

    @Override
    public void apiCallback(Map&lt;String, Stream&gt; streams, Map&lt;String, Double&gt; streamDeletions, Double serverTime) {
        // do something
    }

    @Override
    public void onApiError(String errorMessage, Double serverTime) {
        // do something
    }
});
</code></pre>
<h4 id="create">Create</h4>
<pre><code class="lang-java">Stream newStream = new Stream();
newStream.setId(&quot;heartRate&quot;);
newStream.setName(&quot;Heart rate&quot;);
connection.streams.create(newStream, new StreamsCallback() {
    @Override
    public void onApiSuccess(String successMessage, Stream stream, Double serverTime) {
        // do something
    }

    @Override
    public void onApiError(String errorMessage, Double serverTime) {
        // do something
    }

    @Override
    public void onCacheSuccess(String successMessage, Stream stream) {
        // do something
    }

    @Override
    public void onCacheError(String errorMessage) {
        // do something
    }
});
</code></pre>
<h4 id="update">Update</h4>
<pre><code class="lang-java">stream.setParentId(&quot;health&quot;);
connection.streams.update(stream, new StreamsCallback() {
    @Override
    public void onApiSuccess(String successMessage, Stream stream, Double serverTime) {
        // do something
    }

    @Override
    public void onApiError(String errorMessage, Double serverTime) {
        // do something
    }

    @Override
    public void onCacheSuccess(String successMessage, Stream stream) {
        // do something
    }

    @Override
    public void onCacheError(String errorMessage) {
        // do something
    }
});
</code></pre>
<h4 id="delete">Delete</h4>
<pre><code class="lang-java">connection.streams.delete(stream, new StreamsCallback() {
    @Override
    public void onApiSuccess(String successMessage, Stream stream, Double serverTime) {
        // do something
    }

    @Override
    public void onApiError(String errorMessage, Double serverTime) {
        // do something
    }

    @Override
    public void onCacheSuccess(String successMessage, Stream stream) {
        // do something
    }

    @Override
    public void onCacheError(String errorMessage) {
        // do something
    }
});
</code></pre>
<h3 id="manage-accesses">Manage accesses</h3>
<h4 id="retrieve">Retrieve</h4>
<pre><code class="lang-java">connection.accesses.get(new GetCallback&lt;Access&gt;() {
  @Override
  public void onSuccess(String successMessage, List&lt;Access&gt; accesses, Double serverTime) {
    // do something
  }

  @Override
  public void onError(String errorMessage, Double serverTime) {
    // do something
  }
});
</code></pre>
<h4 id="create">Create</h4>
<pre><code class="lang-java">Access newAccess = new Access();
newAccess.setName(&quot;forMyDoctor&quot;);
newAccess.addPermission(new Permission(&quot;heartRate&quot;, Permission.Level.read, null));
connection.accesses.create(newAccess, new CreateCallback&lt;Access&gt;() {
  @Override
  public void onSuccess(String successMessage, Access access, Double serverTime) {
    // do something
  }

  @Override
  public void onError(String errorMessage, Double serverTime) {
    // do something
  }
});
</code></pre>
<h4 id="update">Update</h4>
<pre><code class="lang-java">access.setName(&quot;forMyFamily&quot;);
connection.accesses.update(access.getId(), access ,new UpdateCallback&lt;Access&gt;() {
  @Override
  public void onSuccess(String successMessage, Access access, Double serverTime) {
    // do something
  }

  @Override
  public void onError(String errorMessage, Double serverTime) {
    // do something
  }
});
</code></pre>
<h4 id="delete">Delete</h4>
<pre><code class="lang-java">connection.accesses.delete(access.getId(), new DeleteCallback&lt;Access&gt;() {
  @Override
  public void onSuccess(String successMessage, String id, Double serverTime) {
    // do something
  }

  @Override
  public void onError(String errorMessage, Double serverTime) {
    // do something
  }
});
</code></pre>
<h3 id="batch-call">Batch call</h3>
<p>Coming soon!</p>
<h3 id="further-resources">Further resources</h3>
<ul>
<li><a href="/reference/">API reference</a></li>
</ul>
</div><nav id="toc"></nav></div><footer id="page-footer"><nav class="navbar navbar-default"><div class="container-fluid"><div id="footer-nav"><ul class="nav navbar-nav"><li><a href="mailto:developers@pryv.com">Send a message</a></li><li><a href="https://github.com/pryv">GitHub</a></li><li><a href="https://pryv.com">pryv.com</a></li></ul></div></div></nav></footer><script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script><script src="/assets/bootstrap.min.js"></script><script src="/assets/js/toc.min.js"></script><!-- TOC generation--><script>jQuery(document).ready(function($) {
  var offset = 50;

  $('#toc').toc({
    selector: '#main h1:not(.page-title),#main h2,#main h3',
    ulClass: 'nav'
  });

  $('body').scrollspy({
    target: '#toc',
    offset: offset
  });

  // fix offset when navigating
  $('#toc li a, a.toc-anchor').click(function (e) {
    e.preventDefault();
    var target = $(this).attr('href');
    window.location.hash = target;
    $(target)[0].scrollIntoView();
    if ($(window).scrollTop() + $(window).height() !== $(document).height()) {
      // only adjust when not at bottom
      scrollBy(0, -offset + 1);
    }
  });
});
</script><!-- Code blocks highlighting--><script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();
</script><!-- Google Analytics--><script>var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-36589447-2']);
_gaq.push(['_trackPageview']);
(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
</script><!-- Sales-Wings--><script type="text/javascript" id="SW-fd71dffa-76e8-479e-a37b-6e915b97b023"></script><script>!function(){function a(){var a=document.createElement("script");
a.type="text/javascript",a.async=1,a.src="//go.saleswingsapp.com/assets/javascripts/sw/fd71dffa-76e8-479e-a37b-6e915b97b023";
var b=document.getElementById("SW-fd71dffa-76e8-479e-a37b-6e915b97b023");
b.parentNode.insertBefore(a,b)}window.attachEvent?window.attachEvent("onload",a):window.addEventListener("load",a,0)}();</script></body></html>