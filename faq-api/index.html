<!DOCTYPE html><html lang="en" class="no-js"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="description" property="og:description" content="Pryv API reference and resources for developers"><meta name="author" content="Pryv SA"><meta property="og:type" content="website"><meta name="image" property="og:image" content="/assets/images/logo-256.png"><meta name="viewport" content="width=device-width, initial-scale=1"><title>FAQ - API | Pryv API</title><link rel="icon" href="/assets/images/favicon-black.ico" type="image/x-icon"><link rel="apple-touch-icon" sizes="120x120" href="/assets/images/apple-touch-icon-120x120-black.png"><link rel="apple-touch-icon" sizes="152x152" href="/assets/images/apple-touch-icon-152x152-black.png"><link rel="apple-touch-icon" sizes="180x180" href="/assets/images/apple-touch-icon-180x180-black.png"><!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
  <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]--><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:400,300,500,700,400italic|Roboto+Condensed:400,300,700"><link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/docco.min.css"><link rel="stylesheet" type="text/css" href="/assets/fonts/ss-gizmo.min.css"><link rel="stylesheet" type="text/css" href="/assets/style.css"></head><body class="faq with-toc"><header id="page-header"><nav role="navigation" class="navbar navbar-default navbar-fixed-top"><div class="container-fluid"><div class="navbar-header"><a href="https://pryv.com" title="Pryv home" class="navbar-brand logo pryv-home"><img src="/assets/images/icon-home.svg" alt="Pryv home" height="50"></a><a href="/" title="Developers home" class="navbar-brand logo"><img src="/assets/images/logo-256-black.png" alt="Developers home"></a><button type="button" data-toggle="collapse" data-target="#main-nav" class="navbar-toggle"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button></div><div id="main-nav" class="collapse navbar-collapse"><ul class="nav navbar-nav"><li class="dropdown"><a href="#" data-toggle="dropdown" class="dropdown-toggle">Guides <b class="caret"></b></a><ul class="dropdown-menu"><li><a href="/getting-started/">Getting started</a></li><li><a href="/external-resources/">Apps &amp; Libs</a></li><li><a href="/concepts/">API concepts</a></li><li><a href="/guides/data-modelling/">Data modelling</a></li><li><a href="/guides/webhooks/">Webhooks</a></li><li><a href="/guides/custom-auth/">Custom auth</a></li><li><a href="/guides/app-guidelines/">App guidelines</a></li></ul></li><li class="dropdown"><a href="#" data-toggle="dropdown" class="dropdown-toggle">Reference <b class="caret"></b></a><ul class="dropdown-menu"><li><a href="/reference/">API reference</a></li><li><a href="/reference-system/">API System reference</a></li><li><a href="/event-types/">Event types</a></li><li><a href="/open-api/">Open API (Postman)</a></li><li><a href="/change-log/">API change log</a></li></ul></li><li class="dropdown"><a href="#" data-toggle="dropdown" class="dropdown-toggle">FAQ <b class="caret"></b></a><ul class="dropdown-menu"><li><a href="/faq-api/">API</a></li><li><a href="/faq-infra/">Infrastructure</a></li></ul></li><li><a href="https://support.pryv.com/hc/en-us/community/topics">Community</a></li><li><a href="https://github.com/pryv/open-pryv.io">Open Pryv.io</a></li><li><a href="/roadmap/">Roadmap</a></li></ul><div class="navbar-right"><p class="navbar-text version"><a href="/change-log/" title="View change log">API version: <strong>1.5.22</strong></a></p></div></div></div></nav></header><div id="main-wrapper" class="container container-narrow"><div id="main"><h1 class="page-title">FAQ - API</h1><p>In this FAQ we answer common questions related to Pryv.io API. You can contact us directly if your question is not listed here.</p>
<h2 id="table-of-contents">Table of contents</h2>
<ul>
<li>1 <a href="#personal-data">Personal data</a></li>
<li>2 <a href="#streams">Streams</a></li>
<li>3 <a href="#event-types">Event types</a></li>
<li>4 <a href="#other-data-structures">Other data structures</a></li>
<li>5 <a href="#api-methods">API methods</a></li>
<li>6 <a href="#user-creation">User creation</a></li>
<li>7 <a href="#authentication">Authentication</a></li>
<li>8 <a href="#account-granularity">Account granularity</a></li>
<li>9 <a href="#access-sharing">Access sharing</a></li>
<li>10 <a href="#notification-system">Notification system</a></li>
<li>11 <a href="#do-you-have-a-test-setup-where-i-could-experiment-with-your-api-">Test setup</a></li>
</ul>
<h2 id="personal-data">Personal data</h2>
<h3 id="we-are-using-medical-devices-to-collect-data-from-our-users-is-technical-data-from-these-devices-also-part-of-personal-data-of-the-user-">We are using medical devices to collect data from our users. Is technical data from these devices also part of “personal” data of the user ?</h3>
<p>For data to be considered as “personal” data, it has to observe the following conditions  :</p>
<ul>
<li>It is describing the person’s life. For example, MR Safe data shows that the individual was in an MRI at a particular moment, which is descriptive of his life;</li>
<li>It enables the person’s identification. For example, technical time-stamped data from a rare surgery can enable anyone to identify the person who has undergone the surgery, as only a few persons around the world have undergone the same surgery at the same timing.</li>
</ul>
<h3 id="where-should-i-store-technical-data-of-these-devices-">Where should I store technical data of these devices ?</h3>
<p>If the technical data from these devices is considered as “personal” data of the user, he has the right to access it anytime. It should therefore be stored in his account.
If you prefer storing this data in a separate account, keep in mind that the user can ask for a copy of it anytime if it is “personal” data.</p>
<h2 id="streams">Streams</h2>
<h3 id="is-the-stream-structure-declared-globally-or-at-the-level-of-each-user-account-">Is the stream structure declared globally or at the level of each user account ?</h3>
<p>The stream structure is independent from one user account to another. It is declared and managed by apps: the stream structure can be created by the app when the user logs in for the first time for example.</p>
<p>We advise you to maintain a list of streams as explained in our <a href="/guides/data-modelling/#implementation">data modelling guide</a>.</p>
<h3 id="is-there-a-limit-in-the-number-of-child-streams-that-a-stream-can-have-">Is there a limit in the number of child streams that a stream can have ?</h3>
<p>There is no limit to the number of substreams of a stream. As a general rule it is preferable to multiply the number of streams and to minimize the creation of different event types.</p>
<p>For example, if you want to enter data measurements for different types of allergens, it is preferable to create one substream per allergen type (<code>Cereal crops</code>, <code>Pollen</code>, <code>Hazelnut Tree</code>, etc) with a single event type (<code>density/kg-m3</code>) instead of multiplying event types (<code>density/pollen</code>, <code>density/cereal</code>, etc) under a single stream <code>Allergens</code>.</p>
<h2 id="event-types">Event Types</h2>
<h3 id="how-can-i-define-custom-event-types-">How can I define custom event types?</h3>
<p>You can define any custom type as long as it follows <a href="/event-types/#basics">this structure</a>. See <a href="/customer-resources/pryv.io-setup/#customize-event-types-validation">How to customize event types</a> for more information.</p>
<h3 id="can-i-limit-the-number-of-event-types-to-be-used-in-a-stream-">Can I limit the number of event types to be used in a stream ?</h3>
<p>There is no limitation in terms of event types per stream. A stream acts like a “folder” in which you can put any type of information.
If you wish to give a Pryv access token to an external service and to control its use of the access, you can give it a “limited” access type - <code>create-only</code> - which allows it to <strong>only</strong> create events in the streams (more information on the different permission levels <a href="/reference/#access">here</a>).</p>
<h3 id="are-my-events-content-validated-">Are my events content validated?</h3>
<p>The default set of validated types is defined in <a href="/event-types/">https://api.pryv.com/event-types</a>, they are validated upon creation and modification. To validate custom types, it is possible to provide a different source of event types, following the <a href="/event-types/#format-specification">JSON schema format</a>.</p>
<h3 id="what-kind-of-validation-do-you-perform-">What kind of validation do you perform?</h3>
<p>Depending on the <code>type</code> field of the event, the content of the fields <code>content</code> and <code>attachments</code> are validated.</p>
<h2 id="other-data-structures">Other data structures</h2>
<h3 id="what-information-should-be-contained-in-the-profile-section-of-the-user-">What information should be contained in the “Profile” section of the user ?</h3>
<p>Profile sets are plain key-value structure in which you can store any user-level settings (e.g. credentials).<br>This structure is likely to be deprecated soon, and with the exception of the “Public profile set”, we recommend our customers to use dedicated streams to store account information of their users. </p>
<h3 id="what-are-followed-slices-that-can-be-stored-in-pryv-accounts-">What are “Followed slices” that can be stored in Pryv accounts ?</h3>
<p>Followed slices are meant to store another user&#39;s access tokens in one&#39;s account. For practical reasons, we generally advise you to store the access tokens in a dedicated stream.</p>
<p>For example, a doctor can store all the tokens to patients’ accounts for which he has been granted the access in a <a href="/reference/#followed-slice">Followed Slice</a>.  </p>
<p>However this data structure has a limitation: it is only accessible with a “personal token” which requires the user to login with his password every time.</p>
<h2 id="api-methods">API methods</h2>
<h3 id="is-it-possible-to-have-a-list-of-existing-core-servers-">Is it possible to have a list of existing core servers ?</h3>
<p>Yes, the register service has 2 methods:</p>
<ul>
<li>Get hostings: <a href="/reference-system/#get-hostings">GET hostings</a>.</li>
<li>Get cores: <a href="/reference-system/#get-core-servers">GET core servers</a>.</li>
</ul>
<h3 id="what-is-the-exact-structure-of-the-create-attachment-call-">What is the exact structure of the create attachment call?</h3>
<p>If you are having issues creating the package for the create attachment call with the client/framework/library you are using, you can print the details of the call by using cURL with the <code>-v</code> verbose option.</p>
<h2 id="user-creation">User creation</h2>
<h3 id="is-there-an-api-call-for-user-creation-">Is there an API call for user creation?</h3>
<p>The API call for user creation is defined in <a href="/reference-system/#account-creation">API system reference</a>, please contact us for more information.</p>
<h3 id="can-we-restrict-access-to-user-creation-">Can we restrict access to user creation?</h3>
<p>The user creation API call uses a token and by not making this token public, it is possible to make account creation available to select users.</p>
<h3 id="what-if-i-don-t-want-to-provide-an-email-registration-phase-">What if I don&#39;t want to provide an email registration phase?</h3>
<p>Account must have an email-like string attached to them. You can make up an email address for you internal app usage, depending on your requirements. Please note that you will not be able to retrieve a lost password using the <a href="/reference/#request-password-reset">reset password request</a>.</p>
<p>We suggest using the following format as a placeholder: <code>${USERNAME}@${DOMAIN}</code>.</p>
<h3 id="how-can-i-programmatically-create-user-accounts-">How can I programmatically create user accounts?</h3>
<p>It is possible to create users with an API call, without having to fill the fields manually.</p>
<h3 id="is-there-a-search-tool-to-retrieve-a-username-from-the-user-information-name-surname-etc-">Is there a search tool to retrieve a username from the user information (name, surname, etc) ?</h3>
<p>It is possible to retrieve a username from an email address: <a href="/reference-system/#get-username-from-email">Get username from email</a>.
This is useful for email authentication or if the user has lost his password.</p>
<h2 id="authentication">Authentication</h2>
<h3 id="how-does-the-authentication-flow-work-">How does the authentication flow work ?</h3>
<p>You can check how to authenticate your app <a href="/reference/#authenticate-your-app">here</a>.</p>
<p>We deliver our Pryv.io platform with &quot;default&quot; web apps for registration, login, password-reset and auth request. The code is available <a href="https://github.com/pryv/app-web-auth3">here</a>. </p>
<p>We advise our customers to customize it, and we provide some <a href="/customer-resources/pryv.io-setup/#customize-authentication-registration-and-reset-password-apps">guidelines</a> for the customization.</p>
<h3 id="i-m-getting-the-invalid-credentials-error-on-the-auth-login-call-although-my-fields-are-correct-">I&#39;m getting the &quot;invalid credentials&quot; error on the auth.login call although my fields are correct.</h3>
<pre><code class="lang-json">{
    &quot;error&quot;: {
        &quot;id&quot;: &quot;invalid-credentials&quot;,
        &quot;message&quot;: &quot;The app id (&quot;appId&quot;) is either missing or not trusted.&quot;
    },
    &quot;meta&quot;: {
        &quot;apiVersion&quot;: &quot;1.2.18&quot;,
        &quot;serverTime&quot;: 1531830525.911
    }
}
</code></pre>
<p>API methods such as <code>auth.login</code> marked as <span onclick="location='/reference/#trusted-apps-verification'" class="label trusted-only">Trusted apps only</span> on <a href="/reference/">the API reference</a> require to have the <code>Origin</code> or <code>Referer</code> headers matching the domain or one defined in the configuration. This field is not changeable in browser as it is a security measure. We use this to prevent phishing attacks that would allow attackers to impersonate Pryv.io connected apps to steal user credentials.</p>
<p>In order for this to work, the web app must be running on a domain allowed by the configuration. By default, this contains: <code>https://*.${DOMAIN}*, https://*.rec.la*, https://*.pryv.github.io*</code>.</p>
<p>In mobile apps, the <code>Origin</code> and <code>Referer</code> headers can be set manually in the HTTP request. For example: <code>Origin: &quot;auth.${DOMAIN}&quot;</code>.</p>
<p>In addition to the host, it is possible to allow this call for a defined set of <code>appId</code>.</p>
<h3 id="what-authentication-should-i-use-in-a-mobile-app-">What authentication should I use in a mobile app?</h3>
<p>You should implement the <a href="/reference/#auth-request">auth request</a>, displaying the provided <code>url</code> in a web view. Once you obtain the token, save it into the local app storage so you will not have to authenticate each time.</p>
<h3 id="is-it-possible-to-add-an-additional-layer-of-authentication-">Is it possible to add an additional layer of authentication?</h3>
<p>The Pryv.io login supports multi-factor authentication (MFA). See its API reference methods <a href="/reference/#multi-factor-authentication">here</a>.</p>
<h2 id="account-granularity">Account granularity</h2>
<h3 id="should-i-store-the-data-of-more-than-one-person-in-a-single-pryv-io-account-">Should I store the data of more than one person in a single Pryv.io account?</h3>
<p>For compliance reasons, Pryv.io accounts are per-user. Storing multiple people data under the same account bypasses the authentication step which is the technical equivalent of consent.</p>
<h2 id="access-sharing">Access sharing</h2>
<h3 id="how-does-a-person-give-access-to-his-data-">How does a person give access to his data?</h3>
<p>Using a token previously obtained, you can generate a new one using the <a href="/reference/#create-access">accesses.create</a> API call to generate a new token. The permission set associated to this token must be a subset of the permissions set of the access token used for the call.</p>
<h3 id="where-should-i-store-the-access-token-to-a-user-s-account-">Where should I store the access token to a user&#39;s account ?</h3>
<p>Once you have obtained an access token to a user&#39;s account, for example for a doctor to access particular streams of his patients&#39; data, we advise you to store it in a dedicated stream.</p>
<p>You can find an example in the <a href="/guides/data-modelling/#consent-aggregation">data modelling guide</a> of how to do consent aggregation with Pryv.io and store access tokens to user accounts. </p>
<h3 id="how-can-i-request-access-to-someone-s-data-">How can I request access to someone&#39;s data ?</h3>
<p>In order to request an access to someone&#39;s data, one must implement a page that makes an <a href="/reference/#auth-request">auth request</a> when loaded. The <code>url</code> in the response must be displayed to the user. The web page will ask him for his credentials as well as display the list of requested permissions. Upon approval, the app will obtain a valid token in the polling url response.</p>
<p>A simple web app demonstrating this implementation can be seen <a href="https://github.com/pryv/app-web-access">here</a>.</p>
<h3 id="what-are-the-different-access-types-">What are the different access types ?</h3>
<p>There are three main access types - <strong>personal</strong>, <strong>app</strong> and <strong>shared</strong> - that are defined and explained <a href="/concepts/#accesses">here</a>.</p>
<h3 id="how-long-should-i-keep-an-access-token-valid-">How long should I keep an access token valid ?</h3>
<p>Accesses are not systematically set with an expiry date. The optional field <code>expireAfter</code> of an <a href="/reference/#access">Access token</a> allows you to set an expiry date for the token if you want to.</p>
<p>If you are concerned with the security of the access, we provide you with monitoring tools to detect fraudulent use of tokens <a href="/reference/#audit">here</a>.</p>
<h3 id="how-can-i-access-pryv-io-resources-from-another-app-">How can I access Pryv.io resources from another app?</h3>
<p>This can be done by using the auth request through a consent step or by generating a token directly through an API call using a token obtained previously.</p>
<h3 id="how-does-an-access-delegation-work-">How does an access delegation work ?</h3>
<p>It can happen that you would need an access delegation from your app users if they cannot connect on the app to authorize apps and grant access to their data for some period of time.</p>
<p>You can send an auth request to your users at their first login to grant your app access to all or specific streams (see <a href="/reference/#authenticate-your-app">here</a> for more information on the auth request).</p>
<p>This works as a delegation of access, and the “app” token will be able to generate sub-tokens of a “shared” type and give permission to data that was in its scope.</p>
<h3 id="what-level-of-permissions-do-i-need-to-create-delete-modify-streams-in-a-user-s-account-">What level of permissions do I need to create/delete/modify streams in a user’s account ?</h3>
<p>The access level “manage” on a stream gives you the permission to manipulate (read, create, modify, delete) all the substreams of this stream (see more details on the <strong>Access</strong> structure <a href="/reference/#access">here</a>).</p>
<h3 id="can-i-limit-the-number-of-apps-that-can-send-an-auth-request-to-users-">Can I limit the number of apps that can send an auth request to users ?</h3>
<p>There is currently no API secret to restrict the auth request usage.
You can contact us directly if you wish to implement a verification protocol for the requesting apps.</p>
<h3 id="how-to-distribute-accesses-over-a-user-account-between-multiple-apps-">How to distribute accesses over a user account between multiple apps ?</h3>
<p>We advise you to define all the needed accesses for third-parties from the beginning, and to ask for the user&#39;s consent at his first login on your app.</p>
<p>You can do so by sharing a document with the user listing the concerned third-parties and asking for his consent, or by implementing a web-app that displays a panel of apps/third-parties to grant access to.</p>
<p>To see an example of access structure implementation, you can check the <a href="/guides/data-modelling/">Data Modelling guide</a>.</p>
<p>You can give each third-party an “app” token with limited permissions to a particular scope of streams.</p>
<p>It is generally preferable to maximize the number of &quot;app&quot; tokens with limited set of permissions than to use a &quot;master&quot; token generating shared type of accesses to third parties, as it allows to track accesses made over data for audit capabilities. </p>
<p>Below is an example of a single app &quot;third-party-test&quot; requesting access to the particular streams &quot;Health&quot; and &quot;Personal Information&quot; with a limited set of permissions :</p>
<p><img align="center" width="200" src="/assets/images/app-access.png" ></p>
<h2 id="notification-system">Notification system</h2>
<h3 id="should-i-use-websockets-or-webhooks-to-subscribe-to-changes-">Should I use “websockets” or “webhooks” to subscribe to changes ?</h3>
<p><strong>Websockets</strong> should be used to get notified of data changes in a web application (on the frontend side).<br><strong>Webhooks</strong> are more suited to get notified of data changes in a web service (on the backend side).</p>
<p>More details on websockets and webhooks can be found <a href="/reference/#subscribe-to-changes">here</a>.</p>
<h3 id="what-type-of-information-do-webhooks-websockets-contain-">What type of information do webhooks/websockets contain ?</h3>
<p>You can have a look at the webhooks and websockets data changes payload in the <a href="/reference/#subscribe-to-changes">Subscribe to changes section</a>.</p>
<h3 id="is-the-server-notified-of-data-changes-in-all-streams-of-the-account-or-only-the-streams-for-which-permission-was-granted-in-the-provided-access-token-">Is the server notified of data changes in all streams of the account or only the streams for which permission was granted in the provided access token ?</h3>
<p>Notifications are sent as soon as there is a data change in the &quot;events&quot;, &quot;streams&quot; or &quot;accesses&quot; for the whole user account. It is therefore possible to get notified of a data change that would not be in the scope of the access token.
Notifications are likely to be scoped in the near future. </p>
<h2 id="do-you-have-a-test-setup-where-i-could-experiment-with-your-api-">Do you have a test setup where I could experiment with your API?</h2>
<p>You can try out Pryv.io using our demo platform pryv.me: <a href="https://pryv.com/pryvlab/">https://pryv.com/pryvlab/</a></p>
</div><nav id="toc"></nav></div><footer id="page-footer"><nav class="navbar navbar-default"><div class="container-fluid"><div id="footer-nav"><ul class="nav navbar-nav"><li><a href="mailto:developers@pryv.com">Send a message</a></li><li><a href="https://github.com/pryv">GitHub</a></li><li><a href="https://pryv.com">pryv.com</a></li></ul></div></div></nav></footer><script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script><script src="/assets/bootstrap.min.js"></script><script src="/assets/js/toc.min.js"></script><!-- TOC generation--><script>jQuery(document).ready(function($) {
  // Header is about 51 pixels. This equals to 'header + fuzz', fuzz was
  // determined experimentally.
  var offset = 90;

  // Display TOC on the left side of the page.
  $('#toc').toc({
    selector: '#main h1:not(.page-title),#main h2,#main h3',
    ulClass: 'nav'
  });

  // Synchronise scroll/click motion with TOC display.
  $(document).ready(function() {
    // NOTE This is done at onLoad since we need to wait for all CSS
    // to appear.
    $('body').scrollspy({
      target: '#toc',
      offset: offset
    });
    scrollBy(0, 1); // make it scroll to be sure scrollspy gets it
    
    // fix offset when navigating
    $('#toc li a, a.toc-anchor').click(function (e) {
      e.preventDefault();
      var target = $(this).attr('href');
      window.location.hash = target;
      
      $(target)[0].scrollIntoView();
      if ($(window).scrollTop() + $(window).height() !== $(document).height()) {
        //only adjust when not at bottom
        scrollBy(0, -offset + 40);
      }
      return true;
    });
  
  });
});
</script><!-- Code blocks highlighting--><script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();
</script><!-- Google Analytics--><script>var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-36589447-2']);
_gaq.push(['_trackPageview']);
(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();</script></body></html>